/*!
 * @brief Geoportal SDK
 *
 * This software is released under the licence CeCILL-B (Free BSD compatible)
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-fr.txt
 * @see http://www.cecill.info/
 *
 * copyright CeCILL-B
 * copyright IGN
 * @author IGN
 * @version 1.0.0
 * @date 2017-12-21
 *
 */
/*!
 * OpenLayers 3. See http://openlayers.org/
 * License: https://raw.githubusercontent.com/openlayers/ol3/master/LICENSE.md
 * Version: v4.0.1
 */
/*!
 * Geoportal Extension for OpenLayers 3. See https://github.com/IGNF/geoportal-extensions
 * License: https://raw.githubusercontent.com/IGNF/geoportal-extensions/master/LICENCE.md
 * Version: v0.11.0
 */
;(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define([], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory();
  } else {
    root.Gp = factory();
  }
}(this, function() {
var log4js,loggerCfg,UtilsLoggerByDefault,ol,gp,IMap,ol3OL3,Map,AHN;log4js=void 0,loggerCfg={loggers:[{root:!0,level:"all",appenders:[{type:"Console",layout:{type:"PatternLayout",pattern:"%d{yyyy-MM-dd HH:mm:ss} [%p] %c - %m%n"}}]}]},UtilsLoggerByDefault=function(t,e){return{getLogger:function(o){return t.load(e,function(t){if(t)throw t}),t.getLogger(o||"default")}}}(log4js,loggerCfg),function(t,e){"object"==typeof exports?module.exports=e():ol=function(){return"function"==typeof e?e():e}()}(0,function(){function t(t,e){var o=Qy,i=t.split("."),o=o||$y;i[0]in o||!o.execScript||o.execScript("var "+i[0]);for(var n;i.length&&(n=i.shift());)i.length||void 0===e?o=o[n]?o[n]:o[n]={}:o[n]=e}function e(t,e){return t>e?1:t<e?-1:0}function o(t,e){return 0<=t.indexOf(e)}function i(t,e,o){var i=t.length;if(t[0]<=e)return 0;if(!(e<=t[i-1]))if(0<o){for(o=1;o<i;++o)if(t[o]<e)return o-1}else if(0>o){for(o=1;o<i;++o)if(t[o]<=e)return o}else for(o=1;o<i;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return i-1}function n(t,e){var o,i=Array.isArray(e)?e:[e],n=i.length;for(o=0;o<n;o++)t[t.length]=i[o]}function r(t,e){for(var o,i=t.length>>>0,n=0;n<i;n++)if(o=t[n],e(o,n,t))return o;return null}function s(t,e){var o=t.length;if(o!==e.length)return!1;for(var i=0;i<o;i++)if(t[i]!==e[i])return!1;return!0}function a(t){var e,o=br,i=t.length,n=Array(t.length);for(e=0;e<i;e++)n[e]={index:e,value:t[e]};for(n.sort(function(t,e){return o(t.value,e.value)||t.index-e.index}),e=0;e<t.length;e++)t[e]=n[e].value}function l(t,e){var o;return t.every(function(i,n){return o=n,!e(i,n,t)})?-1:o}function p(t,o){var i=o||e;return t.every(function(e,o){if(!o)return!0;var n=i(t[o-1],e);return!(0<n||0===n)})}function h(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function c(){}function u(t){return t.ko||(t.ko=++tg)}function d(t){this.message="Assertion failed. See https://openlayers.org/en/v4.0.1/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"}function f(t,e){if(!t)throw new d(e)}function y(t,e,o,i){this.da=t,this.ba=e,this.fa=o,this.ja=i}function g(t,e,o){return t.da<=e&&e<=t.ba&&t.fa<=o&&o<=t.ja}function m(t,e){return t.da==e.da&&t.fa==e.fa&&t.ba==e.ba&&t.ja==e.ja}function v(t,e){return t.da<=e.ba&&t.ba>=e.da&&t.fa<=e.ja&&t.ja>=e.fa}function _(t,e,o){return Math.min(Math.max(t,e),o)}function b(t){return f(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function E(t,e,o,i,n,r){var s=n-o,a=r-i;if(s||a){var l=((t-o)*s+(e-i)*a)/(s*s+a*a);1<l?(o=n,i=r):0<l&&(o+=s*l,i+=a*l)}return S(t,e,o,i)}function S(t,e,o,i){return t=o-t,e=i-e,t*t+e*e}function P(t){return t*Math.PI/180}function w(t,e){var o=t%e;return 0>o*e?o+e:o}function A(t,e,o){return t+o*(e-t)}function C(t,e,o){return void 0===o&&(o=[0,0]),o[0]=t[0]+2*e,o[1]=t[1]+2*e,o}function M(t,e,o){return void 0===o&&(o=[0,0]),o[0]=t[0]*e+.5|0,o[1]=t[1]*e+.5|0,o}function x(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}function I(t){for(var e=D(),o=0,i=t.length;o<i;++o)W(e,t[o]);return e}function R(t,e,o){return o?(o[0]=t[0]-e,o[1]=t[1]-e,o[2]=t[2]+e,o[3]=t[3]+e,o):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function T(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function L(t,e,o){return e=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,t=o<t[1]?t[1]-o:t[3]<o?o-t[3]:0,e*e+t*t}function G(t,e){return N(t,e[0],e[1])}function O(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function N(t,e,o){return t[0]<=e&&e<=t[2]&&t[1]<=o&&o<=t[3]}function k(t,e){var o=t[1],i=t[2],n=t[3],r=e[0],s=e[1],a=0;return r<t[0]?a|=16:r>i&&(a|=4),s<o?a|=8:s>n&&(a|=2),a||(a=1),a}function D(){return[1/0,1/0,-1/0,-1/0]}function j(t,e,o,i,n){return n?(n[0]=t,n[1]=e,n[2]=o,n[3]=i,n):[t,e,o,i]}function F(t,e){var o=t[0],i=t[1];return j(o,i,o,i,e)}function U(t,e,o,i,n){return n=j(1/0,1/0,-1/0,-1/0,n),z(n,t,e,o,i)}function B(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function V(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function W(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function z(t,e,o,i,n){for(;o<i;o+=n){var r=t,s=e[o],a=e[o+1];r[0]=Math.min(r[0],s),r[1]=Math.min(r[1],a),r[2]=Math.max(r[2],s),r[3]=Math.max(r[3],a)}return t}function H(t,e,o){var i;return(i=e.call(o,Y(t)))||(i=e.call(o,K(t)))||(i=e.call(o,tt(t)))?i:!!(i=e.call(o,$(t)))&&i}function q(t){var e=0;return it(t)||(e=et(t)*J(t)),e}function Y(t){return[t[0],t[1]]}function K(t){return[t[2],t[1]]}function X(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Z(t,e,o,i,n){var r=e*i[0]/2;i=e*i[1]/2,e=Math.cos(o);var s=Math.sin(o);o=r*e,r*=s,e*=i;var a=i*s,l=t[0],p=t[1];t=l-o+a,i=l-o-a,s=l+o-a,o=l+o+a;var a=p-r-e,l=p-r+e,h=p+r+e,r=p+r-e;return j(Math.min(t,i,s,o),Math.min(a,l,h,r),Math.max(t,i,s,o),Math.max(a,l,h,r),n)}function J(t){return t[3]-t[1]}function Q(t,e,o){return o=o||D(),ot(t,e)&&(o[0]=t[0]>e[0]?t[0]:e[0],o[1]=t[1]>e[1]?t[1]:e[1],o[2]=t[2]<e[2]?t[2]:e[2],o[3]=t[3]<e[3]?t[3]:e[3]),o}function $(t){return[t[0],t[3]]}function tt(t){return[t[2],t[3]]}function et(t){return t[2]-t[0]}function ot(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function it(t){return t[2]<t[0]||t[3]<t[1]}function nt(t,e){var o=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=o,t[2]+=o,t[1]-=i,t[3]+=i}function rt(t,e,o){t=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]],e(t,t,2);var i=[t[0],t[2],t[4],t[6]],n=[t[1],t[3],t[5],t[7]];return e=Math.min.apply(null,i),t=Math.min.apply(null,n),i=Math.max.apply(null,i),n=Math.max.apply(null,n),j(e,t,i,n,o)}function st(t){for(var e in t)delete t[e]}function at(t){var e,o=[];for(e in t)o.push(t[e]);return o}function lt(t){for(var e in t)return!1;return!e}function pt(t){this.radius=t}function ht(t){this.nb=t.code,this.i=t.units,this.c=void 0!==t.extent?t.extent:null,this.g=void 0!==t.worldExtent?t.worldExtent:null,this.b=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.f=void 0!==t.global&&t.global,this.a=!(!this.f||!this.c),this.j=t.getPointResolution,this.l=null,this.o=t.metersPerUnit;var e=t.code,o=rg||window.proj4;"function"==typeof o&&void 0!==(e=o.defs(e))&&(void 0!==e.axis&&void 0===t.axisOrientation&&(this.b=e.axis),void 0===t.metersPerUnit&&(this.o=e.to_meter),void 0===t.units&&(this.i=e.units))}function ct(t,e,o){t=t.nb,e=e.nb,t in ag||(ag[t]={}),ag[t][e]=o}function ut(t,e){var o;return t in ag&&e in ag[t]&&(o=ag[t][e]),o}function dt(t,e,o){var i=t.j;return i?e=i(e,o):"degrees"!=t.Jb()&&(i=wt(t,Et("EPSG:4326")),e=[o[0]-e/2,o[1],o[0]+e/2,o[1],o[0],o[1]-e/2,o[0],o[1]+e/2],e=i(e,e,2),e=(ig.b(e.slice(0,2),e.slice(2,4))+ig.b(e.slice(4,6),e.slice(6,8)))/2,void 0!==(t=t.sc())&&(e/=t)),e}function ft(t){mt(t),t.forEach(function(e){t.forEach(function(t){e!==t&&ct(e,t,Ct)})})}function yt(){var t=Kg,e=Jn,o=Qn;Qg.forEach(function(i){t.forEach(function(t){ct(i,t,e),ct(t,i,o)})})}function gt(t){sg[t.nb]=t,ct(t,t,Ct)}function mt(t){var e=[];t.forEach(function(t){e.push(gt(t))})}function vt(t){return t?"string"==typeof t?Et(t):t:Et("EPSG:3857")}function _t(t,e,o,i){t=Et(t),e=Et(e),ct(t,e,bt(o)),ct(e,t,bt(i))}function bt(t){return function(e,o,i){var n=e.length;i=void 0!==i?i:2,o=void 0!==o?o:Array(n);var r,s;for(s=0;s<n;s+=i)for(r=t([e[s],e[s+1]]),o[s]=r[0],o[s+1]=r[1],r=i-1;2<=r;--r)o[s+r]=e[s+r];return o}}function Et(t){var e=null;if(t instanceof ht)e=t;else if("string"==typeof t){var e=sg[t]||null,o=rg||window.proj4;e||"function"!=typeof o||void 0===o.defs(t)||(e=new ht({code:t}),gt(e))}return e}function St(t,e){if(t===e)return!0;var o=t.Jb()===e.Jb();return t.nb===e.nb?o:wt(t,e)===Ct&&o}function Pt(t,e){return wt(Et(t),Et(e))}function wt(t,e){var o=t.nb,i=e.nb,n=ut(o,i);if(!n){var r=rg||window.proj4;if("function"==typeof r){var s=r.defs(o),a=r.defs(i);void 0!==s&&void 0!==a&&(s===a?ft([e,t]):(n=r(i,o),_t(e,t,n.forward,n.inverse)),n=ut(o,i))}}return n||(n=At),n}function At(t,e){if(void 0!==e&&t!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}return t}function Ct(t,e){var o;if(void 0!==e){o=0;for(var i=t.length;o<i;++o)e[o]=t[o];o=e}else o=t.slice();return o}function Mt(t,e,o){return Pt(e,o)(t,void 0,t.length)}function xt(t,e,o){return e=Pt(e,o),rt(t,e)}function It(t,e,o,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=o,i):[t,e,o]}function Rt(t){var e,o,i=t[0],n=Array(i),r=1<<i-1;for(e=0;e<i;++e)o=48,t[1]&r&&(o+=1),t[2]&r&&(o+=2),n[e]=String.fromCharCode(o),r>>=1;return n.join("")}function Tt(t){this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.b=t.resolutions,f(p(this.b,function(t,e){return e-t}),17),this.maxZoom=this.b.length-1,this.f=void 0!==t.origin?t.origin:null,this.c=null,void 0!==t.origins&&(this.c=t.origins,f(this.c.length==this.b.length,20));var e=t.extent;void 0===e||this.f||this.c||(this.f=$(e)),f(!this.f&&this.c||this.f&&!this.c,18),this.i=null,void 0!==t.tileSizes&&(this.i=t.tileSizes,f(this.i.length==this.b.length,19)),this.g=void 0!==t.tileSize?t.tileSize:this.i?null:256,f(!this.g&&this.i||this.g&&!this.i,22),this.v=void 0!==e?e:null,this.a=null,this.l=[0,0],void 0!==t.sizes?this.a=t.sizes.map(function(t){return new y(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):e&&jt(this,e)}function Lt(t,e,o,i,n){for(n=t.Ta(e,n),e=e[0]-1;e>=t.minZoom;){if(o.call(null,e,Nt(t,n,e,i)))return!0;--e}return!1}function Gt(t,e,o,i){return e[0]<t.maxZoom?(i=t.Ta(e,i),Nt(t,i,e[0]+1,o)):null}function Ot(t,e,o,i){Dt(t,e[0],e[1],o,!1,lg);var n=lg[1],r=lg[2];return Dt(t,e[2],e[3],o,!0,lg),t=lg[1],e=lg[2],void 0!==i?(i.da=n,i.ba=t,i.fa=r,i.ja=e):i=new y(n,t,r,e),i}function Nt(t,e,o,i){return Ot(t,e,t.La(o),i)}function kt(t,e){var o=t.Qc(e[0]),i=t.La(e[0]),n=x(t.fb(e[0]),t.l);return[o[0]+(e[1]+.5)*n[0]*i,o[1]+(e[2]+.5)*n[1]*i]}function Dt(t,e,o,i,n,r){var s=t.Mc(i),a=i/t.La(s),l=t.Qc(s);return t=x(t.fb(s),t.l),e=a*Math.floor((e-l[0])/i+(n?.5:0))/t[0],o=a*Math.floor((o-l[1])/i+(n?0:.5))/t[1],n?(e=Math.ceil(e)-1,o=Math.ceil(o)-1):(e=Math.floor(e),o=Math.floor(o)),It(s,e,o,r)}function jt(t,e){for(var o=t.b.length,i=Array(o),n=t.minZoom;n<o;++n)i[n]=Nt(t,e,n);t.a=i}function Ft(t){var e=t.l;if(!e){var e=Vt(t),o=Bt(e,void 0,void 0),e=new Tt({extent:e,origin:$(e),resolutions:o,tileSize:void 0});t.l=e}return e}function Ut(t){var e={};return og(e,t||{}),void 0===e.extent&&(e.extent=Et("EPSG:3857").D()),e.resolutions=Bt(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new Tt(e)}function Bt(t,e,o){e=void 0!==e?e:42;var i=J(t);for(t=et(t),o=x(void 0!==o?o:256),o=Math.max(t/o[0],i/o[1]),e+=1,i=Array(e),t=0;t<e;++t)i[t]=o/Math.pow(2,t);return i}function Vt(t){t=Et(t);var e=t.D();return e||(t=180*ng.degrees/t.sc(),e=j(-t,-t,t,t)),e}function Wt(t){this.b=t.html,this.a=t.tileRanges?t.tileRanges:null}function zt(t){return function(e){if(e)return[_(e[0],t[0],t[2]),_(e[1],t[1],t[3])]}}function Ht(t){return t}function qt(t){function e(e){var o=t.listener,i=t.Vg||t.target;return t.Xg&&te(t),o.call(i,e)}return t.Wg=e}function Yt(t,e,o,i){for(var n,r=0,s=t.length;r<s;++r)if(n=t[r],n.listener===e&&n.Vg===o)return i&&(n.deleteIndex=r),n}function Kt(t,e){var o=t.eb;return o?o[e]:void 0}function Xt(t){var e=t.eb;return e||(e=t.eb={}),e}function Zt(t,e){var o=Kt(t,e);if(o){for(var i=0,n=o.length;i<n;++i)t.removeEventListener(e,o[i].Wg),st(o[i]);o.length=0,(o=t.eb)&&(delete o[e],Object.keys(o).length||delete t.eb)}}function Jt(t,e,o,i,n){var r=Xt(t),s=r[e];return s||(s=r[e]=[]),(r=Yt(s,o,i,!1))?n||(r.Xg=!1):(r={Vg:i,Xg:!!n,listener:o,target:t,type:e},t.addEventListener(e,qt(r)),s.push(r)),r}function Qt(t,e,o,i){return Jt(t,e,o,i,!0)}function $t(t,e,o,i){(t=Kt(t,e))&&(o=Yt(t,o,i,!0))&&te(o)}function te(t){if(t&&t.target){t.target.removeEventListener(t.type,t.Wg);var e=Kt(t.target,t.type);if(e){var o="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==o&&e.splice(o,1),e.length||Zt(t.target,t.type)}st(t)}}function ee(t){var e,o=Xt(t);for(e in o)Zt(t,e)}function oe(){}function ie(t){t.Zb||(t.Zb=!0,t.ra())}function ne(t){this.type=t,this.target=null}function re(t){t.stopPropagation()}function se(){this.$a={},this.ta={},this.qa={}}function ae(t,e){return e?e in t.qa:0<Object.keys(t.qa).length}function le(){se.call(this),this.f=0}function pe(t){le.call(this),u(this),this.I={},void 0!==t&&this.H(t)}function he(t){return pg.hasOwnProperty(t)?pg[t]:pg[t]="change:"+t}function ce(t,e,o){var i;i=he(e),t.b(new ue(i,e,o)),t.b(new ue("propertychange",e,o))}function ue(t,e,o){ne.call(this,t),this.key=e,this.oldValue=o}function de(t){pe.call(this),this.a=t||[],fe(this)}function fe(t){t.set(hg,t.a.length)}function ye(t,e){ne.call(this,t),this.element=e}function ge(t){return Array.isArray(t)?t:dg(t)}function me(t){if("string"!=typeof t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var o=t[1];o!=(0|o)&&(o=o+.5|0);var i=t[2];i!=(0|i)&&(i=i+.5|0),t="rgba("+e+","+o+","+i+","+(void 0===t[3]?1:t[3])+")"}return t}function ve(t){var e=[];return e[0]=_(t[0]+.5|0,0,255),e[1]=_(t[1]+.5|0,0,255),e[2]=_(t[2]+.5|0,0,255),e[3]=_(t[3],0,1),e}function _e(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient?t:me(t)}function be(t,e,o){this.center=t,this.resolution=e,this.rotation=o}function Ee(t,e){var o=document.createElement("CANVAS");return t&&(o.width=t),e&&(o.height=e),o.getContext("2d")}function Se(t,e){var o=e.parentNode;o&&o.replaceChild(t,e)}function Pe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function we(t){pe.call(this),this.element=t.element?t.element:null,this.a=this.S=null,this.v=[],this.render=t.render?t.render:c,t.target&&this.i(t.target)}function Ae(t){t=t||{},this.R=document.createElement("UL"),this.u=document.createElement("LI"),this.R.appendChild(this.u),this.u.style.display="none",this.c=void 0===t.collapsed||t.collapsed,this.j=void 0===t.collapsible||t.collapsible,this.j||(this.c=!1);var e=void 0!==t.className?t.className:"ol-attribution",o=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.collapseLabel?t.collapseLabel:"»";"string"==typeof i?(this.A=document.createElement("span"),this.A.textContent=i):this.A=i,i=void 0!==t.label?t.label:"i","string"==typeof i?(this.C=document.createElement("span"),this.C.textContent=i):this.C=i;var n=this.j&&!this.c?this.A:this.C,i=document.createElement("button");i.setAttribute("type","button"),i.title=o,i.appendChild(n),Jt(i,"click",this.ym,this),o=document.createElement("div"),o.className=e+" ol-unselectable ol-control"+(this.c&&this.j?" ol-collapsed":"")+(this.j?"":" ol-uncollapsible"),o.appendChild(this.R),o.appendChild(i),we.call(this,{element:o,render:t.render?t.render:Ce,target:t.target}),this.G=!0,this.o={},this.l={},this.Y={}}function Ce(t){if(t=t.frameState){var e,o,i,n,r,s,a,l,p,h,c,d=t.layerStatesArray,f=og({},t.attributions),g={},m={},_=t.viewState.projection;for(o=0,e=d.length;o<e;o++)if((s=d[o].layer.la())&&(h=u(s).toString(),p=s.l))for(i=0,n=p.length;i<n;i++)if(a=p[i],!((l=u(a).toString())in f)){if(r=t.usedTiles[h]){var b=s.Ib(_);t:{c=void 0;var E,S,P=a,A=b,C=_;if(P.a){for(c in r)if(c in P.a){var M,b=r[c];for(S=0,E=P.a[c].length;S<E;++S){if(M=P.a[c][S],v(M,b)){c=!0;break t}var x=Nt(A,Vt(C),parseInt(c,10)),I=x.ba-x.da+1;if((b.da<x.da||b.ba>x.ba)&&(v(M,new y(w(b.da,I),w(b.ba,I),b.fa,b.ja))||b.ba-b.da+1>I&&v(M,x))){c=!0;break t}}}c=!1}else c=!0}}else c=!1;c?(l in g&&delete g[l],(c=a.b)in m||(m[c]=!0,f[l]=a)):g[l]=a}e=[f,g],o=e[0],e=e[1];for(var R in this.o)R in o?(this.l[R]||(this.o[R].style.display="",this.l[R]=!0),delete o[R]):R in e?(this.l[R]&&(this.o[R].style.display="none",delete this.l[R]),delete e[R]):(Pe(this.o[R]),delete this.o[R],delete this.l[R]);for(R in o)i=document.createElement("LI"),i.innerHTML=o[R].b,this.R.appendChild(i),this.o[R]=i,this.l[R]=!0;for(R in e)i=document.createElement("LI"),i.innerHTML=e[R].b,i.style.display="none",this.R.appendChild(i),this.o[R]=i;R=!lt(this.l)||!lt(t.logos),this.G!=R&&(this.element.style.display=R?"":"none",this.G=R),R&&lt(this.l)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var T;t=t.logos,R=this.Y;for(T in R)T in t||(Pe(R[T]),delete R[T]);for(var L in t)e=t[L],e instanceof HTMLElement&&(this.u.appendChild(e),R[L]=e),L in R||(T=new Image,T.src=L,""===e?o=T:(o=document.createElement("a"),o.href=e,o.appendChild(T)),this.u.appendChild(o),R[L]=o);this.u.style.display=lt(t)?"none":""}else this.G&&(this.element.style.display="none",this.G=!1)}function Me(t){t.element.classList.toggle("ol-collapsed"),t.c?Se(t.A,t.C):Se(t.C,t.A),t.c=!t.c}function xe(t){return Math.pow(t,3)}function Ie(t){return 1-xe(1-t)}function Re(t){return 3*t*t-2*t*t*t}function Te(t){return t}function Le(t){t=t||{};var e=void 0!==t.className?t.className:"ol-rotate",o=void 0!==t.label?t.label:"⇧";this.c=null,"string"==typeof o?(this.c=document.createElement("span"),this.c.className="ol-compass",this.c.textContent=o):(this.c=o,this.c.classList.add("ol-compass"));var i=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=i,o.appendChild(this.c),Jt(o,"click",Le.prototype.A,this),i=document.createElement("div"),i.className=e+" ol-unselectable ol-control",i.appendChild(o),e=t.render?t.render:Ge,this.j=t.resetNorth?t.resetNorth:void 0,we.call(this,{element:i,render:e,target:t.target}),this.o=void 0!==t.duration?t.duration:250,this.l=void 0===t.autoHide||t.autoHide,this.u=void 0,this.l&&this.element.classList.add("ol-hidden")}function Ge(t){if(t=t.frameState){if((t=t.viewState.rotation)!=this.u){var e="rotate("+t+"rad)";if(this.l){var o=this.element.classList.contains("ol-hidden");o||t?o&&t&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.c.style.msTransform=e,this.c.style.webkitTransform=e,this.c.style.transform=e}this.u=t}}function Oe(t){t=t||{};var e=void 0!==t.className?t.className:"ol-zoom",o=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInLabel?t.zoomInLabel:"+",n=void 0!==t.zoomOutLabel?t.zoomOutLabel:"−",r=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",s=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",a=document.createElement("button");a.className=e+"-in",a.setAttribute("type","button"),a.title=r,a.appendChild("string"==typeof i?document.createTextNode(i):i),Jt(a,"click",Oe.prototype.l.bind(this,o)),i=document.createElement("button"),i.className=e+"-out",i.setAttribute("type","button"),i.title=s,i.appendChild("string"==typeof n?document.createTextNode(n):n),Jt(i,"click",Oe.prototype.l.bind(this,-o)),o=document.createElement("div"),o.className=e+" ol-unselectable ol-control",o.appendChild(a),o.appendChild(i),we.call(this,{element:o,target:t.target}),this.c=void 0!==t.duration?t.duration:250}function Ne(t){t=t||{};var e=new de;return(void 0!==t.zoom?t.zoom:1)&&e.push(new Oe(t.zoomOptions)),(void 0!==t.rotate?t.rotate:1)&&e.push(new Le(t.rotateOptions)),(void 0!==t.attribution?t.attribution:1)&&e.push(new Ae(t.attributionOptions)),e}function ke(t){t=t||{},this.c=void 0!==t.className?t.className:"ol-full-screen";var e=void 0!==t.label?t.label:"⤢";this.j="string"==typeof e?document.createTextNode(e):e,e=void 0!==t.labelActive?t.labelActive:"×",this.o="string"==typeof e?document.createTextNode(e):e;var o=t.tipLabel?t.tipLabel:"Toggle full-screen",e=document.createElement("button");e.className=this.c+"-"+je(),e.setAttribute("type","button"),e.title=o,e.appendChild(this.j),Jt(e,"click",this.C,this),o=document.createElement("div"),o.className=this.c+" ol-unselectable ol-control "+(De()?"":"ol-unsupported"),o.appendChild(e),we.call(this,{element:o,target:t.target}),this.A=void 0!==t.keys&&t.keys,this.l=t.source}function De(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function je(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Fe(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}function Ue(t){t=t||{};var e=document.createElement("DIV");e.className=void 0!==t.className?t.className:"ol-mouse-position",we.call(this,{element:e,render:t.render?t.render:Be,target:t.target}),Jt(this,he(yg),this.Bm,this),t.coordinateFormat&&this.Fi(t.coordinateFormat),t.projection&&this.Mh(Et(t.projection)),this.u=void 0!==t.undefinedHTML?t.undefinedHTML:"",this.o=e.innerHTML,this.j=this.l=this.c=null}function Be(t){t=t.frameState,t?this.c!=t.viewState.projection&&(this.c=t.viewState.projection,this.l=null):this.c=null,Ve(this,this.j)}function Ve(t,e){var o=t.u;if(e&&t.c){if(!t.l){var i=t.Lh();t.l=i?wt(t.c,i):At}(i=t.a.Za(e))&&(t.l(i,i),o=(o=t.ih())?o(i):i.toString())}t.o&&o==t.o||(t.element.innerHTML=o,t.o=o)}function We(t,e,o){ne.call(this,t),this.map=e,this.frameState=void 0!==o?o:null}function ze(t,e,o,i,n){We.call(this,t,e,n),this.originalEvent=o,this.pixel=e.te(o),this.coordinate=e.Za(this.pixel),this.dragging=void 0!==i&&i}function He(t,e,o,i,n){ze.call(this,t,e,o.b,i,n),this.b=o}function qe(t,e){var o,i,n=bg.length;for(i=0;i<n;++i)try{if(o=t.getContext(bg[i],e))return o}catch(t){}return null}function Ye(t,e){this.b=t,this.i=e}function Ke(t){Ye.call(this,t,{mousedown:this.Ml,mousemove:this.Nl,mouseup:this.Ql,mouseover:this.Pl,mouseout:this.Ol}),this.a=t.f,this.f=[]}function Xe(t,e){for(var o,i=t.f,n=e.clientX,r=e.clientY,s=0,a=i.length;s<a&&(o=i[s]);s++){var l=Math.abs(r-o[1]);if(25>=Math.abs(n-o[0])&&25>=l)return!0}return!1}function Ze(t){var e=co(t,t),o=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),o()},e.pointerId=1,e.isPrimary=!0,e.pointerType="mouse",e}function Je(t){Ye.call(this,t,{MSPointerDown:this.Vl,MSPointerMove:this.Wl,MSPointerUp:this.Zl,MSPointerOut:this.Xl,MSPointerOver:this.Yl,MSPointerCancel:this.Ul,MSGotPointerCapture:this.Sl,MSLostPointerCapture:this.Tl}),this.a=t.f,this.f=["","unavailable","touch","pen","mouse"]}function Qe(t,e){var o=e;return"number"==typeof e.pointerType&&(o=co(e,e),o.pointerType=t.f[e.pointerType]),o}function $e(t){Ye.call(this,t,{pointerdown:this.xo,pointermove:this.yo,pointerup:this.Bo,pointerout:this.zo,pointerover:this.Ao,pointercancel:this.wo,gotpointercapture:this.al,lostpointercapture:this.Ll})}function to(t,e,o){ne.call(this,t),this.b=e,t=o||{},this.buttons=eo(t),this.pressure=oo(t,this.buttons),this.bubbles="bubbles"in t&&t.bubbles,this.cancelable="cancelable"in t&&t.cancelable,this.view="view"in t?t.view:null,this.detail="detail"in t?t.detail:null,this.screenX="screenX"in t?t.screenX:0,this.screenY="screenY"in t?t.screenY:0,this.clientX="clientX"in t?t.clientX:0,this.clientY="clientY"in t?t.clientY:0,this.button="button"in t?t.button:0,this.relatedTarget="relatedTarget"in t?t.relatedTarget:null,this.pointerId="pointerId"in t?t.pointerId:0,this.width="width"in t?t.width:0,this.height="height"in t?t.height:0,this.pointerType="pointerType"in t?t.pointerType:"",this.isPrimary="isPrimary"in t&&t.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}function eo(t){if(t.buttons||Dg)t=t.buttons;else switch(t.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}return t}function oo(t,e){return t.pressure?t.pressure:e?.5:0}function io(t,e){Ye.call(this,t,{touchstart:this.Dp,touchmove:this.Cp,touchend:this.Bp,touchcancel:this.Ap}),this.a=t.f,this.l=e,this.f=void 0,this.g=0,this.c=void 0}function no(t,e,o){return e=co(e,o),e.pointerId=o.identifier+2,e.bubbles=!0,e.cancelable=!0,e.detail=t.g,e.button=0,e.buttons=1,e.width=o.webkitRadiusX||o.radiusX||0,e.height=o.webkitRadiusY||o.radiusY||0,e.pressure=o.webkitForce||o.force||.5,e.isPrimary=t.f===o.identifier,e.pointerType="touch",e.clientX=o.clientX,e.clientY=o.clientY,e.screenX=o.screenX,e.screenY=o.screenY,e}function ro(t,e,o){function i(){e.preventDefault()}var n,r,s=Array.prototype.slice.call(e.changedTouches),a=s.length;for(n=0;n<a;++n)r=no(t,e,s[n]),r.preventDefault=i,o.call(t,e,r)}function so(t,e){var o=t.l.f,i=e.changedTouches[0];if(t.f===i.identifier){var n=[i.clientX,i.clientY];o.push(n),setTimeout(function(){var t=o.indexOf(n);-1<t&&o.splice(t,1)},2500)}}function ao(t){se.call(this),this.g=t,this.f={},this.i={},this.a=[],Lg?lo(this,new $e(this)):Gg?lo(this,new Je(this)):(t=new Ke(this),lo(this,t),Tg&&lo(this,new io(this,t))),t=this.a.length;for(var e,o=0;o<t;o++)e=this.a[o],po(this,Object.keys(e.i))}function lo(t,e){var o=Object.keys(e.i);o&&(o.forEach(function(t){var o=e.i[t];o&&(this.i[t]=o.bind(e))},t),t.a.push(e))}function po(t,e){e.forEach(function(t){Jt(this.g,t,this.c,this)},t)}function ho(t,e){e.forEach(function(t){$t(this.g,t,this.c,this)},t)}function co(t,e){for(var o,i={},n=0,r=jg.length;n<r;n++)o=jg[n][0],i[o]=t[o]||e[o]||jg[n][1];return i}function uo(t,e,o){e.bubbles=!1,go(t,"pointerleave",e,o)}function fo(t,e,o){t.out(e,o);var i=e.target,n=e.relatedTarget;i&&n&&i.contains(n)||uo(t,e,o)}function yo(t,e,o){e.bubbles=!0,go(t,"pointerover",e,o);var i=e.target,n=e.relatedTarget;i&&n&&i.contains(n)||(e.bubbles=!1,go(t,"pointerenter",e,o))}function go(t,e,o,i){t.b(new to(e,i,o))}function mo(t,e){t.b(new to(e.type,e,e))}function vo(t){se.call(this),this.c=t,this.l=0,this.j=!1,this.i=[],this.f=null,t=this.c.c,this.u=0,this.I={},this.g=new ao(t),this.a=null,this.o=Jt(this.g,"pointerdown",this.ul,this),this.v=Jt(this.g,"pointermove",this.$o,this)}function _o(t,e){var o=new He("click",t.c,e);t.b(o),t.l?(clearTimeout(t.l),t.l=0,o=new He("dblclick",t.c,e),t.b(o)):t.l=setTimeout(function(){this.l=0;var t=new He("singleclick",this.c,e);this.b(t)}.bind(t),250)}function bo(t,e){"pointerup"==e.type||"pointercancel"==e.type?delete t.I[e.pointerId]:"pointerdown"==e.type&&(t.I[e.pointerId]=!0),t.u=Object.keys(t.I).length}function Eo(t,e){this.o=t,this.c=e,this.b=[],this.f=[],this.a={}}function So(t){var e=t.b,o=t.f,i=e[0];return 1==e.length?(e.length=0,o.length=0):(e[0]=e.pop(),o[0]=o.pop(),Po(t,0)),e=t.c(i),delete t.a[e],i}function Po(t,e){for(var o=t.b,i=t.f,n=o.length,r=o[e],s=i[e],a=e;e<n>>1;){var l=2*e+1,p=2*e+2,l=p<n&&i[p]<i[l]?p:l;o[e]=o[l],i[e]=i[l],e=l}o[e]=r,i[e]=s,wo(t,a,e)}function wo(t,e,o){var i=t.b;t=t.f;for(var n=i[o],r=t[o];o>e;){var s=o-1>>1;if(!(t[s]>r))break;i[o]=i[s],t[o]=t[s],o=s}i[o]=n,t[o]=r}function Ao(t){var e,o,i,n=t.o,r=t.b,s=t.f,a=0,l=r.length;for(o=0;o<l;++o)e=r[o],i=n(e),1/0==i?delete t.a[t.c(e)]:(s[a]=i,r[a++]=e);for(r.length=a,s.length=a,n=(t.b.length>>1)-1;0<=n;n--)Po(t,n)}function Co(t,e){Eo.call(this,function(e){return t.apply(null,e)},function(t){return t[0].ib()}),this.v=e,this.l=0,this.g={}}function Mo(t,e,o){for(var i,n,r=0;t.l<e&&r<o&&0<t.b.length;)i=So(t)[0],n=i.ib(),0!==i.V()||n in t.g||(t.g[n]=!0,++t.l,++r,i.load())}function xo(t){return function(e,o,n){if(void 0!==e)return e=i(t,e,n),e=_(e+o,0,t.length-1),o=Math.floor(e),e!=o&&o<t.length-1?t[o]/Math.pow(t[o]/t[o+1],e-o):t[o]}}function Io(t,e,o){return function(i,n,r){if(void 0!==i)return i=Math.max(Math.floor(Math.log(e/i)/Math.log(t)+(-r/2+.5))+n,0),void 0!==o&&(i=Math.min(i,o)),e/Math.pow(t,i)}}function Ro(t){if(void 0!==t)return 0}function To(t,e){if(void 0!==t)return t+e}function Lo(t){var e=2*Math.PI/t;return function(t,o){if(void 0!==t)return t=Math.floor((t+o)/e+.5)*e}}function Go(){var t=P(5);return function(e,o){if(void 0!==e)return Math.abs(e+o)<=t?0:e+o}}function Oo(t,e){var o=void 0!==e?t.toFixed(e):""+t,i=o.indexOf("."),i=-1===i?o.length:i;return 2<i?o:Array(3-i).join("0")+o}function No(t){t=(""+t).split(".");for(var e=["1","3"],o=0;o<Math.max(t.length,e.length);o++){var i=parseInt(t[o]||"0",10),n=parseInt(e[o]||"0",10);if(i>n)return 1;if(n>i)return-1}return 0}function ko(t,e){return t[0]+=e[0],t[1]+=e[1],t}function Do(t,e){var o=t[0],i=t[1],n=e[0],r=e[1],s=n[0],n=n[1],a=r[0],r=r[1],l=a-s,p=r-n,o=l||p?(l*(o-s)+p*(i-n))/(l*l+p*p||0):0;return 0>=o||(1<=o?(s=a,n=r):(s+=o*l,n+=o*p)),[s,n]}function jo(t,e,o){t=w(t+180,360)-180;var i=Math.abs(3600*t);o=o||0;var n=Math.pow(10,o),r=Math.floor(i/3600),s=Math.floor((i-3600*r)/60),i=Math.ceil((i-3600*r-60*s)*n)/n;return 60<=i&&(i=0,s+=1),60<=s&&(s=0,r+=1),r+"° "+Oo(s)+"′ "+Oo(i,o)+"″ "+e.charAt(0>t?1:0)}function Fo(t,e,o){return t?e.replace("{x}",t[0].toFixed(o)).replace("{y}",t[1].toFixed(o)):""}function Uo(t,e){for(var o=!0,i=t.length-1;0<=i;--i)if(t[i]!=e[i]){o=!1;break}return o}function Bo(t,e){var o=Math.cos(e),i=Math.sin(e),n=t[1]*o+t[0]*i;return t[0]=t[0]*o-t[1]*i,t[1]=n,t}function Vo(t,e){t[0]*=e,t[1]*=e}function Wo(t,e){var o=t[0]-e[0],i=t[1]-e[1];return o*o+i*i}function zo(t,e){return Math.sqrt(Wo(t,e))}function Ho(t,e){return Wo(t,Do(t,e))}function qo(t,e){return Fo(t,"{x}, {y}",e)}function Yo(){return!0}function Ko(){return!1}function Xo(){pe.call(this),this.o=D(),this.v=-1,this.i={},this.j=this.g=0}function Zo(t,e,o,i,n,r){for(var s=r||[],a=0;e<o;e+=i){var l=t[e],p=t[e+1];s[a++]=n[0]*l+n[2]*p+n[4],s[a++]=n[1]*l+n[3]*p+n[5]}return r&&s.length!=a&&(s.length=a),s}function Jo(t,e,o,i,n,r){var s,a,l=r||[],p=0;for(s=0;s<e;s+=o)for(l[p++]=t[s]+i,l[p++]=t[s+1]+n,a=s+2;a<s+o;++a)l[p++]=t[a];return r&&l.length!=p&&(l.length=p),l}function Qo(){Xo.call(this),this.ka="XY",this.a=2,this.B=null}function $o(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function ti(t,e,o){t.a=$o(e),t.ka=e,t.B=o}function ei(t,e,o,i){if(e)o=$o(e);else{for(e=0;e<i;++e){if(!o.length)return t.ka="XY",void(t.a=2);o=o[0]}o=o.length;var n;2==o?n="XY":3==o?n="XYZ":4==o&&(n="XYZM"),e=n}t.ka=e,t.a=o}function oi(t,e,o,i){for(var n=0,r=t[o-i],s=t[o-i+1];e<o;e+=i)var a=t[e],l=t[e+1],n=n+(s*a-r*l),r=a,s=l;return n/2}function ii(t,e,o,i){var n,r,s=0;for(n=0,r=o.length;n<r;++n){var a=o[n],s=s+oi(t,e,a,i);e=a}return s}function ni(t,e,o,i,n,r,s){var a=t[e],l=t[e+1],p=t[o]-a,h=t[o+1]-l;if(p||h)if(1<(r=((n-a)*p+(r-l)*h)/(p*p+h*h)))e=o;else if(0<r){for(n=0;n<i;++n)s[n]=A(t[e+n],t[o+n],r);return void(s.length=i)}for(n=0;n<i;++n)s[n]=t[e+n];s.length=i}function ri(t,e,o,i,n){var r=t[e],s=t[e+1];for(e+=i;e<o;e+=i){var a=t[e],l=t[e+1],r=S(r,s,a,l);r>n&&(n=r),r=a,s=l}return n}function si(t,e,o,i,n){var r,s;for(r=0,s=o.length;r<s;++r){var a=o[r];n=ri(t,e,a,i,n),e=a}return n}function ai(t,e,o,i,n,r,s,a,l,p,h){if(e==o)return p;var c;if(!n){if((c=S(s,a,t[e],t[e+1]))<p){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,c}return p}for(var u=h||[NaN,NaN],d=e+i;d<o;)if(ni(t,d-i,d,i,s,a,u),(c=S(s,a,u[0],u[1]))<p){for(p=c,h=0;h<i;++h)l[h]=u[h];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(c)-Math.sqrt(p))/n|0,1);if(r&&(ni(t,o-i,e,i,s,a,u),(c=S(s,a,u[0],u[1]))<p)){for(p=c,h=0;h<i;++h)l[h]=u[h];l.length=i}return p}function li(t,e,o,i,n,r,s,a,l,p,h){h=h||[NaN,NaN];var c,u;for(c=0,u=o.length;c<u;++c){var d=o[c];p=ai(t,e,d,i,n,r,s,a,l,p,h),e=d}return p}function pi(t,e){var o,i,n=0;for(o=0,i=e.length;o<i;++o)t[n++]=e[o];return n}function hi(t,e,o,i){var n,r;for(n=0,r=o.length;n<r;++n){var s,a=o[n];for(s=0;s<i;++s)t[e++]=a[s]}return e}function ci(t,e,o,i,n){n=n||[];var r,s,a=0;for(r=0,s=o.length;r<s;++r)e=hi(t,e,o[r],i),n[a++]=e;return n.length=a,n}function ui(t,e,o,i,n){n=void 0!==n?n:[];for(var r=0;e<o;e+=i)n[r++]=t.slice(e,e+i);return n.length=r,n}function di(t,e,o,i,n){n=void 0!==n?n:[];var r,s,a=0;for(r=0,s=o.length;r<s;++r){var l=o[r];n[a++]=ui(t,e,l,i,n[a]),e=l}return n.length=a,n}function fi(t,e,o,i,n,r,s){var a=(o-e)/i;if(3>a){for(;e<o;e+=i)r[s++]=t[e],r[s++]=t[e+1];return s}var l=Array(a);l[0]=1,l[a-1]=1,o=[e,o-i];for(var p,h=0;0<o.length;){var c=o.pop(),u=o.pop(),d=0,f=t[u],y=t[u+1],g=t[c],m=t[c+1];for(p=u+i;p<c;p+=i){var v=E(t[p],t[p+1],f,y,g,m);v>d&&(h=p,d=v)}d>n&&(l[(h-e)/i]=1,u+i<h&&o.push(u,h),h+i<c&&o.push(h,c))}for(p=0;p<a;++p)l[p]&&(r[s++]=t[e+p*i],r[s++]=t[e+p*i+1]);return s}function yi(t,e,o,i,n,r,s,a){var l,p;for(l=0,p=o.length;l<p;++l){var h=o[l];t:{var c,u=t,d=h,f=i,y=n,g=r,m=s;if(e!=d){var v=y*Math.round(u[e]/y),_=y*Math.round(u[e+1]/y);e+=f,g[m++]=v,g[m++]=_;do{if(c=y*Math.round(u[e]/y),s=y*Math.round(u[e+1]/y),(e+=f)==d){g[m++]=c,g[m++]=s,s=m;break t}}while(c==v&&s==_);for(;e<d;){var b,E;if(b=y*Math.round(u[e]/y),
E=y*Math.round(u[e+1]/y),e+=f,b!=c||E!=s){var S=c-v,P=s-_,w=b-v,A=E-_;S*A==P*w&&(0>S&&w<S||S==w||0<S&&w>S)&&(0>P&&A<P||P==A||0<P&&A>P)||(g[m++]=c,g[m++]=s,v=c,_=s),c=b,s=E}}g[m++]=c,g[m++]=s}s=m}a.push(s),e=h}return s}function gi(t,e){Qo.call(this),this.c=this.l=-1,this.pa(t,e)}function mi(t,e,o){ti(t,e,o),t.s()}function vi(t,e){Qo.call(this),this.pa(t,e)}function _i(t,e,o,i,n){return!H(n,function(n){return!bi(t,e,o,i,n[0],n[1])})}function bi(t,e,o,i,n,r){for(var s=0,a=t[o-i],l=t[o-i+1];e<o;e+=i){var p=t[e],h=t[e+1];l<=r?h>r&&0<(p-a)*(r-l)-(n-a)*(h-l)&&s++:h<=r&&0>(p-a)*(r-l)-(n-a)*(h-l)&&s--,a=p,l=h}return!!s}function Ei(t,e,o,i,n,r){if(!o.length||!bi(t,e,o[0],i,n,r))return!1;var s;for(e=1,s=o.length;e<s;++e)if(bi(t,o[e-1],o[e],i,n,r))return!1;return!0}function Si(t,o,i,n,r,s,a){var l,p,h,c,u,d=r[s+1],f=[],y=i[0];for(h=t[y-n],u=t[y-n+1],l=o;l<y;l+=n)c=t[l],p=t[l+1],(d<=u&&p<=d||u<=d&&d<=p)&&(h=(d-u)/(p-u)*(c-h)+h,f.push(h)),h=c,u=p;for(y=NaN,u=-1/0,f.sort(e),h=f[0],l=1,p=f.length;l<p;++l){c=f[l];var g=Math.abs(c-h);g>u&&(h=(h+c)/2,Ei(t,o,i,n,h,d)&&(y=h,u=g)),h=c}return isNaN(y)&&(y=r[s]),a?(a.push(y,d),a):[y,d]}function Pi(t,e,o,i,n,r){for(var s,a=[t[e],t[e+1]],l=[];e+i<o;e+=i){if(l[0]=t[e+i],l[1]=t[e+i+1],s=n.call(r,a,l))return s;a[0]=l[0],a[1]=l[1]}return!1}function wi(t,e,o,i,n){var r=z(D(),t,e,o,i);return!!ot(n,r)&&(!!(O(n,r)||r[0]>=n[0]&&r[2]<=n[2]||r[1]>=n[1]&&r[3]<=n[3])||Pi(t,e,o,i,function(t,e){var o=!1,i=k(n,t),r=k(n,e);if(1===i||1===r)o=!0;else{var s=n[0],a=n[1],l=n[2],p=n[3],h=e[0],c=e[1],u=(c-t[1])/(h-t[0]);2&r&&!(2&i)&&(o=h-(c-p)/u,o=o>=s&&o<=l),o||!(4&r)||4&i||(o=c-(h-l)*u,o=o>=a&&o<=p),o||!(8&r)||8&i||(o=h-(c-a)/u,o=o>=s&&o<=l),o||!(16&r)||16&i||(o=c-(h-s)*u,o=o>=a&&o<=p)}return o}))}function Ai(t,e,o,i,n){var r=o[0];if(!(wi(t,e,r,i,n)||bi(t,e,r,i,n[0],n[1])||bi(t,e,r,i,n[0],n[3])||bi(t,e,r,i,n[2],n[1])||bi(t,e,r,i,n[2],n[3])))return!1;if(1===o.length)return!0;for(e=1,r=o.length;e<r;++e)if(_i(t,o[e-1],o[e],i,n))return!1;return!0}function Ci(t,e,o,i){for(var n=0,r=t[o-i],s=t[o-i+1];e<o;e+=i)var a=t[e],l=t[e+1],n=n+(a-r)*(l+s),r=a,s=l;return 0<n}function Mi(t,e,o,i){var n=0;i=void 0!==i&&i;var r,s;for(r=0,s=e.length;r<s;++r){var a=e[r],n=Ci(t,n,a,o);if(r){if(i&&!n||!i&&n)return!1}else if(i&&n||!i&&!n)return!1;n=a}return!0}function xi(t,e,o,i,n){n=void 0!==n&&n;var r,s;for(r=0,s=o.length;r<s;++r){var a=o[r],l=Ci(t,e,a,i);if(r?n&&!l||!n&&l:n&&l||!n&&!l)for(var l=t,p=a,h=i;e<p-h;){var c;for(c=0;c<h;++c){var u=l[e+c];l[e+c]=l[p-h+c],l[p-h+c]=u}e+=h,p-=h}e=a}return e}function Ii(t,e,o,i){var n,r,s=0;for(n=0,r=e.length;n<r;++n)s=xi(t,s,e[n],o,i);return s}function Ri(t,e){Qo.call(this),this.c=[],this.u=-1,this.A=null,this.R=this.C=this.G=-1,this.l=null,this.pa(t,e)}function Ti(t){if(t.u!=t.f){var e=X(t.D());t.A=Si(t.fc(),0,t.c,t.a,e,0),t.u=t.f}return t.A}function Li(t,e,o,i){var r=i||32;i=[];var s;for(s=0;s<r;++s)n(i,t.offset(e,o,2*Math.PI*s/r));return i.push(i[0],i[1]),t=new Ri(null),t.ca("XY",i,[i.length]),t}function Gi(t){var e=t[0],o=t[1],i=t[2];return t=t[3],e=[e,o,e,t,i,t,i,o,e,o],o=new Ri(null),o.ca("XY",e,[e.length]),o}function Oi(t,e,o){var i=e||32,n=t.sa();e=t.ka;for(var r=new Ri(null,e),i=n*(i+1),n=Array(i),s=0;s<i;s++)n[s]=0;return r.ca(e,n,[n.length]),Ni(r,t.Ba(),t.Vd(),o),r}function Ni(t,e,o,i){var n=t.ha(),r=t.ka,s=t.sa(),a=t.Rb(),l=n.length/s-1;i=i||0;for(var p,h,c=0;c<=l;++c)h=c*s,p=i+2*w(c,l)*Math.PI/l,n[h]=e[0]+o*Math.cos(p),n[h+1]=e[1]+o*Math.sin(p);t.ca(r,n,a)}function ki(t){pe.call(this),t=t||{},this.l=[0,0],this.c=[],this.lf=this.lf.bind(this);var e={};e.center=void 0!==t.center?t.center:null,this.o=vt(t.projection);var o,i,n,r=void 0!==t.minZoom?t.minZoom:0;o=void 0!==t.maxZoom?t.maxZoom:28;var s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions)o=t.resolutions,i=o[0],n=o[o.length-1],o=xo(o);else{i=vt(t.projection),n=i.D();var a=(n?Math.max(et(n),J(n)):360*ng.degrees/i.sc())/256/Math.pow(2,0),l=a/Math.pow(2,28);i=t.maxResolution,void 0!==i?r=0:i=a/Math.pow(s,r),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):a/Math.pow(s,o):l),o=r+Math.floor(Math.log(i/n)/Math.log(s)),n=i/Math.pow(s,o-r),o=Io(s,i,o-r)}this.a=i,this.i=n,this.A=s,this.g=t.resolutions,this.j=r,(void 0!==t.enableRotation?t.enableRotation:1)?(r=t.constrainRotation,r=void 0===r||!0===r?Go():!1===r?To:"number"==typeof r?Lo(r):To):r=Ro,this.u=new be(void 0!==t.extent?zt(t.extent):Ht,o,r),void 0!==t.resolution?e.resolution=t.resolution:void 0!==t.zoom&&(e.resolution=this.constrainResolution(this.a,t.zoom-this.j)),e.rotation=void 0!==t.rotation?t.rotation:0,this.H(e)}function Di(t){qi(t,0,-Bi(t)[0]);for(var e=0,o=t.c.length;e<o;++e){var i=t.c[e];i[0].fd&&i[0].fd(!1)}t.c.length=0}function ji(t,e,o){var i,n=t.Ba();return void 0!==n&&(i=[n[0]-o[0],n[1]-o[1]],Bo(i,e-t.Va()),ko(i,o)),i}function Fi(t,e,o){var i,n=t.Ba();return t=t.Ua(),void 0!==n&&void 0!==t&&(i=[o[0]-e*(o[0]-n[0])/t,o[1]-e*(o[1]-n[1])/t]),i}function Ui(t){var e=[100,100];return t='.ol-viewport[data-view="'+u(t)+'"]',(t=document.querySelector(t))&&(t=getComputedStyle(t),e[0]=parseInt(t.width,10),e[1]=parseInt(t.height,10)),e}function Bi(t,e){return void 0!==e?(e[0]=t.l[0],e[1]=t.l[1],e):t.l.slice()}function Vi(t,e){return Math.max(et(t)/e[0],J(t)/e[1])}function Wi(t){var e=t.a,o=Math.log(e/t.i)/Math.log(2);return function(t){return e/Math.pow(2,t*o)}}function zi(t){var e=t.a,o=Math.log(e/t.i)/Math.log(2);return function(t){return Math.log(e/t)/Math.log(2)/o}}function Hi(t){return!!t.Ba()&&void 0!==t.Ua()}function qi(t,e,o){t.l[e]+=o,t.s()}function Yi(t,e,o){this.i=t,this.c=e,this.g=o,this.b=[],this.a=this.f=0}function Ki(t){t.b.length=0,t.f=0,t.a=0}function Xi(t){pe.call(this),this.v=null,this.Ia(!0),this.handleEvent=t.handleEvent}function Zi(t,e,o,i){if(void 0!==e){var n=t.Va(),r=t.Ba();void 0!==n&&r&&0<i?t.animate({rotation:e,anchor:o,duration:i,easing:Ie}):t.rotate(e,o)}}function Ji(t,e,o,i){var n=t.Ua();if(e=t.constrainResolution(n,e,0),o&&void 0!==e&&e!==n){var r=t.Ba();o=Fi(t,e,o),o=t.Ec(o),o=[(e*r[0]-n*o[0])/(e-n),(e*r[1]-n*o[1])/(e-n)]}Qi(t,e,o,i)}function Qi(t,e,o,i){if(e){var n=t.Ua(),r=t.Ba();void 0!==n&&r&&e!==n&&i?t.animate({resolution:e,anchor:o,duration:i,easing:Ie}):(o&&(o=Fi(t,e,o),t.wb(o)),t.Xc(e))}}function $i(t){t=t||{},this.a=t.delta?t.delta:1,Xi.call(this,{handleEvent:tn}),this.g=void 0!==t.duration?t.duration:250}function tn(t){var e=!1,o=t.originalEvent;if("dblclick"==t.type){var e=t.coordinate,o=o.shiftKey?-this.a:this.a;Ji(t.map.$(),o,e,this.g),t.preventDefault(),e=!0}return!e}function en(t){return t=t.originalEvent,t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function on(t){return t=t.originalEvent,!(t.button||wg&&Ag&&t.ctrlKey)}function nn(t){return"pointermove"==t.type}function rn(t){return"singleclick"==t.type}function sn(t){return t=t.originalEvent,!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}function an(t){return t=t.originalEvent,!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function ln(t){return"INPUT"!==(t=t.originalEvent.target.tagName)&&"SELECT"!==t&&"TEXTAREA"!==t}function pn(t){return f(t.b,56),"mouse"==t.b.pointerType}function hn(t){return t=t.b,t.isPrimary&&0===t.button}function cn(t){t=t||{},Xi.call(this,{handleEvent:t.handleEvent?t.handleEvent:dn}),this.sf=t.handleDownEvent?t.handleDownEvent:Ko,this.pf=t.handleDragEvent?t.handleDragEvent:c,this.xf=t.handleMoveEvent?t.handleMoveEvent:c,this.yf=t.handleUpEvent?t.handleUpEvent:Ko,this.A=!1,this.Y={},this.l=[]}function un(t){for(var e=t.length,o=0,i=0,n=0;n<e;n++)o+=t[n].clientX,i+=t[n].clientY;return[o/e,i/e]}function dn(t){if(!(t instanceof He))return!0;var e=!1,o=t.type;return"pointerdown"!==o&&"pointerdrag"!==o&&"pointerup"!==o||(o=t.b,"pointerup"==t.type?delete this.Y[o.pointerId]:"pointerdown"==t.type?this.Y[o.pointerId]=o:o.pointerId in this.Y&&(this.Y[o.pointerId]=o),this.l=at(this.Y)),this.A?"pointerdrag"==t.type?this.pf(t):"pointerup"==t.type&&(this.A=this.yf(t)&&0<this.l.length):"pointerdown"==t.type?(this.A=t=this.sf(t),e=this.Zc(t)):"pointermove"==t.type&&this.xf(t),!e}function fn(t){cn.call(this,{handleDownEvent:mn,handleDragEvent:yn,handleUpEvent:gn}),t=t||{},this.a=t.kinetic,this.g=null,this.u=t.condition?t.condition:sn,this.j=!1}function yn(t){var e=this.l,o=un(e);if(e.length==this.o){if(this.a&&this.a.b.push(o[0],o[1],Date.now()),this.g){var i=this.g[0]-o[0],n=o[1]-this.g[1];t=t.map.$();var r=t.V(),i=[i,n];Vo(i,r.resolution),Bo(i,r.rotation),ko(i,r.center),i=t.Ec(i),t.wb(i)}}else this.a&&Ki(this.a);this.g=o,this.o=e.length}function gn(t){var e=t.map;if(t=e.$(),this.l.length)return this.a&&Ki(this.a),this.g=null,!0;var o;if(o=!this.j&&this.a)if(o=this.a,6>o.b.length)o=!1;else{var i=Date.now()-o.g,n=o.b.length-3;if(o.b[n+2]<i)o=!1;else{for(var r=n-3;0<r&&o.b[r+2]>i;)r-=3;var i=o.b[n+2]-o.b[r+2],s=o.b[n]-o.b[r],n=o.b[n+1]-o.b[r+1];o.f=Math.atan2(n,s),o.a=Math.sqrt(s*s+n*n)/i,o=o.a>o.c}}return o&&(o=this.a,o=(o.c-o.a)/o.i,n=this.a.f,r=t.Ba(),r=e.Ka(r),e=e.Za([r[0]-o*Math.cos(n),r[1]-o*Math.sin(n)]),t.animate({center:t.Ec(e),duration:500,easing:Ie})),qi(t,1,-1),!1}function mn(t){if(0<this.l.length&&this.u(t)){var e=t.map.$();return this.g=null,this.A||qi(e,1,1),Bi(e)[0]&&e.wb(t.frameState.viewState.center),this.a&&Ki(this.a),this.j=1<this.l.length,!0}return!1}function vn(t){t=t||{},cn.call(this,{handleDownEvent:En,handleDragEvent:_n,handleUpEvent:bn}),this.g=t.condition?t.condition:en,this.a=void 0,this.j=void 0!==t.duration?t.duration:250}function _n(t){if(pn(t)){var e=t.map,o=e.Mb();if(t=t.pixel,o=Math.atan2(o[1]/2-t[1],t[0]-o[0]/2),void 0!==this.a){t=o-this.a;var e=e.$();Zi(e,e.Va()-t)}this.a=o}}function bn(t){if(!pn(t))return!0;t=t.map.$(),qi(t,1,-1);var e=t.Va(),o=this.j,e=t.constrainRotation(e,0);return Zi(t,e,void 0,o),!1}function En(t){return!!(pn(t)&&on(t)&&this.g(t))&&(qi(t.map.$(),1,1),this.a=void 0,!0)}function Sn(t){this.Gc=null,this.a=document.createElement("div"),this.a.style.position="absolute",this.a.className="ol-box "+t,this.f=this.c=this.b=null}function Pn(t){var e=t.c,o=t.f;t=t.a.style,t.left=Math.min(e[0],o[0])+"px",t.top=Math.min(e[1],o[1])+"px",t.width=Math.abs(o[0]-e[0])+"px",t.height=Math.abs(o[1]-e[1])+"px"}function wn(t){var e=t.c,o=t.f,e=[e,[e[0],o[1]],o,[o[0],e[1]]].map(t.b.Za,t.b);e[4]=e[0].slice(),t.Gc?t.Gc.pa([e]):t.Gc=new Ri([e])}function An(t){cn.call(this,{handleDownEvent:In,handleDragEvent:Mn,handleUpEvent:xn}),t=t||{},this.a=new Sn(t.className||"ol-dragbox"),this.g=null,this.u=t.condition?t.condition:Yo,this.o=t.boxEndCondition?t.boxEndCondition:Cn}function Cn(t,e,o){return t=o[0]-e[0],e=o[1]-e[1],64<=t*t+e*e}function Mn(t){if(pn(t)){var e=this.a,o=t.pixel;e.c=this.g,e.f=o,wn(e),Pn(e),this.b(new Rn(Ug,t.coordinate,t))}}function xn(t){return!pn(t)||(this.a.setMap(null),this.o(t,this.g,t.pixel)&&(this.j(t),this.b(new Rn(Bg,t.coordinate,t))),!1)}function In(t){if(pn(t)&&on(t)&&this.u(t)){this.g=t.pixel,this.a.setMap(t.map);var e=this.a,o=this.g;return e.c=this.g,e.f=o,wn(e),Pn(e),this.b(new Rn(Fg,t.coordinate,t)),!0}return!1}function Rn(t,e,o){ne.call(this,t),this.coordinate=e,this.mapBrowserEvent=o}function Tn(t){t=t||{};var e=t.condition?t.condition:an;this.C=void 0!==t.duration?t.duration:200,this.G=void 0!==t.out&&t.out,An.call(this,{condition:e,className:t.className||"ol-dragzoom"})}function Ln(t){Xi.call(this,{handleEvent:Gn}),t=t||{},this.a=function(t){return sn(t)&&ln(t)},this.g=t.condition?t.condition:this.a,this.l=void 0!==t.duration?t.duration:100,this.j=void 0!==t.pixelDelta?t.pixelDelta:128}function Gn(t){var e=!1;if("keydown"==t.type){var o=t.originalEvent.keyCode;if(this.g(t)&&(40==o||37==o||39==o||38==o)){var e=t.map.$(),i=e.Ua()*this.j,n=0,r=0;40==o?r=-i:37==o?n=-i:39==o?n=i:r=i,i=[n,r],Bo(i,e.Va()),o=this.l,(n=e.Ba())&&(i=e.Ec([n[0]+i[0],n[1]+i[1]]),o?e.animate({duration:o,easing:Te,center:i}):e.wb(i)),t.preventDefault(),e=!0}}return!e}function On(t){Xi.call(this,{handleEvent:Nn}),t=t||{},this.g=t.condition?t.condition:ln,this.a=t.delta?t.delta:1,this.l=void 0!==t.duration?t.duration:100}function Nn(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var o=t.originalEvent.charCode;!this.g(t)||43!=o&&45!=o||(e=43==o?this.a:-this.a,o=t.map.$(),Ji(o,e,void 0,this.l),t.preventDefault(),e=!0)}return!e}function kn(t){Xi.call(this,{handleEvent:Dn}),t=t||{},this.l=0,this.R=void 0!==t.duration?t.duration:250,this.Y=void 0!==t.timeout?t.timeout:80,this.A=void 0===t.useAnchor||t.useAnchor,this.a=null,this.o=this.j=this.u=this.g=void 0}function Dn(t){var e=t.type;if("wheel"!==e&&"mousewheel"!==e)return!0;t.preventDefault();var e=t.map,o=t.originalEvent;this.A&&(this.a=t.coordinate);var i;if("wheel"==t.type?(i=o.deltaY,Sg&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=Cg),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):"mousewheel"==t.type&&(i=-o.wheelDeltaY,Pg&&(i/=3)),0===i)return!1;if(t=Date.now(),void 0===this.g&&(this.g=t),(!this.j||400<t-this.g)&&(this.j=4>Math.abs(i)?Vg:Wg),this.j===Vg){e=e.$(),this.o?clearTimeout(this.o):qi(e,1,1),this.o=setTimeout(this.C.bind(this),400),i=e.Ua()*Math.pow(2,i/300);var o=e.i,n=e.a,r=0;if(i<o?(i=Math.max(i,o/1.5),r=1):i>n&&(i=Math.min(i,1.5*n),r=-1),this.a){var s=Fi(e,i,this.a);e.wb(e.Ec(s))}return e.Xc(i),0<r?e.animate({resolution:o,easing:Ie,anchor:this.a,duration:500}):0>r&&e.animate({resolution:n,easing:Ie,anchor:this.a,duration:500}),this.g=t,!1}return this.l+=i,t=Math.max(this.Y-(t-this.g),0),clearTimeout(this.u),this.u=setTimeout(this.G.bind(this,e),t),!1}function jn(t){cn.call(this,{handleDownEvent:Bn,handleDragEvent:Fn,handleUpEvent:Un}),t=t||{},this.g=null,this.j=void 0,this.a=!1,this.o=0,this.C=void 0!==t.threshold?t.threshold:.3,this.u=void 0!==t.duration?t.duration:250}function Fn(t){var e=0,o=this.l[0],i=this.l[1],o=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);void 0!==this.j&&(e=o-this.j,this.o+=e,!this.a&&Math.abs(this.o)>this.C&&(this.a=!0)),this.j=o,t=t.map,o=t.c.getBoundingClientRect(),i=un(this.l),i[0]-=o.left,i[1]-=o.top,this.g=t.Za(i),this.a&&(o=t.$(),i=o.Va(),t.render(),Zi(o,i+e,this.g))}function Un(t){if(2>this.l.length){if(t=t.map.$(),qi(t,1,-1),this.a){var e=t.Va(),o=this.g,i=this.u,e=t.constrainRotation(e,0);Zi(t,e,o,i)}return!1}return!0}function Bn(t){return 2<=this.l.length&&(t=t.map,this.g=null,this.j=void 0,this.a=!1,this.o=0,this.A||qi(t.$(),1,1),!0)}function Vn(t){cn.call(this,{handleDownEvent:Hn,handleDragEvent:Wn,handleUpEvent:zn}),t=t||{},this.o=t.constrainResolution||!1,this.g=null,this.u=void 0!==t.duration?t.duration:400,this.a=void 0,this.j=1}function Wn(t){var e=1,o=this.l[0],i=this.l[1],n=o.clientX-i.clientX,o=o.clientY-i.clientY,n=Math.sqrt(n*n+o*o);void 0!==this.a&&(e=this.a/n),this.a=n,t=t.map;var n=t.$(),i=n.Ua(),r=n.a,s=n.i,o=i*e;o>r?(e=r/i,o=r):o<s&&(e=s/i,o=s),1!=e&&(this.j=e),e=t.c.getBoundingClientRect(),i=un(this.l),i[0]-=e.left,i[1]-=e.top,this.g=t.Za(i),t.render(),Qi(n,o,this.g)}function zn(t){if(2>this.l.length){t=t.map.$(),qi(t,1,-1);var e=t.Ua();if(this.o||e<t.i||e>t.a){var o=this.g,i=this.u,e=t.constrainResolution(e,0,this.j-1);Qi(t,e,o,i)}return!1}return!0}function Hn(t){return 2<=this.l.length&&(t=t.map,this.g=null,this.a=void 0,this.j=1,this.A||qi(t.$(),1,1),!0)}function qn(t){t=t||{};var e=new de,o=new Yi(-.005,.05,100);return(void 0!==t.altShiftDragRotate?t.altShiftDragRotate:1)&&e.push(new vn),(void 0!==t.doubleClickZoom?t.doubleClickZoom:1)&&e.push(new $i({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0!==t.dragPan?t.dragPan:1)&&e.push(new fn({kinetic:o})),(void 0!==t.pinchRotate?t.pinchRotate:1)&&e.push(new jn),(void 0!==t.pinchZoom?t.pinchZoom:1)&&e.push(new Vn({duration:t.zoomDuration})),(void 0!==t.keyboard?t.keyboard:1)&&(e.push(new Ln),e.push(new On({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0!==t.mouseWheelZoom?t.mouseWheelZoom:1)&&e.push(new kn({duration:t.zoomDuration})),(void 0!==t.shiftDragZoom?t.shiftDragZoom:1)&&e.push(new Tn({duration:t.zoomDuration})),e}function Yn(t){pe.call(this);var e=og({},t);e.opacity=void 0!==t.opacity?t.opacity:1,e.visible=void 0===t.visible||t.visible,e.zIndex=void 0!==t.zIndex?t.zIndex:0,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,this.H(e),this.a={layer:this,De:!0}}function Kn(t){return t.a.opacity=_(t.ic(),0,1),t.a.Ui=t.Nf(),t.a.visible=t.Kb(),t.a.extent=t.D(),t.a.zIndex=t.za(),t.a.maxResolution=t.gc(),t.a.minResolution=Math.max(t.hc(),0),t.a}function Xn(t){var e=t||{};t=og({},e),delete t.layers,e=e.layers,Yn.call(this,t),this.i=[],this.c={},Jt(this,he(zg),this.nl,this),e?Array.isArray(e)?e=new de(e.slice()):f(e instanceof de,43):e=new de,this.Sh(e)}function Zn(t){ht.call(this,{code:t,units:"m",extent:qg,global:!0,worldExtent:Yg,getPointResolution:function(t,e){return t/eg(e[1]/6378137)}})}function Jn(t,e,o){var i=t.length;o=1<o?o:2,void 0===e&&(e=2<o?t.slice():Array(i));for(var n=0;n<i;n+=o){e[n]=Hg*t[n]/180;var r=6378137*Math.log(Math.tan(Math.PI*(t[n+1]+90)/360));r>Hg?r=Hg:r<-Hg&&(r=-Hg),e[n+1]=r}return e}function Qn(t,e,o){var i=t.length;o=1<o?o:2,void 0===e&&(e=2<o?t.slice():Array(i));for(var n=0;n<i;n+=o)e[n]=180*t[n]/Hg,e[n+1]=360*Math.atan(Math.exp(t[n+1]/6378137))/Math.PI-90;return e}function $n(t,e){ht.call(this,{code:t,units:"degrees",extent:Zg,axisOrientation:e,global:!0,metersPerUnit:Jg,worldExtent:Zg})}function tr(){ft(Kg),ft(Qg),yt()}function er(t){var e=og({},t);delete e.source,Yn.call(this,e),this.u=this.o=this.j=null,t.map&&this.setMap(t.map),Jt(this,he("source"),this.Al,this),this.Yc(t.source?t.source:null)}function or(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}function ir(){this.b={},this.a=0}function nr(){return[1,0,0,1,0,0]}function rr(t){return ar(t,1,0,0,1,0,0)}function sr(t,e){var o=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],l=e[0],p=e[1],h=e[2],c=e[3],u=e[4],d=e[5];return t[0]=o*l+n*p,t[1]=i*l+r*p,t[2]=o*h+n*c,t[3]=i*h+r*c,t[4]=o*u+n*d+s,t[5]=i*u+r*d+a,t}function ar(t,e,o,i,n,r,s){return t[0]=e,t[1]=o,t[2]=i,t[3]=n,t[4]=r,t[5]=s,t}function lr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function pr(t,e){var o=e[0],i=e[1];return e[0]=t[0]*o+t[2]*i+t[4],e[1]=t[1]*o+t[3]*i+t[5],e}function hr(t,e){var o=Math.cos(e),i=Math.sin(e);sr(t,ar(tm,o,i,-i,o,0,0))}function cr(t,e,o){return sr(t,ar(tm,e,0,0,o,0,0))}function ur(t,e,o){sr(t,ar(tm,1,0,0,1,e,o))}function dr(t,e,o,i,n,r,s,a){var l=Math.sin(r);return r=Math.cos(r),t[0]=i*r,t[1]=n*l,t[2]=-i*l,t[3]=n*r,t[4]=s*i*r-a*i*l+e,t[5]=s*n*l+a*n*r+o,t}function fr(t){var e=t[0]*t[3]-t[1]*t[2];f(!!e,32);var o=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5];return t[0]=r/e,t[1]=-i/e,t[2]=-n/e,t[3]=o/e,t[4]=(n*a-r*s)/e,t[5]=-(o*a-i*s)/e,t}function yr(t,e){this.j=e,this.c={},this.v={}}function gr(t){var e=t.viewState,o=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;dr(o,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),fr(lr(i,o))}function mr(){if(32<$g.a){var t,e,o=0;for(t in $g.b)e=$g.b[t],3&o++||ae(e)||(delete $g.b[t],--$g.a)}}function vr(t,e){var o=u(e).toString();if(o in t.c)return t.c[o];var i=e.Dd(t);return t.c[o]=i,t.v[o]=Jt(i,"change",t.ll,t),i}function _r(t,e){for(var o in t.c)if(!(o in e.layerStates)){e.postRenderFunctions.push(t.gp.bind(t));break}}function br(t,e){return t.zIndex-e.zIndex}function Er(t,e,o,i,n){ne.call(this,t),this.vectorContext=e,this.frameState=o,this.context=i,this.glContext=n}function Sr(t,e,o,i){e&&(t.translate(o,i),t.rotate(e),t.translate(-o,-i))}function Pr(){}function wr(t,e,o,i,n){this.f=t,this.I=e,this.c=o,this.u=i,this.mb=n,this.M=this.b=this.a=this.$a=this.S=this.R=null,this.eb=this.Y=this.o=this.G=this.C=this.A=0,this.ea=!1,this.i=this.ia=0,this.oa=!1,this.qa=0,this.Fa="",this.Ja=this.Zb=0,this.Ha=!1,this.l=this.Oa=0,this.ta=this.j=this.g=null,this.v=[],this.lb=nr()}function Ar(t,e,o){if(t.M){e=Zo(e,0,o,2,t.u,t.v),o=t.f;var i=t.lb,n=o.globalAlpha;1!=t.o&&(o.globalAlpha=n*t.o);var r=t.ia;t.ea&&(r+=t.mb);var s,a;for(s=0,a=e.length;s<a;s+=2){var l=e[s]-t.A,p=e[s+1]-t.C;if(t.oa&&(l=Math.round(l),p=Math.round(p)),r||1!=t.i){var h=l+t.A,c=p+t.C;dr(i,h,c,t.i,t.i,r,-h,-c),o.setTransform.apply(o,i)}o.drawImage(t.M,t.Y,t.eb,t.qa,t.G,l,p,t.qa,t.G)}(r||1!=t.i)&&o.setTransform(1,0,0,1,0,0),1!=t.o&&(o.globalAlpha=n)}}function Cr(t,e,o,i){var n=0;if(t.ta&&""!==t.Fa){t.g&&Ir(t,t.g),t.j&&Rr(t,t.j);var r=t.ta,s=t.f,a=t.$a;for(a?(a.font!=r.font&&(a.font=s.font=r.font),a.textAlign!=r.textAlign&&(a.textAlign=s.textAlign=r.textAlign),a.textBaseline!=r.textBaseline&&(a.textBaseline=s.textBaseline=r.textBaseline)):(s.font=r.font,s.textAlign=r.textAlign,s.textBaseline=r.textBaseline,t.$a={font:r.font,textAlign:r.textAlign,textBaseline:r.textBaseline}),e=Zo(e,n,o,i,t.u,t.v),r=t.f,s=t.Oa,t.Ha&&(s+=t.mb);n<o;n+=i){var a=e[n]+t.Zb,l=e[n+1]+t.Ja;if(s||1!=t.l){var p=dr(t.lb,a,l,t.l,t.l,s,-a,-l);r.setTransform.apply(r,p)}t.j&&r.strokeText(t.Fa,a,l),t.g&&r.fillText(t.Fa,a,l)}(s||1!=t.l)&&r.setTransform(1,0,0,1,0,0)}}function Mr(t,e,o,i,n,r){var s=t.f;for(t=Zo(e,o,i,n,t.u,t.v),s.moveTo(t[0],t[1]),e=t.length,r&&(e-=2),o=2;o<e;o+=2)s.lineTo(t[o],t[o+1]);return r&&s.closePath(),i}function xr(t,e,o,i,n){var r,s;for(r=0,s=i.length;r<s;++r)o=Mr(t,e,o,i[r],n,!0);return o}function Ir(t,e){var o=t.f,i=t.R;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=o.fillStyle=e.fillStyle):(o.fillStyle=e.fillStyle,t.R={fillStyle:e.fillStyle})}function Rr(t,e){var o=t.f,i=t.S;i?(i.lineCap!=e.lineCap&&(i.lineCap=o.lineCap=e.lineCap),Mg&&!s(i.lineDash,e.lineDash)&&o.setLineDash(i.lineDash=e.lineDash),i.lineJoin!=e.lineJoin&&(i.lineJoin=o.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=o.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=o.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=o.strokeStyle=e.strokeStyle)):(o.lineCap=e.lineCap,Mg&&o.setLineDash(e.lineDash),o.lineJoin=e.lineJoin,o.lineWidth=e.lineWidth,o.miterLimit=e.miterLimit,o.strokeStyle=e.strokeStyle,t.S={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}function Tr(t,e){yr.call(this,0,e),this.f=Ee(),this.b=this.f.canvas,this.b.style.width="100%",this.b.style.height="100%",this.b.style.display="block",this.b.className="ol-unselectable",t.insertBefore(this.b,t.childNodes[0]||null),this.a=!0,this.i=nr()}function Lr(t,e,o){var i=t.j,n=t.f;if(ae(i,e)){var r=o.extent,s=o.pixelRatio,a=o.viewState.rotation,l=o.viewState,p=o.pixelRatio/l.resolution;t=dr(t.i,t.b.width/2,t.b.height/2,p,-p,-l.rotation,-l.center[0],-l.center[1]),i.b(new Er(e,new wr(n,s,r,t,a),o,n,null))}}function Gr(){}function Or(t){this.b=t}function Nr(t){this.b=t}function kr(t){this.b=t}function Dr(){this.b="precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"}function jr(){this.b="varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}"}function Fr(t,e){this.G=t.getUniformLocation(e,"n"),this.qa=t.getUniformLocation(e,"k"),this.c=t.getUniformLocation(e,"j"),this.i=t.getUniformLocation(e,"i"),this.a=t.getUniformLocation(e,"m"),this.ta=t.getUniformLocation(e,"l"),this.f=t.getUniformLocation(e,"h"),this.R=t.getUniformLocation(e,"p"),this.S=t.getUniformLocation(e,"o"),this.l=t.getAttribLocation(e,"f"),this.b=t.getAttribLocation(e,"e"),this.u=t.getAttribLocation(e,"g")}function Ur(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Br(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function Vr(t,e){this.origin=X(e),this.mb=nr(),this.Oa=nr(),this.lb=nr(),this.Ja=Ur(),this.b=[],this.o=null,this.f=[],this.g=[],this.a=[],this.v=null,this.l=void 0}function Wr(t,e,o,i){t.drawElements(4,i-o,e.g?5125:5123,o*(e.g?4:2))}function zr(t,e,o,i,n,r){return t=(o-t)*(r-e)-(n-t)*(i-e),t<=hm&&t>=-hm?void 0:0<t}function Hr(t){this.b=void 0!==t?t:[],this.a=cm}function qr(t,e){Vr.call(this,0,e),this.I=null,this.j=[],this.u=[],this.A=0,this.c={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,s:!1}}function Yr(t,e,o,i){e.uniform4fv(t.I.S,o),e.uniform1f(t.I.qa,i)}function Kr(){this.b="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function Xr(){this.b="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}"}function Zr(t,e){this.c=t.getUniformLocation(e,"j"),this.i=t.getUniformLocation(e,"i"),this.a=t.getUniformLocation(e,"k"),this.f=t.getUniformLocation(e,"h"),this.v=t.getAttribLocation(e,"e"),this.I=t.getAttribLocation(e,"f"),this.b=t.getAttribLocation(e,"c"),this.A=t.getAttribLocation(e,"g"),this.C=t.getAttribLocation(e,"d")}function Jr(t,e){this.l=t,this.b=e,this.a={},this.c={},this.f={},this.o=this.v=this.i=this.j=null,(this.g=o(Jy,"OES_element_index_uint"))&&e.getExtension("OES_element_index_uint"),Jt(this.l,"webglcontextlost",this.mo,this),Jt(this.l,"webglcontextrestored",this.no,this)}function Qr(t,e,o){var i=t.b,n=o.b,r=String(u(o));if(r in t.a)i.bindBuffer(e,t.a[r].buffer);else{var s=i.createBuffer();i.bindBuffer(e,s);var a;34962==e?a=new Float32Array(n):34963==e&&(a=t.g?new Uint32Array(n):new Uint16Array(n)),i.bufferData(e,a,o.a),t.a[r]={lc:o,buffer:s}}}function $r(t,e){var o=t.b,i=String(u(e)),n=t.a[i];o.isContextLost()||o.deleteBuffer(n.buffer),delete t.a[i]}function ts(t){if(!t.i){var e=t.b,o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o);var i=ns(e,1,1),n=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,n),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,n),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),t.i=o,t.v=i,t.o=n}return t.i}function es(t,e){var o=String(u(e));if(o in t.c)return t.c[o];var i=t.b,n=i.createShader(e.T());return i.shaderSource(n,e.b),i.compileShader(n),t.c[o]=n}function os(t,e,o){var i=u(e)+"/"+u(o);if(i in t.f)return t.f[i];var n=t.b,r=n.createProgram();return n.attachShader(r,es(t,e)),n.attachShader(r,es(t,o)),n.linkProgram(r),t.f[i]=r}function is(t,e,o){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(3553,10242,e),void 0!==o&&t.texParameteri(3553,10243,o),i}function ns(t,e,o){var i=is(t,void 0,void 0);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,o,0,t.RGBA,t.UNSIGNED_BYTE,null),i}function rs(t,e){var o=is(t,33071,33071);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),o}function ss(t,e){Vr.call(this,0,e),this.G=this.C=void 0,this.A=[],this.I=[],this.ta=void 0,this.j=[],this.c=[],this.S=this.R=void 0,this.qa=null,this.oa=this.ia=this.ea=this.eb=this.Y=this.$a=void 0,this.Ha=[],this.u=[],this.Zb=void 0}function as(t,e,o,i){var n,r,s,a,l,p,h=t.C,c=t.G,u=t.ta,d=t.R,f=t.S,y=t.$a,g=t.Y,m=t.eb,v=t.ea?1:0,_=-t.ia,b=t.oa,E=t.Zb,S=Math.cos(_),_=Math.sin(_),P=t.b.length,w=t.a.length;for(n=0;n<o;n+=i)l=e[n]-t.origin[0],p=e[n+1]-t.origin[1],r=w/8,s=-b*h,a=-b*(u-c),t.a[w++]=l,t.a[w++]=p,t.a[w++]=s*S-a*_,t.a[w++]=s*_+a*S,t.a[w++]=g/f,t.a[w++]=(m+u)/d,t.a[w++]=y,t.a[w++]=v,s=b*(E-h),a=-b*(u-c),t.a[w++]=l,t.a[w++]=p,t.a[w++]=s*S-a*_,t.a[w++]=s*_+a*S,t.a[w++]=(g+E)/f,t.a[w++]=(m+u)/d,t.a[w++]=y,t.a[w++]=v,s=b*(E-h),a=b*c,t.a[w++]=l,t.a[w++]=p,t.a[w++]=s*S-a*_,t.a[w++]=s*_+a*S,t.a[w++]=(g+E)/f,t.a[w++]=m/d,t.a[w++]=y,t.a[w++]=v,s=-b*h,a=b*c,t.a[w++]=l,t.a[w++]=p,t.a[w++]=s*S-a*_,t.a[w++]=s*_+a*S,t.a[w++]=g/f,t.a[w++]=m/d,t.a[w++]=y,t.a[w++]=v,t.b[P++]=r,t.b[P++]=r+1,t.b[P++]=r+2,t.b[P++]=r,t.b[P++]=r+2,t.b[P++]=r+3}function ls(t,e,o,i){var n,r,s,a=e.length;for(s=0;s<a;++s)n=e[s],r=u(n).toString(),r in o?n=o[r]:(n=rs(i,n),o[r]=n),t[s]=n}function ps(t,e,o){var i=e-o;return t[0]===t[i]&&t[1]===t[i+1]&&3<(e-0)/o&&!!oi(t,0,e,o)}function hs(){this.b="precision mediump float;varying float a;varying vec2 b;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((b.x+1.0)/2.0*o.x*p,(b.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function cs(){
this.b="varying float a;varying vec2 b;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;b=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}"}function us(t,e){this.G=t.getUniformLocation(e,"n"),this.qa=t.getUniformLocation(e,"k"),this.S=t.getUniformLocation(e,"l"),this.c=t.getUniformLocation(e,"j"),this.i=t.getUniformLocation(e,"i"),this.a=t.getUniformLocation(e,"m"),this.ta=t.getUniformLocation(e,"p"),this.f=t.getUniformLocation(e,"h"),this.R=t.getUniformLocation(e,"o"),this.g=t.getAttribLocation(e,"g"),this.j=t.getAttribLocation(e,"d"),this.o=t.getAttribLocation(e,"f"),this.b=t.getAttribLocation(e,"e")}function ds(t,e){Vr.call(this,0,e),this.I=null,this.u=[],this.j=[],this.c={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,s:!1}}function fs(t,e,o,i){var n,r,a,l,p,h,c,u=t.a.length,d=t.b.length,f="bevel"===t.c.lineJoin?0:"miter"===t.c.lineJoin?1:2,y="butt"===t.c.lineCap?0:"square"===t.c.lineCap?1:2,g=ps(e,o,i),m=d,v=1;for(n=0;n<o;n+=i){if(l=u/7,p=h,h=c||[e[n],e[n+1]],n){if(n===o-i){g?c=r:(p=p||[0,0],u=ys(t,p,h,[0,0],v*mm*(y||1),u),u=ys(t,p,h,[0,0],-v*mm*(y||1),u),t.b[d++]=l,t.b[d++]=m-1,t.b[d++]=m,t.b[d++]=m,t.b[d++]=l+1,t.b[d++]=l,y&&(u=ys(t,p,h,[0,0],v*_m*y,u),u=ys(t,p,h,[0,0],-v*_m*y,u),t.b[d++]=l+2,t.b[d++]=l,t.b[d++]=l+1,t.b[d++]=l+1,t.b[d++]=l+3,t.b[d++]=l+2));break}c=[e[n+i],e[n+i+1]]}else{if(c=[e[n+i],e[n+i+1]],o-0==2*i&&s(h,c))break;if(!g){y&&(u=ys(t,[0,0],h,c,v*vm*y,u),u=ys(t,[0,0],h,c,-v*vm*y,u),t.b[d++]=l+2,t.b[d++]=l,t.b[d++]=l+1,t.b[d++]=l+1,t.b[d++]=l+3,t.b[d++]=l+2),u=ys(t,[0,0],h,c,v*gm*(y||1),u),u=ys(t,[0,0],h,c,-v*gm*(y||1),u),m=u/7-1;continue}p=[e[o-2*i],e[o-2*i+1]],r=c}a=zr(p[0],p[1],h[0],h[1],c[0],c[1])?-1:1,u=ys(t,p,h,c,a*bm*(f||1),u),u=ys(t,p,h,c,a*Em*(f||1),u),u=ys(t,p,h,c,-a*Sm*(f||1),u),0<n&&(t.b[d++]=l,t.b[d++]=m-1,t.b[d++]=m,t.b[d++]=l+2,t.b[d++]=l,t.b[d++]=0<v*a?m:m-1),t.b[d++]=l,t.b[d++]=l+2,t.b[d++]=l+1,m=l+2,v=a,f&&(u=ys(t,p,h,c,a*Pm*f,u),t.b[d++]=l+1,t.b[d++]=l+3,t.b[d++]=l)}g&&(l=l||u/7,a=Ci([p[0],p[1],h[0],h[1],c[0],c[1]],0,6,2)?1:-1,u=ys(t,p,h,c,a*bm*(f||1),u),ys(t,p,h,c,-a*Sm*(f||1),u),t.b[d++]=l,t.b[d++]=m-1,t.b[d++]=m,t.b[d++]=l+1,t.b[d++]=l,t.b[d++]=0<v*a?m:m-1)}function ys(t,e,o,i,n,r){return t.a[r++]=e[0],t.a[r++]=e[1],t.a[r++]=o[0],t.a[r++]=o[1],t.a[r++]=i[0],t.a[r++]=i[1],t.a[r++]=n,r}function gs(t,e,o){return!((e-=0)<2*o)&&(e!==2*o||!s([t[0],t[1]],[t[0+o],t[o+1]]))}function ms(t,e,o,i){if(ps(e,e.length,i)||(e.push(e[0]),e.push(e[1])),fs(t,e,e.length,i),o.length){var n;for(e=0,n=o.length;e<n;++e)ps(o[e],o[e].length,i)||(o[e].push(o[e][0]),o[e].push(o[e][1])),fs(t,o[e],o[e].length,i)}}function vs(t,e,o){o=void 0===o?t.b.length:o,t.f.push(o),t.g.push(e),t.c.s&&(t.j.push(o),t.c.s=!1)}function _s(t,e,o,i,n){e.uniform4fv(t.I.G,o),e.uniform1f(t.I.qa,i),e.uniform1f(t.I.S,n)}function bs(){this.b="precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function Es(){this.b="attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}"}function Ss(t,e){this.G=t.getUniformLocation(e,"e"),this.c=t.getUniformLocation(e,"d"),this.i=t.getUniformLocation(e,"c"),this.a=t.getUniformLocation(e,"f"),this.f=t.getUniformLocation(e,"b"),this.b=t.getAttribLocation(e,"a")}function Ps(t){t=t||{},this.a=void 0!==t.color?t.color:null,this.i=t.lineCap,this.f=void 0!==t.lineDash?t.lineDash:null,this.g=t.lineDashOffset,this.l=t.lineJoin,this.j=t.miterLimit,this.c=t.width,this.b=void 0}function ws(t){this.b=this.a=this.f=void 0,this.i=void 0===t||t,this.c=0}function As(t){var e=t.b;if(e){var o=e.next,i=e.ub;o&&(o.ub=i),i&&(i.next=o),t.b=o||i,t.f===t.a?(t.b=void 0,t.f=void 0,t.a=void 0):t.f===e?t.f=t.b:t.a===e&&(t.a=i?t.b.ub:t.b),t.c--}}function Cs(t){if(t.b=t.f,t.b)return t.b.data}function Ms(t){if(t.b&&t.b.next)return t.b=t.b.next,t.b.data}function xs(t){if(t.b&&t.b.next)return t.b.next.data}function Is(t){if(t.b&&t.b.ub)return t.b=t.b.ub,t.b.data}function Rs(t){if(t.b&&t.b.ub)return t.b.ub.data}function Ts(t){if(t.b)return t.b.data}function Ls(t){this.b=Cm(t),this.a={}}function Gs(t,e,o){var i=t.a[u(o)];B([i.da,i.fa,i.ba,i.ja],e)||(t.remove(o),t.Ea(e,o))}function Os(t){return t.b.all().map(function(t){return t.value})}function Ns(t,e){return t.b.search({da:e[0],fa:e[1],ba:e[2],ja:e[3]}).map(function(t){return t.value})}function ks(t,e,o,i){return Ds(Ns(t,e),o,i)}function Ds(t,e,o){for(var i,n=0,r=t.length;n<r&&!(i=e.call(o,t[n]));n++);return i}function js(t,e){Vr.call(this,0,e),this.l=new ds(0,e),this.I=null,this.u=[],this.c=[],this.j={fillColor:null,s:!1}}function Fs(t,e,o,i){var n=new ws,r=new Ls;if(e=Us(t,e,i,n,r,!0),o.length){var s,a,l=[];for(s=0,a=o.length;s<a;++s){var p={list:new ws,ba:void 0};l.push(p),p.ba=Us(t,o[s],i,p.list,r,!1)}for(l.sort(function(t,e){return e.ba-t.ba}),s=0;s<l.length;++s)Vs(l[s].list,l[s].ba,n,e,r)}Bs(n,r,!1),Ws(t,n,r)}function Us(t,e,o,i,n,r){var s,a,l,p,h,c=t.a.length/2,u=[],d=[];if(r===Ci(e,0,e.length,o))for(p=l=Ys(t,e[0],e[1],c++),r=e[0],s=o,a=e.length;s<a;s+=o)h=Ys(t,e[s],e[s+1],c++),d.push(Ks(p,h,i)),u.push([Math.min(p.x,h.x),Math.min(p.y,h.y),Math.max(p.x,h.x),Math.max(p.y,h.y)]),r=e[s]>r?e[s]:r,p=h;else for(s=e.length-o,p=l=Ys(t,e[s],e[s+1],c++),r=e[s],s-=o,a=0;s>=a;s-=o)h=Ys(t,e[s],e[s+1],c++),d.push(Ks(p,h,i)),u.push([Math.min(p.x,h.x),Math.min(p.y,h.y),Math.max(p.x,h.x),Math.max(p.y,h.y)]),r=e[s]>r?e[s]:r,p=h;return d.push(Ks(h,l,i)),u.push([Math.min(p.x,h.x),Math.min(p.y,h.y),Math.max(p.x,h.x),Math.max(p.y,h.y)]),n.load(u,d),r}function Bs(t,e,o){var i=Cs(t),n=i,r=Ms(t),s=!1;do{var a=o?zr(r.W.x,r.W.y,n.W.x,n.W.y,n.aa.x,n.aa.y):zr(n.aa.x,n.aa.y,n.W.x,n.W.y,r.W.x,r.W.y);void 0===a?(Xs(n,r,t,e),s=!0,r===i&&(i=xs(t)),r=n,Is(t)):n.W.vb!==a&&(n.W.vb=a,s=!0),n=r,r=Ms(t)}while(n!==i);return s}function Vs(t,e,o,i,n){Bs(t,n,!0);for(var r=Cs(t);r.W.x!==e;)r=Ms(t);e=r.W,i={x:i,y:e.y,gb:-1};var s,a,l,p,h=1/0;for(l=Js({aa:e,W:i},n,!0),s=0,a=l.length;s<a;++s){var c=l[s];if(void 0===c.aa.vb){var u=Qs(e,i,c.aa,c.W,!0),d=Math.abs(e.x-u[0]);d<h&&(h=d,p={x:u[0],y:u[1],gb:-1},r=c)}}if(1/0!==h){if(l=r.W,0<h&&(r=Zs(e,p,r.W,n),r.length))for(p=1/0,s=0,a=r.length;s<a;++s)h=r[s],((c=Math.atan2(e.y-h.y,i.x-h.x))<p||c===p&&h.x<l.x)&&(p=c,l=h);for(r=Cs(o);r.W!==l;)r=Ms(o);i={x:e.x,y:e.y,gb:e.gb,vb:void 0},s={x:r.W.x,y:r.W.y,gb:r.W.gb,vb:void 0},xs(t).aa=i,Ks(e,r.W,t,n),Ks(s,i,t,n),r.W=s,t.i&&t.b&&(t.f=t.b,t.a=t.b.ub),o.concat(t)}}function Ws(t,e,o){for(var i=!1,n=qs(e,o);3<e.c;)if(n){if(!zs(t,e,o,n,i)&&!Bs(e,o,i)&&!Hs(t,e,o,!0))break}else if(!zs(t,e,o,n,i)&&!Bs(e,o,i)&&!Hs(t,e,o)){if(!(n=qs(e,o))){n=t,i=e,r=s=Cs(i);do{if(a=Js(r,o),a.length){for(s=a[0],a=Qs(r.aa,r.W,s.aa,s.W),a=Ys(n,a[0],a[1],n.a.length/2),l=new ws,p=new Ls,Ks(a,r.W,l,p),r.W=a,Gs(o,[Math.min(r.aa.x,a.x),Math.min(r.aa.y,a.y),Math.max(r.aa.x,a.x),Math.max(r.aa.y,a.y)],r),r=Ms(i);r!==s;)Ks(r.aa,r.W,l,p),o.remove(r),As(i),r=Ts(i);Ks(s.aa,a,l,p),s.aa=a,Gs(o,[Math.min(s.W.x,a.x),Math.min(s.W.y,a.y),Math.max(s.W.x,a.x),Math.max(s.W.y,a.y)],s),Bs(i,o,!1),Ws(n,i,o),Bs(l,p,!1),Ws(n,l,p);break}r=Ms(i)}while(r!==s);break}var i=e,r=2*i.c,s=Array(r),a=Cs(i),l=a,p=0;do{s[p++]=l.aa.x,s[p++]=l.aa.y,l=Ms(i)}while(l!==a);i=!Ci(s,0,r,2),Bs(e,o,i)}3===e.c&&(n=t.b.length,t.b[n++]=Rs(e).aa.gb,t.b[n++]=Ts(e).aa.gb,t.b[n++]=xs(e).aa.gb)}function zs(t,e,o,i,n){var r,s,a,l=t.b.length,p=Cs(e),h=Rs(e),c=p,u=Ms(e),d=xs(e),f=!1;do{if(r=c.aa,s=c.W,a=u.W,!1===s.vb){var y=n?$s(d.W,a,s,r,h.aa):$s(h.aa,r,s,a,d.W);!i&&Js({aa:r,W:a},o).length||!y||Zs(r,s,a,o,!0).length||!i&&!1!==r.vb&&!1!==a.vb&&Ci([h.aa.x,h.aa.y,r.x,r.y,s.x,s.y,a.x,a.y,d.W.x,d.W.y],0,10,2)!==!n||(t.b[l++]=r.gb,t.b[l++]=s.gb,t.b[l++]=a.gb,Xs(c,u,e,o),u===p&&(p=d),f=!0)}h=Rs(e),c=Ts(e),u=Ms(e),d=xs(e)}while(c!==p&&3<e.c);return f}function Hs(t,e,o,i){var n=Cs(e);Ms(e);var r=n,s=Ms(e),a=!1;do{var l=Qs(r.aa,r.W,s.aa,s.W,i);if(l){var p,a=t.b.length,h=t.a.length/2,c=Is(e);if(As(e),o.remove(c),p=c===n,i?(l[0]===r.aa.x&&l[1]===r.aa.y?(Is(e),l=r.aa,s.aa=l,o.remove(r),p=p||r===n):(l=s.W,r.W=l,o.remove(s),p=p||s===n),As(e)):(l=Ys(t,l[0],l[1],h),r.W=l,s.aa=l,Gs(o,[Math.min(r.aa.x,r.W.x),Math.min(r.aa.y,r.W.y),Math.max(r.aa.x,r.W.x),Math.max(r.aa.y,r.W.y)],r),Gs(o,[Math.min(s.aa.x,s.W.x),Math.min(s.aa.y,s.W.y),Math.max(s.aa.x,s.W.x),Math.max(s.aa.y,s.W.y)],s)),t.b[a++]=c.aa.gb,t.b[a++]=c.W.gb,t.b[a++]=l.gb,a=!0,p)break}r=Rs(e),s=Ms(e)}while(r!==n);return a}function qs(t,e){var o=Cs(t),i=o;do{if(Js(i,e).length)return!1;i=Ms(t)}while(i!==o);return!0}function Ys(t,e,o,i){var n=t.a.length;return t.a[n++]=e,t.a[n++]=o,{x:e,y:o,gb:i,vb:void 0}}function Ks(t,e,o,i){var n={aa:t,W:e},r={ub:void 0,next:void 0,data:n},s=o.b;if(s){var a=s.next;r.ub=s,r.next=a,s.next=r,a&&(a.ub=r),s===o.a&&(o.a=r)}else o.f=r,o.a=r,o.i&&(r.next=r,r.ub=r);return o.b=r,o.c++,i&&i.Ea([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],n),n}function Xs(t,e,o,i){Ts(o)===e&&(As(o),t.W=e.W,i.remove(e),Gs(i,[Math.min(t.aa.x,t.W.x),Math.min(t.aa.y,t.W.y),Math.max(t.aa.x,t.W.x),Math.max(t.aa.y,t.W.y)],t))}function Zs(t,e,o,i,n){var r,s,a,l=[],p=Ns(i,[Math.min(t.x,e.x,o.x),Math.min(t.y,e.y,o.y),Math.max(t.x,e.x,o.x),Math.max(t.y,e.y,o.y)]);for(i=0,r=p.length;i<r;++i)for(s in p[i])"object"!=typeof(a=p[i][s])||n&&!a.vb||a.x===t.x&&a.y===t.y||a.x===e.x&&a.y===e.y||a.x===o.x&&a.y===o.y||-1!==l.indexOf(a)||!bi([t.x,t.y,e.x,e.y,o.x,o.y],0,6,2,a.x,a.y)||l.push(a);return l}function Js(t,e,o){var i=t.aa,n=t.W;e=Ns(e,[Math.min(i.x,n.x),Math.min(i.y,n.y),Math.max(i.x,n.x),Math.max(i.y,n.y)]);var r,s,a=[];for(r=0,s=e.length;r<s;++r){var l=e[r];t!==l&&(o||l.aa!==n||l.W!==i)&&Qs(i,n,l.aa,l.W,o)&&a.push(l)}return a}function Qs(t,e,o,i,n){var r=(i.y-o.y)*(e.x-t.x)-(i.x-o.x)*(e.y-t.y);if(r&&(i=((i.x-o.x)*(t.y-o.y)-(i.y-o.y)*(t.x-o.x))/r,o=((e.x-t.x)*(t.y-o.y)-(e.y-t.y)*(t.x-o.x))/r,!n&&i>hm&&i<1-hm&&o>hm&&o<1-hm||n&&0<=i&&1>=i&&0<=o&&1>=o))return[t.x+i*(e.x-t.x),t.y+i*(e.y-t.y)]}function $s(t,e,o,i,n){if(void 0===e.vb||void 0===i.vb)return!1;var r=(o.x-i.x)*(e.y-i.y)>(o.y-i.y)*(e.x-i.x);return n=(n.x-i.x)*(e.y-i.y)<(n.y-i.y)*(e.x-i.x),t=(t.x-e.x)*(i.y-e.y)>(t.y-e.y)*(i.x-e.x),o=(o.x-e.x)*(i.y-e.y)<(o.y-e.y)*(i.x-e.x),e=e.vb?o||t:o&&t,(i.vb?n||r:n&&r)&&e}function ta(){}function ea(t,e,o){this.g=e,this.l=t,this.c=o,this.a={}}function oa(t,e){var o,i=[];for(o in t.a){var n,r=t.a[o];for(n in r)i.push(r[n].Cb(e))}return function(){for(var t,e=i.length,o=0;o<e;o++)t=i[o].apply(this,arguments);return t}}function ia(t,e){for(var o in t.a){var i,n=t.a[o];for(i in n)n[i].Bb(e)}}function na(t,e,o,i,n,r,s,a,l,p,h){var c=Rm,u=Object.keys(t.a).map(Number);u.sort(function(t,e){return e-t});var d,f,y,g,m;for(d=0,f=u.length;d<f;++d)for(g=t.a[u[d].toString()],y=nm.length-1;0<=y;--y)if(void 0!==(m=g[nm[y]])&&(m=m.i(e,o,i,n,c,r,s,a,l,p,h)))return m}function ra(t,e,o,i,n,r,s,a){var l=o.b;return l.bindFramebuffer(l.FRAMEBUFFER,ts(o)),void 0!==na(t,o,e,i,n,r,s,a,function(){var t=new Uint8Array(4);return l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,t),0<t[3]},!1)}function sa(t,e,o,i,n,r,s){this.b=t,this.f=e,this.a=r,this.c=s,this.l=n,this.g=i,this.i=o,this.j=this.o=this.v=null}function aa(){this.c=0,this.b={},this.f=this.a=null}function la(t,e){yr.call(this,0,e),this.b=document.createElement("CANVAS"),this.b.style.width="100%",this.b.style.height="100%",this.b.style.display="block",this.b.className="ol-unselectable",t.insertBefore(this.b,t.childNodes[0]||null),this.u=this.A=0,this.C=Ee(),this.o=!0,this.f=qe(this.b,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.i=new Jr(this.b,this.f),Jt(this.b,"webglcontextlost",this.nn,this),Jt(this.b,"webglcontextrestored",this.pn,this),this.a=new aa,this.I=null,this.l=new Eo(function(t){var e=t[1];t=t[2];var o=e[0]-this.I[0],e=e[1]-this.I[1];return 65536*Math.log(t)+Math.sqrt(o*o+e*e)/t}.bind(this),function(t){return t[0].ib()}),this.G=function(){if(this.l.b.length){Ao(this.l);var t=So(this.l);pa(this,t[0],t[3],t[4])}return!1}.bind(this),this.g=0,ca(this)}function pa(t,e,o,i){var n=t.f,r=e.ib();if(t.a.b.hasOwnProperty(r))t=t.a.get(r),n.bindTexture(3553,t.Fb),9729!=t.Bh&&(n.texParameteri(3553,10240,9729),t.Bh=9729),9729!=t.Dh&&(n.texParameteri(3553,10241,9729),t.Dh=9729);else{var s=n.createTexture();if(n.bindTexture(3553,s),0<i){var a=t.C.canvas,l=t.C;t.A!==o[0]||t.u!==o[1]?(a.width=o[0],a.height=o[1],t.A=o[0],t.u=o[1]):l.clearRect(0,0,o[0],o[1]),l.drawImage(e.Z(),i,i,o[0],o[1],0,0,o[0],o[1]),n.texImage2D(3553,0,6408,6408,5121,a)}else n.texImage2D(3553,0,6408,6408,5121,e.Z());n.texParameteri(3553,10240,9729),n.texParameteri(3553,10241,9729),n.texParameteri(3553,10242,33071),n.texParameteri(3553,10243,33071),t.a.set(r,{Fb:s,Bh:9729,Dh:9729})}}function ha(t,e,o){var i=t.j;if(ae(i,e)){t=t.i;var n=o.viewState;i.b(new Er(e,new sa(t,n.center,n.resolution,n.rotation,o.size,o.extent,o.pixelRatio),o,null,t))}}function ca(t){t=t.f,t.activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)}function ua(t){pe.call(this);var e=da(t);this.rf=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.sf=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.xf=void 0!==t.pixelRatio?t.pixelRatio:Cg,this.pf=e.logos,this.ia=function(){this.g=void 0,this.hp.call(this,Date.now())}.bind(this),this.mb=nr(),this.yf=nr(),this.Bd=0,this.a=null,this.lb=D(),this.G=this.R=this.S=null,this.c=document.createElement("DIV"),this.c.className="ol-viewport"+(Tg?" ol-touch":""),this.c.style.position="relative",this.c.style.overflow="hidden",this.c.style.width="100%",this.c.style.height="100%",this.c.style.msTouchAction="none",this.c.style.touchAction="none",this.A=document.createElement("DIV"),this.A.className="ol-overlaycontainer",this.c.appendChild(this.A),this.u=document.createElement("DIV"),this.u.className="ol-overlaycontainer-stopevent",t="click dblclick mousedown touchstart mspointerdown pointerdown mousewheel wheel".split(" ");for(var o=0,i=t.length;o<i;++o)Jt(this.u,t[o],re);this.c.appendChild(this.u),this.Ja=new vo(this);for(var n in mg)Jt(this.Ja,mg[n],this.uh,this);this.oa=e.keyboardEventTarget,this.v=null,Jt(this.c,"wheel",this.ld,this),Jt(this.c,"mousewheel",this.ld,this),this.j=e.controls,this.l=e.interactions,this.o=e.overlays,this.dg={},this.C=new e.jp(this.c,this),this.Y=null,this.Oa=[],this.Ha=new Co(this.Wk.bind(this),this.Cl.bind(this)),this.ea={},Jt(this,he("layergroup"),this.kl,this),Jt(this,he("view"),this.Dl,this),Jt(this,he("size"),this.zl,this),Jt(this,he("target"),this.Bl,this),this.H(e.values),this.j.forEach(function(t){t.setMap(this)},this),Jt(this.j,"add",function(t){t.element.setMap(this)},this),Jt(this.j,"remove",function(t){t.element.setMap(null)},this),this.l.forEach(function(t){t.setMap(this)},this),Jt(this.l,"add",function(t){t.element.setMap(this)},this),Jt(this.l,"remove",function(t){t.element.setMap(null)},this),this.o.forEach(this.Ug,this),Jt(this.o,"add",function(t){this.Ug(t.element)},this),Jt(this.o,"remove",function(t){var e=t.element.g;void 0!==e&&delete this.dg[e.toString()],t.element.setMap(null)},this)}function da(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var o={},i={};if(void 0===t.logo||"boolean"==typeof t.logo&&t.logo)i["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="https://openlayers.org/";else{var n=t.logo;"string"==typeof n?i[n]="":n instanceof HTMLElement?i[u(n).toString()]=n:n&&(f("string"==typeof n.href,44),f("string"==typeof n.src,45),i[n.src]=n.href)}n=t.layers instanceof Xn?t.layers:new Xn({layers:t.layers}),o.layergroup=n,o.target=t.target,o.view=void 0!==t.view?t.view:new ki;var r,n=yr;void 0!==t.renderer?(Array.isArray(t.renderer)?r=t.renderer:"string"==typeof t.renderer?r=[t.renderer]:f(!1,46),0<=r.indexOf("dom")&&(r=r.concat(Lm))):r=Lm;var s,a;for(s=0,a=r.length;s<a;++s){var l=r[s];if("canvas"==l){if(xg){n=Tr;break}}else if("webgl"==l&&vg){n=la;break}}return void 0!==t.controls?Array.isArray(t.controls)?r=new de(t.controls.slice()):(f(t.controls instanceof de,47),r=t.controls):r=Ne(),void 0!==t.interactions?Array.isArray(t.interactions)?s=new de(t.interactions.slice()):(f(t.interactions instanceof de,48),s=t.interactions):s=qn(),void 0!==t.overlays?Array.isArray(t.overlays)?t=new de(t.overlays.slice()):(f(t.overlays instanceof de,49),t=t.overlays):t=new de,{controls:r,interactions:s,keyboardEventTarget:e,logos:i,overlays:t,jp:n,values:o}}function fa(t){pe.call(this),this.g=t.id,this.o=void 0===t.insertFirst||t.insertFirst,this.v=void 0===t.stopEvent||t.stopEvent,this.c=document.createElement("DIV"),this.c.className="ol-overlay-container",this.c.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.l=t.autoPanAnimation||{},this.j=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.a={me:"",Ce:"",bf:"",kf:"",visible:!0},this.i=null,Jt(this,he(Gm),this.fl,this),Jt(this,he(Om),this.pl,this),Jt(this,he(Nm),this.tl,this),Jt(this,he(km),this.vl,this),Jt(this,he(Dm),this.wl,this),void 0!==t.element&&this.Gi(t.element),this.Ni(void 0!==t.offset?t.offset:[0,0]),this.Qi(void 0!==t.positioning?t.positioning:"top-left"),void 0!==t.position&&this.Wf(t.position)}function ya(t,e){var o=t.getBoundingClientRect(),i=o.left+window.pageXOffset,o=o.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]}function ga(t,e){t.a.visible!==e&&(t.c.style.display=e?"":"none",t.a.visible=e)}function ma(t){var e=t.Ge(),o=t.Kh();if(e&&e.a&&o){var o=e.Ka(o),i=e.Mb(),e=t.c.style,n=t.qh(),r=t.rh(),s=n[0],n=n[1];"bottom-right"==r||"center-right"==r||"top-right"==r?(""!==t.a.Ce&&(t.a.Ce=e.left=""),s=Math.round(i[0]-o[0]-s)+"px",t.a.bf!=s&&(t.a.bf=e.right=s)):(""!==t.a.bf&&(t.a.bf=e.right=""),"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(s-=t.c.offsetWidth/2),s=Math.round(o[0]+s)+"px",t.a.Ce!=s&&(t.a.Ce=e.left=s)),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?(""!==t.a.kf&&(t.a.kf=e.top=""),o=Math.round(i[1]-o[1]-n)+"px",t.a.me!=o&&(t.a.me=e.bottom=o)):(""!==t.a.me&&(t.a.me=e.bottom=""),"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(n-=t.c.offsetHeight/2),o=Math.round(o[1]+n)+"px",t.a.kf!=o&&(t.a.kf=e.top=o)),ga(t,!0)}else ga(t,!1)}function va(t){t=t||{},this.l=void 0===t.collapsed||t.collapsed,this.j=void 0===t.collapsible||t.collapsible,this.j||(this.l=!1);var e=void 0!==t.className?t.className:"ol-overviewmap",o=void 0!==t.tipLabel?t.tipLabel:"Overview map",i=void 0!==t.collapseLabel?t.collapseLabel:"«";"string"==typeof i?(this.o=document.createElement("span"),this.o.textContent=i):this.o=i,i=void 0!==t.label?t.label:"»","string"==typeof i?(this.u=document.createElement("span"),this.u.textContent=i):this.u=i;var n=this.j&&!this.l?this.o:this.u,i=document.createElement("button");i.setAttribute("type","button"),i.title=o,i.appendChild(n),Jt(i,"click",this.Em,this),this.C=document.createElement("DIV"),this.C.className="ol-overviewmap-map";var r=this.c=new ua({controls:new de,interactions:new de,view:t.view});t.layers&&t.layers.forEach(function(t){r.Sg(t)},this),o=document.createElement("DIV"),o.className="ol-overviewmap-box",o.style.boxSizing="border-box",this.A=new fa({position:[0,0],positioning:"bottom-left",element:o}),this.c.Tg(this.A),o=document.createElement("div"),o.className=e+" ol-unselectable ol-control"+(this.l&&this.j?" ol-collapsed":"")+(this.j?"":" ol-uncollapsible"),o.appendChild(this.C),o.appendChild(i),we.call(this,{element:o,render:t.render?t.render:_a,target:t.target})}function _a(){var t=this.a,e=this.c;if(t.a&&e.a){var o=t.Mb(),t=t.$().ed(o),i=e.Mb(),o=e.$().ed(i),n=e.Ka($(t)),r=e.Ka(K(t)),e=Math.abs(n[0]-r[0]),n=Math.abs(n[1]-r[1]),r=i[0],i=i[1];e<.1*r||n<.1*i||e>.75*r||n>.75*i?ba(this):O(o,t)||(t=this.c,o=this.a.$(),t.$().wb(o.Ba()))}Ea(this)}function ba(t){var e=t.a;t=t.c;var o=e.Mb(),e=e.$().ed(o);t=t.$(),nt(e,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2))),t.Ff(e)}function Ea(t){var e=t.a,o=t.c;if(e.a&&o.a){var i,n=e.Mb(),r=e.$(),s=o.$(),o=r.Va(),e=t.A,a=t.A.se(),l=r.ed(n),n=s.Ua(),r=Y(l),s=tt(l);(t=t.a.$().Ba())&&(i=[r[0]-t[0],r[1]-t[1]],Bo(i,o),ko(i,t)),e.Wf(i),a&&(a.style.width=Math.abs((r[0]-s[0])/n)+"px",a.style.height=Math.abs((s[1]-r[1])/n)+"px")}}function Sa(t){t.element.classList.toggle("ol-collapsed"),t.l?Se(t.o,t.u):Se(t.u,t.o),t.l=!t.l;var e=t.c;t.l||e.a||(e.xd(),ba(t),Qt(e,"postrender",function(){Ea(this)},t))}function Pa(t){t=t||{};var e=void 0!==t.className?t.className:"ol-scale-line";this.j=document.createElement("DIV"),this.j.className=e+"-inner",this.c=document.createElement("DIV"),this.c.className=e+" ol-unselectable",this.c.appendChild(this.j),this.u=null,this.o=void 0!==t.minWidth?t.minWidth:64,this.l=!1,this.C=void 0,this.A="",we.call(this,{element:this.c,render:t.render?t.render:wa,target:t.target}),Jt(this,he(Fm),this.R,this),this.G(t.units||"metric")}function wa(t){(t=t.frameState)?this.u=t.viewState:this.u=null,Aa(this)}function Aa(t){var e=t.u;if(e){var o=e.projection,i=o.sc(),e=dt(o,e.resolution,e.center)*i,i=t.o*e,o="",n=t.Jb();"degrees"==n?(o=ng.degrees,e/=o,i<o/60?(o="″",e*=3600):i<o?(o="′",e*=60):o="°"):"imperial"==n?.9144>i?(o="in",e/=.0254):1609.344>i?(o="ft",e/=.3048):(o="mi",e/=1609.344):"nautical"==n?(e/=1852,o="nm"):"metric"==n?1>i?(o="mm",e*=1e3):1e3>i?o="m":(o="km",e/=1e3):"us"==n?.9144>i?(o="in",e*=39.37):1609.344>i?(o="ft",e/=.30480061):(o="mi",e/=1609.3472):f(!1,33);for(var r,n=3*Math.floor(Math.log(t.o*e)/Math.log(10));;){if(r=jm[(n%3+3)%3]*Math.pow(10,Math.floor(n/3)),i=Math.round(r/e),isNaN(i))return t.c.style.display="none",void(t.l=!1);if(i>=t.o)break;++n}e=r+" "+o,t.A!=e&&(t.j.innerHTML=e,t.A=e),t.C!=i&&(t.j.style.width=i+"px",t.C=i),t.l||(t.c.style.display="",t.l=!0)}else t.l&&(t.c.style.display="none",t.l=!1)}function Ca(t){t=t||{},this.c=void 0,this.l=Um,this.A=this.o=0,this.R=null,this.ea=!1,this.Y=void 0!==t.duration?t.duration:200;var e=void 0!==t.className?t.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb ol-unselectable";var i=document.createElement("div");i.className=e+" ol-unselectable ol-control",i.appendChild(o),this.j=new ao(i),Jt(this.j,"pointerdown",this.el,this),Jt(this.j,"pointermove",this.cl,this),Jt(this.j,"pointerup",this.dl,this),Jt(i,"click",this.bl,this),Jt(o,"click",re),we.call(this,{element:i,render:t.render?t.render:Ma})}function Ma(t){if(t.frameState){if(!this.ea){var e=this.element,o=e.offsetWidth,i=e.offsetHeight,n=e.firstElementChild,r=getComputedStyle(n),e=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),n=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.R=[e,n],o>i?(this.l=1,this.A=o-e):(this.l=Um,this.o=i-n),this.ea=!0}t=t.frameState.viewState.resolution,t!==this.c&&(this.c=t,xa(this,t))}}function xa(t,e){var o;o=1-zi(t.a.$())(e);var i=t.element.firstElementChild;1==t.l?i.style.left=t.A*o+"px":i.style.top=t.o*o+"px"}function Ia(t,e){return Wi(t.a.$())(1-e)}function Ra(t){t=t||{},this.c=t.extent?t.extent:null;var e=void 0!==t.className?t.className:"ol-zoom-extent",o=void 0!==t.label?t.label:"E",i=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",n=document.createElement("button");n.setAttribute("type","button"),n.title=i,n.appendChild("string"==typeof o?document.createTextNode(o):o),Jt(n,"click",this.l,this),o=document.createElement("div"),o.className=e+" ol-unselectable ol-control",o.appendChild(n),we.call(this,{element:o,target:t.target})}function Ta(t){pe.call(this),t=t||{},this.a=null,Jt(this,he(Hm),this.cm,this),this.Uf(void 0!==t.tracking&&t.tracking)}function La(t){this.g=t.opacity,this.o=t.rotateWithView,this.l=t.rotation,this.c=t.scale,this.v=t.snapToPixel}function Ga(t){this.A=this.I=this.i=null,this.Wa=void 0!==t.fill?t.fill:null,this.qa=[0,0],this.b=t.points,this.a=void 0!==t.radius?t.radius:t.radius1,this.f=void 0!==t.radius2?t.radius2:this.a,this.j=void 0!==t.angle?t.angle:0,this.Ya=void 0!==t.stroke?t.stroke:null,this.G=this.ta=this.C=null,this.u=t.atlasManager,Oa(this,this.u),La.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel})}function Oa(t,e){var o,i,n="",r="",s=0,a=null,l=0;t.Ya&&(i=_e(t.Ya.a),l=t.Ya.c,void 0===l&&(l=1),a=t.Ya.f,Mg||(a=null),r=t.Ya.l,void 0===r&&(r="round"),n=t.Ya.i,void 0===n&&(n="round"),void 0===(s=t.Ya.j)&&(s=10));var p=2*(t.a+l)+1,n={strokeStyle:i,Vi:l,size:p,lineCap:n,lineDash:a,lineJoin:r,miterLimit:s};void 0===e?(r=Ee(p,p),t.I=r.canvas,o=p=t.I.width,t.ah(n,r,0,0),t.Wa?t.A=t.I:(r=Ee(n.size,n.size),t.A=r.canvas,t.$g(n,r,0,0))):(p=Math.round(p),(r=!t.Wa)&&(o=t.$g.bind(t,n)),t.Ya?(s=t.Ya,void 0===s.b&&(s.b="s",s.b=s.a?"string"==typeof s.a?s.b+s.a:s.b+u(s.a).toString():s.b+"-",s.b+=","+(void 0!==s.i?s.i.toString():"-")+","+(s.f?s.f.toString():"-")+","+(void 0!==s.g?s.g:"-")+","+(void 0!==s.l?s.l:"-")+","+(void 0!==s.j?s.j.toString():"-")+","+(void 0!==s.c?s.c.toString():"-")),s=s.b):s="-",t.Wa?(a=t.Wa,void 0===a.a&&(a.a=a.b instanceof CanvasPattern||a.b instanceof CanvasGradient?u(a.b).toString():"f"+(a.b?me(a.b):"-")),a=a.a):a="-",t.i&&s==t.i[1]&&a==t.i[2]&&t.a==t.i[3]&&t.f==t.i[4]&&t.j==t.i[5]&&t.b==t.i[6]||(t.i=["r"+s+a+(void 0!==t.a?t.a.toString():"-")+(void 0!==t.f?t.f.toString():"-")+(void 0!==t.j?t.j.toString():"-")+(void 0!==t.b?t.b.toString():"-"),s,a,t.a,t.f,t.j,t.b]),n=e.add(t.i[0],p,p,t.ah.bind(t,n),o),t.I=n.image,t.qa=[n.offsetX,n.offsetY],o=n.image.width,t.A=r?n.Fl:t.I),t.C=[p/2,p/2],t.ta=[p,p],t.G=[o,o]}function Na(t){t=t||{},Ga.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})}function ka(t){t=t||{},this.b=void 0!==t.color?t.color:null,this.a=void 0}function Da(t){t=t||{},this.Gc=null,this.Ra=Ba,void 0!==t.geometry&&this.Sa(t.geometry),this.Wa=void 0!==t.fill?t.fill:null,this.M=void 0!==t.image?t.image:null,this.Ya=void 0!==t.stroke?t.stroke:null,this.Fa=void 0!==t.text?t.text:null,this.kj=t.zIndex}function ja(t){if("function"!=typeof t){var e;Array.isArray(t)?e=t:(f(t instanceof Da,41),e=[t]),t=function(){return e}}return t}function Fa(){if(!qm){var t=new ka({color:"rgba(255,255,255,0.4)"}),e=new Ps({color:"#3399CC",width:1.25});qm=[new Da({image:new Na({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return qm}function Ua(){var t={},e=[255,255,255,1],o=[0,153,255,1];return t.Polygon=[new Da({fill:new ka({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Da({stroke:new Ps({color:e,width:5})}),new Da({stroke:new Ps({color:o,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Da({image:new Na({radius:6,fill:new ka({color:o}),stroke:new Ps({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,
t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Ba(t){return t.U()}function Va(t){pe.call(this),this.a=void 0,this.c="geometry",this.g=null,this.l=void 0,this.i=null,Jt(this,he(this.c),this.ye,this),void 0!==t&&(t instanceof Xo||!t?this.Sa(t):this.H(t))}function Wa(t){var e;if("function"==typeof t)e=2==t.length?function(e){return t(this,e)}:t;else{var o;Array.isArray(t)?o=t:(f(t instanceof Da,41),o=[t]),e=function(){return o}}return e}function za(t,e){return Ym.createElementNS(t,e)}function Ha(t,e){return qa(t,e,[]).join("")}function qa(t,e,o){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?o.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):o.push(t.nodeValue);else for(t=t.firstChild;t;t=t.nextSibling)qa(t,e,o);return o}function Ya(t){return t instanceof Document}function Ka(t){return t instanceof Node}function Xa(t){return(new DOMParser).parseFromString(t,"application/xml")}function Za(t,e){return function(o,i){var r=t.call(e,o,i);void 0!==r&&n(i[i.length-1],r)}}function Ja(t,e){return function(o,i){var n=t.call(void 0!==e?e:this,o,i);void 0!==n&&i[i.length-1].push(n)}}function Qa(t,e){return function(o,i){var n=t.call(void 0!==e?e:this,o,i);void 0!==n&&(i[i.length-1]=n)}}function $a(t){return function(e,o){var i=t.call(this,e,o);if(void 0!==i){var n,r=o[o.length-1],s=e.localName;n=s in r?r[s]:r[s]=[],n.push(i)}}}function tl(t,e){return function(o,i){var n=t.call(this,o,i);void 0!==n&&(i[i.length-1][void 0!==e?e:o.localName]=n)}}function el(t,e){return function(o,i,n){t.call(void 0!==e?e:this,o,i,n),n[n.length-1].node.appendChild(o)}}function ol(t){var e,o;return function(i,n,r){if(!e){e={};var s={};s[i.localName]=t,e[i.namespaceURI]=s,o=il(i.localName)}ll(e,o,n,r)}}function il(t,e){return function(o,i,n){return o=i[i.length-1].node,i=t,void 0===i&&(i=n),n=e,void 0===e&&(n=o.namespaceURI),za(n,i)}}function nl(t,e){for(var o=e.length,i=Array(o),n=0;n<o;++n)i[n]=t[e[n]];return i}function rl(t,e,o){o=void 0!==o?o:{};var i,n;for(i=0,n=t.length;i<n;++i)o[t[i]]=e;return o}function sl(t,e,o,i){for(e=e.firstElementChild;e;e=e.nextElementSibling){var n=t[e.namespaceURI];void 0!==n&&(n=n[e.localName])&&n.call(i,e,o)}}function al(t,e,o,i,n){return i.push(t),sl(e,o,i,n),i.pop()}function ll(t,e,o,i,n,r){for(var s,a,l=(void 0!==n?n:o).length,p=0;p<l;++p)void 0!==(s=o[p])&&void 0!==(a=e.call(r,s,i,void 0!==n?n[p]:void 0))&&t[a.namespaceURI][a.localName].call(r,a,s,i)}function pl(t,e,o,i,n,r,s){n.push(t),ll(e,o,i,n,r,s),n.pop()}function hl(t,e,o,i){return function(n,r,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,r,s):t,!0),"arraybuffer"==e.T()&&(a.responseType="arraybuffer"),a.onload=function(){if(!a.status||200<=a.status&&300>a.status){var t,n=e.T();"json"==n||"text"==n?t=a.responseText:"xml"==n?(t=a.responseXML)||(t=Xa(a.responseText)):"arraybuffer"==n&&(t=a.response),t?o.call(this,e.Qa(t,{featureProjection:s}),e.kb(t)):i.call(this)}else i.call(this)}.bind(this),a.send()}}function cl(t,e){return hl(t,e,function(t){this.dd(t)},c)}function ul(){this.g=this.defaultDataProjection=null}function dl(t,e,o){var i;return o&&(i={dataProjection:o.dataProjection?o.dataProjection:t.kb(e),featureProjection:o.featureProjection}),fl(t,i)}function fl(t,e){return og({dataProjection:t.defaultDataProjection,featureProjection:t.g},e)}function yl(t,e,o){var i,n=o?Et(o.featureProjection):null,r=o?Et(o.dataProjection):null;if(i=n&&r&&!St(n,r)?t instanceof Xo?(e?t.clone():t).tb(e?n:r,e?r:n):xt(e?t.slice():t,e?n:r,e?r:n):t,e&&o&&o.decimals){var s=Math.pow(10,o.decimals);t=function(t){for(var e=0,o=t.length;e<o;++e)t[e]=Math.round(t[e]*s)/s;return t},Array.isArray(i)?t(i):i.Dc(t)}return i}function gl(){ul.call(this)}function ml(t){return"string"==typeof t?(t=JSON.parse(t))?t:null:null!==t?t:null}function vl(t,o,i,n,r,s){var a=NaN,l=NaN,p=(i-o)/n;if(1===p)a=t[o],l=t[o+1];else if(2==p)a=(1-r)*t[o]+r*t[o+n],l=(1-r)*t[o+1]+r*t[o+n+1];else if(p){var h,l=t[o],p=t[o+1],c=0,a=[0];for(h=o+n;h<i;h+=n){var u=t[h],d=t[h+1],c=c+Math.sqrt((u-l)*(u-l)+(d-p)*(d-p));a.push(c),l=u,p=d}for(i=r*c,p=0,c=a.length,h=!1;p<c;)r=p+(c-p>>1),l=+e(a[r],i),0>l?p=r+1:(c=r,h=!l);r=h?p:~p,0>r?(i=(i-a[-r-2])/(a[-r-1]-a[-r-2]),o+=(-r-2)*n,a=A(t[o],t[o+n],i),l=A(t[o+1],t[o+n+1],i)):(a=t[o+r*n],l=t[o+r*n+1])}return s?(s[0]=a,s[1]=l,s):[a,l]}function _l(t,e,o,i,n,r){if(o==e)return null;if(n<t[e+i-1])return r?(o=t.slice(e,e+i),o[i-1]=n,o):null;if(t[o-1]<n)return r?(o=t.slice(o-i,o),o[i-1]=n,o):null;if(n==t[e+i-1])return t.slice(e,e+i);for(e/=i,o/=i;e<o;)r=e+o>>1,n<t[(r+1)*i-1]?o=r:e=r+1;if(o=t[e*i-1],n==o)return t.slice((e-1)*i,(e-1)*i+i);r=(n-o)/(t[(e+1)*i-1]-o),o=[];var s;for(s=0;s<i-1;++s)o.push(A(t[(e-1)*i+s],t[e*i+s],r));return o.push(n),o}function bl(t,e,o,i,n,r){var s=0;if(r)return _l(t,s,e[e.length-1],o,i,n);if(i<t[o-1])return n?(t=t.slice(0,o),t[o-1]=i,t):null;if(t[t.length-1]<i)return n?(t=t.slice(t.length-o),t[o-1]=i,t):null;for(n=0,r=e.length;n<r;++n){var a=e[n];if(s!=a){if(i<t[s+o-1])break;if(i<=t[a-1])return _l(t,s,a,o,i,!1);s=a}}return null}function El(t,e){Qo.call(this),this.c=null,this.u=this.A=this.l=-1,this.pa(t,e)}function Sl(t){return t.l!=t.f&&(t.c=t.hh(.5,t.c),t.l=t.f),t.c}function Pl(t,e){Qo.call(this),this.c=[],this.l=this.u=-1,this.pa(t,e)}function wl(t){var e=[],o=t.B,i=0,r=t.c;t=t.a;var s,a;for(s=0,a=r.length;s<a;++s){var l=r[s],i=vl(o,i,l,t,.5);n(e,i),i=l}return e}function Al(t,e){var o,i,r=t.ka,s=[],a=[];for(o=0,i=e.length;o<i;++o){var l=e[o];o||(r=l.ka),n(s,l.ha()),a.push(s.length)}t.ca(r,s,a)}function Cl(t,e){Qo.call(this),this.pa(t,e)}function Ml(t,e){Qo.call(this),this.c=[],this.u=-1,this.A=null,this.R=this.C=this.G=-1,this.l=null,this.pa(t,e)}function xl(t){if(t.u!=t.f){var e,o,i=t.B,n=t.c,r=t.a,s=0,a=[];for(e=0,o=n.length;e<o;++e){var l=n[e],s=U(i,s,l[0],r);a.push((s[0]+s[2])/2,(s[1]+s[3])/2),s=l[l.length-1]}for(i=Il(t),n=t.c,r=t.a,e=0,o=[],l=0,s=n.length;l<s;++l){var p=n[l];o=Si(i,e,p,r,a,2*l,o),e=p[p.length-1]}t.A=o,t.u=t.f}return t.A}function Il(t){if(t.R!=t.f){var e,o=t.B;t:{e=t.c;var i,n;for(i=0,n=e.length;i<n;++i)if(!Mi(o,e[i],t.a,void 0)){e=!1;break t}e=!0}e?t.l=o:(t.l=o.slice(),t.l.length=Ii(t.l,t.c,t.a)),t.R=t.f}return t.l}function Rl(t,e,o,i){ti(t,e,o),t.c=i,t.s()}function Tl(t,e){var o,i,r,s=t.ka,a=[],l=[];for(o=0,i=e.length;o<i;++o){var p=e[o];o||(s=p.ka);var h=a.length;r=p.Rb();var c,u;for(c=0,u=r.length;c<u;++c)r[c]+=h;n(a,p.ha()),l.push(r)}Rl(t,s,a,l)}function Ll(t){t=t||{},ul.call(this),this.b=t.geometryName}function Gl(t,e){if(!t)return null;var o;if("number"==typeof t.x&&"number"==typeof t.y)o="Point";else if(t.points)o="MultiPoint";else if(t.paths)o=1===t.paths.length?"LineString":"MultiLineString";else if(t.rings){var i=t.rings,n=Ol(t),r=[],s=[];o=[];var a,l;for(a=0,l=i.length;a<l;++a)r.length=0,hi(r,0,i[a],n.length),Ci(r,0,r.length,n.length)?s.push([i[a]]):o.push(i[a]);for(;o.length;){for(i=o.shift(),n=!1,a=s.length-1;0<=a;a--)if(O(new gi(s[a][0]).D(),new gi(i).D())){s[a].push(i),n=!0;break}n||s.push([i.reverse()])}t=og({},t),1===s.length?(o="Polygon",t.rings=s[0]):(o="MultiPolygon",t.rings=s)}return yl((0,Xm[o])(t),!1,e)}function Ol(t){var e="XY";return!0===t.hasZ&&!0===t.hasM?e="XYZM":!0===t.hasZ?e="XYZ":!0===t.hasM&&(e="XYM"),e}function Nl(t){return t=t.ka,{hasZ:"XYZ"===t||"XYZM"===t,hasM:"XYM"===t||"XYZM"===t}}function kl(t,e){return(0,Zm[t.T()])(yl(t,!0,e),e)}function Dl(t){this.Bc=t}function jl(t,e){this.Bc=t,this.b=Array.prototype.slice.call(arguments,1),f(2<=this.b.length,57)}function Fl(t){var e=["And"].concat(Array.prototype.slice.call(arguments));jl.apply(this,e)}function Ul(t,e,o){this.Bc="BBOX",this.geometryName=t,this.extent=e,this.srsName=o}function Bl(t,e){this.Bc=t,this.b=e}function Vl(t,e,o,i){Bl.call(this,t,e),this.f=o,this.a=i}function Wl(t,e,o){Vl.call(this,"PropertyIsEqualTo",t,e,o)}function zl(t,e){Vl.call(this,"PropertyIsGreaterThan",t,e)}function Hl(t,e){Vl.call(this,"PropertyIsGreaterThanOrEqualTo",t,e)}function ql(t,e,o,i){this.Bc=t,this.geometryName=e||"the_geom",this.geometry=o,this.srsName=i}function Yl(t,e,o){ql.call(this,"Intersects",t,e,o)}function Kl(t,e,o){Bl.call(this,"PropertyIsBetween",t),this.a=e,this.f=o}function Xl(t,e,o,i,n,r){Bl.call(this,"PropertyIsLike",t),this.c=e,this.g=void 0!==o?o:"*",this.i=void 0!==i?i:".",this.f=void 0!==n?n:"!",this.a=r}function Zl(t){Bl.call(this,"PropertyIsNull",t)}function Jl(t,e){Vl.call(this,"PropertyIsLessThan",t,e)}function Ql(t,e){Vl.call(this,"PropertyIsLessThanOrEqualTo",t,e)}function $l(t){this.Bc="Not",this.condition=t}function tp(t,e,o){Vl.call(this,"PropertyIsNotEqualTo",t,e,o)}function ep(t){var e=["Or"].concat(Array.prototype.slice.call(arguments));jl.apply(this,e)}function op(t,e,o){ql.call(this,"Within",t,e,o)}function ip(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Fl,e))}function np(t,e,o){return new Ul(t,e,o)}function rp(t){Xo.call(this),this.a=t||null,lp(this)}function sp(t){var e,o,i=[];for(e=0,o=t.length;e<o;++e)i.push(t[e].clone());return i}function ap(t){var e,o;if(t.a)for(e=0,o=t.a.length;e<o;++e)$t(t.a[e],"change",t.s,t)}function lp(t){var e,o;if(t.a)for(e=0,o=t.a.length;e<o;++e)Jt(t.a[e],"change",t.s,t)}function pp(t){t=t||{},ul.call(this),this.defaultDataProjection=Et(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326"),t.featureProjection&&(this.g=Et(t.featureProjection)),this.b=t.geometryName}function hp(t,e){return t?yl((0,Jm[t.type])(t),!1,e):null}function cp(t,e){return(0,Qm[t.T()])(yl(t,!0,e),e)}function up(){this.f=new XMLSerializer,ul.call(this)}function dp(t,e,o){return t=fp(t,e,o),0<t.length?t[0]:null}function fp(t,e,o){var i=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&n(i,t.yc(e,o));return i}function yp(t){t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.b={},this.b["http://www.opengis.net/gml"]={featureMember:Qa(yp.prototype.Xd),featureMembers:Qa(yp.prototype.Xd)},up.call(this)}function gp(t){return t=Ha(t,!1),mp(t)}function mp(t){if(t=/^\s*(true|1)|(false|0)\s*$/.exec(t))return void 0!==t[1]||!1}function vp(t){return t=Ha(t,!1),t=Date.parse(t),isNaN(t)?void 0:t/1e3}function _p(t){return t=Ha(t,!1),bp(t)}function bp(t){if(t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t))return parseFloat(t[1])}function Ep(t){return t=Ha(t,!1),Sp(t)}function Sp(t){if(t=/^\s*(\d+)\s*$/.exec(t))return parseInt(t[1],10)}function Pp(t){return Ha(t,!1).trim()}function wp(t,e){Mp(t,e?"1":"0")}function Ap(t,e){t.appendChild(Ym.createTextNode(e.toPrecision()))}function Cp(t,e){t.appendChild(Ym.createTextNode(e.toString()))}function Mp(t,e){t.appendChild(Ym.createTextNode(e))}function xp(t){t=t||{},yp.call(this,t),this.o=void 0!==t.surface&&t.surface,this.i=void 0!==t.curve&&t.curve,this.l=void 0===t.multiCurve||t.multiCurve,this.j=void 0===t.multiSurface||t.multiSurface,this.schemaLocation=t.schemaLocation?t.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}function Ip(t,e,o){o=o[o.length-1].srsName,e=e.X();for(var i,n=e.length,r=Array(n),s=0;s<n;++s){i=e[s];var a=s,l="enu";o&&(l=Et(o).b),r[a]="en"===l.substr(0,2)?i[0]+" "+i[1]:i[1]+" "+i[0]}Mp(t,r.join(" "))}function Rp(t){t=t||{},yp.call(this,t),this.b["http://www.opengis.net/gml"].featureMember=Ja(yp.prototype.Xd),this.schemaLocation=t.schemaLocation?t.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}function Tp(t){t=t||{},up.call(this),this.defaultDataProjection=Et("EPSG:4326"),this.b=t.readExtensions}function Lp(t,e,o,i){return t.push(parseFloat(o.getAttribute("lon")),parseFloat(o.getAttribute("lat"))),"ele"in i?(t.push(i.ele),delete i.ele,e.hasZ=!0):t.push(0),"time"in i?(t.push(i.time),delete i.time,e.hasM=!0):t.push(0),t}function Gp(t,e,o){var i="XY",n=2;if(t.hasZ&&t.hasM?(i="XYZM",n=4):t.hasZ?(i="XYZ",n=3):t.hasM&&(i="XYM",n=3),4!==n){var r,s;for(r=0,s=e.length/4;r<s;r++)e[r*n]=e[4*r],e[r*n+1]=e[4*r+1],t.hasZ&&(e[r*n+2]=e[4*r+2]),t.hasM&&(e[r*n+2]=e[4*r+3]);if(e.length=e.length/4*n,o)for(r=0,s=o.length;r<s;r++)o[r]=o[r]/4*n}return i}function Op(t,e){var o=e[e.length-1],i=t.getAttribute("href");null!==i&&(o.link=i),sl(hv,t,e)}function Np(t,e){e[e.length-1].extensionsNode_=t}function kp(t,e){var o=e[0],i=al({flatCoordinates:[],layoutOptions:{}},cv,t,e);if(i){var n=i.flatCoordinates;delete i.flatCoordinates;var r=i.layoutOptions;delete i.layoutOptions;var r=Gp(r,n),s=new El(null);return s.ca(r,n),yl(s,!1,o),o=new Va(s),o.H(i),o}}function Dp(t,e){var o=e[0],i=al({flatCoordinates:[],ends:[],layoutOptions:{}},dv,t,e);if(i){var n=i.flatCoordinates;delete i.flatCoordinates;var r=i.ends;delete i.ends;var s=i.layoutOptions;delete i.layoutOptions;var s=Gp(s,n,r),a=new Pl(null);return a.ca(s,n,r),yl(a,!1,o),o=new Va(a),o.H(i),o}}function jp(t,e){var o=e[0],i=al({},gv,t,e);if(i){var n={},r=Lp([],n,t,i),n=Gp(n,r),r=new vi(r,n);return yl(r,!1,o),o=new Va(r),o.H(i),o}}function Fp(t,e){e||(e=[]);for(var o=0,i=e.length;o<i;++o){var n=e[o];if(t.b){var r=n.get("extensionsNode_")||null;t.b(n,r)}n.set("extensionsNode_",void 0)}}function Up(t,e,o){t.setAttribute("href",e),e=o[o.length-1].properties,pl({node:t},vv,Km,[e.linkText,e.linkType],o,mv)}function Bp(t,e,o){var i=o[o.length-1],n=i.node.namespaceURI,r=i.properties;switch(t.setAttributeNS(null,"lat",e[1]),t.setAttributeNS(null,"lon",e[0]),i.geometryLayout){case"XYZM":e[3]&&(r.time=e[3]);case"XYZ":e[2]&&(r.ele=e[2]);break;case"XYM":e[2]&&(r.time=e[2])}e="rtept"==t.nodeName?Ev[n]:Cv[n],i=nl(r,e),pl({node:t,properties:r},Mv,Km,i,o,e)}function Vp(t,e){var o=t.U();if(o&&(o=xv[o.T()]))return za(e[e.length-1].node.namespaceURI,o)}function Wp(){ul.call(this)}function zp(t){return"string"==typeof t?t:""}function Hp(t){t=t||{},ul.call(this),this.defaultDataProjection=Et("EPSG:4326"),this.b=t.altitudeMode?t.altitudeMode:"none"}function qp(t,e,o,i,n,r){se.call(this),this.l=null,this.M=t||new Image,null!==i&&(this.M.crossOrigin=i),this.c=r?document.createElement("CANVAS"):null,this.g=r,this.i=null,this.f=n,this.a=o,this.j=e,this.o=!1,2==this.f&&Yp(this)}function Yp(t){var e=Ee(1,1);try{e.drawImage(t.M,0,0),e.getImageData(0,0,1,1)}catch(e){t.o=!0}}function Kp(t){t=t||{},this.j=void 0!==t.anchor?t.anchor:[.5,.5],this.I=null,this.a=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.C=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.G=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.ta=void 0!==t.crossOrigin?t.crossOrigin:null;var e=void 0!==t.img?t.img:null,o=void 0!==t.imgSize?t.imgSize:null,i=t.src;f(!(void 0!==i&&e),4),f(!e||e&&o,5),void 0!==i&&i.length||!e||(i=e.src||u(e).toString()),f(void 0!==i&&0<i.length,6);var n=void 0!==t.src?0:2;this.i=void 0!==t.color?ge(t.color):null;var r=this.ta,s=this.i,a=$g.get(i,r,s);a||(a=new qp(e,i,o,r,n,s),$g.set(i,r,s,a)),this.b=a,this.qa=void 0!==t.offset?t.offset:[0,0],this.f=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.u=null,this.A=void 0!==t.size?t.size:null,La.call(this,{opacity:void 0!==t.opacity?t.opacity:1,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView})}function Xp(t){t=t||{},this.a=t.font,this.i=t.rotation,this.j=t.rotateWithView,this.b=t.scale,this.Fa=t.text,this.g=t.textAlign,this.l=t.textBaseline,this.Wa=void 0!==t.fill?t.fill:new ka({color:"#333"}),this.Ya=void 0!==t.stroke?t.stroke:null,this.f=void 0!==t.offsetX?t.offsetX:0,this.c=void 0!==t.offsetY?t.offsetY:0}function Zp(t){t=t||{},up.call(this),Ov||(Nv=[255,255,255,1],kv=new ka({color:Nv}),Dv=[20,2],Fv=jv="pixels",Uv=[64,64],Bv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Vv=.5,Wv=new Kp({anchor:Dv,anchorOrigin:"bottom-left",anchorXUnits:jv,anchorYUnits:Fv,crossOrigin:"anonymous",rotation:0,scale:Vv,size:Uv,src:Bv}),zv="NO_IMAGE",Hv=new Ps({color:Nv,width:1}),qv=new Ps({color:[51,51,51,1],width:2}),Yv=new Xp({font:"bold 16px Helvetica",fill:kv,stroke:qv,scale:.8}),Kv=new Da({fill:kv,image:Wv,text:Yv,stroke:Hv,zIndex:0}),Ov=[Kv]),this.defaultDataProjection=Et("EPSG:4326"),this.a=t.defaultStyle?t.defaultStyle:Ov,this.c=void 0===t.extractStyles||t.extractStyles,this.l=void 0===t.writeStyles||t.writeStyles,this.b={},this.i=void 0===t.showPointNames||t.showPointNames}function Jp(t,e){var o,i=[0,0],n="start";if(t.Z()&&(o=t.Z().ue(),null===o&&(o=Uv),2==o.length&&(n=t.Z().c,i[0]=n*o[0]/2,i[1]=-n*o[1]/2,n="left")),null!==t.Pa()){var r=t.Pa();o=r.clone(),o.Ii(r.a||Yv.a),o.ni(r.b||Yv.b),o.cf(r.Ca()||Yv.Ca()),o.df(r.Da()||qv)}else o=Yv.clone();return o.ef(e),o.Oi(i[0]),o.Pi(i[1]),o.Ri(n),new Da({text:o})}function Qp(t,e,o,i,n){return function(){var r=n,s="";if(r&&this.U()&&(r="Point"===this.U().T()),r&&(s=this.get("name"),r=r&&s),t)return r?(r=Jp(t[0],s),t.concat(r)):t;if(e){var a=$p(e,o,i);return r?(r=Jp(a[0],s),a.concat(r)):a}return r?(r=Jp(o[0],s),o.concat(r)):o}}function $p(t,e,o){return Array.isArray(t)?t:"string"==typeof t?(!(t in o)&&"#"+t in o&&(t="#"+t),$p(o[t],e,o)):e}function th(t){if(t=Ha(t,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t))return t=t[1],[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}function eh(t){t=Ha(t,!1);for(var e,o=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=i.exec(t);)o.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),t=t.substr(e[0].length);if(""===t)return o}function oh(t){var e=Ha(t,!1).trim();return t.baseURI?new URL(e,t.baseURI).href:e}function ih(t){return _p(t)}function nh(t,e){return al(null,n_,t,e)}function rh(t,e){var o=al({B:[],bj:[]},s_,t,e);if(o){var i,n,r=o.B,o=o.bj;for(i=0,n=Math.min(r.length,o.length);i<n;++i)r[4*i+3]=o[i];return o=new El(null),o.ca("XYZM",r),o}}function sh(t,e){var o=al({},i_,t,e),i=al(null,a_,t,e);if(i){var n=new El(null);return n.ca("XYZ",i),n.H(o),n}}function ah(t,e){var o=al({},i_,t,e),i=al(null,a_,t,e);if(i){var n=new Ri(null);return n.ca("XYZ",i,[i.length]),n.H(o),n}}function lh(t,e){var o=al([],d_,t,e);if(!o)return null;if(!o.length)return new rp(o);var i,r,s,a,l=!0,p=o[0].T();for(s=1,a=o.length;s<a;++s)if(r=o[s],r.T()!=p){l=!1;break}if(l)if("Point"==p){for(i=o[0],l=i.ka,p=i.ha(),s=1,a=o.length;s<a;++s)r=o[s],n(p,r.ha());i=new Cl(null),i.ca(l,p),uh(i,o)}else"LineString"==p?(i=new Pl(null),Al(i,o),uh(i,o)):"Polygon"==p?(i=new Ml(null),Tl(i,o),uh(i,o)):"GeometryCollection"==p?i=new rp(o):f(!1,37);else i=new rp(o);return i}function ph(t,e){var o=al({},i_,t,e),i=al(null,a_,t,e);if(i){var n=new vi(null);return n.ca("XYZ",i),n.H(o),n}}function hh(t,e){var o=al({},i_,t,e),i=al([null],r_,t,e);if(i&&i[0]){var r,s,a=new Ri(null),l=i[0],p=[l.length];for(r=1,s=i.length;r<s;++r)n(l,i[r]),p.push(l.length);return a.ca("XYZ",l,p),a.H(o),a}}function ch(t,e){var o=al({},S_,t,e);if(!o)return null;var i="fillStyle"in o?o.fillStyle:kv,n=o.fill;void 0===n||n||(i=null),(n="imageStyle"in o?o.imageStyle:Wv)==zv&&(n=void 0);var r="textStyle"in o?o.textStyle:Yv,s="strokeStyle"in o?o.strokeStyle:Hv,o=o.outline;return void 0===o||o||(s=null),[new Da({fill:i,image:n,stroke:s,text:r,zIndex:void 0})]}function uh(t,e){var o,i,n,r,s=e.length,a=Array(e.length),l=Array(e.length);for(n=r=!1,i=0;i<s;++i)o=e[i],a[i]=o.get("extrude"),l[i]=o.get("altitudeMode"),n=n||void 0!==a[i],r=r||l[i];n&&t.set("extrude",a),r&&t.set("altitudeMode",l)}function dh(t,e){sl($v,t,e)}function fh(t,e){sl(t_,t,e)}function yh(t,e){var o;for(o=e.firstChild;o;o=o.nextSibling)if(o.nodeType==Node.ELEMENT_NODE){var i=gh(t,o);if(i)return i}}function gh(t,e){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling)if(o(Zv,i.namespaceURI)&&"name"==i.localName)return Pp(i);for(i=e.firstElementChild;i;i=i.nextElementSibling){var n=i.localName;if(o(Zv,i.namespaceURI)&&("Document"==n||"Folder"==n||"Placemark"==n||"kml"==n)&&(n=gh(t,i)))return n}}function mh(t,e){var o,i=[];for(o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&n(i,vh(t,o));return i}function vh(t,e){var i,r=[];for(i=e.firstElementChild;i;i=i.nextElementSibling)if(o(Zv,i.namespaceURI)&&"NetworkLink"==i.localName){var s=al({},y_,i,[]);r.push(s)}for(i=e.firstElementChild;i;i=i.nextElementSibling)s=i.localName,!o(Zv,i.namespaceURI)||"Document"!=s&&"Folder"!=s&&"kml"!=s||n(r,vh(t,i));return r}function _h(t,e){var o,i=[];for(o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&n(i,t.$e(o));return i}function bh(t,e){var o,i=ge(e),i=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]];for(o=0;4>o;++o){var n=parseInt(i[o],10).toString(16);i[o]=1==n.length?"0"+n:n}Mp(t,i.join(""))}function Eh(t,e,o){t={node:t};var i,n,r=e.T();"GeometryCollection"==r?(i=e.If(),n=Ih):"MultiPoint"==r?(i=e.Ie(),n=J_):"MultiLineString"==r?(i=e.hd(),n=Q_):"MultiPolygon"==r?(i=e.Od(),n=tb):f(!1,39),pl(t,j_,n,i,o)}function Sh(t,e,o){pl({node:t},D_,$_,[e],o)}function Ph(t,e,o){var i={node:t};e.a&&t.setAttribute("id",e.a),t=e.N();var n={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};n[e.c]=1;var r=Object.keys(t||{}).sort().filter(function(t){return!n[t]});if(0<r.length){var s=nl(t,r);pl(i,U_,X_,[{names:r,values:s}],o)}(r=e.Nc())&&(r=r.call(e,0))&&(r=Array.isArray(r)?r[0]:r,this.l&&(t.Style=r),(r=r.Pa())&&(t.name=r.Pa())),r=F_[o[o.length-1].node.namespaceURI],t=nl(t,r),pl(i,U_,Km,t,o,r),t=o[0],(e=e.U())&&(e=yl(e,!0,t)),pl(i,U_,Ih,[e],o)}function wh(t,e,o){var i=e.ha();t={node:t},t.layout=e.ka,t.stride=e.sa(),pl(t,B_,Y_,[i],o)}function Ah(t,e,o){e=e.jd();var i=e.shift();t={node:t},pl(t,V_,Z_,e,o),pl(t,V_,eb,[i],o)}function Ch(t,e){Ap(t,Math.round(1e6*e)/1e6)}function Mh(t,e,o){return za(Xv[0],"gx:"+o)}function xh(t,e){return za(e[e.length-1].node.namespaceURI,"Placemark")}function Ih(t,e){if(t)return za(e[e.length-1].node.namespaceURI,x_[t.T()])}function Rh(t,e,o,i){this.f=t,this.b=e,this.i=o,this.c=i}function Th(t){ul.call(this),t=t||{},this.defaultDataProjection=new ht({code:"",units:"tile-pixels"}),this.b=t.featureClass?t.featureClass:Rh,this.f=t.geometryName,this.a=t.layerName?t.layerName:"layer",this.c=t.layers?t.layers:null}function Lh(t,e,o){for(var i=0,n=0,r=t.length;n<r;++n){var s,a,l=t[n];for(s=0,a=l.length;s<a;++s){var p=l[s];e.push(p.x,p.y)}i+=2*s,o.push(i)}}function Gh(){up.call(this),this.defaultDataProjection=Et("EPSG:4326")}function Oh(t,e){e[e.length-1].ae[t.getAttribute("k")]=t.getAttribute("v")}function Nh(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function kh(){}function Dh(){}function jh(t,e,o,i){var n;n=void 0!==i?i:[];for(var r=i=0;r<e;){var s=t[r++];for(n[i++]=t[r++],n[i++]=s,s=2;s<o;++s)n[i++]=t[r++]}n.length=i}function Fh(t){t=t||{},ul.call(this),this.defaultDataProjection=Et("EPSG:4326"),this.b=t.factor?t.factor:1e5,this.a=t.geometryLayout?t.geometryLayout:"XY"}function Uh(t,e,o){var i,n=Array(e);for(i=0;i<e;++i)n[i]=0;var r,s;for(r=0,s=t.length;r<s;)for(i=0;i<e;++i,++r){var a=t[r],l=a-n[i];n[i]=a,t[r]=l}return Vh(t,o||1e5)}function Bh(t,e,o){var i,n=Array(e);for(i=0;i<e;++i)n[i]=0;t=Wh(t,o||1e5);var r;for(o=0,r=t.length;o<r;)for(i=0;i<e;++i,++o)n[i]+=t[o],t[o]=n[i];return t}function Vh(t,e){var o,i,n=e||1e5;for(o=0,i=t.length;o<i;++o)t[o]=Math.round(t[o]*n);for(n=0,o=t.length;n<o;++n)i=t[n],t[n]=0>i?~(i<<1):i<<1;for(n="",o=0,i=t.length;o<i;++o){for(var r,s=t[o],a="";32<=s;)r=63+(32|31&s),a+=String.fromCharCode(r),s>>=5;a+=String.fromCharCode(s+63),n+=a}return n}function Wh(t,e){var o,i,n=e||1e5,r=[],s=0,a=0;for(o=0,i=t.length;o<i;++o){var l=t.charCodeAt(o)-63,s=s|(31&l)<<a;32>l?(r.push(s),a=s=0):a+=5}for(s=0,a=r.length;s<a;++s)o=r[s],r[s]=1&o?~(o>>1):o>>1;for(s=0,a=r.length;s<a;++s)r[s]/=n;return r}function zh(t){t=t||{},ul.call(this),this.defaultDataProjection=Et(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326")}function Hh(t,e){var o,i,n,r,s=[];for(n=0,r=t.length;n<r;++n)o=t[n],0<n&&s.pop(),i=0<=o?e[o]:e[~o].slice().reverse(),s.push.apply(s,i);for(o=0,i=s.length;o<i;++o)s[o]=s[o].slice();return s}function qh(t,e,o,i,n){t=t.geometries;var r,s,a=[];for(r=0,s=t.length;r<s;++r)a[r]=Yh(t[r],e,o,i,n);return a}function Yh(t,e,o,i,n){var r=t.type,s=Eb[r];return e="Point"===r||"MultiPoint"===r?s(t,o,i):s(t,e),o=new Va,o.Sa(yl(e,!1,n)),void 0!==t.id&&o.kc(t.id),t.properties&&o.H(t.properties),o}function Kh(t,e,o){t[0]=t[0]*e[0]+o[0],t[1]=t[1]*e[1]+o[1]}function Xh(t){t=t||{},this.i=t.featureType,this.a=t.featureNS,this.b=t.gmlFormat?t.gmlFormat:new xp,this.c=t.schemaLocation?t.schemaLocation:"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd",up.call(this)}function Zh(t,e){for(var o=e.firstChild;o;o=o.nextSibling)if(o.nodeType==Node.ELEMENT_NODE)return Jh(t,o)}function Jh(t,e){var o={},i=Sp(e.getAttribute("numberOfFeatures"));return o.numberOfFeatures=i,al(o,Sb,e,[],t.b)}function Qh(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return al({},Cb,t,[])}function $h(t,e){var o=za("http://www.opengis.net/ogc","Filter"),i=za("http://www.opengis.net/ogc","FeatureId");o.appendChild(i),i.setAttribute("fid",e),t.appendChild(o)}function tc(t,e,o){var i={node:t};e.b.forEach(function(t){pl(i,Ib,il(t.Bc),[t],o)})}function ec(t,e){void 0!==e.a&&t.setAttribute("matchCase",e.a.toString()),ic(t,e.b),nc(t,""+e.f)}function oc(t,e,o){t=za("http://www.opengis.net/ogc",t),Mp(t,o),e.appendChild(t)}function ic(t,e){oc("PropertyName",t,e)}function nc(t,e){oc("Literal",t,e)}function rc(t){t=t||{},ul.call(this),this.b=void 0!==t.splitCollection&&t.splitCollection}function sc(t){return t=t.X(),t.length?t.join(" "):""}function ac(t){t=t.X();for(var e=[],o=0,i=t.length;o<i;++o)e.push(t[o].join(" "));return e.join(",")}function lc(t){var e=[];t=t.jd();for(var o=0,i=t.length;o<i;++o)e.push("("+ac(t[o])+")");return e.join(",")}function pc(t){var e=t.T(),o=(0,Rb[e])(t),e=e.toUpperCase();if(t instanceof Qo){t=t.ka;var i="";"XYZ"!==t&&"XYZM"!==t||(i+="Z"),"XYM"!==t&&"XYZM"!==t||(i+="M"),t=i,0<t.length&&(e+=" "+t)}return o.length?e+"("+o+")":e+" EMPTY"}function hc(t){this.a=t,this.b=-1}function cc(t){var e=t.a.charAt(++t.b),o={position:t.b,value:e};if("("==e)o.type=2;else if(","==e)o.type=5;else if(")"==e)o.type=3;else if("0"<=e&&"9">=e||"."==e||"-"==e){o.type=4;var i,e=t.b,n=!1,r=!1;do{"."==i?n=!0:"e"!=i&&"E"!=i||(r=!0),i=t.a.charAt(++t.b)}while("0"<=i&&"9">=i||"."==i&&(void 0===n||!n)||!r&&("e"==i||"E"==i)||r&&("-"==i||"+"==i));t=parseFloat(t.a.substring(e,t.b--)),o.value=t}else if("a"<=e&&"z">=e||"A"<=e&&"Z">=e){o.type=1,e=t.b;do{i=t.a.charAt(++t.b)}while("a"<=i&&"z">=i||"A"<=i&&"Z">=i);t=t.a.substring(e,t.b--).toUpperCase(),o.value=t}else{if(" "==e||"\t"==e||"\r"==e||"\n"==e)return cc(t);if(""!==e)throw Error("Unexpected character: "+e);o.type=6}return o}function uc(t){this.f=t,this.a="XY"}function dc(t){t.b=cc(t.f)}function fc(t,e){var o=t.b.type==e;return o&&dc(t),o}function yc(t){var e=t.b;if(fc(t,1)){var e=e.value,o="XY",i=t.b;if(1==t.b.type&&(i=i.value,"Z"===i?o="XYZ":"M"===i?o="XYM":"ZM"===i&&(o="XYZM"),"XY"!==o&&dc(t)),t.a=o,"GEOMETRYCOLLECTION"==e){t:{if(fc(t,2)){e=[];do{e.push(yc(t))}while(fc(t,5));if(fc(t,3)){t=e;break t}}else if(_c(t)){t=[];break t}throw Error(bc(t))}return new rp(t)}if(i=Lb[e],o=Tb[e],!i||!o)throw Error("Invalid geometry type: "+e);return e=i.call(t),new o(e,t.a)}throw Error(bc(t))}function gc(t){for(var e=[],o=t.a.length,i=0;i<o;++i){var n=t.b;if(!fc(t,4))break;e.push(n.value)}if(e.length==o)return e;throw Error(bc(t))}function mc(t){for(var e=[gc(t)];fc(t,5);)e.push(gc(t));return e}function vc(t){for(var e=[t.eg()];fc(t,5);)e.push(t.eg());return e}function _c(t){var e=1==t.b.type&&"EMPTY"==t.b.value;return e&&dc(t),e}function bc(t){return"Unexpected `"+t.b.value+"` at position "+t.b.position+" in `"+t.f.a+"`"}function Ec(){this.version=void 0}function Sc(t,e){return al({},Xb,t,e)}function Pc(t,e){return al({},Hb,t,e)}function wc(t,e){var o=Sc(t,e);if(o){var i=[Sp(t.getAttribute("width")),Sp(t.getAttribute("height"))];return o.size=i,o}}function Ac(t,e){return al([],Zb,t,e)}function Cc(t){t=t||{},this.a="http://mapserver.gis.umn.edu/mapserver",this.b=new Rp,this.c=t.layers?t.layers:null,up.call(this)}function Mc(){this.f=new Dh}function xc(t){var e=Pp(t).split(" ");if(e&&2==e.length&&(t=+e[0],e=+e[1],!isNaN(t)&&!isNaN(e)))return[t,e]}function Ic(t){pe.call(this),t=t||{},this.a=null,this.i=At,this.c=void 0,Jt(this,he("projection"),this.hm,this),Jt(this,he("tracking"),this.im,this),void 0!==t.projection&&this.Ih(Et(t.projection)),void 0!==t.trackingOptions&&this.Si(t.trackingOptions),this.Ee(void 0!==t.tracking&&t.tracking)}function Rc(t,e,o){Qo.call(this),this.yg(t,e||0,o)}function Tc(t){var e=t.B[t.a]-t.B[0];return t=t.B[t.a+1]-t.B[1],e*e+t*t}function Lc(t,e,o){for(var i,n,r,s,a,l=[],p=t(0),h=t(1),c=e(p),u=e(h),d=[h,p],f=[u,c],y=[1,0],g={},m=1e5;0<--m&&0<y.length;)r=y.pop(),p=d.pop(),c=f.pop(),h=r.toString(),h in g||(l.push(c[0],c[1]),g[h]=!0),s=y.pop(),h=d.pop(),u=f.pop(),a=(r+s)/2,i=t(a),n=e(i),E(n[0],n[1],c[0],c[1],u[0],u[1])<o?(l.push(u[0],u[1]),h=s.toString(),g[h]=!0):(y.push(s,a,a,r),f.push(u,n,n,c),d.push(h,i,i,p));return l}function Gc(t,e,o,i,n){var r=Et("EPSG:4326");return Lc(function(i){return[t,e+(o-e)*i]},Pt(r,i),n)}function Oc(t,e,o,i,n){var r=Et("EPSG:4326");return Lc(function(i){return[e+(o-e)*i,t]},Pt(r,i),n)}function Nc(t){t=t||{},this.i=this.j=null,this.f=this.g=1/0,this.c=this.l=-1/0,this.A=this.u=1/0,this.G=this.C=-1/0,this.R=void 0!==t.targetSize?t.targetSize:100,this.qa=void 0!==t.maxLines?t.maxLines:100,this.b=[],this.a=[],this.ta=void 0!==t.strokeStyle?t.strokeStyle:hE,this.I=this.o=void 0,this.v=null,this.setMap(void 0!==t.map?t.map:null)}function kc(t,e,o,i,n,r,s){var a=s;return e=Gc(e,o,i,t.i,n),a=void 0!==t.b[a]?t.b[a]:new El(null),a.ca("XY",e),ot(a.D(),r)&&(t.b[s++]=a),s}function Dc(t,e,o,i,n){var r=n;return e=Oc(e,t.c,t.f,t.i,o),r=void 0!==t.a[r]?t.a[r]:new El(null),r.ca("XY",e),ot(r.D(),i)&&(t.a[n++]=r),n}function jc(t,e,o,i,n){se.call(this),this.i=n,this.extent=t,this.a=o,this.resolution=e,this.state=i}function Fc(t,e,o,i,n,r,s){jc.call(this,t,e,o,0,i),this.l=n,this.M=new Image,null!==r&&(this.M.crossOrigin=r),this.c={},this.f=null,this.state=0,this.g=s}function Uc(t,e,o,i,n,r){this.c=r||null,jc.call(this,t,e,o,r?0:2,i),this.f=n}function Bc(t,e){se.call(this),this.Ga=t,this.state=e,this.a=null,this.key=""}function Vc(t){if(!t.a)return t;var e=t.a;do{if(2==e.V())return e;e=e.a}while(e);return t}function Wc(t,e,o,i,n){Bc.call(this,t,e),this.g=o,this.M=new Image,null!==i&&(this.M.crossOrigin=i),this.c=null,this.j=n}function zc(t){t.c.forEach(te),t.c=null}function Hc(t){t=t||{},Xi.call(this,{handleEvent:Yo}),this.g=t.formatConstructors?t.formatConstructors:[],this.j=t.projection?Et(t.projection):null,this.a=null,this.target=t.target?t.target:null}function qc(t){t=t.dataTransfer.files;var e,o,i;for(e=0,o=t.length;e<o;++e){i=t.item(e);var n=new FileReader;n.addEventListener("load",this.l.bind(this,i)),n.readAsText(i)}}function Yc(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function Kc(t,e,o,i){ne.call(this,t),this.features=o,this.file=e,this.projection=i}function Xc(t){t=t||{},cn.call(this,{handleDownEvent:Qc,handleDragEvent:Zc,handleUpEvent:Jc}),this.o=t.condition?t.condition:an,this.a=this.g=void 0,this.j=0,this.u=void 0!==t.duration?t.duration:400}function Zc(t){if(pn(t)){var e=t.map,o=e.Mb(),i=t.pixel;t=i[0]-o[0]/2,i=o[1]/2-i[1],o=Math.atan2(i,t),t=Math.sqrt(t*t+i*i),e=e.$(),void 0!==this.g&&(i=o-this.g,Zi(e,e.Va()-i)),this.g=o,void 0!==this.a&&(o=this.a*(e.Ua()/t),Qi(e,o)),void 0!==this.a&&(this.j=this.a/t),this.a=t}}function Jc(t){if(!pn(t))return!0;t=t.map.$(),qi(t,1,-1);var e=this.j-1,o=t.Va(),o=t.constrainRotation(o,0);Zi(t,o,void 0,void 0);var o=t.Ua(),i=this.u,o=t.constrainResolution(o,0,e);return Qi(t,o,void 0,i),this.j=0,!1}function Qc(t){return!(!pn(t)||!this.o(t))&&(qi(t.map.$(),1,1),this.a=this.g=void 0,!0)}function $c(t,e,o,i){this.oa=t,this.Y=e,this.overlaps=i,this.c=0,this.resolution=o,this.R=this.ta=null,this.a=[],
this.coordinates=[],this.eb=nr(),this.b=[],this.qa=null,this.ia=nr(),this.ea=nr()}function tu(t,e,o,i,n,r,s){var a=t.coordinates.length,l=t.Gf();s&&(o+=n),s=[e[o],e[o+1]];var p,h,c,u=[NaN,NaN],d=!0;for(p=o+n;p<i;p+=n)u[0]=e[p],u[1]=e[p+1],c=k(l,u),c!==h?(d&&(t.coordinates[a++]=s[0],t.coordinates[a++]=s[1]),t.coordinates[a++]=u[0],t.coordinates[a++]=u[1],d=!1):1===c?(t.coordinates[a++]=u[0],t.coordinates[a++]=u[1],d=!1):d=!0,s[0]=u[0],s[1]=u[1],h=c;return(r&&d||p===o+n)&&(t.coordinates[a++]=s[0],t.coordinates[a++]=s[1]),a}function eu(t,e){t.ta=[0,e,0],t.a.push(t.ta),t.R=[0,e,0],t.b.push(t.R)}function ou(t,e,o,i,n,r,a,l,p){var h;t.qa&&s(i,t.eb)?h=t.qa:(t.qa||(t.qa=[]),h=Zo(t.coordinates,0,t.coordinates.length,2,i,t.qa),lr(t.eb,i)),i=!lt(r);for(var c,d,f,y,g,m=0,v=a.length,_=0,b=t.ia,E=t.ea,S=0,P=0,w=t.a!=a||t.overlaps?0:200;m<v;){var A,C,M,x,I=a[m];switch(I[0]){case 0:_=I[1],i&&r[u(_).toString()]||!_.U()?m=I[2]:void 0===p||ot(p,_.U().D())?++m:m=I[2]+1;break;case 1:S>w&&(t.Wa(e,n),S=0),P>w&&(e.stroke(),P=0),S||P||(e.beginPath(),d=f=NaN),++m;break;case 2:_=I[1],c=h[_],I=h[_+1],y=h[_+2]-c,_=h[_+3]-I,_=Math.sqrt(y*y+_*_),e.moveTo(c+_,I),e.arc(c,I,_,0,2*Math.PI,!0),++m;break;case 3:e.closePath(),++m;break;case 4:_=I[1],c=I[2],A=I[3],C=I[4]*o,M=I[5]*o;var R=I[6],T=I[7],L=I[8],G=I[9];x=I[10],y=I[11],g=I[12];var O=I[13],N=I[14];for(x&&(y+=n);_<c;_+=2){if(I=h[_]-C,x=h[_+1]-M,O&&(I=Math.round(I),x=Math.round(x)),1!=g||y){var k=I+C,D=x+M;dr(b,k,D,g,g,y,-k,-D),e.setTransform.apply(e,b)}k=e.globalAlpha,1!=T&&(e.globalAlpha=k*T);var D=N+L>A.width?A.width-L:N,j=R+G>A.height?A.height-G:R;e.drawImage(A,L,G,D,j,I,x,D*o,j*o),1!=T&&(e.globalAlpha=k),(1!=g||y)&&e.setTransform.apply(e,E)}++m;break;case 5:for(_=I[1],c=I[2],M=I[3],R=I[4]*o,T=I[5]*o,y=I[6],g=I[7]*o,A=I[8],C=I[9],(x=I[10])&&(y+=n);_<c;_+=2){for(I=h[_]+R,x=h[_+1]+T,(1!=g||y)&&(dr(b,I,x,g,g,y,-I,-x),e.setTransform.apply(e,b)),L=M.split("\n"),G=L.length,1<G?(O=Math.round(1.5*e.measureText("M").width),x-=(G-1)/2*O):O=0,N=0;N<G;N++)k=L[N],C&&e.strokeText(k,I,x),A&&e.fillText(k,I,x),x+=O;(1!=g||y)&&e.setTransform.apply(e,E)}++m;break;case 6:if(l&&(_=I[1],_=l(_)))return _;++m;break;case 7:w?S++:t.Wa(e,n),++m;break;case 8:for(_=I[1],c=I[2],I=h[_],x=h[_+1],y=I+.5|0,g=x+.5|0,y===d&&g===f||(e.moveTo(I,x),d=y,f=g),_+=2;_<c;_+=2)I=h[_],x=h[_+1],y=I+.5|0,g=x+.5|0,(_==c-2||y!==d||g!==f)&&(e.lineTo(I,x),d=y,f=g);++m;break;case 9:t.$a=I[2],S&&(t.Wa(e,n),S=0,P&&(e.stroke(),P=0)),e.fillStyle=I[1],++m;break;case 10:var _=void 0===I[8]||I[8],F=I[9];c=I[2],P&&(e.stroke(),P=0),e.strokeStyle=I[1],e.lineWidth=_?c*o:c,e.lineCap=I[3],e.lineJoin=I[4],e.miterLimit=I[5],Mg&&(c=I[6],y=I[7],_&&o!==F&&(c=c.map(function(t){return t*o/F}),y*=o/F,I[6]=c,I[7]=y,I[9]=o),e.lineDashOffset=y,e.setLineDash(c)),++m;break;case 11:e.font=I[1],e.textAlign=I[2],e.textBaseline=I[3],++m;break;case 12:w?P++:e.stroke(),++m;break;default:++m}}S&&t.Wa(e,n),P&&e.stroke()}function iu(t){var e=t.b;e.reverse();var o,i,n,r=e.length,s=-1;for(o=0;o<r;++o)if(i=e[o],6==(n=i[0]))s=o;else if(0==n){for(i[2]=o,i=t.b,n=o;s<n;){var a=i[s];i[s]=i[n],i[n]=a,++s,--n}s=-1}}function nu(t,e){t.ta[2]=t.a.length,t.ta=null,t.R[2]=t.b.length,t.R=null;var o=[6,e];t.a.push(o),t.b.push(o)}function ru(t,e,o,i){$c.call(this,t,e,o,i),this.M=this.S=null,this.G=this.C=this.A=this.u=this.I=this.v=this.o=this.j=this.l=this.g=this.f=void 0}function su(t,e,o,i){$c.call(this,t,e,o,i),this.g=null,this.f={Kd:void 0,Ed:void 0,Fd:null,Gd:void 0,Hd:void 0,Id:void 0,Jd:void 0,Sf:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function au(t,e,o,i,n){var r=t.coordinates.length;return e=tu(t,e,o,i,n,!1,!1),r=[8,r,e],t.a.push(r),t.b.push(r),i}function lu(t){var e=t.f,o=e.strokeStyle,i=e.lineCap,n=e.lineDash,r=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,p=e.miterLimit;e.Kd==o&&e.Ed==i&&s(e.Fd,n)&&e.Gd==r&&e.Hd==a&&e.Id==l&&e.Jd==p||(e.Sf!=t.coordinates.length&&(t.a.push([12]),e.Sf=t.coordinates.length),t.a.push([10,o,l,i,a,p,n,r,!0,1],[1]),e.Kd=o,e.Ed=i,e.Fd=n,e.Gd=r,e.Hd=a,e.Id=l,e.Jd=p)}function pu(t,e,o,i){$c.call(this,t,e,o,i),this.g=null,this.f={Yg:void 0,Kd:void 0,Ed:void 0,Fd:null,Gd:void 0,Hd:void 0,Id:void 0,Jd:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function hu(t,e,o,i,n){var r=t.f,s=void 0!==r.fillStyle,r=void 0!=r.strokeStyle,a=i.length,l=[1];for(t.a.push(l),t.b.push(l),l=0;l<a;++l){var p=i[l],h=t.coordinates.length;o=tu(t,e,o,p,n,!0,!r),o=[8,h,o],t.a.push(o),t.b.push(o),r&&(o=[3],t.a.push(o),t.b.push(o)),o=p}return e=[7],t.b.push(e),s&&t.a.push(e),r&&(s=[12],t.a.push(s),t.b.push(s)),o}function cu(t,e){var o=t.f,i=o.fillStyle,n=o.strokeStyle,r=o.lineCap,a=o.lineDash,l=o.lineDashOffset,p=o.lineJoin,h=o.lineWidth,c=o.miterLimit;if(void 0!==i&&("string"!=typeof i||o.Yg!=i)){var u=[9,i];"string"!=typeof i&&(i=e.D(),u.push([i[0],i[3]])),t.a.push(u),o.Yg=o.fillStyle}void 0===n||o.Kd==n&&o.Ed==r&&s(o.Fd,a)&&o.Gd==l&&o.Hd==p&&o.Id==h&&o.Jd==c||(t.a.push([10,n,h,r,p,c,a,l,!0,1]),o.Kd=n,o.Ed=r,o.Fd=a,o.Gd=l,o.Hd=p,o.Id=h,o.Jd=c)}function uu(t,e,o,i){$c.call(this,t,e,o,i),this.G=this.C=this.A=null,this.Fa="",this.o=this.j=0,this.v=void 0,this.u=this.I=0,this.l=this.g=this.f=null}function du(t,e,o,i,n){this.I=t,this.c=e,this.o=i,this.v=o,this.g=n,this.a={},this.l=Ee(1,1),this.j=nr()}function fu(t,e,o){var i,n=Math.floor(t.length/2);if(e>=n)for(i=n;i<e;i++)t[i][o]=!0;else if(e<n)for(i=e+1;i<n;i++)t[i][o]=!0}function yu(t){if(void 0!==dE[t])return dE[t];for(var e=2*t+1,o=Array(e),i=0;i<e;i++)o[i]=Array(e);for(var e=t,n=i=0;e>=i;)fu(o,t+e,t+i),fu(o,t+i,t+e),fu(o,t-i,t+e),fu(o,t-e,t+i),fu(o,t-e,t-i),fu(o,t-i,t-e),fu(o,t+i,t-e),fu(o,t+e,t-i),i++,0<2*((n+=1+2*i)-e)+1&&(--e,n+=1-2*e);return dE[t]=o}function gu(t){for(var e in t.a){var o,i=t.a[e];for(o in i)i[o].Je()}}function mu(t,e){var o=t.c,i=o[0],n=o[1],r=o[2],o=o[3],i=[i,n,i,o,r,o,r,n];return Zo(i,0,8,2,e,i),i}function vu(t,e,o,i,n,r,s){var a=Object.keys(t.a).map(Number);a.sort(function(t,e){return e-t});var l,p,h,c,u;for(l=0,p=a.length;l<p;++l)for(c=t.a[a[l].toString()],h=nm.length-1;0<=h;--h)if(void 0!==(u=c[nm[h]])&&(u=ou(u,e,1,o,i,n,u.b,r,s)))return u}function _u(t){le.call(this),this.a=t}function bu(t,e){var o=e.V();return 2!=o&&3!=o&&Jt(e,"change",t.ea,t),0==o&&(e.load(),o=e.V()),2==o}function Eu(t){var e=t.a;e.Kb()&&"ready"==e.Nf()&&t.s()}function Su(t,e){e.fi()&&t.postRenderFunctions.push(function(t,e,o){e=u(t).toString(),t.gd(o.viewState.projection,o.usedTiles[e])}.bind(null,e))}function Pu(t,e){if(e){var o,i,n;for(i=0,n=e.length;i<n;++i)o=e[i],t[u(o).toString()]=o}}function wu(t,e){var o=e.R;void 0!==o&&("string"==typeof o?t.logos[o]="":o&&(f("string"==typeof o.href,44),f("string"==typeof o.src,45),t.logos[o.src]=o.href))}function Au(t,e,o,i){e=u(e).toString(),o=o.toString(),e in t?o in t[e]?(t=t[e][o],i.da<t.da&&(t.da=i.da),i.ba>t.ba&&(t.ba=i.ba),i.fa<t.fa&&(t.fa=i.fa),i.ja>t.ja&&(t.ja=i.ja)):t[e][o]=i:(t[e]={},t[e][o]=i)}function Cu(t,e,o,i,n,r,s,a,l,p){var h=u(e).toString();h in t.wantedTiles||(t.wantedTiles[h]={});var c=t.wantedTiles[h];t=t.tileQueue;var d,f,y,g,m,v,_=o.minZoom;for(v=s;v>=_;--v)for(f=Nt(o,r,v,f),y=o.La(v),g=f.da;g<=f.ba;++g)for(m=f.fa;m<=f.ja;++m)s-v<=a?(d=e.Lc(v,g,m,i,n),0==d.V()&&(c[d.ib()]=!0,d.ib()in t.a||t.i([d,h,kt(o,d.Ga),y])),l&&l.call(p,d)):e.Eg(v,g,m,n)}function Mu(t){_u.call(this,t),this.ia=nr()}function xu(t,e,o){var i=e.pixelRatio,n=e.size[0]*i,r=e.size[1]*i,s=e.viewState.rotation,a=$(o),l=tt(o),p=K(o);o=Y(o),pr(e.coordinateToPixelTransform,a),pr(e.coordinateToPixelTransform,l),pr(e.coordinateToPixelTransform,p),pr(e.coordinateToPixelTransform,o),t.save(),Sr(t,-s,n/2,r/2),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(l[0]*i,l[1]*i),t.lineTo(p[0]*i,p[1]*i),t.lineTo(o[0]*i,o[1]*i),t.clip(),Sr(t,s,n/2,r/2)}function Iu(t,e,o,i,n){var r=t.a;if(ae(r,e)){var s=i.size[0]*i.pixelRatio,a=i.size[1]*i.pixelRatio,l=i.viewState.rotation;Sr(o,-l,s/2,a/2),t=n||Ru(t,i,0),r.b(new Er(e,new wr(o,i.pixelRatio,i.extent,t,i.viewState.rotation),i,o,null)),Sr(o,l,s/2,a/2)}}function Ru(t,e,o){var i=e.viewState,n=e.pixelRatio,r=n/i.resolution;return dr(t.ia,n*e.size[0]/2,n*e.size[1]/2,r,-r,-i.rotation,-i.center[0]+o,-i.center[1])}function Tu(t,e){return u(t)-u(e)}function Lu(t,e){var o=.5*t/e;return o*o}function Gu(t,e,o,i,n,r){var s,a,l=!1;return(s=o.Z())&&(a=s.Oe(),2==a||3==a?s.Yi(n,r):(0==a&&s.load(),s.zh(n,r),l=!0)),(n=(0,o.Ra)(e))&&(i=n.Qd(i),(0,yE[i.T()])(t,i,o,e)),l}function Ou(t){Mu.call(this,t),this.c=!1,this.u=-1,this.o=NaN,this.l=D(),this.i=this.j=null,this.g=Ee()}function Nu(){this.b="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"}function ku(){this.b="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"}function Du(t,e){this.f=t.getUniformLocation(e,"f"),this.c=t.getUniformLocation(e,"e"),this.g=t.getUniformLocation(e,"d"),this.i=t.getUniformLocation(e,"g"),this.b=t.getAttribLocation(e,"b"),this.a=t.getAttribLocation(e,"c")}function ju(t,e){_u.call(this,e),this.c=t,this.Y=new Hr([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.g=this.Fb=null,this.l=void 0,this.v=nr(),this.u=nr(),this.C=Ur(),this.I=null}function Fu(t,e,o){var i=t.c.f;if(void 0===t.l||t.l!=o){e.postRenderFunctions.push(function(t,e,o){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(o))}.bind(null,i,t.g,t.Fb)),e=ns(i,o,o);var n=i.createFramebuffer();i.bindFramebuffer(36160,n),i.framebufferTexture2D(36160,36064,3553,e,0),t.Fb=e,t.g=n,t.l=o}else i.bindFramebuffer(36160,t.g)}function Uu(t,e,o,i){if(t=t.a,ae(t,e)){var n=i.viewState;t.b(new Er(e,new sa(o,n.center,n.resolution,n.rotation,i.size,i.extent,i.pixelRatio),i,null,o))}}function Bu(t,e){ju.call(this,t,e),this.o=!1,this.S=-1,this.R=NaN,this.A=D(),this.j=this.i=this.G=null}function Vu(t){t=t||{};var e=og({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,er.call(this,e),this.c=void 0!==t.renderBuffer?t.renderBuffer:100,this.A=null,this.i=void 0,this.g(t.style),this.ea=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.ia=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}function Wu(){return[[-1/0,-1/0,1/0,1/0]]}function zu(t){pe.call(this),this.c=Et(t.projection),this.l=Hu(t.attributions),this.R=t.logo,this.Ja=void 0!==t.state?t.state:"ready",this.G=void 0!==t.wrapX&&t.wrapX}function Hu(t){if("string"==typeof t)return[new Wt({html:t})];if(t instanceof Wt)return[t];if(Array.isArray(t)){for(var e=t.length,o=Array(e),i=0;i<e;i++){var n=t[i];o[i]="string"==typeof n?new Wt({html:n}):n}return o}return null}function qu(t,e){t.Ja=e,t.s()}function Yu(t){t=t||{},zu.call(this,{attributions:t.attributions,logo:t.logo,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.Y=c,this.S=t.format,this.Ha=void 0==t.overlaps||t.overlaps,this.ea=t.url,t.loader?this.Y=t.loader:void 0!==this.ea&&(f(this.S,7),this.Y=cl(this.ea,this.S)),this.Bd=t.strategy?t.strategy:Wu;var e=void 0===t.useSpatialIndex||t.useSpatialIndex;this.a=e?new Ls:null,this.oa=new Ls,this.g={},this.j={},this.o={},this.v={},this.i=null;var o,i;t.features instanceof de?(o=t.features,i=o.a):Array.isArray(t.features)&&(i=t.features),e||o||(o=new de(i)),i&&Zu(this,i),o&&Ju(this,o)}function Ku(t,e,o){t.v[e]=[Jt(o,"change",t.ji,t),Jt(o,"propertychange",t.ji,t)]}function Xu(t,e,o){var i=!0,n=o.a;return void 0!==n?n.toString()in t.j?i=!1:t.j[n.toString()]=o:(f(!(e in t.o),30),t.o[e]=o),i}function Zu(t,e){var o,i,n,r,s=[],a=[],l=[];for(i=0,n=e.length;i<n;i++)r=e[i],o=u(r).toString(),Xu(t,o,r)&&a.push(r);for(i=0,n=a.length;i<n;i++){r=a[i],o=u(r).toString(),Ku(t,o,r);var p=r.U();p?(o=p.D(),s.push(o),l.push(r)):t.g[o]=r}for(t.a&&t.a.load(s,l),i=0,n=a.length;i<n;i++)t.b(new td("addfeature",a[i]))}function Ju(t,e){var o=!1;Jt(t,"addfeature",function(t){o||(o=!0,e.push(t.feature),o=!1)}),Jt(t,"removefeature",function(t){o||(o=!0,e.remove(t.feature),o=!1)}),Jt(e,"add",function(t){o||(o=!0,this.zb(t.element),o=!1)},t),Jt(e,"remove",function(t){o||(o=!0,this.Db(t.element),o=!1)},t),t.i=e}function Qu(t,e,o){t.ac([e[0],e[1],e[0],e[1]],function(t){if(t.U().sb(e))return o.call(void 0,t)})}function $u(t,e){for(var o in t.j)if(t.j[o]===e){delete t.j[o];break}}function td(t,e){ne.call(this,t),this.feature=e}function ed(t){cn.call(this,{handleDownEvent:nd,handleEvent:id,handleUpEvent:rd}),this.ea=null,this.u=!1,this.lb=t.source?t.source:null,this.Ha=t.features?t.features:null,this.ak=t.snapTolerance?t.snapTolerance:12,this.S=t.type,this.g=ud(this.S),this.Ja=t.minPoints?t.minPoints:this.g===EE?3:2,this.oa=t.maxPoints?t.maxPoints:1/0,this.Bd=t.finishCondition?t.finishCondition:Yo;var e=t.geometryFunction;if(!e)if("Circle"===this.S)e=function(t,e){var o=e||new Rc([NaN,NaN]);return o.yg(t[0],Math.sqrt(Wo(t[0],t[1]))),o};else{var o,i=this.g;i===_E?o=vi:i===bE?o=El:i===EE&&(o=Ri),e=function(t,e){var n=e;return n?i===EE?n.pa([t[0].concat([t[0][0]])]):n.pa(t):n=new o(t),n}}this.Ra=e,this.R=this.C=this.a=this.G=this.j=this.o=null,this.mb=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.ia=new Vu({source:new Yu({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:od()}),this.Oa=t.geometryName,this.Yj=t.condition?t.condition:sn,this.rf=t.freehand?Yo:t.freehandCondition?t.freehandCondition:an,Jt(this,he("active"),this.aj,this)}function od(){var t=Ua();return function(e){return t[e.U().T()]}}function id(t){this.u=this.g!==_E&&this.rf(t);var e=!this.u;return this.u&&"pointerdrag"===t.type&&null!==this.j?(pd(this,t),e=!1):"pointermove"===t.type?e=sd(this,t):"dblclick"===t.type&&(e=!1),dn.call(this,t)&&e}function nd(t){return this.u?(this.ea=t.pixel,this.o||ld(this,t),!0):!!this.Yj(t)&&(this.ea=t.pixel,!0)}function rd(t){var e=this.ea,o=t.pixel,i=e[0]-o[0],e=e[1]-o[1],i=i*i+e*e,e=!0,o=this.g===SE;return(this.u?i>this.mb:i<=this.mb)?(sd(this,t),this.o?this.u||o?this.Nd():ad(this,t)?this.Bd(t)&&this.Nd():pd(this,t):(ld(this,t),this.g===_E&&this.Nd()),e=!1):o&&(this.o=null),e}function sd(t,e){if(t.o){var o,i=e.coordinate,n=t.j.U();t.g===_E?o=t.a:t.g===EE?(o=t.a[0],o=o[o.length-1],ad(t,e)&&(i=t.o.slice())):(o=t.a,o=o[o.length-1]),o[0]=i[0],o[1]=i[1],t.Ra(t.a,n),t.G&&t.G.U().pa(i),n instanceof Ri&&t.g!==EE?(t.C||(t.C=new Va(new El(null))),n=n.nh(0),i=t.C.U(),i.ca(n.ka,n.ha())):t.R&&(i=t.C.U(),i.pa(t.R)),cd(t)}else i=e.coordinate.slice(),t.G?t.G.U().pa(i):(t.G=new Va(new vi(i)),cd(t));return!0}function ad(t,e){var o=!1;if(t.j){var i=!1,n=[t.o];if(t.g===bE?i=t.a.length>t.Ja:t.g===EE&&(i=t.a[0].length>t.Ja,n=[t.a[0][0],t.a[0][t.a[0].length-2]]),i)for(var i=e.map,r=0,s=n.length;r<s;r++){var a=n[r],l=i.Ka(a),p=e.pixel,o=p[0]-l[0],l=p[1]-l[1];if(o=Math.sqrt(o*o+l*l)<=(t.u?1:t.ak)){t.o=a;break}}}return o}function ld(t,e){var o=e.coordinate;t.o=o,t.g===_E?t.a=o.slice():t.g===EE?(t.a=[[o.slice(),o.slice()]],t.R=t.a[0]):(t.a=[o.slice(),o.slice()],t.g===SE&&(t.R=t.a)),t.R&&(t.C=new Va(new El(t.R))),o=t.Ra(t.a),t.j=new Va,t.Oa&&t.j.Vc(t.Oa),t.j.Sa(o),cd(t),t.b(new dd("drawstart",t.j))}function pd(t,e){var o,i,n=e.coordinate,r=t.j.U();t.g===bE?(t.o=n.slice(),i=t.a,i.length>=t.oa&&(t.u?i.pop():o=!0),i.push(n.slice()),t.Ra(i,r)):t.g===EE&&(i=t.a[0],i.length>=t.oa&&(t.u?i.pop():o=!0),i.push(n.slice()),o&&(t.o=i[0]),t.Ra(t.a,r)),cd(t),o&&t.Nd()}function hd(t){t.o=null;var e=t.j;return e&&(t.j=null,t.G=null,t.C=null,t.ia.la().clear(!0)),e}function cd(t){var e=[];t.j&&e.push(t.j),t.C&&e.push(t.C),t.G&&e.push(t.G),t=t.ia.la(),t.clear(!0),t.dd(e)}function ud(t){var e;return"Point"===t||"MultiPoint"===t?e=_E:"LineString"===t||"MultiLineString"===t?e=bE:"Polygon"===t||"MultiPolygon"===t?e=EE:"Circle"===t&&(e=SE),e}function dd(t,e){ne.call(this,t),this.feature=e}function fd(t){this.a=this.j=null,this.C=!1,this.G=this.o=null,t||(t={}),t.extent&&this.g(t.extent),cn.call(this,{handleDownEvent:gd,handleDragEvent:md,handleEvent:yd,handleUpEvent:vd}),this.u=new Vu({source:new Yu({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:_d(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.R=new Vu({source:new Yu({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:bd(),updateWhileAnimating:!0,updateWhileInteracting:!0})}function yd(t){if(!(t instanceof He))return!0;if("pointermove"==t.type&&!this.A){var e=t.pixel,o=t.map,i=Pd(this,e,o);i||(i=o.Za(e)),wd(this,i)}return dn.call(this,t),!1}function gd(t){function e(t){var e=null,o=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?o=n[3]:t[1]==n[3]&&(o=n[1]),null!==e&&null!==o?[e,o]:null}var o=t.pixel,i=t.map,n=this.D();return(t=Pd(this,o,i))&&n?(o=t[0]==n[0]||t[0]==n[2]?t[0]:null,i=t[1]==n[1]||t[1]==n[3]?t[1]:null,null!==o&&null!==i?this.a=Ed(e(t)):null!==o?this.a=Sd(e([o,n[1]]),e([o,n[3]])):null!==i&&(this.a=Sd(e([n[0],i]),e([n[2],i])))):(t=i.Za(o),this.g([t[0],t[1],t[0],t[1]]),this.a=Ed(t)),!0}function md(t){return this.a&&(t=t.coordinate,this.g(this.a(t)),wd(this,t)),!0}function vd(){this.a=null;var t=this.D();return t&&q(t)||this.g(null),!1}function _d(){var t=Ua();return function(){return t.Polygon}}function bd(){var t=Ua();return function(){return t.Point}}function Ed(t){return function(e){return I([t,e])}}function Sd(t,e){return t[0]==e[0]?function(o){return I([t,[o[0],e[1]]])}:t[1]==e[1]?function(o){return I([t,[e[0],o[1]]])}:null}function Pd(t,e,o){function i(t,e){return Ho(n,t)-Ho(n,e)}var n=o.Za(e),r=t.D();if(r){r=[[[r[0],r[1]],[r[0],r[3]]],[[r[0],r[3]],[r[2],r[3]]],[[r[2],r[3]],[r[2],r[1]]],[[r[2],r[1]],[r[0],r[1]]]],r.sort(i);var r=r[0],s=Do(n,r),a=o.Ka(s);if(10>=zo(e,a))return e=o.Ka(r[0]),o=o.Ka(r[1]),e=Wo(a,e),o=Wo(a,o),t.C=10>=Math.sqrt(Math.min(e,o)),t.C&&(s=e>o?r[1]:r[0]),s}return null}function wd(t,e){var o=t.G;o?o.U().pa(e):(o=new Va(new vi(e)),t.G=o,t.R.la().zb(o))}function Ad(t){ne.call(this,PE),this.b=t}function Cd(t){cn.call(this,{handleDownEvent:Ld,handleDragEvent:Gd,handleEvent:Nd,handleUpEvent:Od}),this.mb=t.condition?t.condition:hn,this.Oa=function(t){return sn(t)&&rn(t)},this.lb=t.deleteCondition?t.deleteCondition:this.Oa,this.Ha=this.g=null,this.Ja=[0,0],this.C=this.R=!1,this.a=new Ls,this.ia=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.o=this.oa=!1,this.j=[],this.G=new Vu({source:new Yu({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:Ud(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.ea={Point:this.Vm,LineString:this.Oh,LinearRing:this.Oh,Polygon:this.Wm,MultiPoint:this.Tm,MultiLineString:this.Sm,MultiPolygon:this.Um,Circle:this.Ip,GeometryCollection:this.Rm},this.u=t.features,this.u.forEach(this.Yf,this),Jt(this.u,"add",this.Pm,this),Jt(this.u,"remove",this.Qm,this),this.S=null}function Md(t,e){t.C||(t.C=!0,t.b(new Bd("modifystart",t.u,e)))}function xd(t,e){Id(t,e),t.g&&!t.u.ec()&&(t.G.la().Db(t.g),t.g=null),$t(e,"change",t.Nh,t)}function Id(t,e){var o=t.a,i=[];o.forEach(function(t){e===t.feature&&i.push(t)});for(var n=i.length-1;0<=n;--n)o.remove(i[n])}function Rd(t,e){var o=t.g;o?o.U().pa(e):(o=new Va(new vi(e)),t.g=o,t.G.la().zb(o))}function Td(t,e){return t.index-e.index}function Ld(t){if(!this.mb(t))return!1;kd(this,t.pixel,t.map),this.j.length=0,this.C=!1;var e=this.g;if(e){var o=[],e=e.U().X(),i=I([e]),i=Ns(this.a,i),n={};i.sort(Td);for(var r=0,s=i.length;r<s;++r){var a=i[r],l=a.na,p=u(a.feature),h=a.depth;h&&(p+="-"+h.join("-")),n[p]||(n[p]=Array(2)),"Circle"===a.geometry.T()&&1===a.index?(l=jd(e,a),Uo(l,e)&&!n[p][0]&&(this.j.push([a,0]),n[p][0]=a)):Uo(l[0],e)&&!n[p][0]?(this.j.push([a,0]),n[p][0]=a):Uo(l[1],e)&&!n[p][1]?("LineString"!==a.geometry.T()&&"MultiLineString"!==a.geometry.T()||!n[p][0]||0!==n[p][0].index)&&(this.j.push([a,1]),n[p][1]=a):u(l)in this.Ha&&!n[p][0]&&!n[p][1]&&o.push([a,e])}for(o.length&&Md(this,t),t=o.length-1;0<=t;--t)this.Il.apply(this,o[t])}return!!this.g}function Gd(t){this.R=!1,Md(this,t),t=t.coordinate;for(var e=0,o=this.j.length;e<o;++e){for(var i,n=this.j[e],r=n[0],s=r.depth,a=r.geometry,l=r.na,n=n[1];t.length<a.sa();)t.push(l[n][t.length]);switch(a.T()){case"Point":i=t,l[0]=l[1]=t;break;case"MultiPoint":i=a.X(),i[r.index]=t,l[0]=l[1]=t;break;case"LineString":i=a.X(),i[r.index+n]=t,l[n]=t;break;case"MultiLineString":case"Polygon":i=a.X(),i[s[0]][r.index+n]=t,l[n]=t;break;case"MultiPolygon":i=a.X(),i[s[1]][s[0]][r.index+n]=t,l[n]=t;break;case"Circle":l[0]=l[1]=t,0===r.index?(this.o=!0,a.wb(t)):(this.o=!0,a.Wc(zo(a.Ba(),t))),this.o=!1}i&&(r=a,s=i,this.o=!0,r.pa(s),this.o=!1)}Rd(this,t)}function Od(t){for(var e,o,i=this.j.length-1;0<=i;--i)if(e=this.j[i][0],o=e.geometry,"Circle"===o.T()){var n=o.Ba(),r=e.Ef[0];e=e.Ef[1],r.na[0]=r.na[1]=n,e.na[0]=e.na[1]=n,Gs(this.a,F(n),r),Gs(this.a,o.D(),e)}else Gs(this.a,I(e.na),e);return this.C&&(this.b(new Bd("modifyend",this.u,t)),this.C=!1),!1}function Nd(t){if(!(t instanceof He))return!0;this.S=t;var e;return Bi(t.map.$())[1]||"pointermove"!=t.type||this.A||(this.Ja=t.pixel,kd(this,t.pixel,t.map)),this.g&&this.lb(t)&&(e=!("singleclick"!=t.type||!this.R)||this.Ci()),"singleclick"==t.type&&(this.R=!1),dn.call(this,t)&&!e}function kd(t,e,o){function i(t,e){return Dd(n,t)-Dd(n,e)}var n=o.Za(e),r=R(F(n),o.$().Ua()*t.ia),r=Ns(t.a,r);if(0<r.length){r.sort(i);var s=r[0],a=s.na,l=jd(n,s),p=o.Ka(l),h=zo(e,p);if(h<=t.ia){if(e={},"Circle"===s.geometry.T()&&1===s.index)t.oa=!0,Rd(t,l);else for(h=o.Ka(a[0]),s=o.Ka(a[1]),o=Wo(p,h),p=Wo(p,s),h=Math.sqrt(Math.min(o,p)),t.oa=h<=t.ia,t.oa&&(l=o>p?a[1]:a[0]),Rd(t,l),p=1,o=r.length;p<o&&(l=r[p].na,Uo(a[0],l[0])&&Uo(a[1],l[1])||Uo(a[0],l[1])&&Uo(a[1],l[0]));++p)e[u(l)]=!0;return e[u(a)]=!0,void(t.Ha=e)}}t.g&&(t.G.la().Db(t.g),t.g=null)}function Dd(t,e){var o=e.geometry;if("Circle"===o.T()&&1===e.index){var i=Wo(o.Ba(),t),o=Math.sqrt(i)-o.Vd();return o*o}return Ho(t,e.na)}function jd(t,e){var o=e.geometry;return"Circle"===o.T()&&1===e.index?o.Ab(t):Do(t,e.na)}function Fd(t,e,o,i,n){ks(t.a,e.D(),function(t){t.geometry===e&&(void 0===i||void 0===t.depth||s(t.depth,i))&&t.index>o&&(t.index+=n)})}function Ud(){var t=Ua();return function(){return t.Point}}function Bd(t,e,o){ne.call(this,t),this.features=e,this.mapBrowserEvent=o}function Vd(t){if(Xi.call(this,{handleEvent:Wd}),t=t||{},this.C=t.condition?t.condition:rn,this.A=t.addCondition?t.addCondition:Ko,this.G=t.removeCondition?t.removeCondition:Ko,this.R=t.toggleCondition?t.toggleCondition:an,this.o=!!t.multi&&t.multi,this.j=t.filter?t.filter:Yo,this.l=t.hitTolerance?t.hitTolerance:0,this.g=new Vu({source:new Yu({useSpatialIndex:!1,features:t.features,wrapX:t.wrapX}),style:t.style?t.style:zd(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.layers)if("function"==typeof t.layers)t=t.layers;else{var e=t.layers;t=function(t){return o(e,t)}}else t=Yo;this.u=t,this.a={},t=this.g.la().i,Jt(t,"add",this.Xm,this),Jt(t,"remove",this.an,this)}function Wd(t){if(!this.C(t))return!0;var e=this.A(t),i=this.G(t),n=this.R(t),r=!e&&!i&&!n,s=t.map,a=this.g.la().i,l=[],p=[];if(r){for(st(this.a),s.re(t.pixel,function(t,e){if(this.j(t,e)){p.push(t);var o=u(t);return this.a[o]=e,!this.o}}.bind(this),{layerFilter:this.u,hitTolerance:this.l}),r=a.ec()-1;0<=r;--r){var s=a.item(r),h=p.indexOf(s);-1<h?p.splice(h,1):(a.remove(s),l.push(s))}p.length&&a.Tf(p)}else{for(s.re(t.pixel,function(t,r){if(this.j(t,r)){if(!e&&!n||o(a.a,t))(i||n)&&o(a.a,t)&&(l.push(t),s=u(t),delete this.a[s]);else{p.push(t);var s=u(t);this.a[s]=r}return!this.o}}.bind(this),{layerFilter:this.u,hitTolerance:this.l}),r=l.length-1;0<=r;--r)a.remove(l[r]);a.Tf(p)}return(0<p.length||0<l.length)&&this.b(new Hd(wE,p,l,t)),nn(t)}function zd(){var t=Ua();return n(t.Polygon,t.LineString),n(t.GeometryCollection,t.LineString),function(e){return e.U()?t[e.U().T()]:null}}function Hd(t,e,o,i){ne.call(this,t),this.selected=e,this.deselected=o,this.mapBrowserEvent=i}function qd(t){cn.call(this,{handleEvent:Yd,handleDownEvent:Yo,handleUpEvent:Kd}),t=t||{},this.o=t.source?t.source:null,this.ia=void 0===t.vertex||t.vertex,this.R=void 0===t.edge||t.edge,this.j=t.features?t.features:null,this.oa=[],this.C={},this.S={},this.u={},this.G=null,this.g=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.Ja=Xd.bind(this),this.a=new Ls,this.ea={Point:this.hn,LineString:this.Rh,LinearRing:this.Rh,Polygon:this.jn,MultiPoint:this.fn,MultiLineString:this.en,MultiPolygon:this.gn,GeometryCollection:this.dn}}function Yd(t){var e,o,i=t.pixel,n=t.coordinate;e=t.map;var r=e.Za([i[0]-this.g,i[1]+this.g]);o=e.Za([i[0]+this.g,i[1]-this.g]);var s,r=I([r,o]),a=Ns(this.a,r),r=!1,l=null;return o=null,0<a.length&&(this.G=n,a.sort(this.Ja),a=a[0].na,this.ia&&!this.R?(n=e.Ka(a[0]),s=e.Ka(a[1]),n=Wo(i,n),i=Wo(i,s),s=Math.sqrt(Math.min(n,i)),(s=s<=this.g)&&(r=!0,l=n>i?a[1]:a[0],o=e.Ka(l))):this.R&&(l=Do(n,a),o=e.Ka(l),zo(i,o)<=this.g&&(r=!0,this.ia&&(n=e.Ka(a[0]),s=e.Ka(a[1]),n=Wo(o,n),i=Wo(o,s),s=Math.sqrt(Math.min(n,i)),s=s<=this.g)))&&(l=n>i?a[1]:a[0],o=e.Ka(l)),r&&(o=[Math.round(o[0]),Math.round(o[1])])),e=l,r&&(t.coordinate=e.slice(0,2),t.pixel=o),dn.call(this,t)}function Kd(){var t=at(this.u);return t.length&&(t.forEach(this.$i,this),this.u={}),!1}function Xd(t,e){return Ho(this.G,t.na)-Ho(this.G,e.na)}function Zd(t){cn.call(this,{handleDownEvent:Jd,handleDragEvent:$d,handleMoveEvent:tf,handleUpEvent:Qd}),t=t||{},this.g=void 0,this.a=null,this.o=void 0!==t.features?t.features:null;var e;if(t.layers)if("function"==typeof t.layers)e=t.layers;else{var i=t.layers;e=function(t){return o(i,t)}}else e=Yo;this.C=e,this.u=t.hitTolerance?t.hitTolerance:0,this.j=null}function Jd(t){if(this.j=ef(this,t.pixel,t.map),!this.a&&this.j){this.a=t.coordinate,tf.call(this,t);var e=this.o||new de([this.j]);return this.b(new of("translatestart",e,t.coordinate)),!0}return!1}function Qd(t){if(this.a){this.a=null,tf.call(this,t);var e=this.o||new de([this.j]);return this.b(new of("translateend",e,t.coordinate)),!0}return!1}function $d(t){if(this.a){t=t.coordinate;var e=t[0]-this.a[0],o=t[1]-this.a[1],i=this.o||new de([this.j]);i.forEach(function(t){var i=t.U();i.translate(e,o),t.Sa(i)}),this.a=t,this.b(new of("translating",i,t))}}function tf(t){var e=t.map.Kc();ef(this,t.pixel,t.map)?(this.g=void 0!==this.g?this.g:e.style.cursor,e.style.cursor=this.a?"-webkit-grabbing":"-webkit-grab",e.style.cursor=this.a?"grabbing":"grab"):void 0!==this.g&&(e.style.cursor=this.g,this.g=void 0)}function ef(t,e,i){return i.re(e,function(t){if(!this.o||o(this.o.a,t))return t}.bind(t),{layerFilter:t.C,hitTolerance:t.u})}function of(t,e,o){ne.call(this,t),this.features=e,this.coordinate=o}function nf(t){t=t||{};var e=og({},t);delete e.gradient,delete e.radius,delete e.blur,delete e.shadow,delete e.weight,Vu.call(this,e),this.l=null,this.Y=void 0!==t.shadow?t.shadow:250,this.S=void 0,this.R=null,Jt(this,he(ME),this.hl,this),this.Ki(t.gradient?t.gradient:AE),this.Ei(void 0!==t.blur?t.blur:15),this.Wc(void 0!==t.radius?t.radius:8),Jt(this,he(CE),this.Qf,this),Jt(this,he(xE),this.Qf,this),this.Qf();var o,i=t.weight?t.weight:"weight";o="string"==typeof i?function(t){return t.get(i)}:i,this.g(function(t){t=o(t),t=void 0!==t?_(t,0,1):1;var e=255*t|0,i=this.R[e];return i||(i=[new Da({image:new Kp({opacity:t,src:this.S})})],this.R[e]=i),i}.bind(this)),this.set(vE,null),Jt(this,"render",this.yl,this)}function rf(t){Mu.call(this,t),this.o=nr(),this.g=null}function sf(t){rf.call(this,t),this.M=null,this.c=nr()}function af(t,e,o,i){var n=Mt(o,e,t);return o=dt(e,i,o),e=e.sc(),void 0!==e&&(o*=e),e=t.sc(),void 0!==e&&(o/=e),t=dt(t,o,n)/o,isFinite(t)&&0<t&&(o/=t),o}function lf(t,e,o,i){t=o-t,e=i-e;var n=Math.sqrt(t*t+e*e);return[Math.round(o+t/n),Math.round(i+e/n)]}function pf(t,e,o,i,n,r,s,a,l,p,h){var c=Ee(Math.round(o*t),Math.round(o*e));if(!l.length)return c.canvas;c.scale(o,o);var u=D();l.forEach(function(t){V(u,t.extent)});var d=Ee(Math.round(o*et(u)/i),Math.round(o*J(u)/i)),f=o/i;l.forEach(function(t){d.drawImage(t.image,p,p,t.image.width-2*p,t.image.height-2*p,(t.extent[0]-u[0])*f,-(t.extent[3]-u[3])*f,et(t.extent)*f,J(t.extent)*f)});var y=$(s);return a.c.forEach(function(t){var e=t.source,n=t.target,s=e[1][0],a=e[1][1],l=e[2][0],p=e[2][1];t=(n[0][0]-y[0])/r;var h=-(n[0][1]-y[1])/r,f=(n[1][0]-y[0])/r,g=-(n[1][1]-y[1])/r,m=(n[2][0]-y[0])/r,v=-(n[2][1]-y[1])/r,n=e[0][0],e=e[0][1],s=s-n,a=a-e,l=l-n,p=p-e;t:{for(s=[[s,a,0,0,f-t],[l,p,0,0,m-t],[0,0,s,a,g-h],[0,0,l,p,v-h]],a=s.length,l=0;l<a;l++){for(var p=l,_=Math.abs(s[l][l]),b=l+1;b<a;b++){var E=Math.abs(s[b][l]);E>_&&(_=E,p=b)}if(!_){s=null;break t}for(_=s[p],s[p]=s[l],s[l]=_,p=l+1;p<a;p++)for(_=-s[p][l]/s[l][l],b=l;b<a+1;b++)s[p][b]=l==b?0:s[p][b]+_*s[l][b]}for(l=Array(a),p=a-1;0<=p;p--)for(l[p]=s[p][a]/s[p][p],_=p-1;0<=_;_--)s[_][a]-=s[_][p]*l[p];s=l}s&&(c.save(),c.beginPath(),l=(t+f+m)/3,p=(h+g+v)/3,a=lf(l,p,t,h),f=lf(l,p,f,g),m=lf(l,p,m,v),c.moveTo(f[0],f[1]),c.lineTo(a[0],a[1]),c.lineTo(m[0],m[1]),c.clip(),c.transform(s[0],s[2],s[1],s[3],t,h),c.translate(u[0]-n,u[3]-e),c.scale(i/o,-i/o),c.drawImage(d.canvas,0,0),c.restore())}),h&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.c.forEach(function(t){var e=t.target;t=(e[0][0]-y[0])/r;var o=-(e[0][1]-y[1])/r,i=(e[1][0]-y[0])/r,n=-(e[1][1]-y[1])/r,s=(e[2][0]-y[0])/r,e=-(e[2][1]-y[1])/r;c.beginPath(),c.moveTo(i,n),c.lineTo(t,o),c.lineTo(s,e),c.closePath(),c.stroke()}),c.restore()),c.canvas}function hf(t,e,o,i,n){this.f=t,this.i=e;var r={},s=Pt(this.i,this.f);if(this.a=function(t){var e=t[0]+"/"+t[1];return r[e]||(r[e]=s(t)),r[e]},this.g=i,this.v=n*n,this.c=[],this.j=!1,this.o=this.f.a&&!!i&&!!this.f.D()&&et(i)==et(this.f.D()),this.b=this.f.D()?et(this.f.D()):null,this.l=this.i.D()?et(this.i.D()):null,t=$(o),e=tt(o),i=K(o),o=Y(o),n=this.a(t),cf(this,t,e,i,o,n,this.a(e),this.a(i),this.a(o),10),this.j){var a=1/0;this.c.forEach(function(t){a=Math.min(a,t.source[0][0],t.source[1][0],t.source[2][0])}),this.c.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-a>this.b/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-a>this.b/2&&(e[0][0]-=this.b),e[1][0]-a>this.b/2&&(e[1][0]-=this.b),e[2][0]-a>this.b/2&&(e[2][0]-=this.b),Math.max(e[0][0],e[1][0],e[2][0])-Math.min(e[0][0],e[1][0],e[2][0])<this.b/2&&(t.source=e)}},this)}r={}}function cf(t,e,o,i,n,r,s,a,l,p){var h=I([r,s,a,l]),c=t.b?et(h)/t.b:null,u=t.b,d=t.f.a&&.5<c&&1>c,f=!1;if(0<p){if(t.i.f&&t.l)var y=I([e,o,i,n]),f=f|.25<et(y)/t.l;!d&&t.f.f&&c&&(f|=.25<c)}if(f||!t.g||ot(h,t.g)){if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1]))){if(!(0<p))return;f=!0}if(0<p&&(f||(h=t.a([(e[0]+i[0])/2,(e[1]+i[1])/2]),u=d?(w(r[0],u)+w(a[0],u))/2-w(h[0],u):(r[0]+a[0])/2-h[0],h=(r[1]+a[1])/2-h[1],f=u*u+h*h>t.v),f))return void(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])?(d=[(o[0]+i[0])/2,(o[1]+i[1])/2],u=t.a(d),h=[(n[0]+e[0])/2,(n[1]+e[1])/2],c=t.a(h),cf(t,e,o,d,h,r,s,u,c,p-1),cf(t,h,d,i,n,c,u,a,l,p-1)):(d=[(e[0]+o[0])/2,(e[1]+o[1])/2],u=t.a(d),h=[(i[0]+n[0])/2,(i[1]+n[1])/2],c=t.a(h),cf(t,e,d,h,n,r,u,c,l,p-1),cf(t,d,o,i,h,u,s,a,c,p-1)));if(d){if(!t.o)return;t.j=!0}t.c.push({source:[r,a,l],target:[e,i,n]}),t.c.push({source:[r,s,a],target:[e,o,i]})}}function uf(t){var e=D();return t.c.forEach(function(t){t=t.source,W(e,t[0]),W(e,t[1]),W(e,t[2])}),e}function df(t,e,o,i,n,r){this.v=e,this.o=t.D();var s=e.D(),a=s?Q(o,s):o,s=af(t,e,X(a),i);this.l=new hf(t,e,a,this.o,.5*s),this.c=i,this.f=o,t=uf(this.l),this.j=(this.Eb=r(t,s,n))?this.Eb.a:1,this.$d=this.g=null,n=2,r=[],this.Eb&&(n=0,r=this.Eb.i),jc.call(this,o,i,this.j,n,r)}function ff(t){zu.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state}),this.u=void 0!==t.resolutions?t.resolutions:null,this.a=null,this.ea=0}function yf(t,e){return t.u&&(e=t.u[i(t.u,e,0)]),e}function gf(t,e){t.Z().src=e}function mf(t,e){ne.call(this,t),this.image=e}function vf(t){ff.call(this,{attributions:t.attributions,logo:t.logo,
projection:t.projection,resolutions:t.resolutions,state:t.state}),this.ia=t.canvasFunction,this.S=null,this.Y=0,this.oa=void 0!==t.ratio?t.ratio:1.5}function _f(t){this.i=t.source,this.Oa=nr(),this.g=Ee(),this.o=[0,0],this.Ha=void 0==t.renderBuffer?100:t.renderBuffer,this.A=null,vf.call(this,{attributions:t.attributions,canvasFunction:this.Zj.bind(this),logo:t.logo,projection:t.projection,ratio:t.ratio,resolutions:t.resolutions,state:this.i.V()}),this.C=null,this.v=void 0,this.ci(t.style),Jt(this.i,"change",this.Fn,this)}function bf(t,e,o,i,n){return o=i/o,dr(t.Oa,n[0]/2,n[1]/2,o,-o,0,-e[0],-e[1])}function Ef(t,e){ju.call(this,t,e),this.j=this.i=this.M=null}function Sf(t,e){var o=e.Z();return rs(t.c.f,o)}function Pf(t,e,o,i,n,r,s,a){e*=r,o*=r,t=t.u,rr(t),cr(t,2*i/e,2*i/o),hr(t,-s),ur(t,a[0]-n[0],a[1]-n[1]),cr(t,(a[2]-a[0])/2,(a[3]-a[1])/2),ur(t,1,1)}function wf(t){er.call(this,t||{})}function Af(t){rf.call(this,t),this.u=Ee(),this.l=null,this.c=[],this.j=D(),this.Ja=new y(0,0,0,0),this.C=nr(),this.Y=0}function Cf(t,e){var o=e.V(),i=t.a.Td();return 2==o||4==o||3==o&&!i}function Mf(){this.b="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"}function xf(){this.b="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"}function If(t,e){this.f=t.getUniformLocation(e,"e"),this.c=t.getUniformLocation(e,"d"),this.b=t.getAttribLocation(e,"b"),this.a=t.getAttribLocation(e,"c")}function Rf(t,e){ju.call(this,t,e),this.R=LE,this.ia=GE,this.i=null,this.G=new Hr([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.A=this.j=null,this.o=-1,this.S=[0,0]}function Tf(t){t=t||{};var e=og({},t);delete e.preload,delete e.useInterimTilesOnError,er.call(this,e),this.Uh(void 0!==t.preload?t.preload:0),this.Vh(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}function Lf(t){Af.call(this,t),this.G=!1,this.S=nr(),this.Y="vector"==t.v?1:0}function Gf(t,e,o){function i(t){var e,o=t.Nc();if(o?e=o.call(t,g):(o=n.i)&&(e=o(t,g)),e){Array.isArray(e)||(e=[e]);var o=v,i=m;if(e){var r=!1;if(Array.isArray(e))for(var s=0,a=e.length;s<a;++s)r=Gu(i,t,e[s],o,this.$h,this)||r;else r=Gu(i,t,e,o,this.$h,this)||r;t=r}else t=!1;this.G=this.G||t,l.Ld=l.Ld||t}}var n=t.a,r=o.pixelRatio;o=o.viewState.projection;var s=n.f,a=n.get(vE)||null,l=e.f;if(l.Ld||l.af!=s||l.wg!=a){l.vd=null,l.Ld=!1;var p,h,c,u=n.la(),d=u.tileGrid,f=e.Ga,y=e.l,g=d.La(f[0]);"tile-pixels"==y.Jb()?(p=c=u.pb(),d=x(d.fb(f[0])),p=[0,0,d[0]*p,d[1]*p]):(c=g,p=d.Ta(f),St(o,y)||(h=!0,e.Xf(o))),l.Ld=!1;var m=new du(0,p,c,u.g,n.c),v=Lu(c,r);for(e=e.g,a&&a!==l.wg&&e.sort(a),u=0,c=e.length;u<c;++u)r=e[u],h&&r.U().tb(y,o),i.call(t,r);gu(m),l.af=s,l.wg=a,l.vd=m,l.resolution=NaN}}function Of(t){t=t||{};var e=og({},t);delete e.preload,delete e.useInterimTilesOnError,Vu.call(this,e),this.Wh(t.preload?t.preload:0),this.Xh(!t.useInterimTilesOnError||t.useInterimTilesOnError),f(void 0==t.renderMode||"image"==t.renderMode||"hybrid"==t.renderMode||"vector"==t.renderMode,28),this.v=t.renderMode||"hybrid"}function Nf(t,e,o,i){function n(){delete window[s],r.parentNode.removeChild(r)}var r=document.createElement("script"),s="olc_"+u(e);r.async=!0,r.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+s;var a=setTimeout(function(){n(),o&&o()},1e4);window[s]=function(t){clearTimeout(a),n(),e(t)},document.getElementsByTagName("head")[0].appendChild(r)}function kf(t,e,o,i,n,r,s,a,l,p,h){if(Bc.call(this,n,0),this.C=void 0!==h&&h,this.A=s,this.u=a,this.I=null,this.c=e,this.j=i,this.o=r||n,this.f=[],this.wd=null,this.g=0,r=i.Ta(this.o),a=this.j.D(),n=this.c.D(),r=a?Q(r,a):r,q(r))if((a=t.D())&&(n=n?Q(n,a):a),i=af(t,o,X(r),i.La(this.o[0])),!isFinite(i)||0>=i)this.state=4;else if(this.v=new hf(t,o,r,n,i*(void 0!==p?p:.5)),this.v.c.length)if(this.g=e.Mc(i),o=uf(this.v),n&&(t.a?(o[1]=_(o[1],n[1],n[3]),o[3]=_(o[3],n[1],n[3])):o=Q(o,n)),q(o)){for(t=Nt(e,o,this.g),e=t.da;e<=t.ba;e++)for(o=t.fa;o<=t.ja;o++)(p=l(this.g,e,o,s))&&this.f.push(p);this.f.length||(this.state=4)}else this.state=4;else this.state=4;else this.state=4}function Df(t,e){var o=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,r=/\{-y\}/g;return function(s){if(s)return t.replace(o,s[0].toString()).replace(i,s[1].toString()).replace(n,function(){return(-s[2]-1).toString()}).replace(r,function(){var t=e.a?e.a[s[0]]:null;return f(t,55),(t.ja-t.fa+1+s[2]).toString()})}}function jf(t,e){for(var o=t.length,i=Array(o),n=0;n<o;++n)i[n]=Df(t[n],e);return Ff(i)}function Ff(t){return 1===t.length?t[0]:function(e,o,i){if(e)return t[w((e[1]<<e[0])+e[2],t.length)](e,o,i)}}function Uf(){}function Bf(t){var e=[],o=/\{([a-z])-([a-z])\}/.exec(t);if(o){var i,n=o[2].charCodeAt(0);for(i=o[1].charCodeAt(0);i<=n;++i)e.push(t.replace(o[0],String.fromCharCode(i)));return e}if(o=o=/\{(\d+)-(\d+)\}/.exec(t)){for(n=parseInt(o[2],10),i=parseInt(o[1],10);i<=n;i++)e.push(t.replace(o[0],i.toString()));return e}return e.push(t),e}function Vf(t){aa.call(this),this.i=void 0!==t?t:2048}function Wf(t){return t.c>t.i}function zf(t){zu.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.oa=void 0!==t.opaque&&t.opaque,this.Oa=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.a=new Vf(t.cacheSize),this.j=[0,0],this.tc=""}function Hf(t,e,o,i,n){if(!(e=t.Rd(e)))return!1;for(var r,s,a=!0,l=i.da;l<=i.ba;++l)for(var p=i.fa;p<=i.ja;++p)r=t.Sb(o,l,p),s=!1,e.b.hasOwnProperty(r)&&(r=e.get(r),(s=2===r.V())&&(s=!1!==n(r))),s||(a=!1);return a}function qf(t,e){t.tc!==e&&(t.tc=e,t.s())}function Yf(t,e,o){var i=void 0!==o?o:t.c;if(o=t.Ib(i),t.G&&i.f){var n=e;e=n[0],t=kt(o,n),i=Vt(i),G(i,t)?e=n:(n=et(i),t[0]+=n*Math.ceil((i[0]-t[0])/n),e=o.Pf(t,e))}if(n=e[0],i=e[1],t=e[2],o.minZoom>n||n>o.maxZoom)o=!1;else{var r=o.D();o=!(o=r?Nt(o,r,n):o.a?o.a[n]:null)||g(o,i,t)}return o?e:null}function Kf(t,e){ne.call(this,t),this.tile=e}function Xf(t){zf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.Fc?this.Fc.bind(this):Uf,this.urls=null,t.urls?this.cb(t.urls):t.url&&this.jb(t.url),t.tileUrlFunction&&this.bb(t.tileUrlFunction)}function Zf(t){Xf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:$f,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=t.tileClass?t.tileClass:Wc,this.g={},this.v={},this.Ha=t.reprojectionErrorThreshold,this.C=!1}function Jf(t,e,o,i,n,r,s){return e=[e,o,i],n=(o=Yf(t,e,r))?t.tileUrlFunction(o,n,r):void 0,n=new t.tileClass(e,void 0!==n?0:4,void 0!==n?n:"",t.crossOrigin,t.tileLoadFunction),n.key=s,Jt(n,"change",t.gi,t),n}function Qf(t,e,o,i,n,r){var s,a=t.Sb(e,o,i),l=t.tc;if(t.a.b.hasOwnProperty(a)){if(s=t.a.get(a),s.key!=l){var p=s;if(s=Jf(t,e,o,i,n,r,l),0==p.V()?s.a=p.a:s.a=p,s.a){e=s.a,o=s;do{if(2==e.V()){e.a=null;break}1==e.V()?o=e:0==e.V()?o.a=e.a:o=e,e=o.a}while(e)}t.a.replace(a,s)}}else s=Jf(t,e,o,i,n,r,l),t.a.set(a,s);return s}function $f(t,e){t.Z().src=e}function ty(t){this.A=void 0!==t.hidpi&&t.hidpi,Zf.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Et("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:this.A?2:1,wrapX:void 0===t.wrapX||t.wrapX}),this.S=void 0!==t.culture?t.culture:"en-us",this.u=void 0!==t.maxZoom?t.maxZoom:-1,this.i=t.key,this.o=t.imagerySet,Nf("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.o+"?uriScheme=https&include=ImageryProviders&key="+this.i,this.ia.bind(this),void 0,"jsonp")}function ey(t){t=t||{};var e=void 0!==t.projection?t.projection:"EPSG:3857",o=void 0!==t.tileGrid?t.tileGrid:Ut({extent:Vt(e),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});Zf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX})}function oy(t){this.u=t.account,this.A=t.map||"",this.i=t.config||{},this.o={},ey.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,state:"loading",wrapX:t.wrapX}),iy(this)}function iy(t){var e=JSON.stringify(t.i);if(t.o[e])ny(t,t.o[e]);else{var o="https://"+t.u+".cartodb.com/api/v1/map";t.A&&(o+="/named/"+t.A);var i=new XMLHttpRequest;i.addEventListener("load",t.jl.bind(t,e)),i.addEventListener("error",t.il.bind(t)),i.open("POST",o),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t.i))}}function ny(t,e){t.jb("https://"+e.cdn_url.https+"/"+t.u+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png")}function ry(t){Yu.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,wrapX:t.wrapX}),this.C=void 0,this.ia=void 0!==t.distance?t.distance:20,this.A=[],this.Ra=t.geometryFunction||function(t){return t=t.U(),f(t instanceof vi,10),t},this.u=t.source,this.u.J("change",ry.prototype.Oa,this)}function sy(t){if(void 0!==t.C){t.A.length=0;for(var e=D(),o=t.ia*t.C,i=t.u.Ne(),n={},r=0,s=i.length;r<s;r++){var a=i[r];u(a).toString()in n||!(a=t.Ra(a))||(a=a.X(),F(a,e),R(e,o,e),a=t.u.Hf(e),a=a.filter(function(t){return!((t=u(t).toString())in n)&&(n[t]=!0)}),t.A.push(ay(t,a)))}}}function ay(t,e){for(var o=[0,0],i=e.length-1;0<=i;--i){var n=t.Ra(e[i]);n?ko(o,n.X()):e.splice(i,1)}return Vo(o,1/e.length),o=new Va(new vi(o)),o.set("features",e),o}function ly(t,e){var o=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&o.push(t+"="+encodeURIComponent(e[t]))});var i=o.join("&");return t=t.replace(/[?&]$/,""),(t=-1===t.indexOf("?")?t+"?":t+"&")+i}function py(t){t=t||{},ff.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.S=void 0!==t.crossOrigin?t.crossOrigin:null,this.Y=void 0===t.hidpi||t.hidpi,this.i=t.url,this.g=t.imageLoadFunction?t.imageLoadFunction:gf,this.v=t.params||{},this.M=null,this.o=[0,0],this.C=0,this.A=void 0!==t.ratio?t.ratio:1.5}function hy(t){ff.call(this,{projection:t.projection,resolutions:t.resolutions}),this.S=void 0!==t.crossOrigin?t.crossOrigin:null,this.o=void 0!==t.displayDpi?t.displayDpi:96,this.g=t.params||{},this.C=t.url,this.i=t.imageLoadFunction?t.imageLoadFunction:gf,this.Y=void 0===t.hidpi||t.hidpi,this.ia=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.v=void 0!==t.ratio?t.ratio:1,this.oa=void 0!==t.useOverlay&&t.useOverlay,this.M=null,this.A=0}function cy(t){var e=t.imageExtent,o=void 0!==t.crossOrigin?t.crossOrigin:null,i=t.imageLoadFunction?t.imageLoadFunction:gf;ff.call(this,{attributions:t.attributions,logo:t.logo,projection:Et(t.projection)}),this.M=new Fc(e,void 0,1,this.l,t.url,o,i),this.i=t.imageSize?t.imageSize:null,Jt(this.M,"change",this.j,this)}function uy(t){t=t||{},ff.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.ia=void 0!==t.crossOrigin?t.crossOrigin:null,this.g=t.url,this.v=t.imageLoadFunction?t.imageLoadFunction:gf,this.i=t.params||{},this.o=!0,fy(this),this.Y=t.serverType,this.oa=void 0===t.hidpi||t.hidpi,this.M=null,this.A=[0,0],this.S=0,this.C=void 0!==t.ratio?t.ratio:1.5}function dy(t,e,o,i,n,r){if(f(void 0!==t.g,9),r[t.o?"CRS":"SRS"]=n.nb,"STYLES"in t.i||(r.STYLES=""),1!=i)switch(t.Y){case"geoserver":i=90*i+.5|0,r.FORMAT_OPTIONS="FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+";dpi:"+i:"dpi:"+i;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:f(!1,8)}r.WIDTH=o[0],r.HEIGHT=o[1],o=n.b;var s;return s=t.o&&"ne"==o.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r.BBOX=s.join(","),ly(t.g,r)}function fy(t){t.o=0<=No(t.i.VERSION||"1.3.0")}function yy(t){t=t||{};var e;e=void 0!==t.attributions?t.attributions:[UE],ey.call(this,{attributions:e,cacheSize:t.cacheSize,crossOrigin:void 0!==t.crossOrigin?t.crossOrigin:"anonymous",opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:t.wrapX})}function gy(t){this.C=null,this.Ha=void 0!==t.operationType?t.operationType:"pixel",this.Oa=void 0!==t.threads?t.threads:1,this.i=_y(t.sources);for(var e=0,o=this.i.length;e<o;++e)Jt(this.i[e],"change",this.s,this);this.g=Ee(),this.ia=new Co(function(){return 1},this.s.bind(this));for(var e=vy(this.i),o={},i=0,n=e.length;i<n;++i)o[u(e[i].layer)]=e[i];this.o=this.v=null,this.Y={animate:!1,attributions:{},coordinateToPixelTransform:nr(),extent:null,focus:null,index:0,layerStates:o,layerStatesArray:e,logos:{},pixelRatio:1,pixelToCoordinateTransform:nr(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.ia,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},ff.call(this,{}),t.operation&&this.A(t.operation,t.lib)}function my(t,e,o){var i=t.v;return!i||t.f!==i.kp||o!==i.resolution||!B(e,i.extent)}function vy(t){return t.map(function(t){return Kn(t.a)})}function _y(t){for(var e=t.length,o=Array(e),i=0;i<e;++i){var n=i,r=t[i],s=null;r instanceof zf?(r=new Tf({source:r}),s=new Af(r)):r instanceof ff&&(r=new wf({source:r}),s=new sf(r)),o[n]=s}return o}function by(t,e,o){ne.call(this,t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=o}function Ey(t){var e=t.layer.indexOf("-"),e=qE[-1==e?t.layer:t.layer.slice(0,e)],o=HE[t.layer];ey.call(this,{attributions:zE,cacheSize:t.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=t.maxZoom?t.maxZoom:e.maxZoom,minZoom:void 0!=t.minZoom?t.minZoom:e.minZoom,opaque:o.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+o.Hb})}function Sy(t){t=t||{},Zf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.i=t.params||{},this.o=D(),qf(this,Py(this))}function Py(t){var e,o=0,i=[];for(e in t.i)i[o++]=e+"-"+t.i[e];return i.join("/")}function wy(t){zf.call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX})}function Ay(t,e,o){Bc.call(this,t,2),this.c=e,this.Fa=o,this.f=null}function Cy(t){if(this.i=null,Zf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:Et("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX}),t.jsonp)Nf(t.url,this.di.bind(this),this.Le.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.On.bind(this)),e.addEventListener("error",this.Nn.bind(this)),e.open("GET",t.url),e.send()}}function My(t){if(zf.call(this,{projection:Et("EPSG:3857"),state:"loading"}),this.v=void 0===t.preemptive||t.preemptive,this.o=Uf,this.g=void 0,this.i=t.jsonp||!1,t.url)if(this.i)Nf(t.url,this.bg.bind(this),this.Me.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.Sn.bind(this)),e.addEventListener("error",this.Rn.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.bg(t.tileJSON):f(!1,51)}function xy(t,e,o,i,n,r){Bc.call(this,t,e),this.o=o,this.f=i,this.I=n,this.c=this.j=this.g=null,this.v=r}function Iy(t,e,o,i,n){0==t.state&&!0===n?(Qt(t,"change",function(){o.call(i,this.getData(e))},t),Ry(t)):!0===n?setTimeout(function(){o.call(i,this.getData(e))}.bind(t),0):o.call(i,t.getData(e))}function Ry(t){if(0==t.state)if(t.state=1,t.v)Nf(t.o,t.ei.bind(t),t.xe.bind(t));else{var e=new XMLHttpRequest;e.addEventListener("load",t.Qn.bind(t)),e.addEventListener("error",t.Pn.bind(t)),e.open("GET",t.o),e.send()}}function Ty(t){t=t||{};var e=t.params||{};Zf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:!("TRANSPARENT"in e?e.TRANSPARENT:1),projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.u=void 0!==t.gutter?t.gutter:0,this.i=e,this.o=!0,this.A=t.serverType,this.Y=void 0===t.hidpi||t.hidpi,this.S="",Gy(this),this.ea=D(),Ny(this),qf(this,Oy(this))}function Ly(t,e,o,i,n,r,s){var a=t.urls;if(a){if(s.WIDTH=o[0],s.HEIGHT=o[1],s[t.o?"CRS":"SRS"]=r.nb,"STYLES"in t.i||(s.STYLES=""),1!=n)switch(t.A){case"geoserver":o=90*n+.5|0,s.FORMAT_OPTIONS="FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+";dpi:"+o:"dpi:"+o;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:f(!1,52)}return r=r.b,t.o&&"ne"==r.substr(0,2)&&(t=i[0],i[0]=i[1],i[1]=t,t=i[2],i[2]=i[3],i[3]=t),s.BBOX=i.join(","),ly(1==a.length?a[0]:a[w((e[1]<<e[0])+e[2],a.length)],s)}}function Gy(t){var e=0,o=[];if(t.urls){var i,n;for(i=0,n=t.urls.length;i<n;++i)o[e++]=t.urls[i]}t.S=o.join("#")}function Oy(t){var e,o=0,i=[];for(e in t.i)i[o++]=e+"-"+t.i[e];return i.join("/")}function Ny(t){t.o=0<=No(t.i.VERSION||"1.3.0")}function ky(t,e,o,i,n){Bc.call(this,t,e),this.c=Ee(),this.j=i,this.g=null,this.f={Ld:!1,wg:null,af:-1,xg:-1,vd:null},this.I=n,this.o=o}function Dy(t,e){t.Mi(hl(e,t.j,t.po.bind(t),t.oo.bind(t)))}function jy(t){Xf.call(this,{attributions:t.attributions,cacheSize:void 0!==t.cacheSize?t.cacheSize:128,extent:t.extent,logo:t.logo,opaque:!1,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Dy,tileUrlFunction:t.tileUrlFunction,tilePixelRatio:t.tilePixelRatio,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.i=t.format?t.format:null,this.g=void 0==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:ky}function Fy(t){this.j=t.matrixIds,Tt.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})}function Uy(t,e,o){var i=[],n=[],s=[],a=[],l=[],p=void 0!==o?o:[];o=Et(t.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var h=o.sc(),c="ne"==o.b.substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(t){var e;if(e=!(0<p.length)||r(p,function(e){return t.Identifier==e.TileMatrix})){n.push(t.Identifier),e=28e-5*t.ScaleDenominator/h;var o=t.TileWidth,u=t.TileHeight;c?s.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):s.push(t.TopLeftCorner),i.push(e),a.push(o==u?o:[o,u]),l.push([t.MatrixWidth,-t.MatrixHeight])}}),new Fy({extent:e,origins:s,resolutions:i,matrixIds:n,tileSizes:a,sizes:l})}function By(t){function e(t){return t="KVP"==i?ly(t,r):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}),function(e){if(e){var o={TileMatrix:n.j[e[0]],TileCol:e[1],TileRow:-e[2]-1};return og(o,s),e=t,e="KVP"==i?ly(e,o):e.replace(/\{(\w+?)\}/g,function(t,e){return o[e]})}}}this.ea=void 0!==t.version?t.version:"1.0.0",this.u=void 0!==t.format?t.format:"image/jpeg",this.i=t.dimensions?t.dimensions:{},this.A=t.layer,this.o=t.matrixSet,this.S=t.style;var o=t.urls;void 0===o&&void 0!==t.url&&(o=Bf(t.url));var i=this.Y=void 0!==t.requestEncoding?t.requestEncoding:"KVP",n=t.tileGrid,r={layer:this.A,style:this.S,tilematrixset:this.o};"KVP"==i&&og(r,{Service:"WMTS",Request:"GetTile",Version:this.ea,Format:this.u});var s=this.i,a=o&&0<o.length?Ff(o.map(e)):Uf;Zf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:a,urls:o,wrapX:void 0!==t.wrapX&&t.wrapX}),qf(this,Vy(this))}function Vy(t){var e,o=0,i=[];for(e in t.i)i[o++]=e+"-"+t.i[e];return i.join("/")}function Wy(t){t=t||{};var e=t.size,o=e[0],i=e[1],n=[],r=256;switch(void 0!==t.tierSizeCalculation?t.tierSizeCalculation:YE){case YE:for(;o>r||i>r;)n.push([Math.ceil(o/r),Math.ceil(i/r)]),r+=r;break;case KE:for(;o>r||i>r;)n.push([Math.ceil(o/r),Math.ceil(i/r)]),o>>=1,i>>=1;break;default:f(!1,53)}n.push([1,1]),n.reverse();for(var r=[1],s=[0],i=1,o=n.length;i<o;i++)r.push(1<<i),s.push(n[i-1][0]*n[i-1][1]+s[i-1]);r.reverse(),e=[0,-e[1],e[0],0],e=new Tt({extent:e,origin:$(e),resolutions:r}),(r=t.url)&&-1==r.indexOf("{TileGroup}")&&(r+="{TileGroup}/{z}-{x}-{y}.jpg"),r=Bf(r),r=Ff(r.map(function(t){return function(e){if(e){var o=e[0],i=e[1];e=-e[2]-1;var r={z:o,x:i,y:e,TileGroup:"TileGroup"+((i+e*n[o][0]+s[o])/256|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return r[e]})}}})),Zf.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:zy,tileGrid:e,tileUrlFunction:r})}function zy(t,e,o,i,n){Wc.call(this,t,e,o,i,n),this.f=null}function Hy(t,e){this.b=e,this.a=[{x:0,y:0,width:t,height:t}],this.c={},this.f=Ee(t,t),this.i=this.f.canvas}function qy(t,e,o,i){e=[e,1],0<o.width&&0<o.height&&e.push(o),0<i.width&&0<i.height&&e.push(i),t.a.splice.apply(t.a,e)}function Yy(t){t=t||{},this.a=void 0!==t.initialSize?t.initialSize:256,this.f=void 0!==t.maxSize?t.maxSize:void 0!==Zy?Zy:2048,this.b=void 0!==t.space?t.space:1,this.i=[new Hy(this.a,this.b)],this.c=this.a,this.g=[new Hy(this.c,this.b)]}function Ky(t,e,o,i,n,r,s){var a,l,p,h=e?t.g:t.i;for(l=0,p=h.length;l<p;++l){if(a=h[l],a=a.add(o,i,n,r,s))return a;a||l!==p-1||(e?(a=Math.min(2*t.c,t.f),t.c=a):(a=Math.min(2*t.a,t.f),t.a=a),a=new Hy(a,t.b),h.push(a),++p)}return null}var Xy,Zy,Jy,Qy={},$y=this,tg=0;h(d,Error);var eg=function(){return"cosh"in Math?Math.cosh:function(t){return((t=Math.exp(t))+1/t)/2}}(),og="function"==typeof Object.assign?Object.assign:function(t,e){if(!t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),i=1,n=arguments.length;i<n;++i){var r=arguments[i];if(void 0!==r&&null!==r)for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])}return o};pt.prototype.a=function(t){for(var e=0,o=t.length,i=t[o-1][0],n=t[o-1][1],r=0;r<o;r++)var s=t[r][0],a=t[r][1],e=e+P(s-i)*(2+Math.sin(P(n))+Math.sin(P(a))),i=s,n=a;return e*this.radius*this.radius/2},pt.prototype.b=function(t,e){var o=P(t[1]),i=P(e[1]),n=(i-o)/2,r=P(e[0]-t[0])/2,o=Math.sin(n)*Math.sin(n)+Math.sin(r)*Math.sin(r)*Math.cos(o)*Math.cos(i);return 2*this.radius*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))},pt.prototype.offset=function(t,e,o){var i=P(t[1]);e/=this.radius;var n=Math.asin(Math.sin(i)*Math.cos(e)+Math.cos(i)*Math.sin(e)*Math.cos(o));return[180*(P(t[0])+Math.atan2(Math.sin(o)*Math.sin(e)*Math.cos(i),Math.cos(e)-Math.sin(i)*Math.sin(n)))/Math.PI,180*n/Math.PI]};var ig=new pt(6370997),ng={};ng.degrees=2*Math.PI*ig.radius/360,ng.ft=.3048,ng.m=1,ng["us-ft"]=1200/3937;var rg=null;Xy=ht.prototype,Xy.nk=function(){return this.nb},Xy.D=function(){return this.c},Xy.Jb=function(){return this.i},Xy.sc=function(){return this.o||ng[this.i]},Xy.Zk=function(){return this.g},Xy.Kl=function(){return this.f},Xy.pp=function(t){this.f=t,this.a=!(!t||!this.c)},Xy.ln=function(t){this.c=t,this.a=!(!this.f||!t)},Xy.xp=function(t){this.g=t},Xy.op=function(t){this.j=t};var sg={},ag={},lg=[0,0,0];Xy=Tt.prototype,Xy.eh=function(t,e,o){t=Nt(this,t,e);for(var i=t.da,n=t.ba;i<=n;++i)for(var r=t.fa,s=t.ja;r<=s;++r)o([e,i,r])},Xy.D=function(){return this.v},Xy.oh=function(){return this.maxZoom},Xy.ph=function(){return this.minZoom},Xy.Qc=function(t){return this.f?this.f:this.c[t]},Xy.La=function(t){return this.b[t]},Xy.oi=function(){return this.b},Xy.Ta=function(t,e){var o=this.Qc(t[0]),i=this.La(t[0]),n=x(this.fb(t[0]),this.l),r=o[0]+t[1]*n[0]*i,o=o[1]+t[2]*n[1]*i;return j(r,o,r+n[0]*i,o+n[1]*i,e)},Xy.we=function(t,e,o){return Dt(this,t[0],t[1],e,!1,o)},Xy.Pf=function(t,e,o){return Dt(this,t[0],t[1],this.La(e),!1,o)},Xy.fb=function(t){return this.g?this.g:this.i[t]},Xy.Mc=function(t,e){return _(i(this.b,t,e||0),this.minZoom,this.maxZoom)},Wt.prototype.f=function(){return this.b},oe.prototype.Zb=!1,oe.prototype.ra=c,ne.prototype.preventDefault=ne.prototype.stopPropagation=function(){this.Fo=!0},h(se,oe),se.prototype.addEventListener=function(t,e){var o=this.qa[t];o||(o=this.qa[t]=[]),-1===o.indexOf(e)&&o.push(e)},se.prototype.b=function(t){var e="string"==typeof t?new ne(t):t;t=e.type,e.target=this;var o,i=this.qa[t];if(i){t in this.ta||(this.ta[t]=0,this.$a[t]=0),++this.ta[t];for(var n=0,r=i.length;n<r;++n)if(!1===i[n].call(this,e)||e.Fo){o=!1;break}if(!--this.ta[t]){for(e=this.$a[t],delete this.$a[t];e--;)this.removeEventListener(t,c);delete this.ta[t]}return o}},se.prototype.ra=function(){ee(this)},se.prototype.removeEventListener=function(t,e){var o=this.qa[t];if(o){var i=o.indexOf(e);t in this.$a?(o[i]=c,++this.$a[t]):(o.splice(i,1),o.length||delete this.qa[t])}},h(le,se),Xy=le.prototype,Xy.s=function(){++this.f,this.b("change")},Xy.L=function(){return this.f},Xy.J=function(t,e,o){if(Array.isArray(t)){for(var i=t.length,n=Array(i),r=0;r<i;++r)n[r]=Jt(this,t[r],e,o);return n}return Jt(this,t,e,o)},Xy.once=function(t,e,o){if(Array.isArray(t)){for(var i=t.length,n=Array(i),r=0;r<i;++r)n[r]=Qt(this,t[r],e,o);return n}return Qt(this,t,e,o)},Xy.K=function(t,e,o){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)$t(this,t[i],e,o);else $t(this,t,e,o)},h(pe,le);var pg={};Xy=pe.prototype,Xy.get=function(t){var e;return this.I.hasOwnProperty(t)&&(e=this.I[t]),e},Xy.O=function(){return Object.keys(this.I)},Xy.N=function(){return og({},this.I)},Xy.set=function(t,e,o){o?this.I[t]=e:(o=this.I[t],this.I[t]=e,o!==e&&ce(this,t,o))},Xy.H=function(t,e){for(var o in t)this.set(o,t[o],e)},Xy.P=function(t,e){if(t in this.I){var o=this.I[t];delete this.I[t],e||ce(this,t,o)}},h(ue,ne),h(de,pe),Xy=de.prototype,Xy.clear=function(){for(;0<this.ec();)this.pop()},Xy.Tf=function(t){var e,o;for(e=0,o=t.length;e<o;++e)this.push(t[e]);return this},Xy.forEach=function(t,e){this.a.forEach(t,e)},Xy.am=function(){return this.a},Xy.item=function(t){return this.a[t]},Xy.ec=function(){return this.get(hg)},Xy.Be=function(t,e){this.a.splice(t,0,e),fe(this),this.b(new ye("add",e))},Xy.pop=function(){return this.tg(this.ec()-1)},Xy.push=function(t){var e=this.ec();return this.Be(e,t),this.ec()},Xy.remove=function(t){var e,o,i=this.a;for(e=0,o=i.length;e<o;++e)if(i[e]===t)return this.tg(e)},Xy.tg=function(t){var e=this.a[t];return this.a.splice(t,1),fe(this),this.b(new ye("remove",e)),e},Xy.mp=function(t,e){var o=this.ec();if(t<o)o=this.a[t],this.a[t]=e,this.b(new ye("remove",o)),this.b(new ye("add",e));else{for(;o<t;++o)this.Be(o,void 0);this.Be(t,e)}};var hg="length";h(ye,ne);var cg=/^#(?:[0-9a-f]{3}){1,2}$/i,ug=/^([a-z]*)$/i,dg=function(){var t={},e=0;return function(o){var i;if(t.hasOwnProperty(o))i=t[o];else{if(1024<=e){i=0;for(var n in t)3&i++||(delete t[n],--e)}i=o;var r;if(ug.exec(i)&&(n=document.createElement("div"),n.style.color=i,document.body.appendChild(n),i=getComputedStyle(n).color,document.body.removeChild(n)),cg.exec(i)){r=i.length-1,f(3==r||6==r,54);var s=3==r?1:2;r=parseInt(i.substr(1+0*s,s),16),n=parseInt(i.substr(1+1*s,s),16),i=parseInt(i.substr(1+2*s,s),16),1==s&&(r=(r<<4)+r,n=(n<<4)+n,i=(i<<4)+i),r=[r,n,i,1]}else i.indexOf("rgba(")?i.indexOf("rgb(")?f(!1,14):(i=i.slice(4,-1).split(",").map(Number),i.push(1),r=ve(i)):(i=i.slice(5,-1).split(",").map(Number),r=ve(i));i=r,t[o]=i,++e}return i}}();h(we,pe),we.prototype.ra=function(){Pe(this.element),pe.prototype.ra.call(this)},we.prototype.g=function(){return this.a},we.prototype.setMap=function(t){this.a&&Pe(this.element);for(var e=0,o=this.v.length;e<o;++e)te(this.v[e]);this.v.length=0,(this.a=t)&&((this.S?this.S:t.u).appendChild(this.element),this.render!==c&&this.v.push(Jt(t,"postrender",this.render,this)),t.render())},we.prototype.i=function(t){this.S="string"==typeof t?document.getElementById(t):t},h(Ae,we),Xy=Ae.prototype,Xy.ym=function(t){t.preventDefault(),Me(this)},Xy.xm=function(){return this.j},Xy.Am=function(t){this.j!==t&&(this.j=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.c&&Me(this))},Xy.zm=function(t){this.j&&this.c!==t&&Me(this)},Xy.wm=function(){return this.c},h(Le,we),Le.prototype.A=function(t){if(t.preventDefault(),this.j)this.j();else if(t=this.a.$()){var e=t.Va();void 0!==e&&(0<this.o?(e%=2*Math.PI,t.animate({rotation:0,duration:this.o,easing:Ie})):t.He(0))}},h(Oe,we),Oe.prototype.l=function(t,e){e.preventDefault();var o=this.a.$();if(o){var i=o.Ua();i&&(i=o.constrainResolution(i,t),0<this.c?(0<Bi(o)[0]&&Di(o),o.animate({resolution:i,duration:this.c,easing:Ie})):o.Xc(i))}},h(ke,we),ke.prototype.C=function(t){t.preventDefault(),De()&&(t=this.a)&&(je()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t=this.l?"string"==typeof this.l?document.getElementById(this.l):this.l:t.Kc(),this.A?t.mozRequestFullScreenWithKeys?t.mozRequestFullScreenWithKeys():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):Fe(t):Fe(t)))},ke.prototype.u=function(){var t=this.element.firstElementChild,e=this.a;je()?(t.className=this.c+"-true",Se(this.o,this.j)):(t.className=this.c+"-false",Se(this.j,this.o)),e&&e.xd()},ke.prototype.setMap=function(t){we.prototype.setMap.call(this,t),t&&this.v.push(Jt(document,fg(),this.u,this))};var fg=function(){var t;return function(){if(!t){var e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}();h(Ue,we),Xy=Ue.prototype,Xy.Bm=function(){this.l=null},Xy.ih=function(){return this.get(gg)},Xy.Lh=function(){return this.get(yg)},Xy.rl=function(t){this.j=this.a.te(t),Ve(this,this.j)},Xy.sl=function(){Ve(this,null),this.j=null},Xy.setMap=function(t){we.prototype.setMap.call(this,t),t&&(t=t.c,this.v.push(Jt(t,"mousemove",this.rl,this),Jt(t,"mouseout",this.sl,this)))},Xy.Fi=function(t){this.set(gg,t)},Xy.Mh=function(t){this.set(yg,t)};var yg="projection",gg="coordinateFormat";h(We,ne),h(ze,We),ze.prototype.preventDefault=function(){We.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},ze.prototype.stopPropagation=function(){We.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var mg={Xp:"singleclick",Mp:"click",Np:"dblclick",Qp:"pointerdrag",Tp:"pointermove",Pp:"pointerdown",Wp:"pointerup",Vp:"pointerover",Up:"pointerout",Rp:"pointerenter",Sp:"pointerleave",Op:"pointercancel"};h(He,ze);var vg,_g,bg=["experimental-webgl","webgl","webkit-3d","moz-webgl"],Eg="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Sg=-1!==Eg.indexOf("firefox"),Pg=-1!==Eg.indexOf("safari")&&-1==Eg.indexOf("chrom"),wg=-1!==Eg.indexOf("webkit")&&-1==Eg.indexOf("edge"),Ag=-1!==Eg.indexOf("macintosh"),Cg=window.devicePixelRatio||1,Mg=!1,xg=function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d")
;return!!t&&(void 0!==t.setLineDash&&(Mg=!0),!0)}catch(t){return!1}}(),Ig="DeviceOrientationEvent"in window,Rg="geolocation"in navigator,Tg="ontouchstart"in window,Lg="PointerEvent"in window,Gg=!!navigator.msPointerEnabled,Og=!1,Ng=[];if("WebGLRenderingContext"in window)try{var kg=qe(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});kg&&(Og=!0,_g=kg.getParameter(kg.MAX_TEXTURE_SIZE),Ng=kg.getSupportedExtensions())}catch(t){}vg=Og,Jy=Ng,Zy=_g,h(Ke,Ye),Xy=Ke.prototype,Xy.Ml=function(t){if(!Xe(this,t)){1..toString()in this.a&&this.cancel(t);var e=Ze(t);this.a[1..toString()]=t,go(this.b,"pointerdown",e,t)}},Xy.Nl=function(t){if(!Xe(this,t)){var e=Ze(t);go(this.b,"pointermove",e,t)}},Xy.Ql=function(t){if(!Xe(this,t)){var e=this.a[1..toString()];e&&e.button===t.button&&(e=Ze(t),go(this.b,"pointerup",e,t),delete this.a[1..toString()])}},Xy.Pl=function(t){if(!Xe(this,t)){var e=Ze(t);yo(this.b,e,t)}},Xy.Ol=function(t){if(!Xe(this,t)){var e=Ze(t);fo(this.b,e,t)}},Xy.cancel=function(t){var e=Ze(t);this.b.cancel(e,t),delete this.a[1..toString()]},h(Je,Ye),Xy=Je.prototype,Xy.Vl=function(t){this.a[t.pointerId.toString()]=t;var e=Qe(this,t);go(this.b,"pointerdown",e,t)},Xy.Wl=function(t){var e=Qe(this,t);go(this.b,"pointermove",e,t)},Xy.Zl=function(t){var e=Qe(this,t);go(this.b,"pointerup",e,t),delete this.a[t.pointerId.toString()]},Xy.Xl=function(t){var e=Qe(this,t);fo(this.b,e,t)},Xy.Yl=function(t){var e=Qe(this,t);yo(this.b,e,t)},Xy.Ul=function(t){var e=Qe(this,t);this.b.cancel(e,t),delete this.a[t.pointerId.toString()]},Xy.Tl=function(t){this.b.b(new to("lostpointercapture",t,t))},Xy.Sl=function(t){this.b.b(new to("gotpointercapture",t,t))},h($e,Ye),Xy=$e.prototype,Xy.xo=function(t){mo(this.b,t)},Xy.yo=function(t){mo(this.b,t)},Xy.Bo=function(t){mo(this.b,t)},Xy.zo=function(t){mo(this.b,t)},Xy.Ao=function(t){mo(this.b,t)},Xy.wo=function(t){mo(this.b,t)},Xy.Ll=function(t){mo(this.b,t)},Xy.al=function(t){mo(this.b,t)},h(to,ne);var Dg=!1;try{Dg=1===new MouseEvent("click",{buttons:1}).buttons}catch(t){}h(io,Ye),Xy=io.prototype,Xy.Di=function(){this.g=0,this.c=void 0},Xy.Dp=function(t){var e=t.touches,o=Object.keys(this.a),i=o.length;if(i>=e.length){var n,r,s,a=[];for(n=0;n<i;++n){r=o[n],s=this.a[r];var l;if(!(l=1==r))t:{for(var p=e.length,h=0;h<p;h++)if(l=e[h],l.identifier===r-2){l=!0;break t}l=!1}l||a.push(s.out)}for(n=0;n<a.length;++n)this.zf(t,a[n])}e=t.changedTouches[0],o=Object.keys(this.a).length,(!o||1===o&&1..toString()in this.a)&&(this.f=e.identifier,void 0!==this.c&&clearTimeout(this.c)),so(this,t),this.g++,ro(this,t,this.so)},Xy.so=function(t,e){this.a[e.pointerId]={target:e.target,out:e,pi:e.target};var o=this.b;e.bubbles=!0,go(o,"pointerover",e,t),o=this.b,e.bubbles=!1,go(o,"pointerenter",e,t),go(this.b,"pointerdown",e,t)},Xy.Cp=function(t){t.preventDefault(),ro(this,t,this.Rl)},Xy.Rl=function(t,e){var o=this.a[e.pointerId];if(o){var i=o.out,n=o.pi;go(this.b,"pointermove",e,t),i&&n!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=n,i.target=n,e.target?(fo(this.b,i,t),yo(this.b,e,t)):(e.target=n,e.relatedTarget=null,this.zf(t,e))),o.out=e,o.pi=e.target}},Xy.Bp=function(t){so(this,t),ro(this,t,this.Ep)},Xy.Ep=function(t,e){go(this.b,"pointerup",e,t),this.b.out(e,t),uo(this.b,e,t),delete this.a[e.pointerId],e.isPrimary&&(this.f=void 0,this.c=setTimeout(this.Di.bind(this),200))},Xy.Ap=function(t){ro(this,t,this.zf)},Xy.zf=function(t,e){this.b.cancel(e,t),this.b.out(e,t),uo(this.b,e,t),delete this.a[e.pointerId],e.isPrimary&&(this.f=void 0,this.c=setTimeout(this.Di.bind(this),200))},h(ao,se),ao.prototype.c=function(t){var e=this.i[t.type];e&&e(t)},ao.prototype.out=function(t,e){t.bubbles=!0,go(this,"pointerout",t,e)},ao.prototype.cancel=function(t,e){go(this,"pointercancel",t,e)},ao.prototype.ra=function(){for(var t,e=this.a.length,o=0;o<e;o++)t=this.a[o],ho(this,Object.keys(t.i));se.prototype.ra.call(this)};var jg=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];h(vo,se),Xy=vo.prototype,Xy.vh=function(t){bo(this,t);var e=new He("pointerup",this.c,t);this.b(e),this.j||t.button||_o(this,this.f),this.u||(this.i.forEach(te),this.i.length=0,this.j=!1,this.f=null,ie(this.a),this.a=null)},Xy.ul=function(t){bo(this,t);var e=new He("pointerdown",this.c,t);this.b(e),this.f=t,this.i.length||(this.a=new ao(document),this.i.push(Jt(this.a,"pointermove",this.om,this),Jt(this.a,"pointerup",this.vh,this),Jt(this.g,"pointercancel",this.vh,this)))},Xy.om=function(t){if(t.clientX!=this.f.clientX||t.clientY!=this.f.clientY){this.j=!0;var e=new He("pointerdrag",this.c,t,this.j);this.b(e)}t.preventDefault()},Xy.$o=function(t){this.b(new He(t.type,this.c,t,!(!this.f||t.clientX==this.f.clientX&&t.clientY==this.f.clientY)))},Xy.ra=function(){this.v&&(te(this.v),this.v=null),this.o&&(te(this.o),this.o=null),this.i.forEach(te),this.i.length=0,this.a&&(ie(this.a),this.a=null),this.g&&(ie(this.g),this.g=null),se.prototype.ra.call(this)},Eo.prototype.clear=function(){this.b.length=0,this.f.length=0,st(this.a)},Eo.prototype.i=function(t){f(!(this.c(t)in this.a),31);var e=this.o(t);return 1/0!=e&&(this.b.push(t),this.f.push(e),this.a[this.c(t)]=!0,wo(this,0,this.b.length-1),!0)},h(Co,Eo),Co.prototype.i=function(t){var e=Eo.prototype.i.call(this,t);return e&&Jt(t[0],"change",this.j,this),e},Co.prototype.j=function(t){t=t.target;var e=t.V();2!==e&&3!==e&&4!==e&&5!==e||($t(t,"change",this.j,this),t=t.ib(),t in this.g&&(delete this.g[t],--this.l),this.v())},h(Xo,pe),Xy=Xo.prototype,Xy.Ab=function(t,e){var o=e||[NaN,NaN];return this.Gb(t[0],t[1],o,1/0),o},Xy.sb=function(t){return this.Oc(t[0],t[1])},Xy.Oc=Ko,Xy.D=function(t){this.v!=this.f&&(this.o=this.ne(this.o),this.v=this.f);var e=this.o;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t=e,t},Xy.Pb=function(t){return this.Qd(t*t)},Xy.tb=function(t,e){return this.Dc(Pt(t,e)),this},h(Qo,Xo),Xy=Qo.prototype,Xy.Oc=Ko,Xy.ne=function(t){return U(this.B,0,this.B.length,this.a,t)},Xy.bc=function(){return this.B.slice(0,this.a)},Xy.ha=function(){return this.B},Xy.cc=function(){return this.B.slice(this.B.length-this.a)},Xy.dc=function(){return this.ka},Xy.Qd=function(t){if(this.j!=this.f&&(st(this.i),this.g=0,this.j=this.f),0>t||this.g&&t<=this.g)return this;var e=t.toString();if(this.i.hasOwnProperty(e))return this.i[e];var o=this.kd(t);return o.ha().length<this.B.length?this.i[e]=o:(this.g=t,this)},Xy.kd=function(){return this},Xy.sa=function(){return this.a},Xy.Dc=function(t){this.B&&(t(this.B,this.B,this.a),this.s())},Xy.rotate=function(t,e){var o=this.ha();if(o){for(var i=o.length,n=this.sa(),r=o||[],s=Math.cos(t),a=Math.sin(t),l=e[0],p=e[1],h=0,c=0;c<i;c+=n){var u=o[c]-l,d=o[c+1]-p;for(r[h++]=l+u*s-d*a,r[h++]=p+u*a+d*s,u=c+2;u<c+n;++u)r[h++]=o[u]}o&&r.length!=h&&(r.length=h),this.s()}},Xy.scale=function(t,e,o){var i=e;void 0===i&&(i=t);var n=o;if(n||(n=X(this.D())),o=this.ha()){e=o.length;for(var r=this.sa(),s=o||[],a=n[0],n=n[1],l=0,p=0;p<e;p+=r){var h=o[p]-a,c=o[p+1]-n;for(s[l++]=a+t*h,s[l++]=n+i*c,h=p+2;h<p+r;++h)s[l++]=o[h]}o&&s.length!=l&&(s.length=l),this.s()}},Xy.translate=function(t,e){var o=this.ha();o&&(Jo(o,o.length,this.sa(),t,e,o),this.s())},h(gi,Qo),Xy=gi.prototype,Xy.clone=function(){var t=new gi(null);return mi(t,this.ka,this.B.slice()),t},Xy.Gb=function(t,e,o,i){return i<L(this.D(),t,e)?i:(this.c!=this.f&&(this.l=Math.sqrt(ri(this.B,0,this.B.length,this.a,0)),this.c=this.f),ai(this.B,0,this.B.length,this.a,this.l,!0,t,e,o,i))},Xy.Km=function(){return oi(this.B,0,this.B.length,this.a)},Xy.X=function(){return ui(this.B,0,this.B.length,this.a)},Xy.kd=function(t){var e=[];return e.length=fi(this.B,0,this.B.length,this.a,t,e,0),t=new gi(null),mi(t,"XY",e),t},Xy.T=function(){return"LinearRing"},Xy.Xa=function(){},Xy.pa=function(t,e){t?(ei(this,e,t,1),this.B||(this.B=[]),this.B.length=hi(this.B,0,t,this.a),this.s()):mi(this,"XY",null)},h(vi,Qo),Xy=vi.prototype,Xy.clone=function(){var t=new vi(null);return t.ca(this.ka,this.B.slice()),t},Xy.Gb=function(t,e,o,i){var n=this.B;if((t=S(t,e,n[0],n[1]))<i){for(i=this.a,e=0;e<i;++e)o[e]=n[e];return o.length=i,t}return i},Xy.X=function(){return this.B?this.B.slice():[]},Xy.ne=function(t){return F(this.B,t)},Xy.T=function(){return"Point"},Xy.Xa=function(t){return N(t,this.B[0],this.B[1])},Xy.pa=function(t,e){t?(ei(this,e,t,0),this.B||(this.B=[]),this.B.length=pi(this.B,t),this.s()):this.ca("XY",null)},Xy.ca=function(t,e){ti(this,t,e),this.s()},h(Ri,Qo),Xy=Ri.prototype,Xy.Vj=function(t){this.B?n(this.B,t.ha()):this.B=t.ha().slice(),this.c.push(this.B.length),this.s()},Xy.clone=function(){var t=new Ri(null);return t.ca(this.ka,this.B.slice(),this.c.slice()),t},Xy.Gb=function(t,e,o,i){return i<L(this.D(),t,e)?i:(this.C!=this.f&&(this.G=Math.sqrt(si(this.B,0,this.c,this.a,0)),this.C=this.f),li(this.B,0,this.c,this.a,this.G,!0,t,e,o,i))},Xy.Oc=function(t,e){return Ei(this.fc(),0,this.c,this.a,t,e)},Xy.Nm=function(){return ii(this.fc(),0,this.c,this.a)},Xy.X=function(t){var e;return void 0!==t?(e=this.fc().slice(),xi(e,0,this.c,this.a,t)):e=this.B,di(e,0,this.c,this.a)},Xy.Rb=function(){return this.c},Xy.yk=function(){return new vi(Ti(this))},Xy.Ek=function(){return this.c.length},Xy.nh=function(t){if(0>t||this.c.length<=t)return null;var e=new gi(null);return mi(e,this.ka,this.B.slice(t?this.c[t-1]:0,this.c[t])),e},Xy.jd=function(){var t,e,o=this.ka,i=this.B,n=this.c,r=[],s=0;for(t=0,e=n.length;t<e;++t){var a=n[t],l=new gi(null);mi(l,o,i.slice(s,a)),r.push(l),s=a}return r},Xy.fc=function(){if(this.R!=this.f){var t=this.B;Mi(t,this.c,this.a)?this.l=t:(this.l=t.slice(),this.l.length=xi(this.l,0,this.c,this.a)),this.R=this.f}return this.l},Xy.kd=function(t){var e=[],o=[];return e.length=yi(this.B,0,this.c,this.a,Math.sqrt(t),e,0,o),t=new Ri(null),t.ca("XY",e,o),t},Xy.T=function(){return"Polygon"},Xy.Xa=function(t){return Ai(this.fc(),0,this.c,this.a,t)},Xy.pa=function(t,e){if(t){ei(this,e,t,2),this.B||(this.B=[]);var o=ci(this.B,0,t,this.a,this.c);this.B.length=o.length?o[o.length-1]:0,this.s()}else this.ca("XY",null,this.c)},Xy.ca=function(t,e,o){ti(this,t,e),this.c=o,this.s()},h(ki,pe),Xy=ki.prototype,Xy.animate=function(t){var e,o=Date.now(),i=this.Ba().slice(),n=this.Ua(),r=this.Va(),s=arguments.length;1<s&&"function"==typeof arguments[s-1]&&(e=arguments[s-1],--s);for(var a=[],l=0;l<s;++l){var p=arguments[l],h={start:o,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||Re};p.center&&(h.Bg=i,h.Dg=p.center,i=h.Dg),void 0!==p.zoom?(h.hf=n,h.jf=this.constrainResolution(this.a,p.zoom-this.j,0),n=h.jf):p.resolution&&(h.hf=n,h.jf=p.resolution,n=h.jf),void 0!==p.rotation&&(h.Cg=r,h.Xi=p.rotation,r=h.Xi),h.fd=e,o+=h.duration,a.push(h)}this.c.push(a),qi(this,0,1),this.lf()},Xy.lf=function(){if(void 0!==this.v&&(cancelAnimationFrame(this.v),this.v=void 0),0<Bi(this)[0]){for(var t=Date.now(),e=!1,o=this.c.length-1;0<=o;--o){for(var i=this.c[o],n=!0,r=0,s=i.length;r<s;++r){var a=i[r];if(!a.complete){if(e=t-a.start,e=0<a.duration?e/a.duration:1,1<=e?(a.complete=!0,e=1):n=!1,e=a.easing(e),a.Bg){var l=a.Bg[0],p=a.Bg[1];this.set("center",[l+e*(a.Dg[0]-l),p+e*(a.Dg[1]-p)])}if(a.hf&&(l=a.hf+e*(a.jf-a.hf),a.anchor&&this.set("center",Fi(this,l,a.anchor)),this.set("resolution",l)),void 0!==a.Cg&&(e=a.Cg+e*(a.Xi-a.Cg),a.anchor&&this.set("center",ji(this,e,a.anchor)),this.set("rotation",e)),e=!0,!a.complete)break}}n&&(this.c[o]=null,qi(this,0,-1),(i=i[0].fd)&&i(!0))}this.c=this.c.filter(Boolean),e&&void 0===this.v&&(this.v=requestAnimationFrame(this.lf))}},Xy.Ec=function(t){return this.u.center(t)},Xy.constrainResolution=function(t,e,o){return this.u.resolution(t,e||0,o||0)},Xy.constrainRotation=function(t,e){return this.u.rotation(t,e||0)},Xy.Ba=function(){return this.get("center")},Xy.ed=function(t){t=t||Ui(this);var e=this.Ba();f(e,1);var o=this.Ua();f(void 0!==o,2);var i=this.Va();return f(void 0!==i,3),Z(e,o,i,t)},Xy.sm=function(){return this.a},Xy.tm=function(){return this.i},Xy.um=function(){return this.o},Xy.Ua=function(){return this.get("resolution")},Xy.vm=function(){return this.g},Xy.Va=function(){return this.get("rotation")},Xy.V=function(){var t=this.Ba(),e=this.o,o=this.Ua(),i=this.Va();return{center:t.slice(),projection:void 0!==e?e:null,resolution:o,rotation:i}},Xy.$k=function(){var t,e=this.Ua();if(void 0!==e&&e>=this.i&&e<=this.a){t=this.j||0;var o,n;if(this.g){if(n=i(this.g,e,1),t+=n,n==this.g.length-1)return t;o=this.g[n],n=o/this.g[n+1]}else o=this.a,n=this.A;t+=Math.log(o/e)/Math.log(n)}return t},Xy.Ff=function(t,e){var o=e||{},i=o.size;i||(i=Ui(this));var n;t instanceof Qo?"Circle"===t.T()?(t=t.D(),n=Gi(t),n.rotate(this.Va(),X(t))):n=t:(f(Array.isArray(t),24),f(!it(t),25),n=Gi(t));var r,s=o.padding?o.padding:[0,0,0,0],a=void 0===o.constrainResolution||o.constrainResolution,l=void 0!==o.nearest&&o.nearest;r=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.constrainResolution(this.a,o.maxZoom-this.j,0):0;var p=n.ha(),h=this.Va(),c=Math.cos(-h),h=Math.sin(-h),u=1/0,d=1/0,y=-1/0,g=-1/0;n=n.sa();for(var m=0,v=p.length;m<v;m+=n)var _=p[m]*c-p[m+1]*h,b=p[m]*h+p[m+1]*c,u=Math.min(u,_),d=Math.min(d,b),y=Math.max(y,_),g=Math.max(g,b);i=Vi([u,d,y,g],[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]),i=isNaN(i)?r:Math.max(i,r),a&&(a=this.constrainResolution(i,0,0),!l&&a<i&&(a=this.constrainResolution(a,-1,0)),i=a),h=-h,l=(u+y)/2+(s[1]-s[3])/2*i,s=(d+g)/2+(s[0]-s[2])/2*i,c=[l*c-s*h,s*c+l*h],void 0!==o.duration?this.animate({resolution:i,center:c,duration:o.duration,easing:o.easing}):(this.Xc(i),this.wb(c))},Xy.$j=function(t,e,o){var i=this.Va(),n=Math.cos(-i),i=Math.sin(-i),r=t[0]*n-t[1]*i;t=t[1]*n+t[0]*i;var s=this.Ua(),r=r+(e[0]/2-o[0])*s;t+=(o[1]-e[1]/2)*s,i=-i,this.wb([r*n-t*i,t*n+r*i])},Xy.rotate=function(t,e){if(void 0!==e){var o=ji(this,t,e);this.wb(o)}this.He(t)},Xy.wb=function(t){this.set("center",t),0<Bi(this)[0]&&Di(this)},Xy.Xc=function(t){this.set("resolution",t),0<Bi(this)[0]&&Di(this)},Xy.He=function(t){this.set("rotation",t),0<Bi(this)[0]&&Di(this)},Xy.yp=function(t){t=this.constrainResolution(this.a,t-this.j,0),this.Xc(t)},h(Xi,pe),Xi.prototype.c=function(){return this.get("active")},Xi.prototype.i=function(){return this.v},Xi.prototype.Ia=function(t){this.set("active",t)},Xi.prototype.setMap=function(t){this.v=t},h($i,Xi),h(cn,Xi),cn.prototype.Zc=function(t){return t},h(fn,cn),fn.prototype.Zc=Ko,h(vn,cn),vn.prototype.Zc=Ko,h(Sn,oe),Sn.prototype.ra=function(){this.setMap(null)},Sn.prototype.setMap=function(t){if(this.b){this.b.A.removeChild(this.a);var e=this.a.style;e.left=e.top=e.width=e.height="inherit"}(this.b=t)&&this.b.A.appendChild(this.a)},Sn.prototype.U=function(){return this.Gc},h(An,cn),An.prototype.U=function(){return this.a.U()},An.prototype.j=c;var Fg="boxstart",Ug="boxdrag",Bg="boxend";h(Rn,ne),h(Tn,An),Tn.prototype.j=function(){var t=this.v,e=t.$(),o=t.Mb(),i=this.U().D();if(this.G){var n,r,s=e.ed(o),i=[t.Ka(Y(i)),t.Ka(tt(i))],t=j(1/0,1/0,-1/0,-1/0,void 0);for(n=0,r=i.length;n<r;++n)W(t,i[n]);nt(s,1/Vi(t,o)),i=s}o=e.constrainResolution(Vi(i,o)),s=X(i),s=e.Ec(s),e.animate({resolution:o,center:s,duration:this.C,easing:Ie})},h(Ln,Xi),h(On,Xi),h(kn,Xi),kn.prototype.C=function(){this.o=void 0,qi(this.v.$(),1,-1)},kn.prototype.G=function(t){t=t.$(),0<Bi(t)[0]&&Di(t),Ji(t,-_(this.l,-1,1),this.a,this.R),this.j=void 0,this.l=0,this.a=null,this.u=this.g=void 0},kn.prototype.S=function(t){this.A=t,t||(this.a=null)};var Vg="trackpad",Wg="wheel";h(jn,cn),jn.prototype.Zc=Ko,h(Vn,cn),Vn.prototype.Zc=Ko,h(Yn,pe),Xy=Yn.prototype,Xy.D=function(){return this.get("extent")},Xy.gc=function(){return this.get("maxResolution")},Xy.hc=function(){return this.get("minResolution")},Xy.ic=function(){return this.get("opacity")},Xy.Kb=function(){return this.get("visible")},Xy.za=function(){return this.get("zIndex")},Xy.uc=function(t){this.set("extent",t)},Xy.zc=function(t){this.set("maxResolution",t)},Xy.Ac=function(t){this.set("minResolution",t)},Xy.vc=function(t){this.set("opacity",t)},Xy.wc=function(t){this.set("visible",t)},Xy.Wb=function(t){this.set("zIndex",t)},h(Xn,Yn),Xy=Xn.prototype,Xy.Dd=function(){},Xy.ze=function(){this.Kb()&&this.s()},Xy.nl=function(){this.i.forEach(te),this.i.length=0;var t=this.od();this.i.push(Jt(t,"add",this.ml,this),Jt(t,"remove",this.ol,this));for(var e in this.c)this.c[e].forEach(te);st(this.c);var o,i,t=t.a;for(e=0,o=t.length;e<o;e++)i=t[e],this.c[u(i).toString()]=[Jt(i,"propertychange",this.ze,this),Jt(i,"change",this.ze,this)];this.s()},Xy.ml=function(t){t=t.element;var e=u(t).toString();this.c[e]=[Jt(t,"propertychange",this.ze,this),Jt(t,"change",this.ze,this)],this.s()},Xy.ol=function(t){t=u(t.element).toString(),this.c[t].forEach(te),delete this.c[t],this.s()},Xy.od=function(){return this.get(zg)},Xy.Sh=function(t){this.set(zg,t)},Xy.Lf=function(t){var e=void 0!==t?t:[],o=e.length;this.od().forEach(function(t){t.Lf(e)}),t=Kn(this);var i,n;for(i=e.length;o<i;o++)n=e[o],n.opacity*=t.opacity,n.visible=n.visible&&t.visible,n.maxResolution=Math.min(n.maxResolution,t.maxResolution),n.minResolution=Math.max(n.minResolution,t.minResolution),void 0!==t.extent&&(n.extent=void 0!==n.extent?Q(n.extent,t.extent):t.extent);return e},Xy.Nf=function(){return"ready"};var zg="layers";h(Zn,ht);var Hg=6378137*Math.PI,qg=[-Hg,-Hg,Hg,Hg],Yg=[-180,-85,180,85],Kg="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(t){return new Zn(t)}),Xg=new pt(6378137);h($n,ht);var Zg=[-180,-90,180,90],Jg=Math.PI*Xg.radius/180,Qg=[new $n("CRS:84"),new $n("EPSG:4326","neu"),new $n("urn:ogc:def:crs:EPSG::4326","neu"),new $n("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new $n("urn:ogc:def:crs:OGC:1.3:CRS84"),new $n("urn:ogc:def:crs:OGC:2:84"),new $n("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $n("urn:x-ogc:def:crs:EPSG:4326","neu")];h(er,Yn),Xy=er.prototype,Xy.Lf=function(t){return t=t||[],t.push(Kn(this)),t},Xy.la=function(){return this.get("source")||null},Xy.Nf=function(){var t=this.la();return t?t.V():"undefined"},Xy.kn=function(){this.s()},Xy.Al=function(){this.u&&(te(this.u),this.u=null);var t=this.la();t&&(this.u=Jt(t,"change",this.kn,this)),this.s()},Xy.setMap=function(t){this.j&&(te(this.j),this.j=null),t||this.s(),this.o&&(te(this.o),this.o=null),t&&(this.j=Jt(t,"precompose",function(t){var e=Kn(this);e.De=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[u(this)]=e},this),this.o=Jt(this,"change",t.render,t),this.s())},Xy.Yc=function(t){this.set("source",t)},ir.prototype.clear=function(){this.b={},this.a=0},ir.prototype.get=function(t,e,o){return t=e+":"+t+":"+(o?me(o):"null"),t in this.b?this.b[t]:null},ir.prototype.set=function(t,e,o,i){this.b[e+":"+t+":"+(o?me(o):"null")]=i,++this.a};var $g=new ir,tm=Array(6);h(yr,oe),Xy=yr.prototype,Xy.ra=function(){for(var t in this.c)ie(this.c[t])},Xy.Aa=function(t,e,o,i,n,r,s){function a(t,o){var r=u(t).toString(),s=e.layerStates[u(o)].De;if(!(r in e.skippedFeatureUids)||s)return i.call(n,t,s?o:null)}var l,p=e.viewState,h=p.resolution,c=p.projection,p=t;if(c.a){var c=c.D(),d=et(c),f=t[0];(f<c[0]||f>c[2])&&(p=[f+d*Math.ceil((c[0]-f)/d),t[1]])}for(c=e.layerStatesArray,d=c.length-1;0<=d;--d){var y=c[d],f=y.layer;if(or(y,h)&&r.call(s,f)&&(y=vr(this,f),f.la()&&(l=y.Aa(f.la().G?p:t,e,o,a,n)),l))return l}},Xy.Zh=function(t,e,o,i,n){return void 0!==this.Aa(t,e,o,Yo,this,i,n)},Xy.ll=function(){this.j.render()},Xy.vg=c,Xy.gp=function(t,e){for(var o in this.c)if(!(e&&o in e.layerStates)){var i=o,n=this.c[i];delete this.c[i],te(this.v[i]),delete this.v[i],ie(n)}},h(Er,ne);var em=[0,0,0,1],om=[],im=[0,0,0,1];Xy=Pr.prototype,Xy.mc=function(){},Xy.pd=function(){},Xy.$b=function(){},Xy.oe=function(){},Xy.pe=function(){},Xy.Qb=function(){},Xy.nc=function(){},Xy.oc=function(){},Xy.pc=function(){},Xy.qc=function(){},Xy.rc=function(){},Xy.xc=function(){},Xy.Na=function(){},Xy.Vb=function(){},Xy.Tb=function(){},h(wr,Pr),Xy=wr.prototype,Xy.$b=function(t){if(ot(this.c,t.D())){if(this.a||this.b){this.a&&Ir(this,this.a),this.b&&Rr(this,this.b);var e;e=this.u;var o=this.v,i=t.ha();e=i?Zo(i,0,i.length,t.sa(),e,o):null,o=e[2]-e[0],i=e[3]-e[1],o=Math.sqrt(o*o+i*i),i=this.f,i.beginPath(),i.arc(e[0],e[1],o,0,2*Math.PI),this.a&&i.fill(),this.b&&i.stroke()}""!==this.Fa&&Cr(this,t.Ba(),2,2)}},Xy.pd=function(t){this.Na(t.Ca(),t.Da()),this.Vb(t.Z()),this.Tb(t.Pa())},Xy.mc=function(t){switch(t.T()){case"Point":this.qc(t);break;case"LineString":this.Qb(t);break;case"Polygon":this.rc(t);break;case"MultiPoint":this.oc(t);break;case"MultiLineString":this.nc(t);break;case"MultiPolygon":this.pc(t);break;case"GeometryCollection":this.pe(t);break;case"Circle":this.$b(t)}},Xy.oe=function(t,e){var o=(0,e.Ra)(t);o&&ot(this.c,o.D())&&(this.pd(e),this.mc(o))},Xy.pe=function(t){t=t.a;var e,o;for(e=0,o=t.length;e<o;++e)this.mc(t[e])},Xy.qc=function(t){var e=t.ha();t=t.sa(),this.M&&Ar(this,e,e.length),""!==this.Fa&&Cr(this,e,e.length,t)},Xy.oc=function(t){var e=t.ha();t=t.sa(),this.M&&Ar(this,e,e.length),""!==this.Fa&&Cr(this,e,e.length,t)},Xy.Qb=function(t){if(ot(this.c,t.D())){if(this.b){Rr(this,this.b);var e=this.f,o=t.ha();e.beginPath(),Mr(this,o,0,o.length,t.sa(),!1),e.stroke()}""!==this.Fa&&(t=Sl(t),Cr(this,t,2,2))}},Xy.nc=function(t){var e=t.D();if(ot(this.c,e)){if(this.b){Rr(this,this.b);var e=this.f,o=t.ha(),i=0,n=t.Rb(),r=t.sa();e.beginPath();var s,a;for(s=0,a=n.length;s<a;++s)i=Mr(this,o,i,n[s],r,!1);e.stroke()}""!==this.Fa&&(t=wl(t),Cr(this,t,t.length,2))}},Xy.rc=function(t){if(ot(this.c,t.D())){if(this.b||this.a){this.a&&Ir(this,this.a),this.b&&Rr(this,this.b);var e=this.f;e.beginPath(),xr(this,t.fc(),0,t.Rb(),t.sa()),this.a&&e.fill(),this.b&&e.stroke()}""!==this.Fa&&(t=Ti(t),Cr(this,t,2,2))}},Xy.pc=function(t){if(ot(this.c,t.D())){if(this.b||this.a){this.a&&Ir(this,this.a),this.b&&Rr(this,this.b);var e,o,i=this.f,n=Il(t),r=0,s=t.c,a=t.sa();for(i.beginPath(),e=0,o=s.length;e<o;++e)r=xr(this,n,r,s[e],a);this.a&&i.fill(),this.b&&i.stroke()}""!==this.Fa&&(t=xl(t),Cr(this,t,t.length,2))}},Xy.Na=function(t,e){if(t){var o=t.b;this.a={fillStyle:_e(o||em)}}else this.a=null;if(e){var o=e.a,i=e.i,n=e.f,r=e.g,s=e.l,a=e.c,l=e.j;this.b={lineCap:void 0!==i?i:"round",lineDash:n||om,lineDashOffset:r||0,lineJoin:void 0!==s?s:"round",lineWidth:this.I*(void 0!==a?a:1),miterLimit:void 0!==l?l:10,strokeStyle:_e(o||im)}}else this.b=null},Xy.Vb=function(t){if(t){var e=t.Hc(),o=t.Z(1),i=t.Pc(),n=t.jc();this.A=e[0],this.C=e[1],this.G=n[1],this.M=o,this.o=t.g,this.Y=i[0],this.eb=i[1],this.ea=t.o,this.ia=t.l,this.i=t.c,this.oa=t.v,this.qa=n[0]}else this.M=null},Xy.Tb=function(t){if(t){var e=t.Ca();e?(e=e.b,this.g={fillStyle:_e(e||em)}):this.g=null;var o=t.Da();if(o){var e=o.a,i=o.i,n=o.f,r=o.g,s=o.l,a=o.c,o=o.j;this.j={lineCap:void 0!==i?i:"round",lineDash:n||om,lineDashOffset:r||0,lineJoin:void 0!==s?s:"round",lineWidth:void 0!==a?a:1,miterLimit:void 0!==o?o:10,strokeStyle:_e(e||im)}}else this.j=null;var e=t.a,i=t.f,n=t.c,r=t.j,s=t.i,a=t.b,o=t.Pa(),l=t.g;t=t.l,this.ta={font:void 0!==e?e:"10px sans-serif",textAlign:void 0!==l?l:"center",textBaseline:void 0!==t?t:"middle"},this.Fa=void 0!==o?o:"",this.Zb=void 0!==i?this.I*i:0,this.Ja=void 0!==n?this.I*n:0,this.Ha=void 0!==r&&r,this.Oa=void 0!==s?s:0,this.l=this.I*(void 0!==a?a:1)}else this.Fa=""},h(Tr,yr),Tr.prototype.T=function(){return"canvas"},Tr.prototype.vg=function(t){if(t){var e=this.f,o=t.pixelRatio,i=Math.round(t.size[0]*o),n=Math.round(t.size[1]*o);this.b.width!=i||this.b.height!=n?(this.b.width=i,this.b.height=n):e.clearRect(0,0,i,n),o=t.viewState.rotation,gr(t),Lr(this,"precompose",t);var r=t.layerStatesArray;a(r),o&&(e.save(),Sr(e,o,i/2,n/2));var s,l,p,i=t.viewState.resolution,n=0;for(s=r.length;n<s;++n)p=r[n],l=p.layer,l=vr(this,l),or(p,i)&&"ready"==p.Ui&&l.qd(t,p)&&l.I(t,p,e);o&&e.restore(),Lr(this,"postcompose",t),this.a||(this.b.style.display="",this.a=!0),_r(this,t),t.postRenderFunctions.push(mr)}else this.a&&(this.b.style.display="none",this.a=!1)},Tr.prototype.Yh=function(t,e,o,i,n,r){var s,a=e.viewState.resolution,l=e.layerStatesArray,p=l.length;for(t=pr(e.pixelToCoordinateTransform,t.slice()),--p;0<=p;--p){s=l[p];var h=s.layer;if(or(s,a)&&n.call(r,h)&&(s=vr(this,h).v(t,e,o,i)))return s}};var nm=["Polygon","Circle","LineString","Image","Text"];h(Nr,Or),Nr.prototype.T=function(){return 35632},h(kr,Or),kr.prototype.T=function(){return 35633},h(Dr,Nr);var rm=new Dr;h(jr,kr);var sm=new jr;h(Vr,Pr),Vr.prototype.i=function(t,e,o,i,n,r,s,a,l,p,h){var c,u,d,f,y,g,m,v,_=t.b;this.l&&(c=_.isEnabled(_.STENCIL_TEST),u=_.getParameter(_.STENCIL_FUNC),d=_.getParameter(_.STENCIL_VALUE_MASK),f=_.getParameter(_.STENCIL_REF),y=_.getParameter(_.STENCIL_WRITEMASK),g=_.getParameter(_.STENCIL_FAIL),m=_.getParameter(_.STENCIL_PASS_DEPTH_PASS),v=_.getParameter(_.STENCIL_PASS_DEPTH_FAIL),_.enable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilMask(255),_.stencilFunc(_.ALWAYS,1,255),_.stencilOp(_.KEEP,_.KEEP,_.REPLACE),this.l.i(t,e,o,i,n,r,s,a,l,p,h),_.stencilMask(0),_.stencilFunc(_.NOTEQUAL,1,255)),Qr(t,34962,this.v),Qr(t,34963,this.o),r=this.ff(_,t,n,r);var b=rr(this.mb);cr(b,2/(o*n[0]),2/(o*n[1])),hr(b,-i),ur(b,-(e[0]-this.origin[0]),-(e[1]-this.origin[1])),e=rr(this.lb),cr(e,2/n[0],2/n[1]),n=rr(this.Oa),i&&hr(n,-i),_.uniformMatrix4fv(r.f,!1,Br(this.Ja,b)),_.uniformMatrix4fv(r.i,!1,Br(this.Ja,e)),_.uniformMatrix4fv(r.c,!1,Br(this.Ja,n)),_.uniform1f(r.a,s);var E;return l?(p?t=this.qe(_,t,a,l,h):(_.clear(_.COLOR_BUFFER_BIT|_.DEPTH_BUFFER_BIT),this.Md(_,t,a,!0),t=(t=l(null))?t:void 0),E=t):this.Md(_,t,a,!1),this.gf(_,r),this.l&&(c||_.disable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilFunc(u,f,d),_.stencilMask(y),_.stencilOp(g,v,m)),E};var am=[0,0,0,1],lm=[],pm=[0,0,0,1],hm=Number.EPSILON||2.220446049250313e-16,cm=35044;h(qr,Vr),Xy=qr.prototype,Xy.$b=function(t,e){var o=t.Vd(),i=t.sa();if(o){this.f.push(this.b.length),this.g.push(e),this.c.s&&(this.u.push(this.b.length),this.c.s=!1),this.A=o;var n,o=t.ha(),o=Jo(o,2,i,-this.origin[0],-this.origin[1]),r=this.a.length,s=this.b.length,a=r/4;for(n=0;2>n;n+=i)this.a[r++]=o[n],this.a[r++]=o[n+1],this.a[r++]=0,this.a[r++]=this.A,this.a[r++]=o[n],this.a[r++]=o[n+1],this.a[r++]=1,this.a[r++]=this.A,this.a[r++]=o[n],this.a[r++]=o[n+1],this.a[r++]=2,this.a[r++]=this.A,this.a[r++]=o[n],this.a[r++]=o[n+1],this.a[r++]=3,this.a[r++]=this.A,this.b[s++]=a,this.b[s++]=a+1,this.b[s++]=a+2,this.b[s++]=a+2,this.b[s++]=a+3,this.b[s++]=a,a+=4}else this.c.s&&(this.j.pop(),this.j.length&&(i=this.j[this.j.length-1],this.c.fillColor=i[0],this.c.strokeColor=i[1],this.c.lineWidth=i[2],this.c.s=!1))},Xy.Bb=function(){this.v=new Hr(this.a),this.o=new Hr(this.b),this.f.push(this.b.length),!this.u.length&&0<this.j.length&&(this.j=[]),this.b=this.a=null},Xy.Cb=function(t){var e=this.v,o=this.o;return function(){$r(t,e),$r(t,o)}},Xy.ff=function(t,e,o,i){var n,r=os(e,rm,sm);return this.I?n=this.I:this.I=n=new Fr(t,r),e.Rc(r),t.enableVertexAttribArray(n.b),t.vertexAttribPointer(n.b,2,5126,!1,16,0),t.enableVertexAttribArray(n.l),t.vertexAttribPointer(n.l,1,5126,!1,16,8),t.enableVertexAttribArray(n.u),t.vertexAttribPointer(n.u,1,5126,!1,16,12),t.uniform2fv(n.R,o),t.uniform1f(n.ta,i),n},Xy.gf=function(t,e){t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.l),t.disableVertexAttribArray(e.u)},Xy.Md=function(t,e,o){if(lt(o)){var i,n,r;for(n=this.f[this.f.length-1],o=this.u.length-1;0<=o;--o)i=this.u[o],r=this.j[o],t.uniform4fv(this.I.G,r[0]),Yr(this,t,r[1],r[2]),Wr(t,e,i,n),n=i}else{var s,a,l,p;for(l=this.f.length-2,r=n=this.f[l+1],i=this.u.length-1;0<=i;--i){for(s=this.j[i],t.uniform4fv(this.I.G,s[0]),Yr(this,t,s[1],s[2]),s=this.u[i];0<=l&&this.f[l]>=s;)p=this.f[l],a=this.g[l],a=u(a).toString(),o[a]&&(n!==r&&Wr(t,e,n,r),r=p),l--,n=p;n!==r&&Wr(t,e,n,r),n=r=s}}},Xy.qe=function(t,e,o,i,n){var r,s,a,l,p,h,c;for(c=this.f.length-2,a=this.f[c+1],r=this.u.length-1;0<=r;--r)for(s=this.j[r],t.uniform4fv(this.I.G,s[0]),Yr(this,t,s[1],s[2]),l=this.u[r];0<=c&&this.f[c]>=l;){if(s=this.f[c],p=this.g[c],h=u(p).toString(),void 0===o[h]&&p.U()&&(void 0===n||ot(n,p.U().D()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Wr(t,e,s,a),a=i(p)))return a;c--,a=s}},Xy.Na=function(t,e){var o,i;e?(o=e.f,this.c.lineDash=o||lm,o=e.g,this.c.lineDashOffset=o||0,o=e.a,o=o instanceof CanvasGradient||o instanceof CanvasPattern?pm:ge(o).map(function(t,e){return 3!=e?t/255:t})||pm,i=e.c,i=void 0!==i?i:1):(o=[0,0,0,0],i=0);var n=t?t.b:[0,0,0,0];n=n instanceof CanvasGradient||n instanceof CanvasPattern?am:ge(n).map(function(t,e){return 3!=e?t/255:t})||am,this.c.strokeColor&&s(this.c.strokeColor,o)&&this.c.fillColor&&s(this.c.fillColor,n)&&this.c.lineWidth===i||(this.c.s=!0,this.c.fillColor=n,this.c.strokeColor=o,this.c.lineWidth=i,this.j.push([n,o,i]))},h(Kr,Nr);var um=new Kr;h(Xr,kr);var dm=new Xr;h(Jr,oe),Xy=Jr.prototype,Xy.ra=function(){ee(this.l);var t=this.b;if(!t.isContextLost()){for(var e in this.a)t.deleteBuffer(this.a[e].buffer);for(e in this.f)t.deleteProgram(this.f[e]);for(e in this.c)t.deleteShader(this.c[e]);t.deleteFramebuffer(this.i),t.deleteRenderbuffer(this.o),t.deleteTexture(this.v)}},Xy.lo=function(){return this.b},Xy.mo=function(){st(this.a),st(this.c),st(this.f),this.o=this.v=this.i=this.j=null},Xy.no=function(){},Xy.Rc=function(t){return t!=this.j&&(this.b.useProgram(t),this.j=t,!0)},h(ss,Vr),Xy=ss.prototype,Xy.Cb=function(t){var e=this.v,o=this.o,i=this.Ha,n=this.u,r=t.b;return function(){if(!r.isContextLost()){var s,a;for(s=0,a=i.length;s<a;++s)r.deleteTexture(i[s]);for(s=0,a=n.length;s<a;++s)r.deleteTexture(n[s])}$r(t,e),$r(t,o)}},Xy.oc=function(t,e){this.f.push(this.b.length),this.g.push(e);var o=t.ha();as(this,o,o.length,t.sa())},Xy.qc=function(t,e){this.f.push(this.b.length),this.g.push(e);var o=t.ha();as(this,o,o.length,t.sa())},Xy.Bb=function(t){t=t.b,this.A.push(this.b.length),this.I.push(this.b.length),this.v=new Hr(this.a),this.o=new Hr(this.b);var e={};ls(this.Ha,this.j,e,t),ls(this.u,this.c,e,t),this.ta=this.G=this.C=void 0,this.c=this.j=null,this.S=this.R=void 0,this.b=null,this.oa=this.ia=this.ea=this.eb=this.Y=this.$a=void 0,this.a=null,this.Zb=void 0},Xy.ff=function(t,e){var o,i=os(e,um,dm);return this.qa?o=this.qa:this.qa=o=new Zr(t,i),e.Rc(i),t.enableVertexAttribArray(o.b),t.vertexAttribPointer(o.b,2,5126,!1,32,0),t.enableVertexAttribArray(o.v),t.vertexAttribPointer(o.v,2,5126,!1,32,8),t.enableVertexAttribArray(o.C),t.vertexAttribPointer(o.C,2,5126,!1,32,16),t.enableVertexAttribArray(o.I),t.vertexAttribPointer(o.I,1,5126,!1,32,24),t.enableVertexAttribArray(o.A),t.vertexAttribPointer(o.A,1,5126,!1,32,28),o},Xy.gf=function(t,e){t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.v),t.disableVertexAttribArray(e.C),t.disableVertexAttribArray(e.I),t.disableVertexAttribArray(e.A)},Xy.Md=function(t,e,o,i){var n=i?this.u:this.Ha;if(i=i?this.I:this.A,lt(o)){var r,s;for(o=0,r=n.length,s=0;o<r;++o){t.bindTexture(3553,n[o]);var a=i[o];Wr(t,e,s,a),s=a}}else for(s=r=0,a=n.length;s<a;++s){t.bindTexture(3553,n[s]);for(var l=0<s?i[s-1]:0,p=i[s],h=l;r<this.f.length&&this.f[r]<=p;){var c=u(this.g[r]).toString();void 0!==o[c]?(h!==l&&Wr(t,e,h,l),l=h=r===this.f.length-1?p:this.f[r+1]):l=r===this.f.length-1?p:this.f[r+1],r++}h!==l&&Wr(t,e,h,l)}},Xy.qe=function(t,e,o,i,n){var r,s,a,l,p,h,c=this.f.length-1;for(r=this.u.length-1;0<=r;--r)for(t.bindTexture(3553,this.u[r]),s=0<r?this.I[r-1]:0,l=this.I[r];0<=c&&this.f[c]>=s;){if(a=this.f[c],p=this.g[c],h=u(p).toString(),void 0===o[h]&&p.U()&&(void 0===n||ot(n,p.U().D()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Wr(t,e,a,l),l=i(p)))return l;l=a,c--}},Xy.Vb=function(t){
var e=t.Hc(),o=t.Z(1),i=t.ue(),n=t.cg(1),r=t.g,s=t.Pc(),a=t.o,l=t.l,p=t.jc();t=t.c;var h;this.j.length?(h=this.j[this.j.length-1],u(h)!=u(o)&&(this.A.push(this.b.length),this.j.push(o))):this.j.push(o),this.c.length?(h=this.c[this.c.length-1],u(h)!=u(n)&&(this.I.push(this.b.length),this.c.push(n))):this.c.push(n),this.C=e[0],this.G=e[1],this.ta=p[1],this.R=i[1],this.S=i[0],this.$a=r,this.Y=s[0],this.eb=s[1],this.ia=l,this.ea=a,this.oa=t,this.Zb=p[0]},h(hs,Nr);var fm=new hs;h(cs,kr);var ym=new cs;h(ds,Vr),Xy=ds.prototype,Xy.Qb=function(t,e){var o=t.ha(),i=t.sa();gs(o,o.length,i)&&(o=Jo(o,o.length,i,-this.origin[0],-this.origin[1]),this.c.s&&(this.j.push(this.b.length),this.c.s=!1),this.f.push(this.b.length),this.g.push(e),fs(this,o,o.length,i))},Xy.nc=function(t,e){var o,i,n=this.b.length,r=t.hd();for(o=0,i=r.length;o<i;++o){var s=r[o].ha(),a=r[o].sa();gs(s,s.length,a)&&(s=Jo(s,s.length,a,-this.origin[0],-this.origin[1]),fs(this,s,s.length,a))}this.b.length>n&&(this.f.push(n),this.g.push(e),this.c.s&&(this.j.push(n),this.c.s=!1))},Xy.Bb=function(){this.v=new Hr(this.a),this.o=new Hr(this.b),this.f.push(this.b.length),!this.j.length&&0<this.u.length&&(this.u=[]),this.b=this.a=null},Xy.Cb=function(t){var e=this.v,o=this.o;return function(){$r(t,e),$r(t,o)}},Xy.ff=function(t,e,o,i){var n,r=os(e,fm,ym);return this.I?n=this.I:this.I=n=new us(t,r),e.Rc(r),t.enableVertexAttribArray(n.j),t.vertexAttribPointer(n.j,2,5126,!1,28,0),t.enableVertexAttribArray(n.b),t.vertexAttribPointer(n.b,2,5126,!1,28,8),t.enableVertexAttribArray(n.o),t.vertexAttribPointer(n.o,2,5126,!1,28,16),t.enableVertexAttribArray(n.g),t.vertexAttribPointer(n.g,1,5126,!1,28,24),t.uniform2fv(n.R,o),t.uniform1f(n.ta,i),n},Xy.gf=function(t,e){t.disableVertexAttribArray(e.j),t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.o),t.disableVertexAttribArray(e.g)},Xy.Md=function(t,e,o,i){var n=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),lt(o)){var s,a,l;for(a=this.f[this.f.length-1],o=this.j.length-1;0<=o;--o)s=this.j[o],l=this.u[o],_s(this,t,l[0],l[1],l[2]),Wr(t,e,s,a),t.clear(t.DEPTH_BUFFER_BIT),a=s}else{var p,h,c,d;for(c=this.f.length-2,l=a=this.f[c+1],s=this.j.length-1;0<=s;--s){for(p=this.u[s],_s(this,t,p[0],p[1],p[2]),p=this.j[s];0<=c&&this.f[c]>=p;)d=this.f[c],h=this.g[c],h=u(h).toString(),o[h]&&(a!==l&&(Wr(t,e,a,l),t.clear(t.DEPTH_BUFFER_BIT)),l=d),c--,a=d;a!==l&&(Wr(t,e,a,l),t.clear(t.DEPTH_BUFFER_BIT)),a=l=p}}i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(n))},Xy.qe=function(t,e,o,i,n){var r,s,a,l,p,h,c;for(c=this.f.length-2,a=this.f[c+1],r=this.j.length-1;0<=r;--r)for(s=this.u[r],_s(this,t,s[0],s[1],s[2]),l=this.j[r];0<=c&&this.f[c]>=l;){if(s=this.f[c],p=this.g[c],h=u(p).toString(),void 0===o[h]&&p.U()&&(void 0===n||ot(n,p.U().D()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Wr(t,e,s,a),a=i(p)))return a;c--,a=s}},Xy.Na=function(t,e){var o=e.i;this.c.lineCap=void 0!==o?o:"round",o=e.f,this.c.lineDash=o||lm,o=e.g,this.c.lineDashOffset=o||0,o=e.l,this.c.lineJoin=void 0!==o?o:"round",o=e.a,o=o instanceof CanvasGradient||o instanceof CanvasPattern?pm:ge(o).map(function(t,e){return 3!=e?t/255:t})||pm;var i=e.c,i=void 0!==i?i:1,n=e.j,n=void 0!==n?n:10;this.c.strokeColor&&s(this.c.strokeColor,o)&&this.c.lineWidth===i&&this.c.miterLimit===n||(this.c.s=!0,this.c.strokeColor=o,this.c.lineWidth=i,this.c.miterLimit=n,this.u.push([o,i,n]))};var gm=3,mm=5,vm=7,_m=11,bm=13,Em=17,Sm=19,Pm=23;h(bs,Nr);var wm=new bs;h(Es,kr);var Am=new Es;Xy=Ps.prototype,Xy.clone=function(){var t=this.a;return new Ps({color:t&&t.slice?t.slice():t||void 0,lineCap:this.i,lineDash:this.f?this.f.slice():void 0,lineDashOffset:this.g,lineJoin:this.l,miterLimit:this.j,width:this.c})},Xy.ao=function(){return this.a},Xy.Ak=function(){return this.i},Xy.bo=function(){return this.f},Xy.Bk=function(){return this.g},Xy.Ck=function(){return this.l},Xy.Hk=function(){return this.j},Xy.co=function(){return this.c},Xy.eo=function(t){this.a=t,this.b=void 0},Xy.qp=function(t){this.i=t,this.b=void 0},Xy.setLineDash=function(t){this.f=t,this.b=void 0},Xy.rp=function(t){this.g=t,this.b=void 0},Xy.sp=function(t){this.l=t,this.b=void 0},Xy.tp=function(t){this.j=t,this.b=void 0},Xy.wp=function(t){this.c=t,this.b=void 0},ws.prototype.concat=function(t){if(t.b){if(this.b){var e=this.b.next;this.b.next=t.f,t.f.ub=this.b,e.ub=t.a,t.a.next=e,this.c+=t.c}else this.b=t.b,this.f=t.f,this.a=t.a,this.c=t.c;t.b=void 0,t.f=void 0,t.a=void 0,t.c=0}};var Cm,Mm,xm,Im;!function(){var t={},e={ma:t};!function(o){if("object"==typeof t&&void 0!==e)e.ma=o();else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.cq=o()}}(function(){return function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=o[s]={ma:{}},e[s][0].call(l.ma,function(t){var o=e[s][1][t];return n(o||t)},l,l.ma,t,e,o,i)}return o[s].ma}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e){function o(t,e,r,s,a){for(r=r||0,s=s||t.length-1,a=a||n;s>r;){if(600<s-r){var l=s-r+1,p=e-r+1,h=Math.log(l),c=.5*Math.exp(2*h/3),h=.5*Math.sqrt(h*c*(l-c)/l)*(0>p-l/2?-1:1);o(t,e,Math.max(r,Math.floor(e-p*c/l+h)),Math.min(s,Math.floor(e+(l-p)*c/l+h)),a)}for(l=t[e],p=r,c=s,i(t,r,e),0<a(t[s],l)&&i(t,r,s);p<c;){for(i(t,p,c),p++,c--;0>a(t[p],l);)p++;for(;0<a(t[c],l);)c--}0===a(t[r],l)?i(t,r,c):(c++,i(t,c,s)),c<=e&&(r=c+1),e<=c&&(s=c-1)}}function i(t,e,o){var i=t[e];t[e]=t[o],t[o]=i}function n(t,e){return t<e?-1:t>e?1:0}e.ma=o},{}],2:[function(t,e){function o(t,e){if(!(this instanceof o))return new o(t,e);this.wf=Math.max(4,t||9),this.Pg=Math.max(2,Math.ceil(.4*this.wf)),e&&this.Lj(e),this.clear()}function i(t,e){n(t,0,t.children.length,e,t)}function n(t,e,o,i,n){n||(n=u(null)),n.da=1/0,n.fa=1/0,n.ba=-1/0,n.ja=-1/0;for(var s;e<o;e++)s=t.children[e],r(n,t.hb?i(s):s);return n}function r(t,e){t.da=Math.min(t.da,e.da),t.fa=Math.min(t.fa,e.fa),t.ba=Math.max(t.ba,e.ba),t.ja=Math.max(t.ja,e.ja)}function s(t,e){return t.da-e.da}function a(t,e){return t.fa-e.fa}function l(t){return(t.ba-t.da)*(t.ja-t.fa)}function p(t){return t.ba-t.da+(t.ja-t.fa)}function h(t,e){return t.da<=e.da&&t.fa<=e.fa&&e.ba<=t.ba&&e.ja<=t.ja}function c(t,e){return e.da<=t.ba&&e.fa<=t.ja&&e.ba>=t.da&&e.ja>=t.fa}function u(t){return{children:t,height:1,hb:!0,da:1/0,fa:1/0,ba:-1/0,ja:-1/0}}function d(t,e,o,i,n){for(var r,s=[e,o];s.length;)o=s.pop(),e=s.pop(),o-e<=i||(r=e+Math.ceil((o-e)/i/2)*i,f(t,r,e,o,n),s.push(e,r,r,o))}e.ma=o;var f=t("quickselect");o.prototype={all:function(){return this.Kg(this.data,[])},search:function(t){var e=this.data,o=[],i=this.yb;if(!c(t,e))return o;for(var n,r,s,a,l=[];e;){for(n=0,r=e.children.length;n<r;n++)s=e.children[n],a=e.hb?i(s):s,c(t,a)&&(e.hb?o.push(s):h(t,a)?this.Kg(s,o):l.push(s));e=l.pop()}return o},load:function(t){if(!t||!t.length)return this;if(t.length<this.Pg){for(var e=0,o=t.length;e<o;e++)this.Ea(t[e]);return this}return t=this.Mg(t.slice(),0,t.length-1,0),this.data.children.length?this.data.height===t.height?this.Rg(this.data,t):(this.data.height<t.height&&(e=this.data,this.data=t,t=e),this.Og(t,this.data.height-t.height-1,!0)):this.data=t,this},Ea:function(t){return t&&this.Og(t,this.data.height-1),this},clear:function(){return this.data=u([]),this},remove:function(t,e){if(!t)return this;for(var o,i,n,r,s=this.data,a=this.yb(t),l=[],p=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],o=p.pop(),r=!0),s.hb){t:{n=t;var c=s.children,u=e;if(u){for(var d=0;d<c.length;d++)if(u(n,c[d])){n=d;break t}n=-1}else n=c.indexOf(n)}if(-1!==n){s.children.splice(n,1),l.push(s),this.Jj(l);break}}r||s.hb||!h(s,a)?i?(o++,s=i.children[o],r=!1):s=null:(l.push(s),p.push(o),o=0,i=s,s=s.children[0])}return this},yb:function(t){return t},Af:s,Bf:a,toJSON:function(){return this.data},Kg:function(t,e){for(var o=[];t;)t.hb?e.push.apply(e,t.children):o.push.apply(o,t.children),t=o.pop();return e},Mg:function(t,e,o,n){var r,s=o-e+1,a=this.wf;if(s<=a)return r=u(t.slice(e,o+1)),i(r,this.yb),r;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),r=u([]),r.hb=!1,r.height=n;var l,p,h,s=Math.ceil(s/a),a=s*Math.ceil(Math.sqrt(a));for(d(t,e,o,a,this.Af);e<=o;e+=a)for(p=Math.min(e+a-1,o),d(t,e,p,s,this.Bf),l=e;l<=p;l+=s)h=Math.min(l+s-1,p),r.children.push(this.Mg(t,l,h,n-1));return i(r,this.yb),r},Ij:function(t,e,o,i){for(var n,r,s,a,p,h,c,u;i.push(e),!e.hb&&i.length-1!==o;){for(c=u=1/0,n=0,r=e.children.length;n<r;n++)s=e.children[n],p=l(s),h=(Math.max(s.ba,t.ba)-Math.min(s.da,t.da))*(Math.max(s.ja,t.ja)-Math.min(s.fa,t.fa))-p,h<u?(u=h,c=p<c?p:c,a=s):h===u&&p<c&&(c=p,a=s);e=a||e.children[0]}return e},Og:function(t,e,o){var i=this.yb;o=o?t:i(t);var i=[],n=this.Ij(o,this.data,e,i);for(n.children.push(t),r(n,o);0<=e&&i[e].children.length>this.wf;)this.Qj(i,e),e--;this.Fj(o,i,e)},Qj:function(t,e){var o=t[e],n=o.children.length,r=this.Pg;this.Gj(o,r,n),n=this.Hj(o,r,n),n=u(o.children.splice(n,o.children.length-n)),n.height=o.height,n.hb=o.hb,i(o,this.yb),i(n,this.yb),e?t[e-1].children.push(n):this.Rg(o,n)},Rg:function(t,e){this.data=u([t,e]),this.data.height=t.height+1,this.data.hb=!1,i(this.data,this.yb)},Hj:function(t,e,o){var i,r,s,a,p,h,c;for(p=h=1/0,i=e;i<=o-e;i++)r=n(t,0,i,this.yb),s=n(t,i,o,this.yb),a=Math.max(0,Math.min(r.ba,s.ba)-Math.max(r.da,s.da))*Math.max(0,Math.min(r.ja,s.ja)-Math.max(r.fa,s.fa)),r=l(r)+l(s),a<p?(p=a,c=i,h=r<h?r:h):a===p&&r<h&&(h=r,c=i);return c},Gj:function(t,e,o){var i=t.hb?this.Af:s,n=t.hb?this.Bf:a,r=this.Lg(t,e,o,i);e=this.Lg(t,e,o,n),r<e&&t.children.sort(i)},Lg:function(t,e,o,i){t.children.sort(i),i=this.yb;var s,a,l=n(t,0,e,i),h=n(t,o-e,o,i),c=p(l)+p(h);for(s=e;s<o-e;s++)a=t.children[s],r(l,t.hb?i(a):a),c+=p(l);for(s=o-e-1;s>=e;s--)a=t.children[s],r(h,t.hb?i(a):a),c+=p(h);return c},Fj:function(t,e,o){for(;0<=o;o--)r(e[o],t)},Jj:function(t){for(var e,o=t.length-1;0<=o;o--)0===t[o].children.length?0<o?(e=t[o-1].children,e.splice(e.indexOf(t[o]),1)):this.clear():i(t[o],this.yb)},Lj:function(t){var e=["return a"," - b",";"];this.Af=new Function("a","b",e.join(t[0])),this.Bf=new Function("a","b",e.join(t[1])),this.yb=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:1}]},{},[2])(2)}),Cm=e.ma}(),Xy=Ls.prototype,Xy.Ea=function(t,e){var o={da:t[0],fa:t[1],ba:t[2],ja:t[3],value:e};this.b.Ea(o),this.a[u(e)]=o},Xy.load=function(t,e){for(var o=Array(e.length),i=0,n=e.length;i<n;i++){var r=t[i],s=e[i],r={da:r[0],fa:r[1],ba:r[2],ja:r[3],value:s};o[i]=r,this.a[u(s)]=r}this.b.load(o)},Xy.remove=function(t){t=u(t);var e=this.a[t];return delete this.a[t],null!==this.b.remove(e)},Xy.forEach=function(t,e){return Ds(Os(this),t,e)},Xy.clear=function(){this.b.clear(),this.a={}},Xy.D=function(){var t=this.b.data;return[t.da,t.fa,t.ba,t.ja]},h(js,Vr),Xy=js.prototype,Xy.pc=function(t,e){var o,i,n,r,s=t.Od(),a=t.sa(),l=this.b.length,p=this.l.b.length;for(o=0,i=s.length;o<i;++o){var h=s[o].jd();if(0<h.length){var c,u=h[0].ha(),u=Jo(u,u.length,a,-this.origin[0],-this.origin[1]),d=[];for(n=1,r=h.length;n<r;++n)c=h[n].ha(),c=Jo(c,c.length,a,-this.origin[0],-this.origin[1]),d.push(c);ms(this.l,u,d,a),Fs(this,u,d,a)}}this.b.length>l&&(this.f.push(l),this.g.push(e),this.j.s&&(this.c.push(l),this.j.s=!1)),this.l.b.length>p&&vs(this.l,e,p)},Xy.rc=function(t,e){var o=t.jd(),i=t.sa();if(0<o.length){this.f.push(this.b.length),this.g.push(e),this.j.s&&(this.c.push(this.b.length),this.j.s=!1),vs(this.l,e);var n,r,s,a=o[0].ha(),a=Jo(a,a.length,i,-this.origin[0],-this.origin[1]),l=[];for(n=1,r=o.length;n<r;++n)s=o[n].ha(),s=Jo(s,s.length,i,-this.origin[0],-this.origin[1]),l.push(s);ms(this.l,a,l,i),Fs(this,a,l,i)}},Xy.Bb=function(t){this.v=new Hr(this.a),this.o=new Hr(this.b),this.f.push(this.b.length),this.l.Bb(t),!this.c.length&&0<this.u.length&&(this.u=[]),this.b=this.a=null},Xy.Cb=function(t){var e=this.v,o=this.o,i=this.l.Cb(t);return function(){$r(t,e),$r(t,o),i()}},Xy.ff=function(t,e){var o,i=os(e,wm,Am);return this.I?o=this.I:this.I=o=new Ss(t,i),e.Rc(i),t.enableVertexAttribArray(o.b),t.vertexAttribPointer(o.b,2,5126,!1,8,0),o},Xy.gf=function(t,e){t.disableVertexAttribArray(e.b)},Xy.Md=function(t,e,o,i){var n=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),lt(o)){var s,a,l;for(a=this.f[this.f.length-1],o=this.c.length-1;0<=o;--o)s=this.c[o],l=this.u[o],t.uniform4fv(this.I.G,l),Wr(t,e,s,a),a=s}else{var p,h,c,d;for(c=this.f.length-2,l=a=this.f[c+1],s=this.c.length-1;0<=s;--s){for(p=this.u[s],t.uniform4fv(this.I.G,p),p=this.c[s];0<=c&&this.f[c]>=p;)d=this.f[c],h=this.g[c],h=u(h).toString(),o[h]&&(a!==l&&(Wr(t,e,a,l),t.clear(t.DEPTH_BUFFER_BIT)),l=d),c--,a=d;a!==l&&(Wr(t,e,a,l),t.clear(t.DEPTH_BUFFER_BIT)),a=l=p}}i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(n))},Xy.qe=function(t,e,o,i,n){var r,s,a,l,p,h,c;for(c=this.f.length-2,a=this.f[c+1],r=this.c.length-1;0<=r;--r)for(s=this.u[r],t.uniform4fv(this.I.G,s),l=this.c[r];0<=c&&this.f[c]>=l;){if(s=this.f[c],p=this.g[c],h=u(p).toString(),void 0===o[h]&&p.U()&&(void 0===n||ot(n,p.U().D()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Wr(t,e,s,a),a=i(p)))return a;c--,a=s}},Xy.Na=function(t,e){var o=t?t.b:[0,0,0,0];o=o instanceof CanvasGradient||o instanceof CanvasPattern?am:ge(o).map(function(t,e){return 3!=e?t/255:t})||am,this.j.fillColor&&s(o,this.j.fillColor)||(this.j.fillColor=o,this.j.s=!0,this.u.push(o)),e?this.l.Na(null,e):this.l.Na(null,new Ps({color:[0,0,0,0],lineWidth:0}))},ta.prototype.i=function(){},h(ea,Gr),ea.prototype.b=function(t,e){var o=void 0!==t?t.toString():"0",i=this.a[o];return void 0===i&&(i={},this.a[o]=i),o=i[e],void 0===o&&(o=new Tm[e](this.l,this.g),i[e]=o),o},ea.prototype.f=function(){return lt(this.a)},ea.prototype.i=function(t,o,i,n,r,s,a,l){var p=Object.keys(this.a).map(Number);p.sort(e);var h,c,u,d,f,y;for(h=0,c=p.length;h<c;++h)for(f=this.a[p[h].toString()],u=0,d=nm.length;u<d;++u)void 0!==(y=f[nm[u]])&&y.i(t,o,i,n,r,s,a,l,void 0,!1)},ea.prototype.Aa=function(t,e,o,i,n,r,s,a,l,p){var h=e.b;h.bindFramebuffer(h.FRAMEBUFFER,ts(e));var c;return void 0!==this.c&&(c=R(F(t),i*this.c)),na(this,e,t,i,n,s,a,l,function(t){var e=new Uint8Array(4);if(h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,e),0<e[3]&&(t=p(t)))return t},!0,c)};var Rm=[1,1],Tm={Circle:qr,Image:ss,LineString:ds,Polygon:js,Text:ta};h(sa,Pr),Xy=sa.prototype,Xy.pd=function(t){this.Na(t.Ca(),t.Da()),this.Vb(t.Z())},Xy.mc=function(t){switch(t.T()){case"Point":this.qc(t,null);break;case"LineString":this.Qb(t,null);break;case"Polygon":this.rc(t,null);break;case"MultiPoint":this.oc(t,null);break;case"MultiLineString":this.nc(t,null);break;case"MultiPolygon":this.pc(t,null);break;case"GeometryCollection":this.pe(t,null);break;case"Circle":this.$b(t,null)}},Xy.oe=function(t,e){var o=(0,e.Ra)(t);o&&ot(this.a,o.D())&&(this.pd(e),this.mc(o))},Xy.pe=function(t){t=t.a;var e,o;for(e=0,o=t.length;e<o;++e)this.mc(t[e])},Xy.qc=function(t,e){var o=this.b,i=new ea(1,this.a).b(0,"Image");i.Vb(this.v),i.qc(t,e),i.Bb(o),i.i(this.b,this.f,this.i,this.g,this.l,this.c,1,{},void 0,!1),i.Cb(o)()},Xy.oc=function(t,e){var o=this.b,i=new ea(1,this.a).b(0,"Image");i.Vb(this.v),i.oc(t,e),i.Bb(o),i.i(this.b,this.f,this.i,this.g,this.l,this.c,1,{},void 0,!1),i.Cb(o)()},Xy.Qb=function(t,e){var o=this.b,i=new ea(1,this.a).b(0,"LineString");i.Na(null,this.j),i.Qb(t,e),i.Bb(o),i.i(this.b,this.f,this.i,this.g,this.l,this.c,1,{},void 0,!1),i.Cb(o)()},Xy.nc=function(t,e){var o=this.b,i=new ea(1,this.a).b(0,"LineString");i.Na(null,this.j),i.nc(t,e),i.Bb(o),i.i(this.b,this.f,this.i,this.g,this.l,this.c,1,{},void 0,!1),i.Cb(o)()},Xy.rc=function(t,e){var o=this.b,i=new ea(1,this.a).b(0,"Polygon");i.Na(this.o,this.j),i.rc(t,e),i.Bb(o),i.i(this.b,this.f,this.i,this.g,this.l,this.c,1,{},void 0,!1),i.Cb(o)()},Xy.pc=function(t,e){var o=this.b,i=new ea(1,this.a).b(0,"Polygon");i.Na(this.o,this.j),i.pc(t,e),i.Bb(o),i.i(this.b,this.f,this.i,this.g,this.l,this.c,1,{},void 0,!1),i.Cb(o)()},Xy.$b=function(t,e){var o=this.b,i=new ea(1,this.a).b(0,"Circle");i.Na(this.o,this.j),i.$b(t,e),i.Bb(o),i.i(this.b,this.f,this.i,this.g,this.l,this.c,1,{},void 0,!1),i.Cb(o)()},Xy.Vb=function(t){this.v=t},Xy.Na=function(t,e){this.o=t,this.j=e},Xy=aa.prototype,Xy.clear=function(){this.c=0,this.b={},this.f=this.a=null},Xy.forEach=function(t,e){for(var o=this.a;o;)t.call(e,o.$c,o.tc,this),o=o.Lb},Xy.get=function(t){return t=this.b[t],f(!!t,15),t===this.f?t.$c:(t===this.a?(this.a=this.a.Lb,this.a.td=null):(t.Lb.td=t.td,t.td.Lb=t.Lb),t.Lb=null,t.td=this.f,this.f=this.f.Lb=t,t.$c)},Xy.pop=function(){var t=this.a;return delete this.b[t.tc],t.Lb&&(t.Lb.td=null),this.a=t.Lb,this.a||(this.f=null),--this.c,t.$c},Xy.replace=function(t,e){this.get(t),this.b[t].$c=e},Xy.set=function(t,e){f(!(t in this.b),16);var o={tc:t,Lb:null,td:this.f,$c:e};this.f?this.f.Lb=o:this.a=o,this.f=o,this.b[t]=o,++this.c},h(la,yr),Xy=la.prototype,Xy.ra=function(){var t=this.f;t.isContextLost()||this.a.forEach(function(e){e&&t.deleteTexture(e.Fb)}),ie(this.i),yr.prototype.ra.call(this)},Xy.bk=function(t,e){for(var o,i=this.f;1024<this.a.c-this.g;){if(o=this.a.a.$c)i.deleteTexture(o.Fb);else{if(+this.a.a.tc==e.index)break;--this.g}this.a.pop()}},Xy.T=function(){return"webgl"},Xy.nn=function(t){t.preventDefault(),this.a.clear(),this.g=0,t=this.c;for(var e in t)t[e].$f()},Xy.pn=function(){ca(this),this.j.render()},Xy.vg=function(t){var e=this.i,o=this.f;if(o.isContextLost())return!1;if(!t)return this.o&&(this.b.style.display="none",this.o=!1),!1;this.I=t.focus,this.a.set((-t.index).toString(),null),++this.g,ha(this,"precompose",t);var i=[],n=t.layerStatesArray;a(n);var r,s,l,p,h=t.viewState.resolution;for(r=0,s=n.length;r<s;++r)p=n[r],or(p,h)&&"ready"==p.Ui&&(l=vr(this,p.layer),l.ag(t,p,e)&&i.push(p));for(n=t.size[0]*t.pixelRatio,h=t.size[1]*t.pixelRatio,this.b.width==n&&this.b.height==h||(this.b.width=n,this.b.height=h),o.bindFramebuffer(36160,null),o.clearColor(0,0,0,0),o.clear(16384),o.enable(3042),o.viewport(0,0,this.b.width,this.b.height),r=0,s=i.length;r<s;++r)p=i[r],l=vr(this,p.layer),l.ai(t,p,e);this.o||(this.b.style.display="",this.o=!0),gr(t),1024<this.a.c-this.g&&t.postRenderFunctions.push(this.bk.bind(this)),this.l.b.length&&(t.postRenderFunctions.push(this.G),t.animate=!0),ha(this,"postcompose",t),_r(this,t),t.postRenderFunctions.push(mr)},Xy.Aa=function(t,e,o,i,n,r,s){var a;if(this.f.isContextLost())return!1;var l,p=e.viewState,h=e.layerStatesArray;for(l=h.length-1;0<=l;--l){a=h[l];var c=a.layer;if(or(a,p.resolution)&&r.call(s,c)&&(a=vr(this,c).Aa(t,e,o,i,n)))return a}},Xy.Zh=function(t,e,o,i,n){if(o=!1,this.f.isContextLost())return!1;var r,s=e.viewState,a=e.layerStatesArray;for(r=a.length-1;0<=r;--r){var l=a[r],p=l.layer;if(or(l,s.resolution)&&i.call(n,p)&&(o=vr(this,p).Ke(t,e)))return!0}return o},Xy.Yh=function(t,e,o,i,n){if(this.f.isContextLost())return!1;var r,s,a=e.viewState,l=e.layerStatesArray;for(s=l.length-1;0<=s;--s){r=l[s];var p=r.layer;if(or(r,a.resolution)&&n.call(i,p)&&(r=vr(this,p).Zf(t,e,o,i)))return r}};var Lm=["canvas","webgl"];h(ua,pe),Xy=ua.prototype,Xy.Rj=function(t){this.j.push(t)},Xy.Sj=function(t){this.l.push(t)},Xy.Sg=function(t){this.Jc().od().push(t)},Xy.Tg=function(t){this.o.push(t)},Xy.Ug=function(t){var e=t.g;void 0!==e&&(this.dg[e.toString()]=t),t.setMap(this)},Xy.ra=function(){ie(this.Ja),ie(this.C),$t(this.c,"wheel",this.ld,this),$t(this.c,"mousewheel",this.ld,this),this.i&&(window.removeEventListener("resize",this.i,!1),this.i=void 0),this.g&&(cancelAnimationFrame(this.g),this.g=void 0),this.Fe(null),pe.prototype.ra.call(this)},Xy.re=function(t,e,o){if(this.a)return t=this.Za(t),o=o||{},this.C.Aa(t,this.a,void 0!==o.hitTolerance?o.hitTolerance*this.a.pixelRatio:0,e,null,o.layerFilter?o.layerFilter:Yo,null)},Xy.pm=function(t,e,o,i,n){if(this.a)return this.C.Yh(t,this.a,e,void 0!==o?o:null,i||Yo,void 0!==n?n:null)},Xy.El=function(t,e){if(!this.a)return!1;var o=this.Za(t);return e=e||{},this.C.Zh(o,this.a,void 0!==e.hitTolerance?e.hitTolerance*this.a.pixelRatio:0,e.layerFilter?e.layerFilter:Yo,null)},Xy.sk=function(t){return this.Za(this.te(t))},Xy.te=function(t){var e=this.c.getBoundingClientRect();return t=t.changedTouches?t.changedTouches[0]:t,[t.clientX-e.left,t.clientY-e.top]},Xy.Of=function(){return this.get("target")},Xy.Kc=function(){var t=this.Of();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},Xy.Za=function(t){var e=this.a;return e?pr(e.pixelToCoordinateTransform,t.slice()):null},Xy.qk=function(){return this.j},Xy.Lk=function(){return this.o},Xy.Kk=function(t){return t=this.dg[t.toString()],void 0!==t?t:null},Xy.xk=function(){return this.l},Xy.Jc=function(){return this.get("layergroup")},Xy.Jh=function(){return this.Jc().od()},Xy.Ka=function(t){var e=this.a;return e?pr(e.coordinateToPixelTransform,t.slice(0,2)):null},Xy.Mb=function(){return this.get("size")},Xy.$=function(){return this.get("view")},Xy.Yk=function(){return this.c},Xy.Wk=function(t,e,o,i){var n=this.a;return n&&e in n.wantedTiles&&n.wantedTiles[e][t.ib()]?(t=o[0]-n.focus[0],o=o[1]-n.focus[1],65536*Math.log(i)+Math.sqrt(t*t+o*o)/i):1/0},Xy.ld=function(t,e){var o=new ze(e||t.type,this,t);this.uh(o)},Xy.uh=function(t){if(this.a){this.Y=t.coordinate,t.frameState=this.a;var e,o=this.l.a;if(!1!==this.b(t))for(e=o.length-1;0<=e;e--){var i=o[e];if(i.c()&&!i.handleEvent(t))break}}},Xy.xl=function(){var t=this.a,e=this.Ha;if(e.b.length){var o=16,i=o;if(t){var n=t.viewHints;n[0]&&(o=this.rf?8:0,i=2),n[1]&&(o=this.sf?8:0,i=2)}e.l<o&&(Ao(e),Mo(e,o,i))}for(e=this.Oa,o=0,i=e.length;o<i;++o)e[o](this,t);e.length=0},Xy.zl=function(){this.render()},Xy.Bl=function(){var t;if(this.Of()&&(t=this.Kc()),this.v){for(var e=0,o=this.v.length;e<o;++e)te(this.v[e]);this.v=null}t?(t.appendChild(this.c),t=this.oa?this.oa:t,this.v=[Jt(t,"keydown",this.ld,this),Jt(t,"keypress",this.ld,this)],this.i||(this.i=this.xd.bind(this),window.addEventListener("resize",this.i,!1))):(Pe(this.c),this.i&&(window.removeEventListener("resize",this.i,!1),this.i=void 0)),this.xd()},Xy.Cl=function(){this.render()},Xy.xh=function(){this.render()},Xy.Dl=function(){this.S&&(te(this.S),this.S=null),this.R&&(te(this.R),this.R=null);var t=this.$();t&&(this.c.setAttribute("data-view",u(t)),this.S=Jt(t,"propertychange",this.xh,this),this.R=Jt(t,"change",this.xh,this)),this.render()},Xy.kl=function(){this.G&&(this.G.forEach(te),this.G=null);var t=this.Jc();t&&(this.G=[Jt(t,"propertychange",this.render,this),Jt(t,"change",this.render,this)]),this.render()},Xy.ip=function(){this.g&&cancelAnimationFrame(this.g),this.ia()},Xy.render=function(){void 0===this.g&&(this.g=requestAnimationFrame(this.ia))},Xy.ap=function(t){return this.j.remove(t)},Xy.bp=function(t){return this.l.remove(t)},Xy.ep=function(t){return this.Jc().od().remove(t)},Xy.fp=function(t){return this.o.remove(t)},Xy.hp=function(t){var e,o,i=this.Mb(),n=this.$(),r=D(),s=null;if(void 0!==i&&0<i[0]&&0<i[1]&&n&&Hi(n)){var s=Bi(n,this.a?this.a.viewHints:void 0),a=this.Jc().Lf(),l={};for(e=0,o=a.length;e<o;++e)l[u(a[e].layer)]=a[e];e=n.V(),s={animate:!1,attributions:{},coordinateToPixelTransform:this.mb,extent:r,focus:this.Y?this.Y:e.center,index:this.Bd++,layerStates:l,layerStatesArray:a,logos:og({},this.pf),pixelRatio:this.xf,pixelToCoordinateTransform:this.yf,postRenderFunctions:[],size:i,skippedFeatureUids:this.ea,tileQueue:this.Ha,time:t,usedTiles:{},viewState:e,viewHints:s,wantedTiles:{}}}s&&(s.extent=Z(e.center,e.resolution,e.rotation,s.size,r)),this.a=s,this.C.vg(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.Oa,s.postRenderFunctions),s.viewHints[0]||s.viewHints[1]||B(s.extent,this.lb)||(this.b(new We("moveend",this,s)),T(s.extent,this.lb))),this.b(new We("postrender",this,s)),setTimeout(this.xl.bind(this),0)},Xy.Li=function(t){this.set("layergroup",t)},Xy.Ag=function(t){this.set("size",t)},Xy.Fe=function(t){this.set("target",t)},Xy.vp=function(t){this.set("view",t)},Xy.Ti=function(t){t=u(t).toString(),this.ea[t]=!0,this.render()},Xy.xd=function(){var t=this.Kc();if(t){var e=getComputedStyle(t);this.Ag([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.Ag(void 0)},Xy.Zi=function(t){t=u(t).toString(),delete this.ea[t],this.render()},tr(),h(fa,pe),Xy=fa.prototype,Xy.se=function(){return this.get(Gm)},Xy.qm=function(){return this.g},Xy.Ge=function(){return this.get(Om)},Xy.qh=function(){return this.get(Nm)},Xy.Kh=function(){return this.get(km)},Xy.rh=function(){return this.get(Dm)},Xy.fl=function(){for(var t=this.c;t.lastChild;)t.removeChild(t.lastChild);(t=this.se())&&this.c.appendChild(t)},Xy.pl=function(){this.i&&(Pe(this.c),te(this.i),this.i=null);var t=this.Ge();t&&(this.i=Jt(t,"postrender",this.render,this),ma(this),t=this.v?t.u:t.A,this.o?t.insertBefore(this.c,t.childNodes[0]||null):t.appendChild(this.c))},Xy.render=function(){ma(this)},Xy.tl=function(){ma(this)},Xy.vl=function(){if(ma(this),this.get(km)&&this.autoPan){var t=this.Ge();if(t&&t.Kc()){var e=ya(t.Kc(),t.Mb()),o=this.se(),i=o.offsetWidth,n=o.currentStyle||getComputedStyle(o),i=i+(parseInt(n.marginLeft,10)+parseInt(n.marginRight,10)),n=o.offsetHeight,r=o.currentStyle||getComputedStyle(o),n=n+(parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)),s=ya(o,[i,n]),o=this.j;O(e,s)||(i=s[0]-e[0],n=e[2]-s[2],r=s[1]-e[1],s=e[3]-s[3],e=[0,0],0>i?e[0]=i-o:0>n&&(e[0]=Math.abs(n)+o),0>r?e[1]=r-o:0>s&&(e[1]=Math.abs(s)+o),0===e[0]&&0===e[1])||(o=t.$().Ba(),o=t.Ka(o),e=[o[0]+e[0],o[1]+e[1]],t.$().animate({center:t.Za(e),duration:this.l.duration,easing:this.l.easing}))}}},Xy.wl=function(){ma(this)},Xy.Gi=function(t){this.set(Gm,t)},Xy.setMap=function(t){this.set(Om,t)},Xy.Ni=function(t){this.set(Nm,t)},Xy.Wf=function(t){this.set(km,t)},Xy.Qi=function(t){this.set(Dm,t)};var Gm="element",Om="map",Nm="offset",km="position",Dm="positioning";h(va,we),Xy=va.prototype,Xy.setMap=function(t){var e=this.a;t!==e&&(e&&((e=e.$())&&$t(e,he("rotation"),this.Ae,this),this.c.Fe(null)),we.prototype.setMap.call(this,t),t&&(this.c.Fe(this.C),this.v.push(Jt(t,"propertychange",this.ql,this)),this.c.Jh().ec()||this.c.Li(t.Jc()),t=t.$()))&&(Jt(t,he("rotation"),this.Ae,this),Hi(t)&&(this.c.xd(),ba(this)))},Xy.ql=function(t){"view"===t.key&&((t=t.oldValue)&&$t(t,he("rotation"),this.Ae,this),t=this.a.$(),Jt(t,he("rotation"),this.Ae,this))},Xy.Ae=function(){this.c.$().He(this.a.$().Va())},Xy.Em=function(t){t.preventDefault(),Sa(this)},Xy.Dm=function(){return this.j},Xy.Gm=function(t){this.j!==t&&(this.j=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.l&&Sa(this))},Xy.Fm=function(t){this.j&&this.l!==t&&Sa(this)},Xy.Cm=function(){return this.l},Xy.Mk=function(){return this.c},h(Pa,we);var jm=[1,2,5];Pa.prototype.Jb=function(){return this.get(Fm)},Pa.prototype.R=function(){Aa(this)},Pa.prototype.G=function(t){this.set(Fm,t)};var Fm="units";h(Ca,we),Ca.prototype.ra=function(){ie(this.j),we.prototype.ra.call(this)};var Um=0;Xy=Ca.prototype,Xy.setMap=function(t){we.prototype.setMap.call(this,t),t&&t.render()},Xy.bl=function(t){var e=this.a.$();t=Ia(this,_(1===this.l?(t.offsetX-this.R[0]/2)/this.A:(t.offsetY-this.R[1]/2)/this.o,0,1)),e.animate({resolution:e.constrainResolution(t),duration:this.Y,easing:Ie})},Xy.el=function(t){this.u||t.b.target!==this.element.firstElementChild||(qi(this.a.$(),1,1),this.C=t.clientX,this.G=t.clientY,this.u=!0)},Xy.cl=function(t){if(this.u){var e=this.element.firstElementChild;this.c=Ia(this,_(1===this.l?(t.clientX-this.C+parseInt(e.style.left,10))/this.A:(t.clientY-this.G+parseInt(e.style.top,10))/this.o,0,1)),this.a.$().Xc(this.c),xa(this,this.c),this.C=t.clientX,this.G=t.clientY}},Xy.dl=function(){if(this.u){var t=this.a.$();qi(t,1,-1),t.animate({resolution:t.constrainResolution(this.c),duration:this.Y,easing:Ie}),this.u=!1,this.G=this.C=void 0}},h(Ra,we),Ra.prototype.l=function(t){t.preventDefault(),t=this.a.$();var e=this.c?this.c:t.o.D();t.Ff(e)},h(Ta,pe),Xy=Ta.prototype,Xy.ra=function(){this.Uf(!1),pe.prototype.ra.call(this)},Xy.qo=function(t){if(null!==t.alpha){var e=P(t.alpha);this.set(Bm,e),"boolean"==typeof t.absolute&&t.absolute?this.set(zm,e):"number"==typeof t.webkitCompassHeading&&-1!=t.webkitCompassAccuracy&&this.set(zm,P(t.webkitCompassHeading))}null!==t.beta&&this.set(Vm,P(t.beta)),null!==t.gamma&&this.set(Wm,P(t.gamma)),this.s()},Xy.jk=function(){return this.get(Bm)},Xy.mk=function(){return this.get(Vm)},Xy.uk=function(){return this.get(Wm)},Xy.bm=function(){return this.get(zm)},Xy.Fh=function(){return this.get(Hm)},Xy.cm=function(){if(Ig){var t=this.Fh();t&&!this.a?this.a=Jt(window,"deviceorientation",this.qo,this):t||null===this.a||(te(this.a),this.a=null)}},Xy.Uf=function(t){this.set(Hm,t)};var Bm="alpha",Vm="beta",Wm="gamma",zm="heading",Hm="tracking";Xy=La.prototype,Xy.Pe=function(){return this.g},Xy.Qe=function(){return this.o},Xy.Re=function(){return this.l},Xy.Se=function(){return this.c},Xy.ve=function(){return this.v},Xy.rd=function(t){this.g=t},Xy.Te=function(t){this.l=t},Xy.sd=function(t){this.c=t},h(Ga,La),Xy=Ga.prototype,Xy.clone=function(){var t=new Ga({fill:this.Ca()?this.Ca().clone():void 0,points:this.f!==this.a?this.b/2:this.b,radius:this.a,radius2:this.f,angle:this.j,snapToPixel:this.v,stroke:this.Da()?this.Da().clone():void 0,rotation:this.l,rotateWithView:this.o,atlasManager:this.u});return t.rd(this.g),t.sd(this.c),t},Xy.Hc=function(){return this.C},Xy.ki=function(){return this.j},Xy.Ca=function(){return this.Wa},Xy.cg=function(){return this.A},Xy.Z=function(){return this.I},Xy.ue=function(){return this.G},Xy.Oe=function(){return 2},Xy.Pc=function(){return this.qa},Xy.li=function(){return this.b},Xy.mi=function(){return this.a},Xy.sh=function(){return this.f},Xy.jc=function(){return this.ta},Xy.Da=function(){return this.Ya},Xy.zh=function(){},Xy.load=function(){},Xy.Yi=function(){},Xy.ah=function(t,e,o,i){var n;if(e.setTransform(1,0,0,1,0,0),e.translate(o,i),e.beginPath(),1/0===this.b)e.arc(t.size/2,t.size/2,this.a,0,2*Math.PI,!0);else for(this.f!==this.a&&(this.b*=2),o=0;o<=this.b;o++)i=2*o*Math.PI/this.b-Math.PI/2+this.j,n=o%2?this.f:this.a,e.lineTo(t.size/2+n*Math.cos(i),t.size/2+n*Math.sin(i));this.Wa&&(e.fillStyle=_e(this.Wa.b),e.fill()),this.Ya&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.Vi,t.lineDash&&e.setLineDash(t.lineDash),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},Xy.$g=function(t,e,o,i){if(e.setTransform(1,0,0,1,0,0),e.translate(o,i),e.beginPath(),1/0===this.b)e.arc(t.size/2,t.size/2,this.a,0,2*Math.PI,!0);else{this.f!==this.a&&(this.b*=2);var n;for(o=0;o<=this.b;o++)n=2*o*Math.PI/this.b-Math.PI/2+this.j,i=o%2?this.f:this.a,e.lineTo(t.size/2+i*Math.cos(n),t.size/2+i*Math.sin(n))}e.fillStyle=em,e.fill(),this.Ya&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.Vi,t.lineDash&&e.setLineDash(t.lineDash),e.stroke()),e.closePath()},h(Na,Ga),Na.prototype.clone=function(){var t=new Na({fill:this.Ca()?this.Ca().clone():void 0,stroke:this.Da()?this.Da().clone():void 0,radius:this.a,snapToPixel:this.v,atlasManager:this.u});return t.rd(this.g),t.sd(this.c),t},Na.prototype.Wc=function(t){this.a=t,Oa(this,this.u)},ka.prototype.clone=function(){var t=this.b;return new ka({color:t&&t.slice?t.slice():t||void 0})},ka.prototype.f=function(){return this.b},ka.prototype.c=function(t){this.b=t,this.a=void 0},Xy=Da.prototype,Xy.clone=function(){var t=this.U();return t&&t.clone&&(t=t.clone()),new Da({geometry:t,fill:this.Ca()?this.Ca().clone():void 0,image:this.Z()?this.Z().clone():void 0,stroke:this.Da()?this.Da().clone():void 0,
text:this.Pa()?this.Pa().clone():void 0,zIndex:this.za()})},Xy.U=function(){return this.Gc},Xy.vk=function(){return this.Ra},Xy.Ca=function(){return this.Wa},Xy.cf=function(t){this.Wa=t},Xy.Z=function(){return this.M},Xy.zg=function(t){this.M=t},Xy.Da=function(){return this.Ya},Xy.df=function(t){this.Ya=t},Xy.Pa=function(){return this.Fa},Xy.ef=function(t){this.Fa=t},Xy.za=function(){return this.kj},Xy.Sa=function(t){"function"==typeof t?this.Ra=t:"string"==typeof t?this.Ra=function(e){return e.get(t)}:t?t&&(this.Ra=function(){return t}):this.Ra=Ba,this.Gc=t},Xy.Wb=function(t){this.kj=t};var qm=null;h(Va,pe),Xy=Va.prototype,Xy.clone=function(){var t=new Va(this.N());t.Vc(this.c);var e=this.U();return e&&t.Sa(e.clone()),(e=this.g)&&t.Vf(e),t},Xy.U=function(){return this.get(this.c)},Xy.dm=function(){return this.a},Xy.wk=function(){return this.c},Xy.em=function(){return this.g},Xy.Nc=function(){return this.l},Xy.gl=function(){this.s()},Xy.ye=function(){this.i&&(te(this.i),this.i=null);var t=this.U();t&&(this.i=Jt(t,"change",this.gl,this)),this.s()},Xy.Sa=function(t){this.set(this.c,t)},Xy.Vf=function(t){this.l=(this.g=t)?Wa(t):void 0,this.s()},Xy.kc=function(t){this.a=t,this.s()},Xy.Vc=function(t){$t(this,he(this.c),this.ye,this),this.c=t,Jt(this,he(this.c),this.ye,this),this.ye()};var Ym=document.implementation.createDocument("","",null),Km=il();h(gl,ul),Xy=gl.prototype,Xy.T=function(){return"json"},Xy.Ub=function(t,e){return this.Sc(ml(t),dl(this,t,e))},Xy.Qa=function(t,e){return this.kg(ml(t),dl(this,t,e))},Xy.Tc=function(t,e){return this.og(ml(t),dl(this,t,e))},Xy.kb=function(t){return this.rg(ml(t))},Xy.yd=function(t,e){return JSON.stringify(this.ad(t,e))},Xy.Xb=function(t,e){return JSON.stringify(this.ce(t,e))},Xy.bd=function(t,e){return JSON.stringify(this.ee(t,e))},h(El,Qo),Xy=El.prototype,Xy.Tj=function(t){this.B?n(this.B,t):this.B=t.slice(),this.s()},Xy.clone=function(){var t=new El(null);return t.ca(this.ka,this.B.slice()),t},Xy.Gb=function(t,e,o,i){return i<L(this.D(),t,e)?i:(this.u!=this.f&&(this.A=Math.sqrt(ri(this.B,0,this.B.length,this.a,0)),this.u=this.f),ai(this.B,0,this.B.length,this.a,this.A,!1,t,e,o,i))},Xy.gk=function(t,e){return Pi(this.B,0,this.B.length,this.a,t,e)},Xy.Im=function(t,e){return"XYM"!=this.ka&&"XYZM"!=this.ka?null:_l(this.B,0,this.B.length,this.a,t,void 0!==e&&e)},Xy.X=function(){return ui(this.B,0,this.B.length,this.a)},Xy.hh=function(t,e){return vl(this.B,0,this.B.length,this.a,t,e)},Xy.Jm=function(){var t,e=this.B,o=this.a,i=e[0],n=e[1],r=0;for(t=0+o;t<this.B.length;t+=o)var s=e[t],a=e[t+1],r=r+Math.sqrt((s-i)*(s-i)+(a-n)*(a-n)),i=s,n=a;return r},Xy.kd=function(t){var e=[];return e.length=fi(this.B,0,this.B.length,this.a,t,e,0),t=new El(null),t.ca("XY",e),t},Xy.T=function(){return"LineString"},Xy.Xa=function(t){return wi(this.B,0,this.B.length,this.a,t)},Xy.pa=function(t,e){t?(ei(this,e,t,1),this.B||(this.B=[]),this.B.length=hi(this.B,0,t,this.a),this.s()):this.ca("XY",null)},Xy.ca=function(t,e){ti(this,t,e),this.s()},h(Pl,Qo),Xy=Pl.prototype,Xy.Uj=function(t){this.B?n(this.B,t.ha().slice()):this.B=t.ha().slice(),this.c.push(this.B.length),this.s()},Xy.clone=function(){var t=new Pl(null);return t.ca(this.ka,this.B.slice(),this.c.slice()),t},Xy.Gb=function(t,e,o,i){return i<L(this.D(),t,e)?i:(this.l!=this.f&&(this.u=Math.sqrt(si(this.B,0,this.c,this.a,0)),this.l=this.f),li(this.B,0,this.c,this.a,this.u,!1,t,e,o,i))},Xy.Lm=function(t,e,o){return"XYM"!=this.ka&&"XYZM"!=this.ka||!this.B.length?null:bl(this.B,this.c,this.a,t,void 0!==e&&e,void 0!==o&&o)},Xy.X=function(){return di(this.B,0,this.c,this.a)},Xy.Rb=function(){return this.c},Xy.Dk=function(t){if(0>t||this.c.length<=t)return null;var e=new El(null);return e.ca(this.ka,this.B.slice(t?this.c[t-1]:0,this.c[t])),e},Xy.hd=function(){var t,e,o=this.B,i=this.c,n=this.ka,r=[],s=0;for(t=0,e=i.length;t<e;++t){var a=i[t],l=new El(null);l.ca(n,o.slice(s,a)),r.push(l),s=a}return r},Xy.kd=function(t){var e,o,i=[],n=[],r=this.B,s=this.c,a=this.a,l=0,p=0;for(e=0,o=s.length;e<o;++e){var h=s[e],p=fi(r,l,h,a,t,i,p);n.push(p),l=h}return i.length=p,t=new Pl(null),t.ca("XY",i,n),t},Xy.T=function(){return"MultiLineString"},Xy.Xa=function(t){t:{var e,o,i=this.B,n=this.c,r=this.a,s=0;for(e=0,o=n.length;e<o;++e){if(wi(i,s,n[e],r,t)){t=!0;break t}s=n[e]}t=!1}return t},Xy.pa=function(t,e){if(t){ei(this,e,t,2),this.B||(this.B=[]);var o=ci(this.B,0,t,this.a,this.c);this.B.length=o.length?o[o.length-1]:0,this.s()}else this.ca("XY",null,this.c)},Xy.ca=function(t,e,o){ti(this,t,e),this.c=o,this.s()},h(Cl,Qo),Xy=Cl.prototype,Xy.Wj=function(t){this.B?n(this.B,t.ha()):this.B=t.ha().slice(),this.s()},Xy.clone=function(){var t=new Cl(null);return t.ca(this.ka,this.B.slice()),t},Xy.Gb=function(t,e,o,i){if(i<L(this.D(),t,e))return i;var n,r,s,a=this.B,l=this.a;for(n=0,r=a.length;n<r;n+=l)if((s=S(t,e,a[n],a[n+1]))<i){for(i=s,s=0;s<l;++s)o[s]=a[n+s];o.length=l}return i},Xy.X=function(){return ui(this.B,0,this.B.length,this.a)},Xy.Ok=function(t){var e=this.B?this.B.length/this.a:0;return 0>t||e<=t?null:(e=new vi(null),e.ca(this.ka,this.B.slice(t*this.a,(t+1)*this.a)),e)},Xy.Ie=function(){var t,e,o=this.B,i=this.ka,n=this.a,r=[];for(t=0,e=o.length;t<e;t+=n){var s=new vi(null);s.ca(i,o.slice(t,t+n)),r.push(s)}return r},Xy.T=function(){return"MultiPoint"},Xy.Xa=function(t){var e,o,i,n,r=this.B,s=this.a;for(e=0,o=r.length;e<o;e+=s)if(i=r[e],n=r[e+1],N(t,i,n))return!0;return!1},Xy.pa=function(t,e){t?(ei(this,e,t,1),this.B||(this.B=[]),this.B.length=hi(this.B,0,t,this.a),this.s()):this.ca("XY",null)},Xy.ca=function(t,e){ti(this,t,e),this.s()},h(Ml,Qo),Xy=Ml.prototype,Xy.Xj=function(t){if(this.B){var e=this.B.length;n(this.B,t.ha()),t=t.Rb().slice();var o,i;for(o=0,i=t.length;o<i;++o)t[o]+=e}else this.B=t.ha().slice(),t=t.Rb().slice(),this.c.push();this.c.push(t),this.s()},Xy.clone=function(){for(var t=new Ml(null),e=this.c.length,o=Array(e),i=0;i<e;++i)o[i]=this.c[i].slice();return Rl(t,this.ka,this.B.slice(),o),t},Xy.Gb=function(t,e,o,i){if(i<L(this.D(),t,e))return i;if(this.C!=this.f){var n,r,s=this.c,a=0,l=0;for(n=0,r=s.length;n<r;++n)var p=s[n],l=si(this.B,a,p,this.a,l),a=p[p.length-1];this.G=Math.sqrt(l),this.C=this.f}s=Il(this),a=this.c,l=this.a,n=this.G,r=0;var h,c,p=[NaN,NaN];for(h=0,c=a.length;h<c;++h){var u=a[h];i=li(s,r,u,l,n,!0,t,e,o,i,p),r=u[u.length-1]}return i},Xy.Oc=function(t,e){var o;t:{o=Il(this);var i=this.c,n=0;if(i.length){var r,s;for(r=0,s=i.length;r<s;++r){var a=i[r];if(Ei(o,n,a,this.a,t,e)){o=!0;break t}n=a[a.length-1]}}o=!1}return o},Xy.Mm=function(){var t,e,o=Il(this),i=this.c,n=0,r=0;for(t=0,e=i.length;t<e;++t)var s=i[t],r=r+ii(o,n,s,this.a),n=s[s.length-1];return r},Xy.X=function(t){var e;void 0!==t?(e=Il(this).slice(),Ii(e,this.c,this.a,t)):e=this.B,t=e,e=this.c;var o,i,n=this.a,r=0,s=[],a=0;for(o=0,i=e.length;o<i;++o){var l=e[o];s[a++]=di(t,r,l,n,s[a]),r=l[l.length-1]}return s.length=a,s},Xy.zk=function(){var t=new Cl(null);return t.ca("XY",xl(this).slice()),t},Xy.kd=function(t){var e=[],o=[],i=this.B,n=this.c,r=this.a;t=Math.sqrt(t);var s,a,l=0,p=0;for(s=0,a=n.length;s<a;++s){var h=n[s],c=[],p=yi(i,l,h,r,t,e,p,c);o.push(c),l=h[h.length-1]}return e.length=p,i=new Ml(null),Rl(i,"XY",e,o),i},Xy.Pk=function(t){if(0>t||this.c.length<=t)return null;var e;t?(e=this.c[t-1],e=e[e.length-1]):e=0,t=this.c[t].slice();var o=t[t.length-1];if(e){var i,n;for(i=0,n=t.length;i<n;++i)t[i]-=e}return i=new Ri(null),i.ca(this.ka,this.B.slice(e,o),t),i},Xy.Od=function(){var t,e,o,i,n=this.ka,r=this.B,s=this.c,a=[],l=0;for(t=0,e=s.length;t<e;++t){var p=s[t].slice(),h=p[p.length-1];if(l)for(o=0,i=p.length;o<i;++o)p[o]-=l;o=new Ri(null),o.ca(n,r.slice(l,h),p),a.push(o),l=h}return a},Xy.T=function(){return"MultiPolygon"},Xy.Xa=function(t){t:{var e,o,i=Il(this),n=this.c,r=this.a,s=0;for(e=0,o=n.length;e<o;++e){var a=n[e];if(Ai(i,s,a,r,t)){t=!0;break t}s=a[a.length-1]}t=!1}return t},Xy.pa=function(t,e){if(t){ei(this,e,t,3),this.B||(this.B=[]);var o,i,n=this.B,r=this.a,s=this.c,a=0,s=s||[],l=0;for(o=0,i=t.length;o<i;++o)a=ci(n,a,t[o],r,s[l]),s[l++]=a,a=a[a.length-1];s.length=l,s.length?(n=s[s.length-1],this.B.length=n.length?n[n.length-1]:0):this.B.length=0,this.s()}else Rl(this,"XY",null,this.c)},h(Ll,gl);var Xm={Point:function(t){return void 0!==t.m&&void 0!==t.z?new vi([t.x,t.y,t.z,t.m],"XYZM"):void 0!==t.z?new vi([t.x,t.y,t.z],"XYZ"):void 0!==t.m?new vi([t.x,t.y,t.m],"XYM"):new vi([t.x,t.y])},LineString:function(t){return new El(t.paths[0],Ol(t))},Polygon:function(t){return new Ri(t.rings,Ol(t))},MultiPoint:function(t){return new Cl(t.points,Ol(t))},MultiLineString:function(t){return new Pl(t.paths,Ol(t))},MultiPolygon:function(t){return new Ml(t.rings,Ol(t))}},Zm={Point:function(t){var e,o=t.X();return t=t.ka,"XYZ"===t?e={x:o[0],y:o[1],z:o[2]}:"XYM"===t?e={x:o[0],y:o[1],m:o[2]}:"XYZM"===t?e={x:o[0],y:o[1],z:o[2],m:o[3]}:"XY"===t?e={x:o[0],y:o[1]}:f(!1,34),e},LineString:function(t){var e=Nl(t);return{hasZ:e.hasZ,hasM:e.hasM,paths:[t.X()]}},Polygon:function(t){var e=Nl(t);return{hasZ:e.hasZ,hasM:e.hasM,rings:t.X(!1)}},MultiPoint:function(t){var e=Nl(t);return{hasZ:e.hasZ,hasM:e.hasM,points:t.X()}},MultiLineString:function(t){var e=Nl(t);return{hasZ:e.hasZ,hasM:e.hasM,paths:t.X()}},MultiPolygon:function(t){var e=Nl(t);t=t.X(!1);for(var o=[],i=0;i<t.length;i++)for(var n=t[i].length-1;0<=n;n--)o.push(t[i][n]);return{hasZ:e.hasZ,hasM:e.hasM,rings:o}}};Xy=Ll.prototype,Xy.Sc=function(t,e){var o=Gl(t.geometry,e),i=new Va;return this.b&&i.Vc(this.b),i.Sa(o),e&&e.Rf&&t.attributes[e.Rf]&&i.kc(t.attributes[e.Rf]),t.attributes&&i.H(t.attributes),i},Xy.kg=function(t,e){var o=e||{};if(t.features){var i,n,r=[],s=t.features;for(o.Rf=t.objectIdFieldName,i=0,n=s.length;i<n;++i)r.push(this.Sc(s[i],o));return r}return[this.Sc(t,o)]},Xy.og=function(t,e){return Gl(t,e)},Xy.rg=function(t){return t.spatialReference&&t.spatialReference.wkid?Et("EPSG:"+t.spatialReference.wkid):null},Xy.ee=function(t,e){return kl(t,fl(this,e))},Xy.ad=function(t,e){e=fl(this,e);var o={},i=t.U();return i&&(o.geometry=kl(i,e)),i=t.N(),delete i[t.c],o.attributes=lt(i)?{}:i,e&&e.featureProjection&&(o.spatialReference={wkid:Et(e.featureProjection).nb.split(":").pop()}),o},Xy.ce=function(t,e){e=fl(this,e);var o,i,n=[];for(o=0,i=t.length;o<i;++o)n.push(this.ad(t[o],e));return{features:n}},h(jl,Dl),h(Fl,jl),h(Ul,Dl),h(Bl,Dl),h(Vl,Bl),h(Wl,Vl),h(zl,Vl),h(Hl,Vl),h(ql,Dl),h(Yl,ql),h(Kl,Bl),h(Xl,Bl),h(Zl,Bl),h(Jl,Vl),h(Ql,Vl),h($l,Dl),h(tp,Vl),h(ep,jl),h(op,ql),h(rp,Xo),Xy=rp.prototype,Xy.clone=function(){var t=new rp(null);return t.Ji(this.a),t},Xy.Gb=function(t,e,o,i){if(i<L(this.D(),t,e))return i;var n,r,s=this.a;for(n=0,r=s.length;n<r;++n)i=s[n].Gb(t,e,o,i);return i},Xy.Oc=function(t,e){var o,i,n=this.a;for(o=0,i=n.length;o<i;++o)if(n[o].Oc(t,e))return!0;return!1},Xy.ne=function(t){j(1/0,1/0,-1/0,-1/0,t);for(var e=this.a,o=0,i=e.length;o<i;++o)V(t,e[o].D());return t},Xy.If=function(){return sp(this.a)},Xy.Qd=function(t){if(this.j!=this.f&&(st(this.i),this.g=0,this.j=this.f),0>t||this.g&&t<this.g)return this;var e=t.toString();if(this.i.hasOwnProperty(e))return this.i[e];var o,i,n=[],r=this.a,s=!1;for(o=0,i=r.length;o<i;++o){var a=r[o],l=a.Qd(t);n.push(l),l!==a&&(s=!0)}return s?(t=new rp(null),ap(t),t.a=n,lp(t),t.s(),this.i[e]=t):(this.g=t,this)},Xy.T=function(){return"GeometryCollection"},Xy.Xa=function(t){var e,o,i=this.a;for(e=0,o=i.length;e<o;++e)if(i[e].Xa(t))return!0;return!1},Xy.rotate=function(t,e){for(var o=this.a,i=0,n=o.length;i<n;++i)o[i].rotate(t,e);this.s()},Xy.scale=function(t,e,o){o||(o=X(this.D()));for(var i=this.a,n=0,r=i.length;n<r;++n)i[n].scale(t,e,o);this.s()},Xy.Ji=function(t){t=sp(t),ap(this),this.a=t,lp(this),this.s()},Xy.Dc=function(t){var e,o,i=this.a;for(e=0,o=i.length;e<o;++e)i[e].Dc(t);this.s()},Xy.translate=function(t,e){var o,i,n=this.a;for(o=0,i=n.length;o<i;++o)n[o].translate(t,e);this.s()},Xy.ra=function(){ap(this),Xo.prototype.ra.call(this)},h(pp,gl);var Jm={Point:function(t){return new vi(t.coordinates)},LineString:function(t){return new El(t.coordinates)},Polygon:function(t){return new Ri(t.coordinates)},MultiPoint:function(t){return new Cl(t.coordinates)},MultiLineString:function(t){return new Pl(t.coordinates)},MultiPolygon:function(t){return new Ml(t.coordinates)},GeometryCollection:function(t,e){return new rp(t.geometries.map(function(t){return hp(t,e)}))}},Qm={Point:function(t){return{type:"Point",coordinates:t.X()}},LineString:function(t){return{type:"LineString",coordinates:t.X()}},Polygon:function(t,e){var o;return e&&(o=e.rightHanded),{type:"Polygon",coordinates:t.X(o)}},MultiPoint:function(t){return{type:"MultiPoint",coordinates:t.X()}},MultiLineString:function(t){return{type:"MultiLineString",coordinates:t.X()}},MultiPolygon:function(t,e){var o;return e&&(o=e.rightHanded),{type:"MultiPolygon",coordinates:t.X(o)}},GeometryCollection:function(t,e){return{type:"GeometryCollection",geometries:t.a.map(function(t){var o=og({},e);return delete o.featureProjection,cp(t,o)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};Xy=pp.prototype,Xy.Sc=function(t,e){var o;o="Feature"===t.type?t:{type:"Feature",geometry:t};var i=hp(o.geometry,e),n=new Va;return this.b&&n.Vc(this.b),n.Sa(i),void 0!==o.id&&n.kc(o.id),o.properties&&n.H(o.properties),n},Xy.kg=function(t,e){var o;if("FeatureCollection"===t.type){o=[];var i,n,r=t.features;for(i=0,n=r.length;i<n;++i)o.push(this.Sc(r[i],e))}else o=[this.Sc(t,e)];return o},Xy.og=function(t,e){return hp(t,e)},Xy.rg=function(t){t=t.crs;var e;return t?"name"==t.type?e=Et(t.properties.name):"EPSG"==t.type?e=Et("EPSG:"+t.properties.code):f(!1,36):e=this.defaultDataProjection,e},Xy.ad=function(t,e){e=fl(this,e);var o={type:"Feature"},i=t.a;return void 0!==i&&(o.id=i),(i=t.U())?o.geometry=cp(i,e):o.geometry=null,i=t.N(),delete i[t.c],lt(i)?o.properties=null:o.properties=i,o},Xy.ce=function(t,e){e=fl(this,e);var o,i,n=[];for(o=0,i=t.length;o<i;++o)n.push(this.ad(t[o],e));return{type:"FeatureCollection",features:n}},Xy.ee=function(t,e){return cp(t,fl(this,e))},h(up,ul),Xy=up.prototype,Xy.T=function(){return"xml"},Xy.Ub=function(t,e){if(Ya(t))return dp(this,t,e);if(Ka(t))return this.jg(t,e);if("string"==typeof t){return dp(this,Xa(t),e)}return null},Xy.jg=function(){return null},Xy.Qa=function(t,e){if(Ya(t))return fp(this,t,e);if(Ka(t))return this.yc(t,e);if("string"==typeof t){return fp(this,Xa(t),e)}return[]},Xy.Tc=function(t,e){return Ya(t)?null:Ka(t)?this.vi(t,e):("string"==typeof t&&Xa(t),null)},Xy.vi=function(){return null},Xy.kb=function(t){return Ya(t)?this.qg(t):Ka(t)?this.Ze(t):"string"==typeof t?(t=Xa(t),this.qg(t)):null},Xy.qg=function(){return this.defaultDataProjection},Xy.Ze=function(){return this.defaultDataProjection},Xy.yd=function(t,e){return this.f.serializeToString(this.Fg(t,e))},Xy.Fg=function(){return null},Xy.Xb=function(t,e){var o=this.Yb(t,e);return this.f.serializeToString(o)},Xy.Yb=function(){return null},Xy.bd=function(t,e){var o=this.de(t,e);return this.f.serializeToString(o)},Xy.de=function(){return null},h(yp,up);var $m=/^[\s\xa0]*$/;Xy=yp.prototype,Xy.Xd=function(t,e){var o=t.localName,i=null;if("FeatureCollection"==o)i="http://www.opengis.net/wfs"===t.namespaceURI?al([],this.b,t,e,this):al(null,this.b,t,e,this);else if("featureMembers"==o||"featureMember"==o){var n,r,s=e[0],a=s.featureType,l=s.featureNS;if(!a&&t.childNodes){for(a=[],l={},n=0,r=t.childNodes.length;n<r;++n){var p=t.childNodes[n];if(1===p.nodeType){var h=p.nodeName.split(":").pop();if(-1===a.indexOf(h)){var c,u="",d=0,p=p.namespaceURI;for(c in l){if(l[c]===p){u=c;break}++d}u||(u="p"+d,l[u]=p),a.push(u+":"+h)}}}"featureMember"!=o&&(s.featureType=a,s.featureNS=l)}"string"==typeof l&&(n=l,l={},l.p0=n);var f,s={},a=Array.isArray(a)?a:[a];for(f in l){for(h={},n=0,r=a.length;n<r;++n)(-1===a[n].indexOf(":")?"p0":a[n].split(":")[0])===f&&(h[a[n].split(":").pop()]="featureMembers"==o?Ja(this.ig,this):Qa(this.ig,this));s[l[f]]=h}i="featureMember"==o?al(void 0,s,t,e):al([],s,t,e)}return null===i&&(i=[]),i},Xy.We=function(t,e){var o=e[0];o.srsName=t.firstElementChild.getAttribute("srsName");var i=al(null,this.Jg,t,e,this);if(i)return yl(i,!1,o)},Xy.ig=function(t,e){var o,i;(i=t.getAttribute("fid"))||(i=t.getAttributeNS("http://www.opengis.net/gml","id")||"");var n,r={};for(o=t.firstElementChild;o;o=o.nextElementSibling){var s=o.localName;if(0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)){var a=Ha(o,!1);$m.test(a)&&(a=void 0),r[s]=a}else"boundedBy"!==s&&(n=s),r[s]=this.We(o,e)}return o=new Va(r),n&&o.Vc(n),i&&o.kc(i),o},Xy.Ai=function(t,e){var o=this.Ve(t,e);if(o){var i=new vi(null);return i.ca("XYZ",o),i}},Xy.yi=function(t,e){var o=al([],this.sj,t,e,this);if(o)return new Cl(o)},Xy.xi=function(t,e){var o=al([],this.rj,t,e,this);if(o){var i=new Pl(null);return Al(i,o),i}},Xy.zi=function(t,e){var o=al([],this.tj,t,e,this);if(o){var i=new Ml(null);return Tl(i,o),i}},Xy.ri=function(t,e){sl(this.wj,t,e,this)},Xy.yh=function(t,e){sl(this.pj,t,e,this)},Xy.si=function(t,e){sl(this.xj,t,e,this)},Xy.Xe=function(t,e){var o=this.Ve(t,e);if(o){var i=new El(null);return i.ca("XYZ",o),i}},Xy.Lo=function(t,e){var o=al(null,this.fe,t,e,this);if(o)return o},Xy.wi=function(t,e){var o=this.Ve(t,e);if(o){var i=new gi(null);return mi(i,"XYZ",o),i}},Xy.Ye=function(t,e){var o=al([null],this.qf,t,e,this);if(o&&o[0]){var i,r,s=new Ri(null),a=o[0],l=[a.length];for(i=1,r=o.length;i<r;++i)n(a,o[i]),l.push(a.length);return s.ca("XYZ",a,l),s}},Xy.Ve=function(t,e){return al(null,this.fe,t,e,this)},Xy.sj={"http://www.opengis.net/gml":{pointMember:Ja(yp.prototype.ri),pointMembers:Ja(yp.prototype.ri)}},Xy.rj={"http://www.opengis.net/gml":{lineStringMember:Ja(yp.prototype.yh),lineStringMembers:Ja(yp.prototype.yh)}},Xy.tj={"http://www.opengis.net/gml":{polygonMember:Ja(yp.prototype.si),polygonMembers:Ja(yp.prototype.si)}},Xy.wj={"http://www.opengis.net/gml":{Point:Ja(yp.prototype.Ve)}},Xy.pj={"http://www.opengis.net/gml":{LineString:Ja(yp.prototype.Xe)}},Xy.xj={"http://www.opengis.net/gml":{Polygon:Ja(yp.prototype.Ye)}},Xy.ge={"http://www.opengis.net/gml":{LinearRing:Qa(yp.prototype.Lo)}},Xy.vi=function(t,e){var o=this.We(t,[dl(this,t,e||{})]);return o||null},Xy.yc=function(t,e){var o={featureType:this.featureType,featureNS:this.featureNS};return e&&og(o,dl(this,t,e)),this.Xd(t,[o])||[]},Xy.Ze=function(t){return Et(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},h(xp,yp),Xy=xp.prototype,Xy.Po=function(t,e){var o=al([],this.qj,t,e,this);if(o){var i=new Pl(null);return Al(i,o),i}},Xy.Qo=function(t,e){var o=al([],this.uj,t,e,this);if(o){var i=new Ml(null);return Tl(i,o),i}},Xy.Zg=function(t,e){sl(this.mj,t,e,this)},Xy.Wi=function(t,e){sl(this.Bj,t,e,this)},Xy.To=function(t,e){return al([null],this.vj,t,e,this)},Xy.Wo=function(t,e){return al([null],this.Aj,t,e,this)},Xy.Uo=function(t,e){return al([null],this.qf,t,e,this)},Xy.Oo=function(t,e){return al([null],this.fe,t,e,this)},Xy.Jl=function(t,e){var o=al(void 0,this.ge,t,e,this);o&&e[e.length-1].push(o)},Xy.ck=function(t,e){var o=al(void 0,this.ge,t,e,this);o&&(e[e.length-1][0]=o)},Xy.Bi=function(t,e){var o=al([null],this.Cj,t,e,this);if(o&&o[0]){var i,r,s=new Ri(null),a=o[0],l=[a.length];for(i=1,r=o.length;i<r;++i)n(a,o[i]),l.push(a.length);return s.ca("XYZ",a,l),s}},Xy.ti=function(t,e){var o=al([null],this.nj,t,e,this);if(o){var i=new El(null);return i.ca("XYZ",o),i}},Xy.Ko=function(t,e){var o=al([null],this.oj,t,e,this);return j(o[1][0],o[1][1],o[2][0],o[2][1])},Xy.Mo=function(t,e){for(var o,i=Ha(t,!1),n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,r=[];o=n.exec(i);)r.push(parseFloat(o[1])),i=i.substr(o[0].length);if(""===i){if(i=e[0].srsName,n="enu",i&&(n=Et(i).b),"neu"===n)for(i=0,n=r.length;i<n;i+=3)o=r[i],r[i]=r[i+1],r[i+1]=o;if(i=r.length,2==i&&r.push(0),i)return r}},Xy.ng=function(t,e){var o=Ha(t,!1).replace(/^\s*|\s*$/g,""),i=e[0].srsName,n=t.parentNode.getAttribute("srsDimension"),r="enu";i&&(r=Et(i).b),o=o.split(/\s+/),i=2,t.getAttribute("srsDimension")?i=Sp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?i=Sp(t.getAttribute("dimension")):n&&(i=Sp(n));for(var s,a,l=[],p=0,h=o.length;p<h;p+=i)n=parseFloat(o[p]),s=parseFloat(o[p+1]),a=3===i?parseFloat(o[p+2]):0,"en"===r.substr(0,2)?l.push(n,s,a):l.push(s,n,a);return l},Xy.fe={"http://www.opengis.net/gml":{pos:Qa(xp.prototype.Mo),posList:Qa(xp.prototype.ng)}},Xy.qf={"http://www.opengis.net/gml":{interior:xp.prototype.Jl,exterior:xp.prototype.ck}},Xy.Jg={"http://www.opengis.net/gml":{Point:Qa(yp.prototype.Ai),MultiPoint:Qa(yp.prototype.yi),LineString:Qa(yp.prototype.Xe),MultiLineString:Qa(yp.prototype.xi),LinearRing:Qa(yp.prototype.wi),Polygon:Qa(yp.prototype.Ye),MultiPolygon:Qa(yp.prototype.zi),Surface:Qa(xp.prototype.Bi),MultiSurface:Qa(xp.prototype.Qo),Curve:Qa(xp.prototype.ti),MultiCurve:Qa(xp.prototype.Po),Envelope:Qa(xp.prototype.Ko)}},Xy.qj={"http://www.opengis.net/gml":{curveMember:Ja(xp.prototype.Zg),curveMembers:Ja(xp.prototype.Zg)}},Xy.uj={"http://www.opengis.net/gml":{surfaceMember:Ja(xp.prototype.Wi),surfaceMembers:Ja(xp.prototype.Wi)}},Xy.mj={"http://www.opengis.net/gml":{LineString:Ja(yp.prototype.Xe),Curve:Ja(xp.prototype.ti)}},Xy.Bj={"http://www.opengis.net/gml":{Polygon:Ja(yp.prototype.Ye),Surface:Ja(xp.prototype.Bi)}},Xy.Cj={"http://www.opengis.net/gml":{patches:Qa(xp.prototype.To)}},Xy.nj={"http://www.opengis.net/gml":{segments:Qa(xp.prototype.Wo)}},Xy.oj={"http://www.opengis.net/gml":{lowerCorner:Ja(xp.prototype.ng),upperCorner:Ja(xp.prototype.ng)}},Xy.vj={"http://www.opengis.net/gml":{PolygonPatch:Qa(xp.prototype.Uo)}},Xy.Aj={"http://www.opengis.net/gml":{LineStringSegment:Qa(xp.prototype.Oo)}},Xy.hj=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),i=za(t.namespaceURI,"pos"),t.appendChild(i),o=o[o.length-1].srsName,t="enu",o&&(t=Et(o).b),e=e.X(),Mp(i,"en"===t.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0])};var tv={"http://www.opengis.net/gml":{lowerCorner:el(Mp),upperCorner:el(Mp)}};Xy=xp.prototype,Xy.Jp=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),pl({node:t},tv,Km,[e[0]+" "+e[1],e[2]+" "+e[3]],o,["lowerCorner","upperCorner"],this)},Xy.ej=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),i=za(t.namespaceURI,"posList"),t.appendChild(i),Ip(i,e,o)},Xy.zj=function(t,e){var o=e[e.length-1],i=o.node,n=o.exteriorWritten;return void 0===n&&(o.exteriorWritten=!0),za(i.namespaceURI,void 0!==n?"interior":"exterior")},Xy.nf=function(t,e,o){var i=o[o.length-1].srsName;"PolygonPatch"!==t.nodeName&&i&&t.setAttribute("srsName",i),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName?(e=e.jd(),pl({node:t,srsName:i},nv,this.zj,e,o,void 0,this)):"Surface"===t.nodeName&&(i=za(t.namespaceURI,"patches"),t.appendChild(i),t=za(i.namespaceURI,"PolygonPatch"),i.appendChild(t),this.nf(t,e,o))},Xy.mf=function(t,e,o){var i=o[o.length-1].srsName;"LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName?(i=za(t.namespaceURI,"posList"),t.appendChild(i),Ip(i,e,o)):"Curve"===t.nodeName&&(i=za(t.namespaceURI,"segments"),t.appendChild(i),t=za(i.namespaceURI,"LineStringSegment"),i.appendChild(t),this.mf(t,e,o))},Xy.gj=function(t,e,o){var i=o[o.length-1],n=i.srsName,i=i.surface;n&&t.setAttribute("srsName",n),e=e.Od(),pl({node:t,srsName:n,surface:i},ev,this.c,e,o,void 0,this)},Xy.Kp=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),e=e.Ie(),pl({node:t,srsName:i},ov,il("pointMember"),e,o,void 0,this)},Xy.fj=function(t,e,o){var i=o[o.length-1],n=i.srsName,i=i.curve;n&&t.setAttribute("srsName",n),e=e.hd(),pl({node:t,srsName:n,curve:i},iv,this.c,e,o,void 0,this)},Xy.ij=function(t,e,o){var i=za(t.namespaceURI,"LinearRing");t.appendChild(i),this.ej(i,e,o)},Xy.jj=function(t,e,o){var i=this.a(e,o);i&&(t.appendChild(i),this.nf(i,e,o))},Xy.Lp=function(t,e,o){var i=za(t.namespaceURI,"Point");t.appendChild(i),this.hj(i,e,o)},Xy.dj=function(t,e,o){var i=this.a(e,o);i&&(t.appendChild(i),this.mf(i,e,o))},Xy.zd=function(t,e,o){var i=o[o.length-1],n=og({},i);n.node=t;var r;r=Array.isArray(e)?i.dataProjection?xt(e,i.featureProjection,i.dataProjection):e:yl(e,!0,i),pl(n,rv,this.a,[r],o,void 0,this)},Xy.cj=function(t,e,o){var i=e.a;i&&t.setAttribute("fid",i);var i=o[o.length-1],n=i.featureNS,r=e.c;i.Uc||(i.Uc={},i.Uc[n]={});var s=e.N();e=[];var a,l=[];for(a in s){var p=s[a];null!==p&&(e.push(a),l.push(p),a==r||p instanceof Xo?a in i.Uc[n]||(i.Uc[n][a]=el(this.zd,this)):a in i.Uc[n]||(i.Uc[n][a]=el(Mp)))}a=og({},i),a.node=t,pl(a,i.Uc,il(void 0,n),l,o,e)};var ev={"http://www.opengis.net/gml":{surfaceMember:el(xp.prototype.jj),polygonMember:el(xp.prototype.jj)}},ov={"http://www.opengis.net/gml":{pointMember:el(xp.prototype.Lp)}},iv={"http://www.opengis.net/gml":{lineStringMember:el(xp.prototype.dj),curveMember:el(xp.prototype.dj)}},nv={"http://www.opengis.net/gml":{exterior:el(xp.prototype.ij),interior:el(xp.prototype.ij)}},rv={"http://www.opengis.net/gml":{Curve:el(xp.prototype.mf),MultiCurve:el(xp.prototype.fj),Point:el(xp.prototype.hj),MultiPoint:el(xp.prototype.Kp),LineString:el(xp.prototype.mf),MultiLineString:el(xp.prototype.fj),LinearRing:el(xp.prototype.ej),Polygon:el(xp.prototype.nf),MultiPolygon:el(xp.prototype.gj),Surface:el(xp.prototype.nf),MultiSurface:el(xp.prototype.gj),Envelope:el(xp.prototype.Jp)}},sv={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};xp.prototype.c=function(t,e){return za("http://www.opengis.net/gml",sv[e[e.length-1].node.nodeName])},xp.prototype.a=function(t,e){var o,i=e[e.length-1],n=i.multiSurface,r=i.surface,s=i.curve,i=i.multiCurve;return Array.isArray(t)?o="Envelope":(o=t.T(),"MultiPolygon"===o&&!0===n?o="MultiSurface":"Polygon"===o&&!0===r?o="Surface":"LineString"===o&&!0===s?o="Curve":"MultiLineString"===o&&!0===i&&(o="MultiCurve")),za("http://www.opengis.net/gml",o)},xp.prototype.de=function(t,e){e=fl(this,e);var o=za("http://www.opengis.net/gml","geom"),i={node:o,srsName:this.srsName,curve:this.i,surface:this.o,multiSurface:this.j,multiCurve:this.l};return e&&og(i,e),this.zd(o,t,[i]),o},xp.prototype.Yb=function(t,e){e=fl(this,e);var o=za("http://www.opengis.net/gml","featureMembers");o.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var i={srsName:this.srsName,curve:this.i,surface:this.o,multiSurface:this.j,multiCurve:this.l,featureNS:this.featureNS,featureType:this.featureType};e&&og(i,e);var i=[i],n=i[i.length-1],r=n.featureType,s=n.featureNS,a={};return a[s]={},a[s][r]=el(this.cj,this),n=og({},n),n.node=o,pl(n,a,il(r,s),t,i),o},h(Rp,yp),Xy=Rp.prototype,Xy.ui=function(t,e){var o=Ha(t,!1).replace(/^\s*|\s*$/g,""),i=e[0].srsName,n=t.parentNode.getAttribute("srsDimension"),r="enu";i&&(i=Et(i))&&(r=i.b),o=o.split(/[\s,]+/),i=2,t.getAttribute("srsDimension")?i=Sp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?i=Sp(t.getAttribute("dimension")):n&&(i=Sp(n));for(var s,a,l=[],p=0,h=o.length;p<h;p+=i)n=parseFloat(o[p]),s=parseFloat(o[p+1]),a=3===i?parseFloat(o[p+2]):0,"en"===r.substr(0,2)?l.push(n,s,a):l.push(s,n,a);return l},Xy.Io=function(t,e){var o=al([null],this.lj,t,e,this);return j(o[1][0],o[1][1],o[1][3],o[1][4])},Xy.Hl=function(t,e){var o=al(void 0,this.ge,t,e,this);o&&e[e.length-1].push(o)},Xy.ro=function(t,e){var o=al(void 0,this.ge,t,e,this);o&&(e[e.length-1][0]=o)},Xy.fe={"http://www.opengis.net/gml":{coordinates:Qa(Rp.prototype.ui)}},Xy.qf={"http://www.opengis.net/gml":{innerBoundaryIs:Rp.prototype.Hl,outerBoundaryIs:Rp.prototype.ro}},Xy.lj={"http://www.opengis.net/gml":{coordinates:Ja(Rp.prototype.ui)}},Xy.Jg={"http://www.opengis.net/gml":{Point:Qa(yp.prototype.Ai),MultiPoint:Qa(yp.prototype.yi),LineString:Qa(yp.prototype.Xe),MultiLineString:Qa(yp.prototype.xi),LinearRing:Qa(yp.prototype.wi),Polygon:Qa(yp.prototype.Ye),MultiPolygon:Qa(yp.prototype.zi),Box:Qa(Rp.prototype.Io)}},h(Tp,up);var av=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],lv={rte:kp,trk:Dp,wpt:jp},pv=rl(av,{rte:Ja(kp),trk:Ja(Dp),wpt:Ja(jp)}),hv=rl(av,{text:tl(Pp,"linkText"),type:tl(Pp,"linkType")}),cv=rl(av,{name:tl(Pp),cmt:tl(Pp),desc:tl(Pp),src:tl(Pp),link:Op,number:tl(Ep),extensions:Np,type:tl(Pp),rtept:function(t,e){var o=al({},uv,t,e);if(o){var i=e[e.length-1];Lp(i.flatCoordinates,i.layoutOptions,t,o)}}}),uv=rl(av,{ele:tl(_p),time:tl(vp)}),dv=rl(av,{name:tl(Pp),cmt:tl(Pp),desc:tl(Pp),src:tl(Pp),link:Op,number:tl(Ep),type:tl(Pp),extensions:Np,trkseg:function(t,e){var o=e[e.length-1];sl(fv,t,e),o.ends.push(o.flatCoordinates.length)}}),fv=rl(av,{trkpt:function(t,e){var o=al({},yv,t,e);if(o){var i=e[e.length-1];Lp(i.flatCoordinates,i.layoutOptions,t,o)}}}),yv=rl(av,{ele:tl(_p),time:tl(vp)}),gv=rl(av,{ele:tl(_p),time:tl(vp),magvar:tl(_p),geoidheight:tl(_p),name:tl(Pp),cmt:tl(Pp),desc:tl(Pp),src:tl(Pp),link:Op,sym:tl(Pp),type:tl(Pp),fix:tl(Pp),sat:tl(Ep),hdop:tl(_p),vdop:tl(_p),pdop:tl(_p),ageofdgpsdata:tl(_p),dgpsid:tl(Ep),extensions:Np});Tp.prototype.jg=function(t,e){if(!o(av,t.namespaceURI))return null;var i=lv[t.localName];return i&&(i=i(t,[dl(this,t,e)]))?(Fp(this,[i]),i):null},Tp.prototype.yc=function(t,e){if(!o(av,t.namespaceURI))return[];if("gpx"==t.localName){var i=al([],pv,t,[dl(this,t,e)]);if(i)return Fp(this,i),i}return[]};var mv=["text","type"],vv=rl(av,{text:el(Mp),type:el(Mp)}),_v=rl(av,"name cmt desc src link number type rtept".split(" ")),bv=rl(av,{name:el(Mp),cmt:el(Mp),desc:el(Mp),src:el(Mp),link:el(Up),number:el(Cp),type:el(Mp),rtept:ol(el(Bp))}),Ev=rl(av,["ele","time"]),Sv=rl(av,"name cmt desc src link number type trkseg".split(" ")),Pv=rl(av,{name:el(Mp),cmt:el(Mp),desc:el(Mp),src:el(Mp),link:el(Up),number:el(Cp),type:el(Mp),trkseg:ol(el(function(t,e,o){pl({node:t,geometryLayout:e.ka,properties:{}},Av,wv,e.X(),o)}))}),wv=il("trkpt"),Av=rl(av,{trkpt:el(Bp)}),Cv=rl(av,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Mv=rl(av,{ele:el(Ap),time:el(function(t,e){var o=new Date(1e3*e);t.appendChild(Ym.createTextNode(o.getUTCFullYear()+"-"+Oo(o.getUTCMonth()+1)+"-"+Oo(o.getUTCDate())+"T"+Oo(o.getUTCHours())+":"+Oo(o.getUTCMinutes())+":"+Oo(o.getUTCSeconds())+"Z"))}),magvar:el(Ap),geoidheight:el(Ap),name:el(Mp),cmt:el(Mp),desc:el(Mp),src:el(Mp),link:el(Up),sym:el(Mp),type:el(Mp),fix:el(Mp),sat:el(Cp),hdop:el(Ap),vdop:el(Ap),pdop:el(Ap),ageofdgpsdata:el(Ap),dgpsid:el(Cp)}),xv={Point:"wpt",LineString:"rte",MultiLineString:"trk"},Iv=rl(av,{rte:el(function(t,e,o){var i=o[0],n=e.N();t={node:t,properties:n},(e=e.U())&&(e=yl(e,!0,i),t.geometryLayout=e.ka,n.rtept=e.X()),i=_v[o[o.length-1].node.namespaceURI],n=nl(n,i),pl(t,bv,Km,n,o,i)}),trk:el(function(t,e,o){var i=o[0],n=e.N();t={node:t,properties:n},(e=e.U())&&(e=yl(e,!0,i),n.trkseg=e.hd()),i=Sv[o[o.length-1].node.namespaceURI],n=nl(n,i),pl(t,Pv,Km,n,o,i)}),wpt:el(function(t,e,o){var i=o[0],n=o[o.length-1];n.properties=e.N(),(e=e.U())&&(e=yl(e,!0,i),n.geometryLayout=e.ka,Bp(t,e.X(),o))})});Tp.prototype.Yb=function(t,e){e=fl(this,e);var o=za("http://www.topografix.com/GPX/1/1","gpx");return o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),o.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),o.setAttribute("version","1.1"),o.setAttribute("creator","OpenLayers"),pl({node:o},Iv,Vp,t,[e]),o},h(Wp,ul),Xy=Wp.prototype,Xy.T=function(){return"text"},Xy.Ub=function(t,e){return this.Wd(zp(t),fl(this,e))},Xy.Qa=function(t,e){return this.lg(zp(t),fl(this,e))},Xy.Tc=function(t,e){return this.ud(zp(t),fl(this,e))},Xy.kb=function(){return this.defaultDataProjection},Xy.yd=function(t,e){return this.be(t,fl(this,e))},Xy.Xb=function(t,e){return this.Gg(t,fl(this,e))},Xy.bd=function(t,e){return this.Ad(t,fl(this,e))},h(Hp,Wp)
;var Rv=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Tv=/^H.([A-Z]{3}).*?:(.*)/,Lv=/^HFDTE(\d{2})(\d{2})(\d{2})/,Gv=/\r\n|\r|\n/;Xy=Hp.prototype,Xy.Wd=function(t,e){var o,i,n=this.b,r=t.split(Gv),s={},a=[],l=2e3,p=0,h=1,c=-1;for(o=0,i=r.length;o<i;++o){var u,d=r[o];if("B"==d.charAt(0)){if(u=Rv.exec(d)){var d=parseInt(u[1],10),f=parseInt(u[2],10),y=parseInt(u[3],10),g=parseInt(u[4],10)+parseInt(u[5],10)/6e4;"S"==u[6]&&(g=-g);var m=parseInt(u[7],10)+parseInt(u[8],10)/6e4;"W"==u[9]&&(m=-m),a.push(m,g),"none"!=n&&a.push("gps"==n?parseInt(u[11],10):"barometric"==n?parseInt(u[12],10):0),u=Date.UTC(l,p,h,d,f,y),u<c&&(u=Date.UTC(l,p,h+1,d,f,y)),a.push(u/1e3),c=u}}else"H"==d.charAt(0)&&((u=Lv.exec(d))?(h=parseInt(u[1],10),p=parseInt(u[2],10)-1,l=2e3+parseInt(u[3],10)):(u=Tv.exec(d))&&(s[u[1]]=u[2].trim()))}return a.length?(r=new El(null),r.ca("none"==n?"XYM":"XYZM",a),n=new Va(yl(r,!1,e)),n.H(s),n):null},Xy.lg=function(t,e){var o=this.Wd(t,e);return o?[o]:[]},Xy.be=function(){},Xy.Gg=function(){},Xy.Ad=function(){},Xy.ud=function(){},h(qp,se),qp.prototype.v=function(){this.f=3,this.i.forEach(te),this.i=null,this.b("change")},qp.prototype.I=function(){if(this.f=2,this.a&&(this.M.width=this.a[0],this.M.height=this.a[1]),this.a=[this.M.width,this.M.height],this.i.forEach(te),this.i=null,Yp(this),!this.o&&null!==this.g){this.c.width=this.M.width,this.c.height=this.M.height;var t=this.c.getContext("2d");t.drawImage(this.M,0,0);for(var e=t.getImageData(0,0,this.M.width,this.M.height),o=e.data,i=this.g[0]/255,n=this.g[1]/255,r=this.g[2]/255,s=0,a=o.length;s<a;s+=4)o[s]*=i,o[s+1]*=n,o[s+2]*=r;t.putImageData(e,0,0)}this.b("change")},qp.prototype.Z=function(){return this.c?this.c:this.M},qp.prototype.load=function(){if(0==this.f){this.f=1,this.i=[Qt(this.M,"error",this.v,this),Qt(this.M,"load",this.I,this)];try{this.M.src=this.j}catch(t){this.v()}}},h(Kp,La),Xy=Kp.prototype,Xy.clone=function(){var t,e=this.Z(1);if(2===this.b.f)if("IMG"===e.tagName.toUpperCase())t=e.cloneNode(!0);else{t=document.createElement("canvas");var o=t.getContext("2d");t.width=e.width,t.height=e.height,o.drawImage(e,0,0)}return new Kp({anchor:this.j.slice(),anchorOrigin:this.a,anchorXUnits:this.C,anchorYUnits:this.G,crossOrigin:this.ta,color:this.i&&this.i.slice?this.i.slice():this.i||void 0,img:t||void 0,imgSize:t?this.b.a.slice():void 0,src:t?void 0:this.b.j,offset:this.qa.slice(),offsetOrigin:this.f,size:null!==this.A?this.A.slice():void 0,opacity:this.g,scale:this.c,snapToPixel:this.v,rotation:this.l,rotateWithView:this.o})},Xy.Hc=function(){if(this.I)return this.I;var t=this.j,e=this.jc();if("fraction"==this.C||"fraction"==this.G){if(!e)return null;t=this.j.slice(),"fraction"==this.C&&(t[0]*=e[0]),"fraction"==this.G&&(t[1]*=e[1])}if("top-left"!=this.a){if(!e)return null;t===this.j&&(t=this.j.slice()),"top-right"!=this.a&&"bottom-right"!=this.a||(t[0]=-t[0]+e[0]),"bottom-left"!=this.a&&"bottom-right"!=this.a||(t[1]=-t[1]+e[1])}return this.I=t},Xy.Zn=function(){return this.i},Xy.Z=function(t){return this.b.Z(t)},Xy.ue=function(){return this.b.a},Xy.Oe=function(){return this.b.f},Xy.cg=function(){var t=this.b;if(!t.l)if(t.o){var e=t.a[0],o=t.a[1],i=Ee(e,o);i.fillRect(0,0,e,o),t.l=i.canvas}else t.l=t.M;return t.l},Xy.Pc=function(){if(this.u)return this.u;var t=this.qa;if("top-left"!=this.f){var e=this.jc(),o=this.b.a;if(!e||!o)return null;t=t.slice(),"top-right"!=this.f&&"bottom-right"!=this.f||(t[0]=o[0]-e[0]-t[0]),"bottom-left"!=this.f&&"bottom-right"!=this.f||(t[1]=o[1]-e[1]-t[1])}return this.u=t},Xy.$n=function(){return this.b.j},Xy.jc=function(){return this.A?this.A:this.b.a},Xy.zh=function(t,e){return Jt(this.b,"change",t,e)},Xy.load=function(){this.b.load()},Xy.Yi=function(t,e){$t(this.b,"change",t,e)},Xy=Xp.prototype,Xy.clone=function(){return new Xp({font:this.a,rotation:this.i,rotateWithView:this.j,scale:this.b,text:this.Pa(),textAlign:this.g,textBaseline:this.l,fill:this.Ca()?this.Ca().clone():void 0,stroke:this.Da()?this.Da().clone():void 0,offsetX:this.f,offsetY:this.c})},Xy.tk=function(){return this.a},Xy.Ik=function(){return this.f},Xy.Jk=function(){return this.c},Xy.Ca=function(){return this.Wa},Xy.fo=function(){return this.j},Xy.ho=function(){return this.i},Xy.io=function(){return this.b},Xy.Da=function(){return this.Ya},Xy.Pa=function(){return this.Fa},Xy.Tk=function(){return this.g},Xy.Uk=function(){return this.l},Xy.Ii=function(t){this.a=t},Xy.Oi=function(t){this.f=t},Xy.Pi=function(t){this.c=t},Xy.cf=function(t){this.Wa=t},Xy.jo=function(t){this.i=t},Xy.ni=function(t){this.b=t},Xy.df=function(t){this.Ya=t},Xy.ef=function(t){this.Fa=t},Xy.Ri=function(t){this.g=t},Xy.up=function(t){this.l=t};var Ov,Nv,kv,Dv,jv,Fv,Uv,Bv,Vv,Wv,zv,Hv,qv,Yv,Kv;h(Zp,up);var Xv=["http://www.google.com/kml/ext/2.2"],Zv=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Jv={fraction:"fraction",pixels:"pixels"},Qv=rl(Zv,{displayName:tl(Pp),value:tl(Pp)}),$v=rl(Zv,{Data:function(t,e){var o=t.getAttribute("name");sl(Qv,t,e);var i=e[e.length-1];null!==o?i[o]=i.value:null!==i.displayName&&(i[i.displayName]=i.value)},SchemaData:function(t,e){sl(E_,t,e)}}),t_=rl(Zv,{LatLonAltBox:function(t,e){var o=al({},e_,t,e);if(o){var i=e[e.length-1];i.extent=[parseFloat(o.west),parseFloat(o.south),parseFloat(o.east),parseFloat(o.north)],i.altitudeMode=o.altitudeMode,i.minAltitude=parseFloat(o.minAltitude),i.maxAltitude=parseFloat(o.maxAltitude)}},Lod:function(t,e){var o=al({},o_,t,e);if(o){var i=e[e.length-1];i.minLodPixels=parseFloat(o.minLodPixels),i.maxLodPixels=parseFloat(o.maxLodPixels),i.minFadeExtent=parseFloat(o.minFadeExtent),i.maxFadeExtent=parseFloat(o.maxFadeExtent)}}}),e_=rl(Zv,{altitudeMode:tl(Pp),minAltitude:tl(_p),maxAltitude:tl(_p),north:tl(_p),south:tl(_p),east:tl(_p),west:tl(_p)}),o_=rl(Zv,{minLodPixels:tl(_p),maxLodPixels:tl(_p),minFadeExtent:tl(_p),maxFadeExtent:tl(_p)}),i_=rl(Zv,{extrude:tl(gp),altitudeMode:tl(Pp)}),n_=rl(Zv,{coordinates:Qa(eh)}),r_=rl(Zv,{innerBoundaryIs:function(t,e){var o=al(void 0,h_,t,e);o&&e[e.length-1].push(o)},outerBoundaryIs:function(t,e){var o=al(void 0,m_,t,e);o&&(e[e.length-1][0]=o)}}),s_=rl(Zv,{when:function(t,e){var o=e[e.length-1].bj,i=Ha(t,!1),i=Date.parse(i);o.push(isNaN(i)?0:i)}},rl(Xv,{coord:function(t,e){var o=e[e.length-1].B,i=Ha(t,!1);(i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i))?o.push(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),0):o.push(0,0,0,0)}})),a_=rl(Zv,{coordinates:Qa(eh)}),l_=rl(Zv,{href:tl(oh)},rl(Xv,{x:tl(_p),y:tl(_p),w:tl(_p),h:tl(_p)})),p_=rl(Zv,{Icon:tl(function(t,e){var o=al({},l_,t,e);return o||null}),heading:tl(_p),hotSpot:tl(function(t){var e=t.getAttribute("xunits"),o=t.getAttribute("yunits");return{x:parseFloat(t.getAttribute("x")),Hg:Jv[e],y:parseFloat(t.getAttribute("y")),Ig:Jv[o]}}),scale:tl(ih)}),h_=rl(Zv,{LinearRing:Qa(nh)}),c_=rl(Zv,{color:tl(th),scale:tl(ih)}),u_=rl(Zv,{color:tl(th),width:tl(_p)}),d_=rl(Zv,{LineString:Ja(sh),LinearRing:Ja(ah),MultiGeometry:Ja(lh),Point:Ja(ph),Polygon:Ja(hh)}),f_=rl(Xv,{Track:Ja(rh)}),y_=rl(Zv,{ExtendedData:dh,Region:fh,Link:function(t,e){sl(g_,t,e)},address:tl(Pp),description:tl(Pp),name:tl(Pp),open:tl(gp),phoneNumber:tl(Pp),visibility:tl(gp)}),g_=rl(Zv,{href:tl(oh)}),m_=rl(Zv,{LinearRing:Qa(nh)}),v_=rl(Zv,{Style:tl(ch),key:tl(Pp),styleUrl:tl(oh)}),__=rl(Zv,{ExtendedData:dh,Region:fh,MultiGeometry:tl(lh,"geometry"),LineString:tl(sh,"geometry"),LinearRing:tl(ah,"geometry"),Point:tl(ph,"geometry"),Polygon:tl(hh,"geometry"),Style:tl(ch),StyleMap:function(t,e){var o=al(void 0,P_,t,e);if(o){var i=e[e.length-1];Array.isArray(o)?i.Style=o:"string"==typeof o?i.styleUrl=o:f(!1,38)}},address:tl(Pp),description:tl(Pp),name:tl(Pp),open:tl(gp),phoneNumber:tl(Pp),styleUrl:tl(oh),visibility:tl(gp)},rl(Xv,{MultiTrack:tl(function(t,e){var o=al([],f_,t,e);if(o){var i=new Pl(null);return Al(i,o),i}},"geometry"),Track:tl(rh,"geometry")})),b_=rl(Zv,{color:tl(th),fill:tl(gp),outline:tl(gp)}),E_=rl(Zv,{SimpleData:function(t,e){var o=t.getAttribute("name");if(null!==o){var i=Pp(t);e[e.length-1][o]=i}}}),S_=rl(Zv,{IconStyle:function(t,e){var o=al({},p_,t,e);if(o){var i,n=e[e.length-1],r="Icon"in o?o.Icon:{},s=!("Icon"in o)||0<Object.keys(r).length,a=r.href;a?i=a:s&&(i=Bv);var l,p,h;(a=o.hotSpot)?(l=[a.x,a.y],p=a.Hg,h=a.Ig):i===Bv?(l=Dv,p=jv,h=Fv):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(i)&&(l=[.5,0],h=p="fraction");var c,a=r.x,u=r.y;void 0!==a&&void 0!==u&&(c=[a,u]);var d,a=r.w,r=r.h;void 0!==a&&void 0!==r&&(d=[a,r]);var f,r=o.heading;void 0!==r&&(f=P(r)),o=o.scale,s?(i==Bv&&(d=Uv,void 0===o&&(o=Vv)),s=new Kp({anchor:l,anchorOrigin:"bottom-left",anchorXUnits:p,anchorYUnits:h,crossOrigin:"anonymous",offset:c,offsetOrigin:"bottom-left",rotation:f,scale:o,size:d,src:i}),n.imageStyle=s):n.imageStyle=zv}},LabelStyle:function(t,e){var o=al({},c_,t,e);o&&(e[e.length-1].textStyle=new Xp({fill:new ka({color:"color"in o?o.color:Nv}),scale:o.scale}))},LineStyle:function(t,e){var o=al({},u_,t,e);o&&(e[e.length-1].strokeStyle=new Ps({color:"color"in o?o.color:Nv,width:"width"in o?o.width:1}))},PolyStyle:function(t,e){var o=al({},b_,t,e);if(o){var i=e[e.length-1];i.fillStyle=new ka({color:"color"in o?o.color:Nv});var n=o.fill;void 0!==n&&(i.fill=n),o=o.outline,void 0!==o&&(i.outline=o)}}}),P_=rl(Zv,{Pair:function(t,e){var o=al({},v_,t,e);if(o){var i=o.key;i&&"normal"==i&&((i=o.styleUrl)&&(e[e.length-1]=i),(o=o.Style)&&(e[e.length-1]=o))}}});Xy=Zp.prototype,Xy.hg=function(t,e){var o=rl(Zv,{Document:Za(this.hg,this),Folder:Za(this.hg,this),Placemark:Ja(this.pg,this),Style:this.Yo.bind(this),StyleMap:this.Xo.bind(this)});if(o=al([],o,t,e,this))return o},Xy.pg=function(t,e){var o=al({geometry:null},__,t,e);if(o){var i=new Va,n=t.getAttribute("id");null!==n&&i.kc(n);var n=e[0],r=o.geometry;return r&&yl(r,!1,n),i.Sa(r),delete o.geometry,this.c&&i.Vf(Qp(o.Style,o.styleUrl,this.a,this.b,this.i)),delete o.Style,i.H(o),i}},Xy.Yo=function(t,e){var o=t.getAttribute("id");if(null!==o){var i=ch(t,e);i&&(o=t.baseURI?new URL("#"+o,t.baseURI).href:"#"+o,this.b[o]=i)}},Xy.Xo=function(t,e){var o=t.getAttribute("id");if(null!==o){var i=al(void 0,P_,t,e);i&&(o=t.baseURI?new URL("#"+o,t.baseURI).href:"#"+o,this.b[o]=i)}},Xy.jg=function(t,e){if(!o(Zv,t.namespaceURI))return null;var i=this.pg(t,[dl(this,t,e)]);return i||null},Xy.yc=function(t,e){if(!o(Zv,t.namespaceURI))return[];var i;if("Document"==(i=t.localName)||"Folder"==i)return(i=this.hg(t,[dl(this,t,e)]))?i:[];if("Placemark"==i)return(i=this.pg(t,[dl(this,t,e)]))?[i]:[];if("kml"==i){i=[];var r;for(r=t.firstElementChild;r;r=r.nextElementSibling){var s=this.yc(r,e);s&&n(i,s)}return i}return[]},Xy.Ro=function(t){return Ya(t)?yh(this,t):Ka(t)?gh(this,t):"string"==typeof t?(t=Xa(t),yh(this,t)):void 0},Xy.So=function(t){var e=[];return Ya(t)?n(e,mh(this,t)):Ka(t)?n(e,vh(this,t)):"string"==typeof t&&(t=Xa(t),n(e,mh(this,t))),e},Xy.Vo=function(t){var e=[];return Ya(t)?n(e,_h(this,t)):Ka(t)?n(e,this.$e(t)):"string"==typeof t&&(t=Xa(t),n(e,_h(this,t))),e},Xy.$e=function(t){var e,i=[];for(e=t.firstElementChild;e;e=e.nextElementSibling)if(o(Zv,e.namespaceURI)&&"Region"==e.localName){var r=al({},t_,e,[]);i.push(r)}for(e=t.firstElementChild;e;e=e.nextElementSibling)t=e.localName,!o(Zv,e.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||n(i,this.$e(e));return i};var w_=rl(Zv,["Document","Placemark"]),A_=rl(Zv,{Document:el(function(t,e,o){pl({node:t},C_,xh,e,o,void 0,this)}),Placemark:el(Ph)}),C_=rl(Zv,{Placemark:el(Ph)}),M_=rl(Zv,{Data:el(function(t,e,o){t.setAttribute("name",e.name),t={node:t},e=e.value,"object"==typeof e?(null!==e&&e.displayName&&pl(t,M_,Km,[e.displayName],o,["displayName"]),null!==e&&e.value&&pl(t,M_,Km,[e.value],o,["value"])):pl(t,M_,Km,[e],o,["value"])}),value:el(function(t,e){Mp(t,e)}),displayName:el(function(t,e){t.appendChild(Ym.createCDATASection(e))})}),x_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},I_=rl(Zv,["href"],rl(Xv,["x","y","w","h"])),R_=rl(Zv,{href:el(Mp)},rl(Xv,{x:el(Ap),y:el(Ap),w:el(Ap),h:el(Ap)})),T_=rl(Zv,["scale","heading","Icon","hotSpot"]),L_=rl(Zv,{Icon:el(function(t,e,o){t={node:t};var i=I_[o[o.length-1].node.namespaceURI],n=nl(e,i);pl(t,R_,Km,n,o,i),i=I_[Xv[0]],n=nl(e,i),pl(t,R_,Mh,n,o,i)}),heading:el(Ap),hotSpot:el(function(t,e){t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("xunits",e.Hg),t.setAttribute("yunits",e.Ig)}),scale:el(Ch)}),G_=rl(Zv,["color","scale"]),O_=rl(Zv,{color:el(bh),scale:el(Ch)}),N_=rl(Zv,["color","width"]),k_=rl(Zv,{color:el(bh),width:el(Ap)}),D_=rl(Zv,{LinearRing:el(wh)}),j_=rl(Zv,{LineString:el(wh),Point:el(wh),Polygon:el(Ah),GeometryCollection:el(Eh)}),F_=rl(Zv,"name open visibility address phoneNumber description styleUrl Style".split(" ")),U_=rl(Zv,{ExtendedData:el(function(t,e,o){t={node:t};var i=e.names;e=e.values;for(var n=i.length,r=0;r<n;r++)pl(t,M_,K_,[{name:i[r],value:e[r]}],o)}),MultiGeometry:el(Eh),LineString:el(wh),LinearRing:el(wh),Point:el(wh),Polygon:el(Ah),Style:el(function(t,e,o){t={node:t};var i={},n=e.Ca(),r=e.Da(),s=e.Z();e=e.Pa(),s instanceof Kp&&(i.IconStyle=s),e&&(i.LabelStyle=e),r&&(i.LineStyle=r),n&&(i.PolyStyle=n),e=z_[o[o.length-1].node.namespaceURI],i=nl(i,e),pl(t,H_,Km,i,o,e)}),address:el(Mp),description:el(Mp),name:el(Mp),open:el(wp),phoneNumber:el(Mp),styleUrl:el(Mp),visibility:el(wp)}),B_=rl(Zv,{coordinates:el(function(t,e,o){o=o[o.length-1];var i=o.layout;o=o.stride;var n;"XY"==i||"XYM"==i?n=2:"XYZ"==i||"XYZM"==i?n=3:f(!1,34);var r,s=e.length,a="";if(0<s){for(a+=e[0],i=1;i<n;++i)a+=","+e[i];for(r=o;r<s;r+=o)for(a+=" "+e[r],i=1;i<n;++i)a+=","+e[r+i]}Mp(t,a)})}),V_=rl(Zv,{outerBoundaryIs:el(Sh),innerBoundaryIs:el(Sh)}),W_=rl(Zv,{color:el(bh)}),z_=rl(Zv,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),H_=rl(Zv,{IconStyle:el(function(t,e,o){t={node:t};var i={},n=e.jc(),r=e.ue(),s={href:e.b.j};if(n){s.w=n[0],s.h=n[1];var a=e.Hc(),l=e.Pc();l&&r&&l[0]&&l[1]!==n[1]&&(s.x=l[0],s.y=r[1]-(l[1]+n[1])),a&&a[0]&&a[1]!==n[1]&&(i.hotSpot={x:a[0],Hg:"pixels",y:n[1]-a[1],Ig:"pixels"})}i.Icon=s,n=e.c,1!==n&&(i.scale=n),(e=e.l)&&(i.heading=e),e=T_[o[o.length-1].node.namespaceURI],i=nl(i,e),pl(t,L_,Km,i,o,e)}),LabelStyle:el(function(t,e,o){t={node:t};var i={},n=e.Ca();n&&(i.color=n.b),(e=e.b)&&1!==e&&(i.scale=e),e=G_[o[o.length-1].node.namespaceURI],i=nl(i,e),pl(t,O_,Km,i,o,e)}),LineStyle:el(function(t,e,o){t={node:t};var i=N_[o[o.length-1].node.namespaceURI];e=nl({color:e.a,width:e.c},i),pl(t,k_,Km,e,o,i)}),PolyStyle:el(function(t,e,o){pl({node:t},W_,q_,[e.b],o)})}),q_=il("color"),Y_=il("coordinates"),K_=il("Data"),X_=il("ExtendedData"),Z_=il("innerBoundaryIs"),J_=il("Point"),Q_=il("LineString"),$_=il("LinearRing"),tb=il("Polygon"),eb=il("outerBoundaryIs");Zp.prototype.Yb=function(t,e){e=fl(this,e);var o=za(Zv[4],"kml");o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",Xv[0]),o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),o.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:o},n={};1<t.length?n.Document=t:1==t.length&&(n.Placemark=t[0]);var r=w_[o.namespaceURI],n=nl(n,r);return pl(i,A_,Km,n,[e],r,this),o},function(){var t={},e={ma:t};!function(o){if("object"==typeof t&&void 0!==e)e.ma=o();else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.aq=o()}}(function(){return function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=o[s]={ma:{}},e[s][0].call(l.ma,function(t){var o=e[s][1][t];return n(o||t)},l,l.ma,t,e,o,i)}return o[s].ma}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,o){o.read=function(t,e,o,i,n){var r;r=8*n-i-1;var s=(1<<r)-1,a=s>>1,l=-7;n=o?n-1:0;var p=o?-1:1,h=t[e+n];for(n+=p,o=h&(1<<-l)-1,h>>=-l,l+=r;0<l;o=256*o+t[e+n],n+=p,l-=8);for(r=o&(1<<-l)-1,o>>=-l,l+=i;0<l;r=256*r+t[e+n],n+=p,l-=8);if(0===o)o=1-a;else{if(o===s)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,i),o-=a}return(h?-1:1)*r*Math.pow(2,o-i)},o.write=function(t,e,o,i,n,r){var s,a=8*r-n-1,l=(1<<a)-1,p=l>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0;r=i?0:r-1;var c=i?1:-1,u=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(e=isNaN(e)?1:0,i=l):(i=Math.floor(Math.log(e)/Math.LN2),1>e*(s=Math.pow(2,-i))&&(i--,s*=2),e=1<=i+p?e+h/s:e+h*Math.pow(2,1-p),2<=e*s&&(i++,s/=2),i+p>=l?(e=0,i=l):1<=i+p?(e=(e*s-1)*Math.pow(2,n),i+=p):(e=e*Math.pow(2,p-1)*Math.pow(2,n),i=0));8<=n;t[o+r]=255&e,r+=c,e/=256,n-=8);for(i=i<<n|e,a+=n;0<a;t[o+r]=255&i,r+=c,i/=256,a-=8);t[o+r-c]|=128*u}},{}],2:[function(t,e){function o(t){this.lc=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.type=this.ga=0,this.length=this.lc.length}function i(t,e,o){var i,r,s=o.lc;if(r=s[o.ga++],i=(112&r)>>4,128>r)return n(t,i,e);if(r=s[o.ga++],i|=(127&r)<<3,128>r)return n(t,i,e);if(r=s[o.ga++],i|=(127&r)<<10,128>r)return n(t,i,e);if(r=s[o.ga++],i|=(127&r)<<17,128>r)return n(t,i,e);if(r=s[o.ga++],i|=(127&r)<<24,128>r)return n(t,i,e);if(128>(r=s[o.ga++]))return n(t,i|(1&r)<<31,e);throw Error("Expected varint not more than 10 bytes")}function n(t,e,o){return o?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}e.ma=o;var r=t("ieee754");o.c=0,o.f=1,o.b=2,o.a=5,o.prototype={mg:function(t,e,o){for(o=o||this.length;this.ga<o;){var i=this.Ma(),n=i>>3,r=this.ga;this.type=7&i,t(n,e,this),this.ga===r&&this.zp(i)}return e},No:function(){var t=r.read(this.lc,this.ga,!0,23,4);return this.ga+=4,t},Jo:function(){var t=r.read(this.lc,this.ga,!0,52,8);return this.ga+=8,t},Ma:function(t){var e,o,n=this.lc;return o=n[this.ga++],e=127&o,128>o?e:(o=n[this.ga++],e|=(127&o)<<7,128>o?e:(o=n[this.ga++],e|=(127&o)<<14,128>o?e:(o=n[this.ga++],e|=(127&o)<<21,128>o?e:(o=n[this.ga],i(e|(15&o)<<28,t,this)))))},Zo:function(){return this.Ma(!0)},Yd:function(){var t=this.Ma();return 1==t%2?(t+1)/-2:t/2},Ho:function(){return!!this.Ma()},sg:function(){for(var t=this.Ma()+this.ga,e=this.lc,o="",i=this.ga;i<t;){var n=e[i],r=null,s=239<n?4:223<n?3:191<n?2:1;if(i+s>t)break;var a,l,p;1===s?128>n&&(r=n):2===s?128==(192&(a=e[i+1]))&&127>=(r=(31&n)<<6|63&a)&&(r=null):3===s?(a=e[i+1],l=e[i+2],128==(192&a)&&128==(192&l)&&(2047>=(r=(15&n)<<12|(63&a)<<6|63&l)||55296<=r&&57343>=r)&&(r=null)):4===s&&(a=e[i+1],l=e[i+2],p=e[i+3],128==(192&a)&&128==(192&l)&&128==(192&p)&&(65535>=(r=(15&n)<<18|(63&a)<<12|(63&l)<<6|63&p)||1114112<=r))&&(r=null),null===r?(r=65533,s=1):65535<r&&(r-=65536,o+=String.fromCharCode(r>>>10&1023|55296),r=56320|1023&r),o+=String.fromCharCode(r),i+=s}return this.ga=t,o},zp:function(t){if((t&=7)===o.c)for(;127<this.lc[this.ga++];);else if(t===o.b)this.ga=this.Ma()+this.ga;else if(t===o.a)this.ga+=4;else{if(t!==o.f)throw Error("Unimplemented type: "+t);this.ga+=8}}}},{ieee754:1}]},{},[2])(2)}),Mm=e.ma}(),function(){var t={},e={ma:t};!function(o){if("object"==typeof t&&void 0!==e)e.ma=o();else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.eq=o()}}(function(){return function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=o[s]={ma:{}},e[s][0].call(l.ma,function(t){var o=e[s][1][t];return n(o||t)},l,l.ma,t,e,o,i)}return o[s].ma}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e){function o(t,e){this.x=t,this.y=e}e.ma=o,o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone().Ej(t)},rotate:function(t){return this.clone().Oj(t)},round:function(){return this.clone().Pj()},angle:function(){return Math.atan2(this.y,this.x)},Ej:function(t){return this.x+=t.x,this.y+=t.y,this},Oj:function(t){var e=Math.cos(t);t=Math.sin(t);var o=t*this.x+e*this.y;return this.x=e*this.x-t*this.y,this.y=o,this},Pj:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.b=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t}},{}],2:[function(t,e){e.ma.Dj=t("./lib/vectortile.js"),e.ma.Yp=t("./lib/vectortilefeature.js"),e.ma.Zp=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":3,"./lib/vectortilefeature.js":4,"./lib/vectortilelayer.js":5}],3:[function(t,e){function o(t,e,o){3===t&&(t=new i(o,o.Ma()+o.ga),t.length&&(e[t.name]=t))}var i=t("./vectortilelayer");e.ma=function(t,e){this.layers=t.mg(o,{},e)}},{"./vectortilelayer":5}],4:[function(t,e){function o(t,e,o,n,r){this.properties={},this.extent=o,this.type=0,this.Cc=t,this.tf=-1,this.ie=n,this.ke=r,t.mg(i,this,e)}function i(t,e,o){if(1==t)e.id=o.Ma();else if(2==t)for(t=o.Ma()+o.ga;o.ga<t;){var i=e.ie[o.Ma()],n=e.ke[o.Ma()];e.properties[i]=n}else 3==t?e.type=o.Ma():4==t&&(e.tf=o.ga)}var n=t("point-geometry");e.ma=o,o.b=["Unknown","Point","LineString","Polygon"],o.prototype.Ah=function(){var t=this.Cc;t.ga=this.tf;for(var e,o=t.Ma()+t.ga,i=1,r=0,s=0,a=0,l=[];t.ga<o;)if(r||(r=t.Ma(),i=7&r,r>>=3),r--,1===i||2===i)s+=t.Yd(),a+=t.Yd(),1===i&&(e&&l.push(e),e=[]),e.push(new n(s,a));else{if(7!==i)throw Error("unknown command "+i);e&&e.push(e[0].clone())}return e&&l.push(e),l},o.prototype.bbox=function(){var t=this.Cc;t.ga=this.tf;for(var e=t.Ma()+t.ga,o=1,i=0,n=0,r=0,s=1/0,a=-1/0,l=1/0,p=-1/0;t.ga<e;)if(i||(i=t.Ma(),o=7&i,i>>=3),i--,1===o||2===o)n+=t.Yd(),r+=t.Yd(),n<s&&(s=n),n>a&&(a=n),r<l&&(l=r),r>p&&(p=r);else if(7!==o)throw Error("unknown command "+o);return[s,l,a,p]}},{"point-geometry":1}],5:[function(t,e){function o(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this.Cc=t,this.ie=[],this.ke=[],this.he=[],t.mg(i,this,e),this.length=this.he.length}function i(t,e,o){15===t?e.version=o.Ma():1===t?e.name=o.sg():5===t?e.extent=o.Ma():2===t?e.he.push(o.ga):3===t?e.ie.push(o.sg()):4===t&&e.ke.push(n(o))}function n(t){for(var e=null,o=t.Ma()+t.ga;t.ga<o;)e=t.Ma()>>3,e=1===e?t.sg():2===e?t.No():3===e?t.Jo():4===e?t.Zo():5===e?t.Ma():6===e?t.Yd():7===e?t.Ho():null;return e}var r=t("./vectortilefeature.js");e.ma=o,o.prototype.feature=function(t){if(0>t||t>=this.he.length)throw Error("feature index out of bounds");return this.Cc.ga=this.he[t],t=this.Cc.Ma()+this.Cc.ga,new r(this.Cc,t,this.extent,this.ie,this.ke)}},{"./vectortilefeature.js":4}]},{},[2])(2)}),xm=e.ma}(),Xy=Rh.prototype,Xy.get=function(t){return this.c[t]},Xy.Rb=function(){return this.i},Xy.D=function(){return this.a||(this.a="Point"===this.f?F(this.b):U(this.b,0,this.b.length,2)),this.a},Xy.fc=function(){return this.b},Xy.ha=Rh.prototype.fc,Xy.U=function(){return this},Xy.mn=function(){return this.c},Xy.Qd=Rh.prototype.U,Xy.sa=function(){return 2},Xy.Nc=c,Xy.T=function(){return this.f},h(Th,ul),Xy=Th.prototype,Xy.T=function(){return"arraybuffer"},Xy.Qa=function(t,e){var o,i,n,r=this.c,s=new Mm(t),s=new xm.Dj(s),a=[],l=this.b;for(n in s.layers)if(!r||-1!=r.indexOf(n)){o=s.layers[n];for(var p=0,h=o.length;p<h;++p){if(l===Rh){i=void 0;var c=o.feature(p),u=n,d=c.Ah(),f=[],y=[];Lh(d,y,f);var g=c.type;1===g?i=1===d.length?"Point":"MultiPoint":2===g?i=1===d.length?"LineString":"MultiLineString":3===g&&(i="Polygon"),c=c.properties,c[this.a]=u,i=new this.b(i,y,f,c)}else{if(g=o.feature(p),c=n,y=e,i=new this.b,u=g.id,f=g.properties,f[this.a]=c,this.f&&i.Vc(this.f),c=void 0,0===(d=g.type))c=null;else{var g=g.Ah(),m=[],v=[];Lh(g,v,m),1===d?c=1===g.length?new vi(null):new Cl(null):2===d?c=1===g.length?new El(null):new Pl(null):3===d&&(c=new Ri(null)),c.ca("XY",v,m)}y=yl(c,!1,fl(this,y)),i.Sa(y),i.kc(u),i.H(f)}a.push(i)}}return a},Xy.kb=function(){return this.defaultDataProjection},Xy.Hm=function(t){this.c=t},Xy.Ub=function(){},Xy.Tc=function(){},Xy.yd=function(){},Xy.bd=function(){},Xy.Xb=function(){},h(Gh,up);var ob=[null],ib=rl(ob,{nd:function(t,e){e[e.length-1].md.push(t.getAttribute("ref"))},tag:Oh}),nb=rl(ob,{node:function(t,e){var o=e[0],i=e[e.length-1],n=t.getAttribute("id"),r=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];i.Eh[n]=r;var s=al({ae:{}},rb,t,e);lt(s.ae)||(r=new vi(r),yl(r,!1,o),o=new Va(r),o.kc(n),o.H(s.ae),i.features.push(o))},way:function(t,e){for(var o=e[0],i=t.getAttribute("id"),r=al({md:[],ae:{}},ib,t,e),s=e[e.length-1],a=[],l=0,p=r.md.length;l<p;l++)n(a,s.Eh[r.md[l]]);r.md[0]==r.md[r.md.length-1]?(l=new Ri(null),l.ca("XY",a,[a.length])):(l=new El(null),l.ca("XY",a)),yl(l,!1,o),o=new Va(l),o.kc(i),o.H(r.ae),s.features.push(o)}}),rb=rl(ob,{tag:Oh});Gh.prototype.yc=function(t,e){var o=dl(this,t,e);return"osm"==t.localName&&(o=al({Eh:{},features:[]},nb,t,[o]),o.features)?o.features:[]},Gh.prototype.Fg=function(){},Gh.prototype.Yb=function(){},Gh.prototype.de=function(){},kh.prototype.read=function(t){return Ya(t)?this.a(t):Ka(t)?this.b(t):"string"==typeof t?(t=Xa(t),this.a(t)):null},h(Dh,kh),Dh.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},Dh.prototype.b=function(t){return(t=al({},ab,t,[]))?t:null};var sb=[null,"http://www.opengis.net/ows/1.1"],ab=rl(sb,{ServiceIdentification:tl(function(t,e){return al({},_b,t,e)}),ServiceProvider:tl(function(t,e){return al({},bb,t,e)}),OperationsMetadata:tl(function(t,e){return al({},yb,t,e)})}),lb=rl(sb,{DeliveryPoint:tl(Pp),City:tl(Pp),AdministrativeArea:tl(Pp),PostalCode:tl(Pp),Country:tl(Pp),ElectronicMailAddress:tl(Pp)}),pb=rl(sb,{Value:$a(function(t){return Pp(t)})}),hb=rl(sb,{AllowedValues:tl(function(t,e){return al({},pb,t,e)})}),cb=rl(sb,{Phone:tl(function(t,e){return al({},gb,t,e)}),Address:tl(function(t,e){return al({},lb,t,e)})}),ub=rl(sb,{HTTP:tl(function(t,e){return al({},db,t,e)})}),db=rl(sb,{Get:$a(function(t,e){var o=Nh(t);if(o)return al({href:o},mb,t,e)}),Post:void 0}),fb=rl(sb,{DCP:tl(function(t,e){return al({},ub,t,e)})}),yb=rl(sb,{Operation:function(t,e){var o=t.getAttribute("name"),i=al({},fb,t,e);i&&(e[e.length-1][o]=i)}}),gb=rl(sb,{Voice:tl(Pp),Facsimile:tl(Pp)}),mb=rl(sb,{Constraint:$a(function(t,e){var o=t.getAttribute("name");if(o)return al({name:o},hb,t,e)})}),vb=rl(sb,{IndividualName:tl(Pp),PositionName:tl(Pp),ContactInfo:tl(function(t,e){return al({},cb,t,e)})}),_b=rl(sb,{Title:tl(Pp),ServiceTypeVersion:tl(Pp),ServiceType:tl(Pp)}),bb=rl(sb,{ProviderName:tl(Pp),ProviderSite:tl(Nh),ServiceContact:tl(function(t,e){return al({},vb,t,e)})});h(Fh,Wp),Xy=Fh.prototype,Xy.Wd=function(t,e){return new Va(this.ud(t,e))},Xy.lg=function(t,e){return[this.Wd(t,e)]},Xy.ud=function(t,e){var o=$o(this.a),i=Bh(t,o,this.b);return jh(i,i.length,o,i),o=ui(i,0,i.length,o),yl(new El(o,this.a),!1,fl(this,e))},Xy.be=function(t,e){var o=t.U();return o?this.Ad(o,e):(f(!1,40),"")},Xy.Gg=function(t,e){return this.be(t[0],e)},Xy.Ad=function(t,e){t=yl(t,!0,fl(this,e));var o=t.ha(),i=t.sa();return jh(o,o.length,i,o),Uh(o,i,this.b)},h(zh,gl),zh.prototype.kg=function(t,e){if("Topology"==t.type){var o,i=null,n=null;t.transform&&(o=t.transform,i=o.scale,n=o.translate);var r=t.arcs;if(o){o=i;var s,a,l=n;for(s=0,a=r.length;s<a;++s){var p,h,c,u=r[s],d=o,f=l,y=0,g=0;for(h=0,p=u.length;h<p;++h)c=u[h],y+=c[0],g+=c[1],c[0]=y,c[1]=g,Kh(c,d,f)}}for(o=[],l=at(t.objects),s=0,a=l.length;s<a;++s)"GeometryCollection"===l[s].type?(p=l[s],o.push.apply(o,qh(p,r,i,n,e))):(p=l[s],o.push(Yh(p,r,i,n,e)));return o}return[]},zh.prototype.rg=function(){return this.defaultDataProjection};var Eb={Point:function(t,e,o){return t=t.coordinates,e&&o&&Kh(t,e,o),new vi(t)},LineString:function(t,e){return new El(Hh(t.arcs,e))},Polygon:function(t,e){var o,i,n=[];for(o=0,i=t.arcs.length;o<i;++o)n[o]=Hh(t.arcs[o],e);return new Ri(n)},MultiPoint:function(t,e,o){t=t.coordinates;var i,n;if(e&&o)for(i=0,n=t.length;i<n;++i)Kh(t[i],e,o);return new Cl(t)},MultiLineString:function(t,e){var o,i,n=[];for(o=0,i=t.arcs.length;o<i;++o)n[o]=Hh(t.arcs[o],e);return new Pl(n)},MultiPolygon:function(t,e){var o,i,n,r,s,a,l=[];for(s=0,a=t.arcs.length;s<a;++s){for(o=t.arcs[s],i=[],n=0,r=o.length;n<r;++n)i[n]=Hh(o[n],e);l[s]=i}return new Ml(l)}};Xy=zh.prototype,Xy.ad=function(){},Xy.ce=function(){},Xy.ee=function(){},Xy.og=function(){},Xy.Sc=function(){},h(Xh,up),Xh.prototype.yc=function(t,e){var o={featureType:this.i,featureNS:this.a};return og(o,dl(this,t,e||{})),o=[o],this.b.b["http://www.opengis.net/gml"].featureMember=Ja(yp.prototype.Xd),(o=al([],this.b.b,t,o,this.b))||(o=[]),o},Xh.prototype.j=function(t){return Ya(t)?Qh(t):Ka(t)?al({},Cb,t,[]):"string"==typeof t?(t=Xa(t),Qh(t)):void 0},Xh.prototype.l=function(t){return Ya(t)?Zh(this,t):Ka(t)?Jh(this,t):"string"==typeof t?(t=Xa(t),Zh(this,t)):void 0};var Sb={"http://www.opengis.net/gml":{boundedBy:tl(yp.prototype.We,"bounds")}},Pb={"http://www.opengis.net/wfs":{totalInserted:tl(Ep),totalUpdated:tl(Ep),totalDeleted:tl(Ep)}},wb={"http://www.opengis.net/ogc":{FeatureId:Ja(function(t){return t.getAttribute("fid")})}},Ab={"http://www.opengis.net/wfs":{Feature:function(t,e){sl(wb,t,e)}}},Cb={"http://www.opengis.net/wfs":{TransactionSummary:tl(function(t,e){return al({},Pb,t,e)},"transactionSummary"),InsertResults:tl(function(t,e){return al([],Ab,t,e)},"insertIds")}},Mb={"http://www.opengis.net/wfs":{PropertyName:el(Mp)}},xb={"http://www.opengis.net/wfs":{Insert:el(function(t,e,o){var i=o[o.length-1],i=za(i.featureNS,i.featureType);t.appendChild(i),xp.prototype.cj(i,e,o)}),Update:el(function(t,e,o){var i=o[o.length-1];f(void 0!==e.a,27);var n=i.featureType,r=i.featurePrefix,r=r||"feature",s=i.featureNS;if(t.setAttribute("typeName",r+":"+n),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+r,s),void 0!==(n=e.a)){for(var r=e.O(),s=[],a=0,l=r.length;a<l;a++){var p=e.get(r[a]);void 0!==p&&s.push({name:r[a],value:p})}pl({node:t,srsName:i.srsName},xb,il("Property"),s,o),$h(t,n)}}),Delete:el(function(t,e,o){var i=o[o.length-1];f(void 0!==e.a,26),o=i.featureType;var n=i.featurePrefix,n=n||"feature",i=i.featureNS;t.setAttribute("typeName",n+":"+o),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+n,i),void 0!==(e=e.a)&&$h(t,e)}),Property:el(function(t,e,o){var i=za("http://www.opengis.net/wfs","Name");t.appendChild(i),Mp(i,e.name),void 0!==e.value&&null!==e.value&&(i=za("http://www.opengis.net/wfs","Value"),t.appendChild(i),e.value instanceof Xo?xp.prototype.zd(i,e.value,o):Mp(i,e.value))}),Native:el(function(t,e){e.Hp&&t.setAttribute("vendorId",e.Hp),void 0!==e.lp&&t.setAttribute("safeToIgnore",e.lp),void 0!==e.value&&Mp(t,e.value)})}},Ib={"http://www.opengis.net/wfs":{Query:el(function(t,e,o){var i=o[o.length-1],n=i.featurePrefix,r=i.featureNS,s=i.propertyNames,a=i.srsName;t.setAttribute("typeName",(n?n+":":"")+e),a&&t.setAttribute("srsName",a),r&&t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+n,r),e=og({},i),e.node=t,pl(e,Mb,il("PropertyName"),s,o),(i=i.filter)&&(s=za("http://www.opengis.net/ogc","Filter"),t.appendChild(s),pl({node:s},Ib,il(i.Bc),[i],o))})},"http://www.opengis.net/ogc":{And:el(tc),Or:el(tc),Not:el(function(t,e,o){e=e.condition,pl({node:t},Ib,il(e.Bc),[e],o)}),BBOX:el(function(t,e,o){o[o.length-1].srsName=e.srsName,ic(t,e.geometryName),xp.prototype.zd(t,e.extent,o)}),Intersects:el(function(t,e,o){o[o.length-1].srsName=e.srsName,ic(t,e.geometryName),xp.prototype.zd(t,e.geometry,o)}),Within:el(function(t,e,o){o[o.length-1].srsName=e.srsName,ic(t,e.geometryName),xp.prototype.zd(t,e.geometry,o)}),PropertyIsEqualTo:el(ec),PropertyIsNotEqualTo:el(ec),PropertyIsLessThan:el(ec),PropertyIsLessThanOrEqualTo:el(ec),PropertyIsGreaterThan:el(ec),PropertyIsGreaterThanOrEqualTo:el(ec),PropertyIsNull:el(function(t,e){ic(t,e.b)}),PropertyIsBetween:el(function(t,e){ic(t,e.b)
;var o=za("http://www.opengis.net/ogc","LowerBoundary");t.appendChild(o),nc(o,""+e.a),o=za("http://www.opengis.net/ogc","UpperBoundary"),t.appendChild(o),nc(o,""+e.f)}),PropertyIsLike:el(function(t,e){t.setAttribute("wildCard",e.g),t.setAttribute("singleChar",e.i),t.setAttribute("escapeChar",e.f),void 0!==e.a&&t.setAttribute("matchCase",e.a.toString()),ic(t,e.b),nc(t,""+e.c)})}};Xh.prototype.o=function(t){var e=za("http://www.opengis.net/wfs","GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version","1.1.0");var o;if(t&&(t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&e.setAttribute("maxFeatures",t.maxFeatures),t.resultType&&e.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&e.setAttribute("startIndex",t.startIndex),void 0!==t.count&&e.setAttribute("count",t.count),o=t.filter,t.bbox)){f(t.geometryName,12);var i=np(t.geometryName,t.bbox,t.srsName);o=o?ip(o,i):i}return e.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.c),o={node:e,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.a,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:o,propertyNames:t.propertyNames?t.propertyNames:[]},f(Array.isArray(t.featureTypes),11),t=t.featureTypes,o=[o],i=og({},o[o.length-1]),i.node=e,pl(i,Ib,il("Query"),t,o),e},Xh.prototype.v=function(t,e,o,i){var n=[],r=za("http://www.opengis.net/wfs","Transaction");r.setAttribute("service","WFS"),r.setAttribute("version","1.1.0");var s,a;return i&&(s=i.gmlOptions?i.gmlOptions:{},i.handle&&r.setAttribute("handle",i.handle)),r.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.c),t&&(a={node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,srsName:i.srsName},og(a,s),pl(a,xb,il("Insert"),t,n)),e&&(a={node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,srsName:i.srsName},og(a,s),pl(a,xb,il("Update"),e,n)),o&&pl({node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,srsName:i.srsName},xb,il("Delete"),o,n),i.nativeElements&&pl({node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,srsName:i.srsName},xb,il("Native"),i.nativeElements,n),r},Xh.prototype.qg=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.Ze(t);return null},Xh.prototype.Ze=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(t=t.firstElementChild.firstElementChild,t=t.firstElementChild;t;t=t.nextElementSibling)if(0!==t.childNodes.length&&(1!==t.childNodes.length||3!==t.firstChild.nodeType)){var e=[{}];return this.b.We(t,e),Et(e.pop().srsName)}return null},h(rc,Wp);var Rb={Point:sc,LineString:ac,Polygon:lc,MultiPoint:function(t){var e=[];t=t.Ie();for(var o=0,i=t.length;o<i;++o)e.push("("+sc(t[o])+")");return e.join(",")},MultiLineString:function(t){var e=[];t=t.hd();for(var o=0,i=t.length;o<i;++o)e.push("("+ac(t[o])+")");return e.join(",")},MultiPolygon:function(t){var e=[];t=t.Od();for(var o=0,i=t.length;o<i;++o)e.push("("+lc(t[o])+")");return e.join(",")},GeometryCollection:function(t){var e=[];t=t.If();for(var o=0,i=t.length;o<i;++o)e.push(pc(t[o]));return e.join(",")}};Xy=rc.prototype,Xy.Wd=function(t,e){var o=this.ud(t,e);if(o){var i=new Va;return i.Sa(o),i}return null},Xy.lg=function(t,e){var o=[],i=this.ud(t,e);o=this.b&&"GeometryCollection"==i.T()?i.a:[i];for(var n=[],r=0,s=o.length;r<s;++r)i=new Va,i.Sa(o[r]),n.push(i);return n},Xy.ud=function(t,e){var o;return o=new uc(new hc(t)),dc(o),(o=yc(o))?yl(o,!1,e):null},Xy.be=function(t,e){var o=t.U();return o?this.Ad(o,e):""},Xy.Gg=function(t,e){if(1==t.length)return this.be(t[0],e);for(var o=[],i=0,n=t.length;i<n;++i)o.push(t[i].U());return o=new rp(o),this.Ad(o,e)},Xy.Ad=function(t,e){return pc(yl(t,!0,e))},Xy=uc.prototype,Xy.fg=function(){if(fc(this,2)){var t=gc(this);if(fc(this,3))return t}else if(_c(this))return null;throw Error(bc(this))},Xy.eg=function(){if(fc(this,2)){var t=mc(this);if(fc(this,3))return t}else if(_c(this))return[];throw Error(bc(this))},Xy.gg=function(){if(fc(this,2)){var t=vc(this);if(fc(this,3))return t}else if(_c(this))return[];throw Error(bc(this))},Xy.uo=function(){if(fc(this,2)){var t;if(2==this.b.type)for(t=[this.fg()];fc(this,5);)t.push(this.fg());else t=mc(this);if(fc(this,3))return t}else if(_c(this))return[];throw Error(bc(this))},Xy.to=function(){if(fc(this,2)){var t=vc(this);if(fc(this,3))return t}else if(_c(this))return[];throw Error(bc(this))},Xy.vo=function(){if(fc(this,2)){for(var t=[this.gg()];fc(this,5);)t.push(this.gg());if(fc(this,3))return t}else if(_c(this))return[];throw Error(bc(this))};var Tb={POINT:vi,LINESTRING:El,POLYGON:Ri,MULTIPOINT:Cl,MULTILINESTRING:Pl,MULTIPOLYGON:Ml},Lb={POINT:uc.prototype.fg,LINESTRING:uc.prototype.eg,POLYGON:uc.prototype.gg,MULTIPOINT:uc.prototype.uo,MULTILINESTRING:uc.prototype.to,MULTIPOLYGON:uc.prototype.vo};h(Ec,kh),Ec.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},Ec.prototype.b=function(t){return this.version=t.getAttribute("version").trim(),(t=al({version:this.version},Ob,t,[]))?t:null};var Gb=[null,"http://www.opengis.net/wms"],Ob=rl(Gb,{Service:tl(function(t,e){return al({},kb,t,e)}),Capability:tl(function(t,e){return al({},Nb,t,e)})}),Nb=rl(Gb,{Request:tl(function(t,e){return al({},zb,t,e)}),Exception:tl(function(t,e){return al([],Ub,t,e)}),Layer:tl(function(t,e){return al({},Bb,t,e)})}),kb=rl(Gb,{Name:tl(Pp),Title:tl(Pp),Abstract:tl(Pp),KeywordList:tl(Ac),OnlineResource:tl(Nh),ContactInformation:tl(function(t,e){return al({},Db,t,e)}),Fees:tl(Pp),AccessConstraints:tl(Pp),LayerLimit:tl(Ep),MaxWidth:tl(Ep),MaxHeight:tl(Ep)}),Db=rl(Gb,{ContactPersonPrimary:tl(function(t,e){return al({},jb,t,e)}),ContactPosition:tl(Pp),ContactAddress:tl(function(t,e){return al({},Fb,t,e)}),ContactVoiceTelephone:tl(Pp),ContactFacsimileTelephone:tl(Pp),ContactElectronicMailAddress:tl(Pp)}),jb=rl(Gb,{ContactPerson:tl(Pp),ContactOrganization:tl(Pp)}),Fb=rl(Gb,{AddressType:tl(Pp),Address:tl(Pp),City:tl(Pp),StateOrProvince:tl(Pp),PostCode:tl(Pp),Country:tl(Pp)}),Ub=rl(Gb,{Format:Ja(Pp)}),Bb=rl(Gb,{Name:tl(Pp),Title:tl(Pp),Abstract:tl(Pp),KeywordList:tl(Ac),CRS:$a(Pp),EX_GeographicBoundingBox:tl(function(t,e){var o=al({},Wb,t,e);if(o){var i=o.westBoundLongitude,n=o.southBoundLatitude,r=o.eastBoundLongitude,o=o.northBoundLatitude;if(void 0!==i&&void 0!==n&&void 0!==r&&void 0!==o)return[i,n,r,o]}}),BoundingBox:$a(function(t){var e=[bp(t.getAttribute("minx")),bp(t.getAttribute("miny")),bp(t.getAttribute("maxx")),bp(t.getAttribute("maxy"))],o=[bp(t.getAttribute("resx")),bp(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:e,res:o}}),Dimension:$a(function(t){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:mp(t.getAttribute("multipleValues")),nearestValue:mp(t.getAttribute("nearestValue")),current:mp(t.getAttribute("current")),values:Pp(t)}}),Attribution:tl(function(t,e){return al({},Vb,t,e)}),AuthorityURL:$a(function(t,e){var o=Sc(t,e);if(o)return o.name=t.getAttribute("name"),o}),Identifier:$a(Pp),MetadataURL:$a(function(t,e){var o=Sc(t,e);if(o)return o.type=t.getAttribute("type"),o}),DataURL:$a(Sc),FeatureListURL:$a(Sc),Style:$a(function(t,e){return al({},Kb,t,e)}),MinScaleDenominator:tl(_p),MaxScaleDenominator:tl(_p),Layer:$a(function(t,e){var o=e[e.length-1],i=al({},Bb,t,e);if(i){var n=mp(t.getAttribute("queryable"));return void 0===n&&(n=o.queryable),i.queryable=void 0!==n&&n,n=Sp(t.getAttribute("cascaded")),void 0===n&&(n=o.cascaded),i.cascaded=n,n=mp(t.getAttribute("opaque")),void 0===n&&(n=o.opaque),i.opaque=void 0!==n&&n,n=mp(t.getAttribute("noSubsets")),void 0===n&&(n=o.noSubsets),i.noSubsets=void 0!==n&&n,(n=bp(t.getAttribute("fixedWidth")))||(n=o.fixedWidth),i.fixedWidth=n,(n=bp(t.getAttribute("fixedHeight")))||(n=o.fixedHeight),i.fixedHeight=n,["Style","CRS","AuthorityURL"].forEach(function(t){t in o&&(i[t]=(i[t]||[]).concat(o[t]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(t){t in i||(i[t]=o[t])}),i}})}),Vb=rl(Gb,{Title:tl(Pp),OnlineResource:tl(Nh),LogoURL:tl(wc)}),Wb=rl(Gb,{westBoundLongitude:tl(_p),eastBoundLongitude:tl(_p),southBoundLatitude:tl(_p),northBoundLatitude:tl(_p)}),zb=rl(Gb,{GetCapabilities:tl(Pc),GetMap:tl(Pc),GetFeatureInfo:tl(Pc)}),Hb=rl(Gb,{Format:$a(Pp),DCPType:$a(function(t,e){return al({},qb,t,e)})}),qb=rl(Gb,{HTTP:tl(function(t,e){return al({},Yb,t,e)})}),Yb=rl(Gb,{Get:tl(Sc),Post:tl(Sc)}),Kb=rl(Gb,{Name:tl(Pp),Title:tl(Pp),Abstract:tl(Pp),LegendURL:$a(wc),StyleSheetURL:tl(Sc),StyleURL:tl(Sc)}),Xb=rl(Gb,{Format:tl(Pp),OnlineResource:tl(Nh)}),Zb=rl(Gb,{Keyword:Ja(Pp)});h(Cc,up),Cc.prototype.yc=function(t,e){var i={};e&&og(i,dl(this,t,e));var r=[i];t.setAttribute("namespaceURI",this.a);var s=t.localName,i=[];if(t.childNodes.length){if("msGMLOutput"==s)for(var a=0,l=t.childNodes.length;a<l;a++){var p=t.childNodes[a];if(p.nodeType===Node.ELEMENT_NODE){var h=r[0],c=p.localName.replace("_layer","");if(!this.c||o(this.c,c)){c+="_feature",h.featureType=c,h.featureNS=this.a;var u={};u[c]=Ja(this.b.ig,this.b),h=rl([h.featureNS,null],u),p.setAttribute("namespaceURI",this.a),(p=al([],h,p,r,this.b))&&n(i,p)}}}"FeatureCollection"==s&&(r=al([],this.b.b,t,[{}],this.b))&&(i=r)}return i},Cc.prototype.Fg=function(){},Cc.prototype.Yb=function(){},Cc.prototype.de=function(){},h(Mc,kh),Mc.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},Mc.prototype.b=function(t){var e=t.getAttribute("version").trim(),o=this.f.b(t);return o?(o.version=e,(o=al(o,$b,t,[]))?o:null):null};var Jb=[null,"http://www.opengis.net/wmts/1.0"],Qb=[null,"http://www.opengis.net/ows/1.1"],$b=rl(Jb,{Contents:tl(function(t,e){return al({},tE,t,e)})}),tE=rl(Jb,{Layer:$a(function(t,e){return al({},eE,t,e)}),TileMatrixSet:$a(function(t,e){return al({},lE,t,e)})}),eE=rl(Jb,{Style:$a(function(t,e){var o=al({},oE,t,e);if(o){var i="true"===t.getAttribute("isDefault");return o.isDefault=i,o}}),Format:$a(Pp),TileMatrixSetLink:$a(function(t,e){return al({},iE,t,e)}),Dimension:$a(function(t,e){return al({},sE,t,e)}),ResourceURL:$a(function(t){var e=t.getAttribute("format"),o=t.getAttribute("template");t=t.getAttribute("resourceType");var i={};return e&&(i.format=e),o&&(i.template=o),t&&(i.resourceType=t),i})},rl(Qb,{Title:tl(Pp),Abstract:tl(Pp),WGS84BoundingBox:tl(function(t,e){var o=al([],aE,t,e);if(2==o.length)return I(o)}),Identifier:tl(Pp)})),oE=rl(Jb,{LegendURL:$a(function(t){var e={};return e.format=t.getAttribute("format"),e.href=Nh(t),e})},rl(Qb,{Title:tl(Pp),Identifier:tl(Pp)})),iE=rl(Jb,{TileMatrixSet:tl(Pp),TileMatrixSetLimits:tl(function(t,e){return al([],nE,t,e)})}),nE=rl(Jb,{TileMatrixLimits:Ja(function(t,e){return al({},rE,t,e)})}),rE=rl(Jb,{TileMatrix:tl(Pp),MinTileRow:tl(Ep),MaxTileRow:tl(Ep),MinTileCol:tl(Ep),MaxTileCol:tl(Ep)}),sE=rl(Jb,{Default:tl(Pp),Value:$a(Pp)},rl(Qb,{Identifier:tl(Pp)})),aE=rl(Qb,{LowerCorner:Ja(xc),UpperCorner:Ja(xc)}),lE=rl(Jb,{WellKnownScaleSet:tl(Pp),TileMatrix:$a(function(t,e){return al({},pE,t,e)})},rl(Qb,{SupportedCRS:tl(Pp),Identifier:tl(Pp)})),pE=rl(Jb,{TopLeftCorner:tl(xc),ScaleDenominator:tl(_p),TileWidth:tl(Ep),TileHeight:tl(Ep),MatrixWidth:tl(Ep),MatrixHeight:tl(Ep)},rl(Qb,{Identifier:tl(Pp)}));h(Ic,pe),Xy=Ic.prototype,Xy.ra=function(){this.Ee(!1),pe.prototype.ra.call(this)},Xy.hm=function(){var t=this.Gh();t&&(this.i=wt(Et("EPSG:4326"),t),this.a&&this.set("position",this.i(this.a)))},Xy.im=function(){if(Rg){var t=this.Hh();t&&void 0===this.c?this.c=navigator.geolocation.watchPosition(this.Co.bind(this),this.Do.bind(this),this.th()):t||void 0===this.c||(navigator.geolocation.clearWatch(this.c),this.c=void 0)}},Xy.Co=function(t){t=t.coords,this.set("accuracy",t.accuracy),this.set("altitude",null===t.altitude?void 0:t.altitude),this.set("altitudeAccuracy",null===t.altitudeAccuracy?void 0:t.altitudeAccuracy),this.set("heading",null===t.heading?void 0:P(t.heading)),this.a?(this.a[0]=t.longitude,this.a[1]=t.latitude):this.a=[t.longitude,t.latitude];var e=this.i(this.a);this.set("position",e),this.set("speed",null===t.speed?void 0:t.speed),t=Li(Xg,this.a,t.accuracy),t.Dc(this.i),this.set("accuracyGeometry",t),this.s()},Xy.Do=function(t){t.type="error",this.Ee(!1),this.b(t)},Xy.hk=function(){return this.get("accuracy")},Xy.ik=function(){return this.get("accuracyGeometry")||null},Xy.kk=function(){return this.get("altitude")},Xy.lk=function(){return this.get("altitudeAccuracy")},Xy.fm=function(){return this.get("heading")},Xy.gm=function(){return this.get("position")},Xy.Gh=function(){return this.get("projection")},Xy.Rk=function(){return this.get("speed")},Xy.Hh=function(){return this.get("tracking")},Xy.th=function(){return this.get("trackingOptions")},Xy.Ih=function(t){this.set("projection",t)},Xy.Ee=function(t){this.set("tracking",t)},Xy.Si=function(t){this.set("trackingOptions",t)},h(Rc,Qo),Xy=Rc.prototype,Xy.clone=function(){var t=new Rc(null);return ti(t,this.ka,this.B.slice()),t.s(),t},Xy.Gb=function(t,e,o,i){var n=this.B;t-=n[0];var r=e-n[1];if((e=t*t+r*r)<i){if(e)for(i=this.Vd()/Math.sqrt(e),o[0]=n[0]+i*t,o[1]=n[1]+i*r,i=2;i<this.a;++i)o[i]=n[i];else for(i=0;i<this.a;++i)o[i]=n[i];return o.length=this.a,e}return i},Xy.Oc=function(t,e){var o=this.B,i=t-o[0],o=e-o[1];return i*i+o*o<=Tc(this)},Xy.Ba=function(){return this.B.slice(0,this.a)},Xy.ne=function(t){var e=this.B,o=e[this.a]-e[0];return j(e[0]-o,e[1]-o,e[0]+o,e[1]+o,t)},Xy.Vd=function(){return Math.sqrt(Tc(this))},Xy.T=function(){return"Circle"},Xy.Xa=function(t){var e=this.D();return!!ot(t,e)&&(e=this.Ba(),t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||H(t,this.sb,this))},Xy.wb=function(t){var e=this.a,o=t.slice();o[e]=o[0]+(this.B[e]-this.B[0]);var i;for(i=1;i<e;++i)o[e+i]=t[i];ti(this,this.ka,o),this.s()},Xy.yg=function(t,e,o){if(t){ei(this,o,t,0),this.B||(this.B=[]),o=this.B,t=pi(o,t),o[t++]=o[0]+e;var i;for(e=1,i=this.a;e<i;++e)o[t++]=o[e];o.length=t}else ti(this,"XY",null);this.s()},Xy.X=function(){},Xy.pa=function(){},Xy.Wc=function(t){this.B[this.a]=this.B[0]+t,this.s()};var hE=new Ps({color:"rgba(0,0,0,0.2)"}),cE=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];Xy=Nc.prototype,Xy.jm=function(){return this.j},Xy.Gk=function(){return this.b},Xy.Nk=function(){return this.a},Xy.wh=function(t){var e=t.vectorContext,o=t.frameState,i=o.extent;t=o.viewState;var n=t.center,r=t.projection,s=t.resolution;if(t=o.pixelRatio,t=s*s/(4*t*t),!this.i||!St(this.i,r)){var a=Et("EPSG:4326"),l=r.D(),p=r.g,h=xt(p,a,r),c=p[2],u=p[1],d=p[0],f=h[3],y=h[2],g=h[1],h=h[0];this.g=p[3],this.f=c,this.l=u,this.c=d,this.u=f,this.A=y,this.C=g,this.G=h,this.o=Pt(a,r),this.I=Pt(r,a),this.v=this.I(X(l)),this.i=r}for(r.a&&(r=r.D(),a=et(r),(o=o.focus[0])<r[0]||o>r[2])&&(o=a*Math.ceil((r[0]-o)/a),i=[i[0]+o,i[1],i[2]+o,i[3]]),o=this.v[0],r=this.v[1],a=-1,p=Math.pow(this.R*s,2),c=[],u=[],s=0,l=cE.length;s<l&&(d=cE[s]/2,c[0]=o-d,c[1]=r-d,u[0]=o+d,u[1]=r+d,this.o(c,c),this.o(u,u),!((d=Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2))<=p));++s)a=cE[s];if(-1==(s=a))this.b.length=this.a.length=0;else{for(o=this.I(n),n=o[0],o=o[1],r=this.qa,a=[Math.max(i[0],this.G),Math.max(i[1],this.C),Math.min(i[2],this.A),Math.min(i[3],this.u)],a=xt(a,this.i,"EPSG:4326"),p=a[3],u=a[1],n=Math.floor(n/s)*s,c=_(n,this.c,this.f),l=kc(this,c,u,p,t,i,0),a=0;c!=this.c&&a++<r;)c=Math.max(c-s,this.c),l=kc(this,c,u,p,t,i,l);for(c=_(n,this.c,this.f),a=0;c!=this.f&&a++<r;)c=Math.min(c+s,this.f),l=kc(this,c,u,p,t,i,l);for(this.b.length=l,o=Math.floor(o/s)*s,n=_(o,this.l,this.g),l=Dc(this,n,t,i,0),a=0;n!=this.l&&a++<r;)n=Math.max(n-s,this.l),l=Dc(this,n,t,i,l);for(n=_(o,this.l,this.g),a=0;n!=this.g&&a++<r;)n=Math.min(n+s,this.g),l=Dc(this,n,t,i,l);this.a.length=l}for(e.Na(null,this.ta),t=0,n=this.b.length;t<n;++t)s=this.b[t],e.Qb(s,null);for(t=0,n=this.a.length;t<n;++t)s=this.a[t],e.Qb(s,null)},Xy.setMap=function(t){this.j&&(this.j.K("postcompose",this.wh,this),this.j.render()),t&&(t.J("postcompose",this.wh,this),t.render()),this.j=t},h(jc,se),jc.prototype.s=function(){this.b("change")},jc.prototype.D=function(){return this.extent},jc.prototype.V=function(){return this.state},h(Fc,jc),Xy=Fc.prototype,Xy.Z=function(t){if(void 0!==t){var e;return(t=u(t))in this.c?this.c[t]:(e=lt(this.c)?this.M:this.M.cloneNode(!1),this.c[t]=e)}return this.M},Xy.mm=function(){this.state=3,this.f.forEach(te),this.f=null,this.s()},Xy.nm=function(){void 0===this.resolution&&(this.resolution=J(this.extent)/this.M.height),this.state=2,this.f.forEach(te),this.f=null,this.s()},Xy.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.s(),this.f=[Qt(this.M,"error",this.mm,this),Qt(this.M,"load",this.nm,this)],this.g(this,this.l))},Xy.zg=function(t){this.M=t},h(Uc,jc),Uc.prototype.g=function(t){this.state=t?3:2,this.s()},Uc.prototype.load=function(){0==this.state&&(this.state=1,this.s(),this.c(this.g.bind(this)))},Uc.prototype.Z=function(){return this.f},h(Bc,se),Bc.prototype.s=function(){this.b("change")},Bc.prototype.ib=function(){return this.key+"/"+this.Ga},Bc.prototype.i=function(){return this.Ga},Bc.prototype.V=function(){return this.state},h(Wc,Bc),Xy=Wc.prototype,Xy.ra=function(){1==this.state&&zc(this),this.a&&ie(this.a),this.state=5,this.s(),Bc.prototype.ra.call(this)},Xy.Z=function(){return this.M},Xy.ib=function(){return this.g},Xy.km=function(){this.state=3,zc(this),this.s()},Xy.lm=function(){this.state=this.M.naturalWidth&&this.M.naturalHeight?2:4,zc(this),this.s()},Xy.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.s(),this.c=[Qt(this.M,"error",this.km,this),Qt(this.M,"load",this.lm,this)],this.j(this,this.g))},h(Hc,Xi),Hc.prototype.l=function(t,e){var o=e.target.result,i=this.v,n=this.j;n||(n=i.$().o);var r,s,i=this.g,a=[];for(r=0,s=i.length;r<s;++r){var l=new i[r],p={featureProjection:n};try{a=l.Qa(o,p)}catch(t){a=null}if(a&&0<a.length)break}this.b(new Kc(uE,t,a,n))},Hc.prototype.setMap=function(t){this.a&&(this.a.forEach(te),this.a=null),Xi.prototype.setMap.call(this,t),t&&(t=this.target?this.target:t.c,this.a=[Jt(t,"drop",qc,this),Jt(t,"dragenter",Yc,this),Jt(t,"dragover",Yc,this),Jt(t,"drop",Yc,this)])};var uE="addfeatures";h(Kc,ne),h(Xc,cn),h($c,Pr),$c.prototype.Wa=function(t,e){if(this.$a){var o=pr(this.eb,this.$a.slice());t.translate(o[0],o[1]),t.rotate(e)}t.fill(),this.$a&&t.setTransform.apply(t,this.ea)},$c.prototype.i=function(t,e,o,i,n){ou(this,t,e,o,i,n,this.a,void 0,void 0)},$c.prototype.Je=c,$c.prototype.Gf=function(){return this.Y},h(ru,$c),ru.prototype.qc=function(t,e){if(this.M){eu(this,e);var o=t.ha(),i=this.coordinates.length,o=tu(this,o,0,o.length,t.sa(),!1,!1);this.a.push([4,i,o,this.M,this.f,this.g,this.l,this.j,this.o,this.v,this.I,this.u,this.A,this.C,this.G]),this.b.push([4,i,o,this.S,this.f,this.g,this.l,this.j,this.o,this.v,this.I,this.u,this.A,this.C,this.G]),nu(this,e)}},ru.prototype.oc=function(t,e){if(this.M){eu(this,e);var o=t.ha(),i=this.coordinates.length,o=tu(this,o,0,o.length,t.sa(),!1,!1);this.a.push([4,i,o,this.M,this.f,this.g,this.l,this.j,this.o,this.v,this.I,this.u,this.A,this.C,this.G]),this.b.push([4,i,o,this.S,this.f,this.g,this.l,this.j,this.o,this.v,this.I,this.u,this.A,this.C,this.G]),nu(this,e)}},ru.prototype.Je=function(){iu(this),this.g=this.f=void 0,this.M=this.S=null,this.G=this.C=this.u=this.I=this.v=this.o=this.j=this.A=this.l=void 0},ru.prototype.Vb=function(t){var e=t.Hc(),o=t.jc(),i=t.cg(1),n=t.Z(1),r=t.Pc();this.f=e[0],this.g=e[1],this.S=i,this.M=n,this.l=o[1],this.j=t.g,this.o=r[0],this.v=r[1],this.I=t.o,this.u=t.l,this.A=t.c,this.C=t.v,this.G=o[0]},h(su,$c),Xy=su.prototype,Xy.Gf=function(){return this.g||(this.g=T(this.Y),0<this.c&&R(this.g,this.resolution*(this.c+1)/2,this.g)),this.g},Xy.Qb=function(t,e){var o=this.f,i=o.lineWidth;void 0!==o.strokeStyle&&void 0!==i&&(lu(this),eu(this,e),this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1],[1]),o=t.ha(),au(this,o,0,o.length,t.sa()),this.b.push([12]),nu(this,e))},Xy.nc=function(t,e){var o=this.f,i=o.lineWidth;if(void 0!==o.strokeStyle&&void 0!==i){lu(this),eu(this,e),this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1],[1]);var n,r,o=t.Rb(),i=t.ha(),s=t.sa(),a=0;for(n=0,r=o.length;n<r;++n)a=au(this,i,a,o[n],s);this.b.push([12]),nu(this,e)}},Xy.Je=function(){this.f.Sf!=this.coordinates.length&&this.a.push([12]),iu(this),this.f=null},Xy.Na=function(t,e){var o=e.a;this.f.strokeStyle=_e(o||im),o=e.i,this.f.lineCap=void 0!==o?o:"round",o=e.f,this.f.lineDash=o||om,o=e.g,this.f.lineDashOffset=o||0,o=e.l,this.f.lineJoin=void 0!==o?o:"round",o=e.c,this.f.lineWidth=void 0!==o?o:1,o=e.j,this.f.miterLimit=void 0!==o?o:10,this.f.lineWidth>this.c&&(this.c=this.f.lineWidth,this.g=null)},h(pu,$c),Xy=pu.prototype,Xy.$b=function(t,e){var o=this.f,i=o.strokeStyle;if(void 0!==o.fillStyle||void 0!==i){cu(this,t),eu(this,e),this.b.push([9,me(em)]),void 0!==o.strokeStyle&&this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var n=t.ha(),i=this.coordinates.length;tu(this,n,0,n.length,t.sa(),!1,!1),n=[1],i=[2,i],this.a.push(n,i),this.b.push(n,i),i=[7],this.b.push(i),void 0!==o.fillStyle&&this.a.push(i),void 0!==o.strokeStyle&&(o=[12],this.a.push(o),this.b.push(o)),nu(this,e)}},Xy.rc=function(t,e){var o=this.f;cu(this,t),eu(this,e),this.b.push([9,me(em)]),void 0!==o.strokeStyle&&this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var o=t.Rb();hu(this,t.fc(),0,o,t.sa()),nu(this,e)},Xy.pc=function(t,e){var o=this.f,i=o.strokeStyle;if(void 0!==o.fillStyle||void 0!==i){cu(this,t),eu(this,e),this.b.push([9,me(em)]),void 0!==o.strokeStyle&&this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var n,r,o=t.c,i=Il(t),s=t.sa(),a=0;for(n=0,r=o.length;n<r;++n)a=hu(this,i,a,o[n],s);nu(this,e)}},Xy.Je=function(){iu(this),this.f=null;var t=this.oa;if(t){var e,o,i=this.coordinates;for(e=0,o=i.length;e<o;++e)i[e]=t*Math.round(i[e]/t)}},Xy.Gf=function(){return this.g||(this.g=T(this.Y),0<this.c&&R(this.g,this.resolution*(this.c+1)/2,this.g)),this.g},Xy.Na=function(t,e){var o=this.f;if(t){var i=t.b;o.fillStyle=_e(i||em)}else o.fillStyle=void 0;e?(i=e.a,o.strokeStyle=_e(i||im),i=e.i,o.lineCap=void 0!==i?i:"round",i=e.f,o.lineDash=i?i.slice():om,i=e.g,o.lineDashOffset=i||0,i=e.l,o.lineJoin=void 0!==i?i:"round",i=e.c,o.lineWidth=void 0!==i?i:1,i=e.j,o.miterLimit=void 0!==i?i:10,o.lineWidth>this.c&&(this.c=o.lineWidth,this.g=null)):(o.strokeStyle=void 0,o.lineCap=void 0,o.lineDash=null,o.lineDashOffset=void 0,o.lineJoin=void 0,o.lineWidth=void 0,o.miterLimit=void 0)},h(uu,$c),uu.prototype.xc=function(t,e,o,i,n,r){if(""!==this.Fa&&this.l&&(this.f||this.g)){if(this.f){n=this.f;var s=this.A;if(!s||s.fillStyle!=n.fillStyle){var a=[9,n.fillStyle];this.a.push(a),this.b.push(a),s?s.fillStyle=n.fillStyle:this.A={fillStyle:n.fillStyle}}}this.g&&(n=this.g,(s=this.C)&&s.lineCap==n.lineCap&&s.lineDash==n.lineDash&&s.lineDashOffset==n.lineDashOffset&&s.lineJoin==n.lineJoin&&s.lineWidth==n.lineWidth&&s.miterLimit==n.miterLimit&&s.strokeStyle==n.strokeStyle||(a=[10,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset,!1,1],this.a.push(a),this.b.push(a),s?(s.lineCap=n.lineCap,s.lineDash=n.lineDash,s.lineDashOffset=n.lineDashOffset,s.lineJoin=n.lineJoin,s.lineWidth=n.lineWidth,s.miterLimit=n.miterLimit,s.strokeStyle=n.strokeStyle):this.C={lineCap:n.lineCap,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset,lineJoin:n.lineJoin,lineWidth:n.lineWidth,miterLimit:n.miterLimit,strokeStyle:n.strokeStyle})),n=this.l,s=this.G,s&&s.font==n.font&&s.textAlign==n.textAlign&&s.textBaseline==n.textBaseline||(a=[11,n.font,n.textAlign,n.textBaseline],this.a.push(a),this.b.push(a),s?(s.font=n.font,s.textAlign=n.textAlign,s.textBaseline=n.textBaseline):this.G={font:n.font,textAlign:n.textAlign,textBaseline:n.textBaseline}),eu(this,r),n=this.coordinates.length,t=tu(this,t,e,o,i,!1,!1),t=[5,n,t,this.Fa,this.j,this.o,this.I,this.u,!!this.f,!!this.g,this.v],this.a.push(t),this.b.push(t),nu(this,r)}},uu.prototype.Tb=function(t){if(t){var e=t.Ca();e?(e=e.b,e=_e(e||em),this.f?this.f.fillStyle=e:this.f={fillStyle:e}):this.f=null;var o=t.Da();if(o){var e=o.a,i=o.i,n=o.f,r=o.g,s=o.l,a=o.c,o=o.j,i=void 0!==i?i:"round",n=n?n.slice():om,r=void 0!==r?r:0,s=void 0!==s?s:"round",a=void 0!==a?a:1,o=void 0!==o?o:10,e=_e(e||im);if(this.g){var l=this.g;l.lineCap=i,l.lineDash=n,l.lineDashOffset=r,l.lineJoin=s,l.lineWidth=a,l.miterLimit=o,l.strokeStyle=e}else this.g={lineCap:i,lineDash:n,lineDashOffset:r,lineJoin:s,lineWidth:a,miterLimit:o,strokeStyle:e}}else this.g=null;var p=t.a,e=t.f,i=t.c,n=t.j,a=t.i,o=t.b,r=t.Pa(),s=t.g,l=t.l;t=void 0!==p?p:"10px sans-serif",s=void 0!==s?s:"center",l=void 0!==l?l:"middle",this.l?(p=this.l,p.font=t,p.textAlign=s,p.textBaseline=l):this.l={font:t,textAlign:s,textBaseline:l},this.Fa=void 0!==r?r:"",this.j=void 0!==e?e:0,this.o=void 0!==i?i:0,this.v=void 0!==n&&n,this.I=void 0!==a?a:0,this.u=void 0!==o?o:1}else this.Fa=""},h(du,Gr);var dE={0:[[!0]]};du.prototype.Aa=function(t,e,o,i,n,r){i=Math.round(i);var s=2*i+1,a=dr(this.j,i+.5,i+.5,1/e,-1/e,-o,-t[0],-t[1]),l=this.l;l.canvas.width!==s||l.canvas.height!==s?(l.canvas.width=s,l.canvas.height=s):l.clearRect(0,0,s,s);var p;void 0!==this.g&&(p=D(),W(p,t),R(p,e*(this.g+i),p));var h=yu(i);return vu(this,l,a,o,n,function(t){for(var e=l.getImageData(0,0,s,s).data,o=0;o<s;o++)for(var i=0;i<s;i++)if(h[o][i]&&0<e[4*(i*s+o)+3])return(t=r(t))?t:void l.clearRect(0,0,s,s)},p)},du.prototype.b=function(t,e){var o=void 0!==t?t.toString():"0",i=this.a[o];return void 0===i&&(i={},this.a[o]=i),o=i[e],void 0===o&&(o=new fE[e](this.I,this.c,this.v,this.o),i[e]=o),o},du.prototype.f=function(){return lt(this.a)},du.prototype.i=function(t,o,i,n,r,s){var a=Object.keys(this.a).map(Number);a.sort(e);var l=mu(this,i);t.save(),t.beginPath(),t.moveTo(l[0],l[1]),t.lineTo(l[2],l[3]),t.lineTo(l[4],l[5]),t.lineTo(l[6],l[7]),t.clip(),s=s||nm;var p,h,c,u,d,l=0;for(p=a.length;l<p;++l)for(u=this.a[a[l].toString()],h=0,c=s.length;h<c;++h)void 0!==(d=u[s[h]])&&d.i(t,o,i,n,r);t.restore()};var fE={Circle:pu,Image:ru,LineString:su,Polygon:pu,Text:uu};h(_u,le),_u.prototype.Aa=c,_u.prototype.Ke=Ko,_u.prototype.Cf=function(t,e,o){return function(i,n){return Hf(t,e,i,n,function(t){o[i]||(o[i]={}),o[i][t.Ga.toString()]=t})}},_u.prototype.ea=function(t){2===t.target.V()&&Eu(this)},h(Mu,_u),Mu.prototype.v=function(t,e,o,i){if(this.Aa(t,e,0,Yo,this))return o.call(i,this.a,null)},Mu.prototype.Ue=function(t,e,o,i){Iu(this,"postcompose",t,e,i)};var yE={Point:function(t,e,o,i){var n=o.Z();if(n){if(2!=n.Oe())return;var r=t.b(o.za(),"Image");r.Vb(n),r.qc(e,i)}(n=o.Pa())&&(t=t.b(o.za(),"Text"),t.Tb(n),t.xc(e.ha(),0,2,2,e,i))},LineString:function(t,e,o,i){var n=o.Da();if(n){var r=t.b(o.za(),"LineString");r.Na(null,n),r.Qb(e,i)}(n=o.Pa())&&(t=t.b(o.za(),"Text"),t.Tb(n),t.xc(Sl(e),0,2,2,e,i))},Polygon:function(t,e,o,i){var n=o.Ca(),r=o.Da();if(n||r){var s=t.b(o.za(),"Polygon");s.Na(n,r),s.rc(e,i)}(n=o.Pa())&&(t=t.b(o.za(),"Text"),t.Tb(n),t.xc(Ti(e),0,2,2,e,i))},MultiPoint:function(t,e,o,i){var n=o.Z();if(n){if(2!=n.Oe())return;var r=t.b(o.za(),"Image");r.Vb(n),r.oc(e,i)}(n=o.Pa())&&(t=t.b(o.za(),"Text"),t.Tb(n),o=e.ha(),t.xc(o,0,o.length,e.sa(),e,i))},MultiLineString:function(t,e,o,i){var n=o.Da();if(n){var r=t.b(o.za(),"LineString");r.Na(null,n),r.nc(e,i)}(n=o.Pa())&&(t=t.b(o.za(),"Text"),t.Tb(n),o=wl(e),t.xc(o,0,o.length,2,e,i))},MultiPolygon:function(t,e,o,i){var n=o.Ca(),r=o.Da();if(r||n){var s=t.b(o.za(),"Polygon");s.Na(n,r),s.pc(e,i)}(n=o.Pa())&&(t=t.b(o.za(),"Text"),t.Tb(n),o=xl(e),t.xc(o,0,o.length,2,e,i))},GeometryCollection:function(t,e,o,i){e=e.a;var n,r;for(n=0,r=e.length;n<r;++n)(0,yE[e[n].T()])(t,e[n],o,i)},Circle:function(t,e,o,i){var n=o.Ca(),r=o.Da();if(n||r){var s=t.b(o.za(),"Circle");s.Na(n,r),s.$b(e,i)}(n=o.Pa())&&(t=t.b(o.za(),"Text"),t.Tb(n),t.xc(e.Ba(),0,2,2,e,i))}};h(Ou,Mu),Ou.prototype.I=function(t,e,o){var i=t.extent,n=t.pixelRatio,r=e.De?t.skippedFeatureUids:{},s=t.viewState,a=s.projection,s=s.rotation,l=a.D(),p=this.a.la(),h=Ru(this,t,0);Iu(this,"precompose",o,t,h);var c=e.extent,u=void 0!==c;if(u&&xu(o,t,c),(c=this.i)&&!c.f()){var d,f=0,y=0;if(ae(this.a,"render")){d=o.canvas.width;var g=o.canvas.height;if(s){var m=Math.round(Math.sqrt(d*d+g*g)),f=(m-d)/2,y=(m-g)/2;d=g=m}this.g.canvas.width=d,this.g.canvas.height=g,d=this.g}else d=o;g=d.globalAlpha,d.globalAlpha=e.opacity,d!=o&&d.translate(f,y);var m=t.size[0]*n,v=t.size[1]*n;if(Sr(d,-s,m/2,v/2),c.i(d,n,h,s,r),p.G&&a.a&&!O(l,i)){for(var a=i[0],p=et(l),_=0;a<l[0];)--_,h=p*_,h=Ru(this,t,h),c.i(d,n,h,s,r),a+=p;for(_=0,a=i[2];a>l[2];)++_,h=p*_,h=Ru(this,t,h),c.i(d,n,h,s,r),a-=p;h=Ru(this,t,0)}Sr(d,s,m/2,v/2),d!=o&&(Iu(this,"render",d,t,h),o.drawImage(d.canvas,-f,-y),d.translate(-f,-y)),d.globalAlpha=g}u&&o.restore(),this.Ue(o,t,e,h)},Ou.prototype.Aa=function(t,e,o,i,n){if(this.i){var r=this.a,s={};return this.i.Aa(t,e.viewState.resolution,e.viewState.rotation,o,{},function(t){var e=u(t).toString();if(!(e in s))return s[e]=!0,i.call(n,t,r)})}},Ou.prototype.A=function(){Eu(this)},Ou.prototype.qd=function(t){function e(t){var e,i=t.Nc();if(i?e=i.call(t,p):(i=o.i)&&(e=i(t,p)),e){if(e){if(i=!1,Array.isArray(e))for(var n=0,r=e.length;n<r;++n)i=Gu(u,t,e[n],Lu(p,h),this.A,this)||i;else i=Gu(u,t,e,Lu(p,h),this.A,this)||i;t=i}else t=!1;this.c=this.c||t}}var o=this.a,i=o.la();Pu(t.attributions,i.l),wu(t,i);var n=t.viewHints[0],r=t.viewHints[1],s=o.ea,a=o.ia;if(!this.c&&!s&&n||!a&&r)return!0;var l=t.extent,a=t.viewState,n=a.projection,p=a.resolution,h=t.pixelRatio,r=o.f,c=o.c,s=o.get(vE);if(void 0===s&&(s=Tu),l=R(l,c*p),c=a.projection.D(),i.G&&a.projection.a&&!O(c,t.extent)&&(t=Math.max(et(l)/2,et(c)),l[0]=c[0]-t,l[2]=c[2]+t),!this.c&&this.o==p&&this.u==r&&this.j==s&&O(this.l,l))return!0;this.i=null,this.c=!1;var u=new du(.5*p/h,l,p,i.Ha,o.c);if(i.Ud(l,p,n),s){var d=[];i.ac(l,function(t){d.push(t)},this),d.sort(s),d.forEach(e,this)}else i.ac(l,e,this);return gu(u),this.o=p,this.u=r,this.j=s,this.l=l,this.i=u,!0},h(Nu,Nr);var gE=new Nu;h(ku,kr);var mE=new ku;h(ju,_u),ju.prototype.ai=function(t,e,o){Uu(this,"precompose",o,t),Qr(o,34962,this.Y);var i,n=o.b,r=os(o,gE,mE);this.I?i=this.I:this.I=i=new Du(n,r),o.Rc(r)&&(n.enableVertexAttribArray(i.b),n.vertexAttribPointer(i.b,2,5126,!1,16,0),n.enableVertexAttribArray(i.a),n.vertexAttribPointer(i.a,2,5126,!1,16,8),n.uniform1i(i.i,0)),n.uniformMatrix4fv(i.g,!1,Br(this.C,this.v)),n.uniformMatrix4fv(i.c,!1,Br(this.C,this.u)),n.uniform1f(i.f,e.opacity),n.bindTexture(3553,this.Fb),n.drawArrays(5,0,4),Uu(this,"postcompose",o,t)},ju.prototype.$f=function(){this.g=this.Fb=null,this.l=void 0},h(Bu,ju),Xy=Bu.prototype,Xy.ai=function(t,e,o){this.j=e;var i=t.viewState,n=this.i,r=t.size,s=t.pixelRatio,a=this.c.f;n&&!n.f()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,r[0]*s,r[1]*s),n.i(o,i.center,i.resolution,i.rotation,r,s,e.opacity,e.De?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},Xy.ra=function(){var t=this.i;t&&(oa(t,this.c.i)(),this.i=null),ju.prototype.ra.call(this)},Xy.Aa=function(t,e,o,i,n){if(this.i&&this.j){o=e.viewState;var r=this.a,s={};return this.i.Aa(t,this.c.i,o.center,o.resolution,o.rotation,e.size,e.pixelRatio,this.j.opacity,{},function(t){var e=u(t).toString();if(!(e in s))return s[e]=!0,i.call(n,t,r)})}},Xy.Ke=function(t,e){if(this.i&&this.j){var o=e.viewState;return ra(this.i,t,this.c.i,o.resolution,o.rotation,e.pixelRatio,this.j.opacity,e.skippedFeatureUids)}return!1},Xy.Zf=function(t,e,o,i){if(t=pr(e.pixelToCoordinateTransform,t.slice()),
this.Ke(t,e))return o.call(i,this.a,null)},Xy.bi=function(){Eu(this)},Xy.ag=function(t,e,o){function i(t){var e,o=t.Nc();if(o?e=o.call(t,p):(o=n.i)&&(e=o(t,p)),e){if(e){if(o=!1,Array.isArray(e))for(var i=e.length-1;0<=i;--i)o=Gu(u,t,e[i],Lu(p,h),this.bi,this)||o;else o=Gu(u,t,e,Lu(p,h),this.bi,this)||o;t=o}else t=!1;this.o=this.o||t}}var n=this.a;e=n.la(),Pu(t.attributions,e.l),wu(t,e);var r=t.viewHints[0],s=t.viewHints[1],a=n.ea,l=n.ia;if(!this.o&&!a&&r||!l&&s)return!0;var s=t.extent,a=t.viewState,r=a.projection,p=a.resolution,h=t.pixelRatio,a=n.f,c=n.c,l=n.get(vE);if(void 0===l&&(l=Tu),s=R(s,c*p),!this.o&&this.R==p&&this.S==a&&this.G==l&&O(this.A,s))return!0;this.i&&t.postRenderFunctions.push(oa(this.i,o)),this.o=!1;var u=new ea(.5*p/h,s,n.c);if(e.Ud(s,p,r),l){var d=[];e.ac(s,function(t){d.push(t)},this),d.sort(l),d.forEach(i,this)}else e.ac(s,i,this);return ia(u,o),this.R=p,this.S=a,this.G=l,this.A=s,this.i=u,!0},h(Vu,er),Vu.prototype.Dd=function(t){var e=null,o=t.T();return"canvas"===o?e=new Ou(this):"webgl"===o&&(e=new Bu(t,this)),e},Vu.prototype.C=function(){return this.A},Vu.prototype.G=function(){return this.i},Vu.prototype.g=function(t){this.A=void 0!==t?t:Fa,this.i=null===t?void 0:ja(this.A),this.s()};var vE="renderOrder";h(zu,pe),Xy=zu.prototype,Xy.Aa=c,Xy.xa=function(){return this.l},Xy.wa=function(){return this.R},Xy.ya=function(){return this.c},Xy.V=function(){return this.Ja},Xy.va=function(){this.s()},Xy.ua=function(t){this.l=Hu(t),this.s()},h(Yu,zu),Xy=Yu.prototype,Xy.zb=function(t){var e=u(t).toString();if(Xu(this,e,t)){Ku(this,e,t);var o=t.U();o?(e=o.D(),this.a&&this.a.Ea(e,t)):this.g[e]=t,this.b(new td("addfeature",t))}this.s()},Xy.dd=function(t){Zu(this,t),this.s()},Xy.clear=function(t){if(t){for(var e in this.v)this.v[e].forEach(te);this.i||(this.v={},this.j={},this.o={})}else if(this.a){this.a.forEach(this.ug,this);for(var o in this.g)this.ug(this.g[o])}this.i&&this.i.clear(),this.a&&this.a.clear(),this.oa.clear(),this.g={},this.b(new td("clear")),this.s()},Xy.bh=function(t,e){return this.a?this.a.forEach(t,e):this.i?this.i.forEach(t,e):void 0},Xy.ac=function(t,e,o){return this.a?ks(this.a,t,e,o):this.i?this.i.forEach(e,o):void 0},Xy.dh=function(t,e,o){return this.ac(t,function(i){if(i.U().Xa(t)&&(i=e.call(o,i)))return i})},Xy.lh=function(){return this.i},Xy.Ne=function(){var t;return this.i?t=this.i.a:this.a&&(t=Os(this.a),lt(this.g)||n(t,at(this.g))),t},Xy.kh=function(t){var e=[];return Qu(this,t,function(t){e.push(t)}),e},Xy.Hf=function(t){return Ns(this.a,t)},Xy.gh=function(t,e){var o=t[0],i=t[1],n=null,r=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=e||Yo;return ks(this.a,a,function(t){if(l(t)){var e=t.U(),p=s;s=e.Gb(o,i,r,s),s<p&&(n=t,t=Math.sqrt(s),a[0]=o-t,a[1]=i-t,a[2]=o+t,a[3]=i+t)}}),n},Xy.D=function(){return this.a.D()},Xy.jh=function(t){return t=this.j[t.toString()],void 0!==t?t:null},Xy.hi=function(){return this.S},Xy.ii=function(){return this.ea},Xy.ji=function(t){t=t.target;var e=u(t).toString(),o=t.U();o?(o=o.D(),e in this.g?(delete this.g[e],this.a&&this.a.Ea(o,t)):this.a&&Gs(this.a,o,t)):e in this.g||(this.a&&this.a.remove(t),this.g[e]=t),o=t.a,void 0!==o?(o=o.toString(),e in this.o?(delete this.o[e],this.j[o]=t):this.j[o]!==t&&($u(this,t),this.j[o]=t)):e in this.o||($u(this,t),this.o[e]=t),this.s(),this.b(new td("changefeature",t))},Xy.Ud=function(t,e,o){var i=this.oa;t=this.Bd(t,e);var n,r;for(n=0,r=t.length;n<r;++n){var s=t[n];ks(i,s,function(t){return O(t.extent,s)})||(this.Y.call(this,s,e,o),i.Ea(s,{extent:s.slice()}))}},Xy.Db=function(t){var e=u(t).toString();e in this.g?delete this.g[e]:this.a&&this.a.remove(t),this.ug(t),this.s()},Xy.ug=function(t){var e=u(t).toString();this.v[e].forEach(te),delete this.v[e];var o=t.a;void 0!==o?delete this.j[o.toString()]:delete this.o[e],this.b(new td("removefeature",t))},h(td,ne),h(ed,cn),Xy=ed.prototype,Xy.setMap=function(t){cn.prototype.setMap.call(this,t),this.aj()},Xy.cp=function(){var t,e,o=this.j.U();this.g===bE?(t=this.a,t.splice(-2,1),this.Ra(t,o)):this.g===EE&&(t=this.a[0],t.splice(-2,1),e=this.C.U(),e.pa(t),this.Ra(this.a,o)),0===t.length&&(this.o=null),cd(this)},Xy.Nd=function(){var t=hd(this),e=this.a,o=t.U();this.g===bE?(e.pop(),this.Ra(e,o)):this.g===EE&&(e[0].pop(),this.Ra(e,o),e=o.X()),"MultiPoint"===this.S?t.Sa(new Cl([e])):"MultiLineString"===this.S?t.Sa(new Pl([e])):"MultiPolygon"===this.S&&t.Sa(new Ml([e])),this.b(new dd("drawend",t)),this.Ha&&this.Ha.push(t),this.lb&&this.lb.zb(t)},Xy.Om=function(t){var e=t.U();this.j=t,this.a=e.X(),t=this.a[this.a.length-1],this.o=t.slice(),this.a.push(t.slice()),cd(this),this.b(new dd("drawstart",this.j))},Xy.Zc=Ko,Xy.aj=function(){var t=this.v,e=this.c();t&&e||hd(this),this.ia.setMap(e?t:null)};var _E="Point",bE="LineString",EE="Polygon",SE="Circle";h(dd,ne),h(fd,cn),fd.prototype.setMap=function(t){this.u.setMap(t),this.R.setMap(t),cn.prototype.setMap.call(this,t)},fd.prototype.D=function(){return this.j},fd.prototype.g=function(t){this.j=t||null;var e=this.o;e?t?e.Sa(Gi(t)):e.Sa(void 0):(this.o=e=new Va(t?Gi(t):{}),this.u.la().zb(e)),this.b(new Ad(this.j))},h(Ad,ne);var PE="extentchanged";h(Cd,cn),Xy=Cd.prototype,Xy.Yf=function(t){var e=t.U();e&&e.T()in this.ea&&this.ea[e.T()].call(this,t,e),(e=this.v)&&e.a&&this.c()&&kd(this,this.Ja,e),Jt(t,"change",this.Nh,this)},Xy.Ia=function(t){this.g&&!t&&(this.G.la().Db(this.g),this.g=null),cn.prototype.Ia.call(this,t)},Xy.setMap=function(t){this.G.setMap(t),cn.prototype.setMap.call(this,t)},Xy.Pm=function(t){this.Yf(t.element)},Xy.Nh=function(t){this.o||(t=t.target,xd(this,t),this.Yf(t))},Xy.Qm=function(t){xd(this,t.element)},Xy.Vm=function(t,e){var o=e.X(),o={feature:t,geometry:e,na:[o,o]};this.a.Ea(e.D(),o)},Xy.Tm=function(t,e){var o,i,n,r=e.X();for(i=0,n=r.length;i<n;++i)o=r[i],o={feature:t,geometry:e,depth:[i],index:i,na:[o,o]},this.a.Ea(e.D(),o)},Xy.Oh=function(t,e){var o,i,n,r,s=e.X();for(o=0,i=s.length-1;o<i;++o)n=s.slice(o,o+2),r={feature:t,geometry:e,index:o,na:n},this.a.Ea(I(n),r)},Xy.Sm=function(t,e){var o,i,n,r,s,a,l,p=e.X();for(r=0,s=p.length;r<s;++r)for(o=p[r],i=0,n=o.length-1;i<n;++i)a=o.slice(i,i+2),l={feature:t,geometry:e,depth:[r],index:i,na:a},this.a.Ea(I(a),l)},Xy.Wm=function(t,e){var o,i,n,r,s,a,l,p=e.X();for(r=0,s=p.length;r<s;++r)for(o=p[r],i=0,n=o.length-1;i<n;++i)a=o.slice(i,i+2),l={feature:t,geometry:e,depth:[r],index:i,na:a},this.a.Ea(I(a),l)},Xy.Um=function(t,e){var o,i,n,r,s,a,l,p,h,c,u=e.X();for(a=0,l=u.length;a<l;++a)for(p=u[a],r=0,s=p.length;r<s;++r)for(o=p[r],i=0,n=o.length-1;i<n;++i)h=o.slice(i,i+2),c={feature:t,geometry:e,depth:[r,a],index:i,na:h},this.a.Ea(I(h),c)},Xy.Ip=function(t,e){var o=e.Ba(),i={feature:t,geometry:e,index:0,na:[o,o]},n={feature:t,geometry:e,index:1,na:[o,o]};i.Ef=n.Ef=[i,n],this.a.Ea(F(o),i),this.a.Ea(e.D(),n)},Xy.Rm=function(t,e){var o,i=e.a;for(o=0;o<i.length;++o)this.ea[i[o].T()].call(this,t,i[o])},Xy.Il=function(t,e){for(var o,i=t.na,n=t.feature,r=t.geometry,s=t.depth,a=t.index;e.length<r.sa();)e.push(0);switch(r.T()){case"MultiLineString":case"Polygon":o=r.X(),o[s[0]].splice(a+1,0,e);break;case"MultiPolygon":o=r.X(),o[s[1]][s[0]].splice(a+1,0,e);break;case"LineString":o=r.X(),o.splice(a+1,0,e);break;default:return}this.o=!0,r.pa(o),this.o=!1,o=this.a,o.remove(t),Fd(this,r,a,s,1);var l={na:[i[0],e],feature:n,geometry:r,depth:s,index:a};o.Ea(I(l.na),l),this.j.push([l,1]),i={na:[e,i[1]],feature:n,geometry:r,depth:s,index:a+1},o.Ea(I(i.na),i),this.j.push([i,0]),this.R=!0},Xy.Ci=function(){if(this.S&&"pointerdrag"!=this.S.type){var t=this.S;Md(this,t);var e,o,i,n,r,s,a,l,p,h=this.j,c={};for(r=h.length-1;0<=r;--r)n=h[r],l=n[0],p=u(l.feature),l.depth&&(p+="-"+l.depth.join("-")),p in c||(c[p]={}),0===n[1]?(c[p].right=l,c[p].index=l.index):1==n[1]&&(c[p].left=l,c[p].index=l.index+1);for(p in c){switch(a=c[p].right,r=c[p].left,n=c[p].index,s=n-1,l=void 0!==r?r:a,0>s&&(s=0),h=l.geometry,o=i=h.X(),e=!1,h.T()){case"MultiLineString":2<i[l.depth[0]].length&&(i[l.depth[0]].splice(n,1),e=!0);break;case"LineString":2<i.length&&(i.splice(n,1),e=!0);break;case"MultiPolygon":o=o[l.depth[1]];case"Polygon":o=o[l.depth[0]],4<o.length&&(n==o.length-1&&(n=0),o.splice(n,1),e=!0,0===n&&(o.pop(),o.push(o[0]),s=o.length-1))}e&&(e=h,this.o=!0,e.pa(i),this.o=!1,i=[],void 0!==r&&(this.a.remove(r),i.push(r.na[0])),void 0!==a&&(this.a.remove(a),i.push(a.na[1])),void 0!==r&&void 0!==a&&(r={depth:l.depth,feature:l.feature,geometry:l.geometry,index:s,na:i},this.a.Ea(I(r.na),r)),Fd(this,h,n,l.depth,-1),this.g&&(this.G.la().Db(this.g),this.g=null))}return this.b(new Bd("modifyend",this.u,t)),this.C=!1,!0}return!1},h(Bd,ne),h(Vd,Xi),Xy=Vd.prototype,Xy.Ym=function(){return this.g.la().i},Xy.Zm=function(){return this.l},Xy.$m=function(t){return t=u(t),this.a[t]},Xy.bn=function(t){this.l=t},Xy.setMap=function(t){var e=this.v,o=this.g.la().i;e&&o.forEach(e.Zi,e),Xi.prototype.setMap.call(this,t),this.g.setMap(t),t&&o.forEach(t.Ti,t)},Xy.Xm=function(t){var e=this.v;e&&e.Ti(t.element)},Xy.an=function(t){var e=this.v;e&&e.Zi(t.element)},h(Hd,ne);var wE="select";h(qd,cn),Xy=qd.prototype,Xy.zb=function(t,e){var o=void 0===e||e,i=u(t),n=t.U();if(n){var r=this.ea[n.T()];r&&(this.S[i]=n.D(D()),r.call(this,t,n))}o&&(this.C[i]=Jt(t,"change",this.cn,this))},Xy.ek=function(t){this.zb(t)},Xy.fk=function(t){this.Db(t)},Xy.Ph=function(t){var e;t instanceof td?e=t.feature:t instanceof ye&&(e=t.element),this.zb(e)},Xy.Qh=function(t){var e;t instanceof td?e=t.feature:t instanceof ye&&(e=t.element),this.Db(e)},Xy.cn=function(t){if(t=t.target,this.A){var e=u(t);e in this.u||(this.u[e]=t)}else this.$i(t)},Xy.Db=function(t,e){var o=void 0===e||e,i=u(t),n=this.S[i];if(n){var r=this.a,s=[];for(ks(r,n,function(e){t===e.feature&&s.push(e)}),n=s.length-1;0<=n;--n)r.remove(s[n])}o&&(te(this.C[i]),delete this.C[i])},Xy.setMap=function(t){var e,o=this.v,i=this.oa;this.j?e=this.j:this.o&&(e=this.o.Ne()),o&&(i.forEach(te),i.length=0,e.forEach(this.fk,this)),cn.prototype.setMap.call(this,t),t&&(this.j?i.push(Jt(this.j,"add",this.Ph,this),Jt(this.j,"remove",this.Qh,this)):this.o&&i.push(Jt(this.o,"addfeature",this.Ph,this),Jt(this.o,"removefeature",this.Qh,this)),e.forEach(this.ek,this))},Xy.Zc=Ko,Xy.$i=function(t){this.Db(t,!1),this.zb(t,!1)},Xy.dn=function(t,e){var o,i=e.a;for(o=0;o<i.length;++o)this.ea[i[o].T()].call(this,t,i[o])},Xy.Rh=function(t,e){var o,i,n,r,s=e.X();for(o=0,i=s.length-1;o<i;++o)n=s.slice(o,o+2),r={feature:t,na:n},this.a.Ea(I(n),r)},Xy.en=function(t,e){var o,i,n,r,s,a,l,p=e.X();for(r=0,s=p.length;r<s;++r)for(o=p[r],i=0,n=o.length-1;i<n;++i)a=o.slice(i,i+2),l={feature:t,na:a},this.a.Ea(I(a),l)},Xy.fn=function(t,e){var o,i,n,r=e.X();for(i=0,n=r.length;i<n;++i)o=r[i],o={feature:t,na:[o,o]},this.a.Ea(e.D(),o)},Xy.gn=function(t,e){var o,i,n,r,s,a,l,p,h,c,u=e.X();for(a=0,l=u.length;a<l;++a)for(p=u[a],r=0,s=p.length;r<s;++r)for(o=p[r],i=0,n=o.length-1;i<n;++i)h=o.slice(i,i+2),c={feature:t,na:h},this.a.Ea(I(h),c)},Xy.hn=function(t,e){var o=e.X(),o={feature:t,na:[o,o]};this.a.Ea(e.D(),o)},Xy.jn=function(t,e){var o,i,n,r,s,a,l,p=e.X();for(r=0,s=p.length;r<s;++r)for(o=p[r],i=0,n=o.length-1;i<n;++i)a=o.slice(i,i+2),l={feature:t,na:a},this.a.Ea(I(a),l)},h(Zd,cn),Zd.prototype.G=function(){return this.u},Zd.prototype.R=function(t){this.u=t},h(of,ne),h(nf,Vu);var AE=["#00f","#0ff","#0f0","#ff0","#f00"];Xy=nf.prototype,Xy.fh=function(){return this.get(CE)},Xy.mh=function(){return this.get(ME)},Xy.Th=function(){return this.get(xE)},Xy.hl=function(){for(var t=this.mh(),e=Ee(1,256),o=e.createLinearGradient(0,0,1,256),i=1/(t.length-1),n=0,r=t.length;n<r;++n)o.addColorStop(n*i,t[n]);e.fillStyle=o,e.fillRect(0,0,1,256),this.l=e.getImageData(0,0,1,256).data},Xy.Qf=function(){var t=this.Th(),e=this.fh(),o=t+e+1,i=2*o,i=Ee(i,i);i.shadowOffsetX=i.shadowOffsetY=this.Y,i.shadowBlur=e,i.shadowColor="#000",i.beginPath(),e=o-this.Y,i.arc(e,e,t,0,2*Math.PI,!0),i.fill(),this.S=i.canvas.toDataURL(),this.R=Array(256),this.s()},Xy.yl=function(t){t=t.context;var e,o,i,n=t.canvas,n=t.getImageData(0,0,n.width,n.height),r=n.data;for(e=0,o=r.length;e<o;e+=4)(i=4*r[e+3])&&(r[e]=this.l[i],r[e+1]=this.l[i+1],r[e+2]=this.l[i+2]);t.putImageData(n,0,0)},Xy.Ei=function(t){this.set(CE,t)},Xy.Ki=function(t){this.set(ME,t)},Xy.Wc=function(t){this.set(xE,t)};var CE="blur",ME="gradient",xE="radius";h(rf,Mu),rf.prototype.I=function(t,e,o){Iu(this,"precompose",o,t,void 0);var i=this.Z();if(i){var n=e.extent,r=void 0!==n;r&&xu(o,t,n);var n=this.A(),s=o.globalAlpha;o.globalAlpha=e.opacity,o.drawImage(i,0,0,+i.width,+i.height,Math.round(n[4]),Math.round(n[5]),Math.round(i.width*n[0]),Math.round(i.height*n[3])),o.globalAlpha=s,r&&o.restore()}this.Ue(o,t,e)},rf.prototype.Aa=function(t,e,o,i,n){var r=this.a;return r.la().Aa(t,e.viewState.resolution,e.viewState.rotation,o,e.skippedFeatureUids,function(t){return i.call(n,t,r)})},rf.prototype.v=function(t,e,o,i){if(this.Z()){if(this.a.la().Aa!==c)return Mu.prototype.v.apply(this,arguments);var n=pr(this.o,t.slice());if(Vo(n,e.viewState.resolution/this.i),this.g||(this.g=Ee(1,1)),this.g.clearRect(0,0,1,1),this.g.drawImage(this.Z(),n[0],n[1],1,1,0,0,1,1),n=this.g.getImageData(0,0,1,1).data,0<n[3])return o.call(i,this.a,n)}},h(sf,rf),sf.prototype.Z=function(){return this.M?this.M.Z():null},sf.prototype.A=function(){return this.c},sf.prototype.qd=function(t,e){var o=t.pixelRatio,i=t.size,n=t.viewState,r=n.center,s=n.resolution,a=this.a.la(),l=t.viewHints,p=t.extent;if(void 0!==e.extent&&(p=Q(p,e.extent)),l[0]||l[1]||it(p)||(n=a.Z(p,s,o,n.projection))&&bu(this,n)&&(this.M=n),this.M){var n=this.M,p=n.D(),h=n.resolution,l=n.a,c=o*h/(s*l),p=dr(this.c,o*i[0]/2,o*i[1]/2,c,c,0,l*(p[0]-r[0])/h,l*(r[1]-p[3])/h);dr(this.o,o*i[0]/2-p[4],o*i[1]/2-p[5],o/s,-o/s,0,-r[0],-r[1]),Pu(t.attributions,n.i),wu(t,a),this.i=s*o/l}return!!this.M},h(df,jc),df.prototype.ra=function(){1==this.state&&(te(this.$d),this.$d=null),jc.prototype.ra.call(this)},df.prototype.Z=function(){return this.g},df.prototype.Zd=function(){var t=this.Eb.V();2==t&&(this.g=pf(et(this.f)/this.c,J(this.f)/this.c,this.j,this.Eb.resolution,0,this.c,this.f,this.l,[{extent:this.Eb.D(),image:this.Eb.Z()}],0)),this.state=t,this.s()},df.prototype.load=function(){if(0==this.state){this.state=1,this.s();var t=this.Eb.V();2==t||3==t?this.Zd():(this.$d=Jt(this.Eb,"change",function(){var t=this.Eb.V();2!=t&&3!=t||(te(this.$d),this.$d=null,this.Zd())},this),this.Eb.load())}},h(ff,zu),ff.prototype.Z=function(t,e,o,i){var n=this.c;if(n&&i&&!St(n,i)){if(this.a){if(this.ea==this.f&&St(this.a.v,i)&&this.a.resolution==e&&this.a.a==o&&B(this.a.D(),t))return this.a;ie(this.a),this.a=null}return this.a=new df(n,i,t,e,o,function(t,e,o){return this.Ic(t,e,o,n)}.bind(this)),this.ea=this.f,this.a}return n&&(i=n),this.Ic(t,e,o,i)},ff.prototype.j=function(t){switch(t=t.target,t.V()){case 1:this.b(new mf(IE,t));break;case 2:this.b(new mf(RE,t));break;case 3:this.b(new mf(TE,t))}},h(mf,ne);var IE="imageloadstart",RE="imageloadend",TE="imageloaderror";h(vf,ff),vf.prototype.Ic=function(t,e,o,i){e=yf(this,e);var n=this.S;return n&&this.Y==this.f&&n.resolution==e&&n.a==o&&O(n.D(),t)?n:(t=t.slice(),nt(t,this.oa),(i=this.ia(t,e,o,[et(t)/e*o,J(t)/e*o],i))&&(n=new Uc(t,e,o,this.l,i)),this.S=n,this.Y=this.f,n)},h(_f,vf),Xy=_f.prototype,Xy.Zj=function(t,e,o,i,n){var r=new du(.5*e/o,t,e,this.i.Ha,this.Ha);this.i.Ud(t,e,n);var s=!1;return this.i.ac(t,function(t){var i;if(!(i=s)){var n;if((i=t.Nc())?n=i.call(t,e):this.v&&(n=this.v(t,e)),n){var a,l=!1;for(Array.isArray(n)||(n=[n]),i=0,a=n.length;i<a;++i)l=Gu(r,t,n[i],Lu(e,o),this.En,this)||l;i=l}else i=!1}s=i},this),gu(r),s?null:(this.o[0]!=i[0]||this.o[1]!=i[1]?(this.g.canvas.width=i[0],this.g.canvas.height=i[1],this.o[0]=i[0],this.o[1]=i[1]):this.g.clearRect(0,0,i[0],i[1]),t=bf(this,X(t),e,o,i),r.i(this.g,o,t,0,{}),this.A=r,this.g.canvas)},Xy.Aa=function(t,e,o,i,n,r){if(this.A){var s={};return this.A.Aa(t,e,0,i,n,function(t){var e=u(t).toString();if(!(e in s))return s[e]=!0,r(t)})}},Xy.Bn=function(){return this.i},Xy.Cn=function(){return this.C},Xy.Dn=function(){return this.v},Xy.En=function(){this.s()},Xy.Fn=function(){qu(this,this.i.V())},Xy.ci=function(t){this.C=void 0!==t?t:Fa,this.v=t?ja(this.C):void 0,this.s()},h(Ef,ju),Ef.prototype.Aa=function(t,e,o,i,n){var r=this.a;return r.la().Aa(t,e.viewState.resolution,e.viewState.rotation,o,e.skippedFeatureUids,function(t){return i.call(n,t,r)})},Ef.prototype.ag=function(t,e){var o=this.c.f,i=t.pixelRatio,n=t.viewState,r=n.center,s=n.resolution,a=n.rotation,l=this.M,p=this.Fb,h=this.a.la(),c=t.viewHints,u=t.extent;return void 0!==e.extent&&(u=Q(u,e.extent)),c[0]||c[1]||it(u)||(n=h.Z(u,s,i,n.projection))&&bu(this,n)&&(l=n,p=Sf(this,n),this.Fb&&t.postRenderFunctions.push(function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,o,this.Fb))),l&&(o=this.c.i.l,Pf(this,o.width,o.height,i,r,s,a,l.D()),this.j=null,i=this.v,rr(i),cr(i,1,-1),ur(i,0,-1),this.M=l,this.Fb=p,Pu(t.attributions,l.i),wu(t,h)),!!l},Ef.prototype.Ke=function(t,e){return void 0!==this.Aa(t,e,0,Yo,this)},Ef.prototype.Zf=function(t,e,o,i){if(this.M&&this.M.Z())if(this.a.la()instanceof _f){var n=pr(e.pixelToCoordinateTransform,t.slice());if(this.Aa(n,e,0,Yo,this))return o.call(i,this.a,null)}else{if(n=[this.M.Z().width,this.M.Z().height],!this.j){var r=e.size;e=nr(),ur(e,-1,-1),cr(e,2/r[0],2/r[1]),ur(e,0,r[1]),cr(e,1,-1);var r=fr(this.u.slice()),s=nr();ur(s,0,n[1]),cr(s,1,-1),cr(s,n[0]/2,n[1]/2),ur(s,1,1),sr(s,r),sr(s,e),this.j=s}if(t=pr(this.j,t.slice()),!(0>t[0]||t[0]>n[0]||0>t[1]||t[1]>n[1])&&(this.i||(this.i=Ee(1,1)),this.i.clearRect(0,0,1,1),this.i.drawImage(this.M.Z(),t[0],t[1],1,1,0,0,1,1),n=this.i.getImageData(0,0,1,1).data,0<n[3]))return o.call(i,this.a,n)}},h(wf,er),wf.prototype.Dd=function(t){var e=null,o=t.T();return"canvas"===o?e=new sf(this):"webgl"===o&&(e=new Ef(t,this)),e},h(Af,rf),Af.prototype.qd=function(t,o){var i=t.pixelRatio,n=t.size,r=t.viewState,s=r.projection,a=r.resolution,r=r.center,l=this.a,p=l.la(),h=p.f,c=p.Ib(s),u=c.Mc(a,this.Y),d=c.La(u),f=Math.round(a/d)||1,y=t.extent;if(void 0!==o.extent&&(y=Q(y,o.extent)),it(y))return!1;var g,m=Ot(c,y,d);g=c.Qc(u);var v=c.La(u),_=x(c.fb(u),c.l);g=j(g[0]+m.da*_[0]*v,g[1]+m.fa*_[1]*v,g[0]+(m.ba+1)*_[0]*v,g[1]+(m.ja+1)*_[1]*v,void 0),v=p.pb(i),_={},_[u]={};var b,E,S,P=this.Cf(p,s,_),w=this.j,A=this.Ja,C=!1;for(E=m.da;E<=m.ba;++E)for(S=m.fa;S<=m.ja;++S)b=p.Lc(u,E,S,i,s),Cf(this,b)||(b=Vc(b)),Cf(this,b)?2==b.V()&&(_[u][b.Ga.toString()]=b,C||-1!=this.c.indexOf(b)||(C=!0)):Lt(c,b.Ga,P,A,w)||(b=Gt(c,b.Ga,A,w))&&P(u+1,b);if(P=t.viewHints,!(this.i&&16<Date.now()-t.time&&(P[0]||P[1])||!C&&this.l&&O(this.l,y)&&this.af==h)||f!=this.R){C=p.Sd(u,i,s),E=Math.round((m.ba-m.da+1)*C[0]/f),b=Math.round((m.ja-m.fa+1)*C[0]/f),C=this.u,S=C.canvas,P=p.Mf(s),S.width!=E||S.height!=b?(this.R=f,S.width=E,S.height=b):(C.clearRect(0,0,E,b),f=this.R),this.c.length=0,A=Object.keys(_).map(Number),A.sort(e);var M,I,R,T,L,G,N,k;for(R=0,T=A.length;R<T;++R){E=A[R],I=p.Sd(E,i,s),b=c.La(E),M=b/d,L=v*p.Jf(s),G=_[E];for(var D in G)b=G[D],S=c.Ta(b.Ga,w),E=(S[0]-g[0])/d*v/f,S=(g[3]-S[3])/d*v/f,N=I[0]*M/f,k=I[1]*M/f,P||C.clearRect(E,S,N,k),this.Df(b,t,o,E,S,N,k,L),this.c.push(b)}this.af=h,this.i=d*i/v*f,this.l=g}return D=this.i/a,D=dr(this.C,i*n[0]/2,i*n[1]/2,D,D,0,(this.l[0]-r[0])/this.i*i,(r[1]-this.l[3])/this.i*i),dr(this.o,i*n[0]/2-D[4],i*n[1]/2-D[5],i/a,-i/a,0,-r[0],-r[1]),Au(t.usedTiles,p,u,m),Cu(t,p,c,i,s,y,u,l.Pd()),Su(t,p),wu(t,p),0<this.c.length},Af.prototype.Df=function(t,e,o,i,n,r,s,a){(t=t.Z())&&this.u.drawImage(t,a,a,t.width-2*a,t.height-2*a,i,n,r,s)},Af.prototype.Z=function(){return this.u.canvas},Af.prototype.A=function(){return this.C},h(Mf,Nr);var LE=new Mf;h(xf,kr);var GE=new xf;h(Rf,ju),Xy=Rf.prototype,Xy.ra=function(){$r(this.c.i,this.G),ju.prototype.ra.call(this)},Xy.Cf=function(t,e,o){var i=this.c;return function(n,r){return Hf(t,e,n,r,function(t){var e=i.a.b.hasOwnProperty(t.ib());return e&&(o[n]||(o[n]={}),o[n][t.Ga.toString()]=t),e})}},Xy.$f=function(){ju.prototype.$f.call(this),this.i=null},Xy.ag=function(t,o,i){var n=this.c,r=i.b,s=t.viewState,a=s.projection,l=this.a,p=l.la(),h=p.Ib(a),c=h.Mc(s.resolution),u=h.La(c),d=p.Sd(c,t.pixelRatio,a),f=d[0]/x(h.fb(c),this.S)[0],g=u/f,v=p.pb(f)*p.Jf(a),_=s.center,E=t.extent,S=Ot(h,E,u);if(this.j&&m(this.j,S)&&this.o==p.f)g=this.A;else{var P=[S.ba-S.da+1,S.ja-S.fa+1],w=b(Math.max(P[0]*d[0],P[1]*d[1])),P=g*w,A=h.Qc(c),C=A[0]+S.da*d[0]*g,g=A[1]+S.fa*d[1]*g,g=[C,g,C+P,g+P];Fu(this,t,w),r.viewport(0,0,w,w),r.clearColor(0,0,0,0),r.clear(16384),r.disable(3042),w=os(i,this.R,this.ia),i.Rc(w),this.i||(this.i=new If(r,w)),Qr(i,34962,this.G),r.enableVertexAttribArray(this.i.b),r.vertexAttribPointer(this.i.b,2,5126,!1,16,0),r.enableVertexAttribArray(this.i.a),r.vertexAttribPointer(this.i.a,2,5126,!1,16,8),r.uniform1i(this.i.f,0),i={},i[c]={};var M,I,R,T=this.Cf(p,a,i),L=l.Td(),w=!0,C=D(),G=new y(0,0,0,0);for(I=S.da;I<=S.ba;++I)for(R=S.fa;R<=S.ja;++R)if(A=p.Lc(c,I,R,f,a),void 0===o.extent||(M=h.Ta(A.Ga,C),ot(M,o.extent))){if(M=A.V(),(M=2==M||4==M||3==M&&!L)||(A=Vc(A)),2==(M=A.V())){if(n.a.b.hasOwnProperty(A.ib())){i[c][A.Ga.toString()]=A;continue}}else if(4==M||3==M&&!L)continue;w=!1,M=Lt(h,A.Ga,T,G,C),M||(A=Gt(h,A.Ga,G,C))&&T(c+1,A)}o=Object.keys(i).map(Number),o.sort(e);for(var O,T=new Float32Array(4),L=0,G=o.length;L<G;++L)for(O in I=i[o[L]])A=I[O],M=h.Ta(A.Ga,C),T[0]=2*(M[2]-M[0])/P,T[1]=2*(M[3]-M[1])/P,T[2]=2*(M[0]-g[0])/P-1,T[3]=2*(M[1]-g[1])/P-1,r.uniform4fv(this.i.c,T),pa(n,A,d,v*f),r.drawArrays(5,0,4);w?(this.j=S,this.A=g,this.o=p.f):(this.A=this.j=null,this.o=-1,t.animate=!0)}Au(t.usedTiles,p,c,S);var N=n.l;return Cu(t,p,h,f,a,E,c,l.Pd(),function(t){2!=t.V()||n.a.b.hasOwnProperty(t.ib())||t.ib()in N.a||N.i([t,kt(h,t.Ga),h.La(t.Ga[0]),d,v*f])},this),Su(t,p),wu(t,p),r=this.v,rr(r),ur(r,(Math.round(_[0]/u)*u-g[0])/(g[2]-g[0]),(Math.round(_[1]/u)*u-g[1])/(g[3]-g[1])),s.rotation&&hr(r,s.rotation),cr(r,t.size[0]*s.resolution/(g[2]-g[0]),t.size[1]*s.resolution/(g[3]-g[1])),ur(r,-.5,-.5),!0},Xy.Zf=function(t,e,o,i){if(this.g){t=pr(this.v,[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]].slice()),t=[t[0]*this.l,t[1]*this.l],e=this.c.i.b,e.bindFramebuffer(e.FRAMEBUFFER,this.g);var n=new Uint8Array(4);if(e.readPixels(t[0],t[1],1,1,e.RGBA,e.UNSIGNED_BYTE,n),0<n[3])return o.call(i,this.a,n)}},h(Tf,er),Xy=Tf.prototype,Xy.Dd=function(t){var e=null,o=t.T();return"canvas"===o?e=new Af(this):"webgl"===o&&(e=new Rf(t,this)),e},Xy.Pd=function(){return this.get("preload")},Xy.Uh=function(t){this.set("preload",t)},Xy.Td=function(){return this.get("useInterimTilesOnError")},Xy.Vh=function(t){this.set("useInterimTilesOnError",t)},h(Lf,Af);var OE={image:nm,hybrid:["Polygon","LineString"]},NE={hybrid:["Image","Text"],vector:nm};Xy=Lf.prototype,Xy.qd=function(t,e){var o=this.a.f;return this.oa!=o&&(this.c.length=0),this.oa=o,Af.prototype.qd.apply(this,arguments)},Xy.Df=function(t,e,o,i,n,r,s,a){var l=t;if(Gf(this,l,e),"vector"!=this.a.v){var p=l,h=e,c=this.a,l=p.f,u=c.f,d=OE[c.v];if(d&&l.xg!==u){l.xg=u;var f=p.Ga,y=p.Ga[0],u=h.pixelRatio,g=c.la(),m=g.tileGrid,v=g.pb(),c=rr(this.S);"tile-pixels"==p.l.Jb()?(f=u/v,cr(c,f,f)):(v=u/m.La(y),f=m.Ta(f,this.j),cr(c,v,-v),ur(c,-f[0],-f[3])),p=p.c,h=g.Sd(y,u,h.viewState.projection),p.canvas.width=h[0],p.canvas.height=h[1],l.vd.i(p,u,c,0,{},d)}}Af.prototype.Df.apply(this,arguments)},Xy.Aa=function(t,e,o,i,n){var r=e.viewState.resolution;e=e.viewState.rotation,o=void 0==o?0:o;var s,a,l,p,h,c,d=this.a,f={},y=this.c,g=d.la(),m=g.tileGrid;for(l=0,p=y.length;l<p;++l)c=y[l],a=c.Ga,h=g.tileGrid.Ta(a,this.j),G(R(h,o*r),t)&&("tile-pixels"===c.l.Jb()?(h=$(h),r=g.pb(),a=m.La(a[0])/r,a=[(t[0]-h[0])/a,(h[1]-t[1])/a]):a=t,c=c.f.vd,s=s||c.Aa(a,r,e,o,{},function(t){var e=u(t).toString();if(!(e in f))return f[e]=!0,i.call(n,t,d)}));return s},Xy.$h=function(){Eu(this)},Xy.Ue=function(t,e,o){var i=NE[this.a.v];if(i)for(var n=e.pixelRatio,r=e.viewState.rotation,s=e.size,a=Math.round(n*s[0]/2),s=Math.round(n*s[1]/2),l=this.c,p=[],h=[],c=l.length-1;0<=c;--c){var u,d=l[c],f=d;if(u=e,"tile-pixels"==f.l.Jb()){var y=this.a.la(),g=y.tileGrid,m=f.Ga,y=g.La(m[0])/y.pb(),f=u.viewState,v=u.pixelRatio,_=f.resolution/v,m=g.Ta(m,this.j),g=f.center,m=$(m);u=u.size,u=dr(this.S,Math.round(v*u[0]/2),Math.round(v*u[1]/2),y/_,y/_,f.rotation,(m[0]-g[0])/y,(g[1]-m[1])/y)}else u=Ru(this,u,0);for(y=mu(d.f.vd,u),f=d.Ga[0],t.save(),t.globalAlpha=o.opacity,Sr(t,-r,a,s),v=0,_=p.length;v<_;++v)g=p[v],f<h[v]&&(t.beginPath(),t.moveTo(y[0],y[1]),t.lineTo(y[2],y[3]),t.lineTo(y[4],y[5]),t.lineTo(y[6],y[7]),t.moveTo(g[6],g[7]),t.lineTo(g[4],g[5]),t.lineTo(g[2],g[3]),t.lineTo(g[0],g[1]),t.clip());d.f.vd.i(t,n,u,r,{},i),t.restore(),p.push(y),h.push(f)}Af.prototype.Ue.apply(this,arguments)},h(Of,Vu),Xy=Of.prototype,Xy.Dd=function(t){var e=null;return"canvas"===t.T()&&(e=new Lf(this)),e},Xy.Pd=function(){return this.get(kE)},Xy.Td=function(){return this.get(DE)},Xy.Wh=function(t){this.set("preload",t)},Xy.Xh=function(t){this.set("useInterimTilesOnError",t)};var kE="preload",DE="useInterimTilesOnError";h(kf,Bc),kf.prototype.ra=function(){1==this.state&&(this.wd.forEach(te),this.wd=null),Bc.prototype.ra.call(this)},kf.prototype.Z=function(){return this.I},kf.prototype.Zd=function(){var t=[];if(this.f.forEach(function(e){e&&2==e.V()&&t.push({extent:this.c.Ta(e.Ga),image:e.Z()})},this),this.f.length=0,t.length){var e=this.o[0],o=this.j.fb(e),i="number"==typeof o?o:o[0],o="number"==typeof o?o:o[1],e=this.j.La(e),n=this.c.La(this.g),r=this.j.Ta(this.o);this.I=pf(i,o,this.A,n,this.c.D(),e,r,this.v,t,this.u,this.C),this.state=2}else this.state=3;this.s()},kf.prototype.load=function(){if(0==this.state){this.state=1,this.s();var t=0;this.wd=[],this.f.forEach(function(e){var o=e.V();if(0==o||1==o){t++;var i;i=Jt(e,"change",function(){var o=e.V();2!=o&&3!=o&&4!=o||(te(i),--t||(this.wd.forEach(te),this.wd=null,this.Zd()))},this),this.wd.push(i)}},this),this.f.forEach(function(t){0==t.V()&&t.load()}),t||setTimeout(this.Zd.bind(this),0)}},h(Vf,aa),Vf.prototype.gd=function(t){for(var e,o;Wf(this);){e=this.a.$c,o=e.Ga[0].toString();var i;if((i=o in t)&&(e=e.Ga,i=g(t[o],e[1],e[2])),i)break;ie(this.pop())}},h(zf,zu),Xy=zf.prototype,Xy.fi=function(){return Wf(this.a)},Xy.gd=function(t,e){var o=this.Rd(t);o&&o.gd(e)},Xy.Jf=function(){return 0},Xy.Sb=function(t,e,o){return t+"/"+e+"/"+o},Xy.Mf=function(){return this.oa},Xy.ab=function(){return this.tileGrid},Xy.Ib=function(t){return this.tileGrid?this.tileGrid:Ft(t)},Xy.Rd=function(t){var e=this.c;return e&&!St(e,t)?null:this.a},Xy.pb=function(){return this.Oa},Xy.Sd=function(t,e,o){return o=this.Ib(o),e=this.pb(e),t=x(o.fb(t),this.j),1==e?t:M(t,e,this.j)},Xy.va=function(){this.a.clear(),this.s()},Xy.Eg=c,h(Kf,ne),h(Xf,zf),Xy=Xf.prototype,Xy.ob=function(){return this.tileLoadFunction},Xy.qb=function(){return this.tileUrlFunction},Xy.rb=function(){return this.urls},Xy.gi=function(t){switch(t=t.target,t.V()){case 1:this.b(new Kf("tileloadstart",t));break;case 2:this.b(new Kf("tileloadend",t));break;case 3:this.b(new Kf("tileloaderror",t))}},Xy.xb=function(t){this.a.clear(),this.tileLoadFunction=t,this.s()},Xy.bb=function(t,e){this.tileUrlFunction=t,void 0!==e?qf(this,e):this.s()},Xy.jb=function(t){var e=this.urls=Bf(t);this.bb(this.Fc?this.Fc.bind(this):jf(e,this.tileGrid),t)},Xy.cb=function(t){this.urls=t;var e=t.join("\n");this.bb(this.Fc?this.Fc.bind(this):jf(t,this.tileGrid),e)},Xy.Eg=function(t,e,o){t=this.Sb(t,e,o),this.a.b.hasOwnProperty(t)&&this.a.get(t)},h(Zf,Xf),Xy=Zf.prototype,Xy.fi=function(){if(Wf(this.a))return!0;for(var t in this.g)if(Wf(this.g[t]))return!0;return!1},Xy.gd=function(t,e){var o=this.Rd(t);this.a.gd(this.a==o?e:{});for(var i in this.g){var n=this.g[i];n.gd(n==o?e:{})}},Xy.Jf=function(t){return this.c&&t&&!St(this.c,t)?0:this.Kf()},Xy.Kf=function(){return 0},Xy.Mf=function(t){return!(this.c&&t&&!St(this.c,t))&&Xf.prototype.Mf.call(this,t)},Xy.Ib=function(t){var e=this.c;return!this.tileGrid||e&&!St(e,t)?(e=u(t).toString(),e in this.v||(this.v[e]=Ft(t)),this.v[e]):this.tileGrid},Xy.Rd=function(t){var e=this.c;return!e||St(e,t)?this.a:(t=u(t).toString(),t in this.g||(this.g[t]=new Vf),this.g[t])},Xy.Lc=function(t,e,o,i,n){if(this.c&&n&&!St(this.c,n)){var r=this.Rd(n);o=[t,e,o];var s;if(t=this.Sb.apply(this,o),r.b.hasOwnProperty(t)&&(s=r.get(t)),e=this.tc,s&&s.key==e)return s;var a=this.c,l=this.Ib(a),p=this.Ib(n),h=Yf(this,o,n);return i=new kf(a,l,n,p,o,h,this.pb(i),this.Kf(),function(t,e,o,i){return Qf(this,t,e,o,i,a)}.bind(this),this.Ha,this.C),i.key=e,s?(i.a=s,r.replace(t,i)):r.set(t,i),i}return Qf(this,t,e,o,i,n)},Xy.Nb=function(t){if(this.C!=t){this.C=t;for(var e in this.g)this.g[e].clear();this.s()}},Xy.Ob=function(t,e){var o=Et(t);o&&((o=u(o).toString())in this.v||(this.v[o]=e))},h(ty,Zf);var jE=new Wt({html:'<a class="ol-attribution-bing-tos" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'});ty.prototype.Y=function(){return this.i},ty.prototype.ea=function(){return this.o},ty.prototype.ia=function(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)qu(this,"error");else{var e=t.brandLogoUri;-1==e.indexOf("https")&&(e=e.replace("http","https"));var o=t.resourceSets[0].resources[0],i=-1==this.u?o.zoomMax:this.u;t=Vt(this.c);var n=Ut({extent:t,minZoom:o.zoomMin,maxZoom:i,tileSize:(o.imageWidth==o.imageHeight?o.imageWidth:[o.imageWidth,o.imageHeight])/this.pb()});this.tileGrid=n;var r=this.S,s=this.A;if(this.tileUrlFunction=Ff(o.imageUrlSubdomains.map(function(t){var e=[0,0,0],i=o.imageUrl.replace("{subdomain}",t).replace("{culture}",r);return function(t){if(t)return It(t[0],t[1],-t[2]-1,e),t=i,s&&(t+="&dpi=d1&device=mobile"),t.replace("{quadkey}",Rt(e))}})),o.imageryProviders){var a=wt(Et("EPSG:4326"),this.c);t=o.imageryProviders.map(function(t){var e=t.attribution,o={};return t.coverageAreas.forEach(function(t){var e=t.zoomMin,r=Math.min(t.zoomMax,i);t=t.bbox,t=rt([t[1],t[0],t[3],t[2]],a);var s,l;for(s=e;s<=r;++s)l=s.toString(),e=Nt(n,t,s),l in o?o[l].push(e):o[l]=[e]}),new Wt({html:e,tileRanges:o})}),t.push(jE),this.ua(t)}this.R=e,qu(this,"ready")}},h(ey,Zf),h(oy,ey),Xy=oy.prototype,Xy.pk=function(){return this.i},Xy.Fp=function(t){og(this.i,t),iy(this)},Xy.np=function(t){this.i=t||{},iy(this)},Xy.jl=function(t,e){var o=e.target;if(!o.status||200<=o.status&&300>o.status){var i;try{i=JSON.parse(o.responseText)}catch(t){return void qu(this,"error")}ny(this,i),this.o[t]=i,qu(this,"ready")}else qu(this,"error")},Xy.il=function(){qu(this,"error")},h(ry,Yu),ry.prototype.lb=function(){return this.u},ry.prototype.Ud=function(t,e,o){this.u.Ud(t,e,o),e!==this.C&&(this.clear(),this.C=e,sy(this),this.dd(this.A))},ry.prototype.mb=function(t){this.ia=t,this.Oa()},ry.prototype.Oa=function(){this.clear(),sy(this),this.dd(this.A),this.s()},h(py,ff),Xy=py.prototype,Xy.rn=function(){return this.v},Xy.Ic=function(t,e,o,i){if(void 0===this.i)return null;e=yf(this,e),o=this.Y?o:1;var n=this.M;if(n&&this.C==this.f&&n.resolution==e&&n.a==o&&O(n.D(),t))return n;n={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},og(n,this.v),t=t.slice();var r=(t[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.A){var a=this.A*et(t)/2,l=this.A*J(t)/2;t[0]=r-a,t[1]=s-l,t[2]=r+a,t[3]=s+l}var a=e/o,l=Math.ceil(et(t)/a),p=Math.ceil(J(t)/a);return t[0]=r-a*l/2,t[2]=r+a*l/2,t[1]=s-a*p/2,t[3]=s+a*p/2,this.o[0]=l,this.o[1]=p,r=t,s=this.o,a=o,i=i.nb.split(":").pop(),n.SIZE=s[0]+","+s[1],n.BBOX=r.join(","),n.BBOXSR=i,n.IMAGESR=i,n.DPI=Math.round(90*a),i=this.i,r=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),r==i&&f(!1,50),n=ly(r,n),this.M=new Fc(t,e,o,this.l,n,this.S,this.g),this.C=this.f,Jt(this.M,"change",this.j,this),this.M},Xy.qn=function(){return this.g},Xy.sn=function(){return this.i},Xy.tn=function(t){this.M=null,this.g=t,this.s()},Xy.vn=function(t){t!=this.i&&(this.i=t,this.M=null,this.s())},Xy.wn=function(t){og(this.v,t),this.M=null,this.s()},h(hy,ff),Xy=hy.prototype,Xy.yn=function(){return this.g},Xy.Ic=function(t,e,o){
e=yf(this,e),o=this.Y?o:1;var i=this.M;if(i&&this.A==this.f&&i.resolution==e&&i.a==o&&O(i.D(),t))return i;1!=this.v&&(t=t.slice(),nt(t,this.v));var n=[et(t)/e*o,J(t)/e*o];if(void 0!==this.C){var i=this.C,r=X(t),s=this.ia,a=et(t),l=J(t),p=n[0],h=n[1],c=.0254/this.o,n={OPERATION:this.oa?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.o,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:h*a>p*l?a*s/(p*c):l*s/(h*c),SETVIEWCENTERX:r[0],SETVIEWCENTERY:r[1]};og(n,this.g),i=ly(i,n),i=new Fc(t,e,o,this.l,i,this.S,this.i),Jt(i,"change",this.j,this)}else i=null;return this.M=i,this.A=this.f,i},Xy.xn=function(){return this.i},Xy.An=function(t){og(this.g,t),this.s()},Xy.zn=function(t){this.M=null,this.i=t,this.s()},h(cy,ff),cy.prototype.Ic=function(t){return ot(t,this.M.D())?this.M:null},cy.prototype.j=function(t){if(2==this.M.V()){var e,o,i=this.M.D(),n=this.M.Z();if(this.i?(e=this.i[0],o=this.i[1]):(e=n.width,o=n.height),(i=Math.ceil(et(i)/(J(i)/o)))!=e){var i=Ee(i,o),r=i.canvas;i.drawImage(n,0,0,e,o,0,0,r.width,r.height),this.M.zg(r)}}ff.prototype.j.call(this,t)},h(uy,ff);var FE=[101,101];Xy=uy.prototype,Xy.Gn=function(t,e,o,i){if(void 0!==this.g){var n=Z(t,e,0,FE),r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.i.LAYERS};return og(r,this.i,i),i=Math.floor((n[3]-t[1])/e),r[this.o?"I":"X"]=Math.floor((t[0]-n[0])/e),r[this.o?"J":"Y"]=i,dy(this,n,FE,1,Et(o),r)}},Xy.In=function(){return this.i},Xy.Ic=function(t,e,o,i){if(void 0===this.g)return null;e=yf(this,e),1==o||this.oa&&void 0!==this.Y||(o=1);var n=e/o,r=X(t),s=Z(r,e,0,[Math.ceil(et(t)/n),Math.ceil(J(t)/n)]);return t=Z(r,e,0,[Math.ceil(this.C*et(t)/n),Math.ceil(this.C*J(t)/n)]),(r=this.M)&&this.S==this.f&&r.resolution==e&&r.a==o&&O(r.D(),s)?r:(s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},og(s,this.i),this.A[0]=Math.round(et(t)/n),this.A[1]=Math.round(J(t)/n),i=dy(this,t,this.A,o,i,s),this.M=new Fc(t,e,o,this.l,i,this.ia,this.v),this.S=this.f,Jt(this.M,"change",this.j,this),this.M)},Xy.Hn=function(){return this.v},Xy.Jn=function(){return this.g},Xy.Kn=function(t){this.M=null,this.v=t,this.s()},Xy.Ln=function(t){t!=this.g&&(this.g=t,this.M=null,this.s())},Xy.Mn=function(t){og(this.i,t),fy(this),this.M=null,this.s()},h(yy,ey);var UE=new Wt({html:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});!function(){var t={},e={ma:t};!function(o){if("object"==typeof t&&void 0!==e)e.ma=o();else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.bq=o()}}(function(){return function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=o[s]={ma:{}},e[s][0].call(l.ma,function(t){var o=e[s][1][t];return n(o||t)},l,l.ma,t,e,o,i)}return o[s].ma}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,o){t=t("./processor"),o.yj=t},{"./processor":2}],2:[function(t,e){function o(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}return function(o){var i=o.buffers,n=o.meta,r=o.width,s=o.height,a=i.length,l=i[0].byteLength;if(o.imageOps){for(l=Array(a),o=0;o<a;++o){var p,h=l,c=o;p=new Uint8ClampedArray(i[o]);var u=r,d=s;p=e?new ImageData(p,u,d):{data:p,width:u,height:d},h[c]=p}r=t(l,n).data}else{for(r=new Uint8ClampedArray(l),s=Array(a),h=Array(a),o=0;o<a;++o)s[o]=new Uint8ClampedArray(i[o]),h[o]=[0,0,0,0];for(i=0;i<l;i+=4){for(o=0;o<a;++o)c=s[o],h[o][0]=c[i],h[o][1]=c[i+1],h[o][2]=c[i+2],h[o][3]=c[i+3];o=t(h,n),r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3]}}return r.buffer}}function i(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+o.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=URL.createObjectURL(new Blob(i,{type:"text/javascript"})),i=new Worker(i);return i.addEventListener("message",e),i}function n(t,e){var i=o(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:i(t),meta:t.meta}})},0)}}}function r(t){this.uf=!!t.Gl;var e;e=0===t.threads?0:this.uf?1:t.threads||1;var o=[];if(e)for(var r=0;r<e;++r)o[r]=i(t,this.Qg.bind(this,r));else o[0]=n(t,this.Qg.bind(this,0));this.le=o,this.Cd=[],this.Mj=t.Go||1/0,this.je=0,this.cd={},this.vf=null}var s=t("./util").$l;r.prototype.Eo=function(t,e,o){this.Kj({inputs:t,Ch:e,fd:o}),this.Ng()},r.prototype.Kj=function(t){for(this.Cd.push(t);this.Cd.length>this.Mj;)this.Cd.shift().fd(null,null)},r.prototype.Ng=function(){if(0===this.je&&0<this.Cd.length){var t=this.vf=this.Cd.shift(),e=t.inputs[0].width,o=t.inputs[0].height,i=t.inputs.map(function(t){return t.data.buffer}),n=this.le.length;if(this.je=n,1===n)this.le[0].postMessage({buffers:i,meta:t.Ch,imageOps:this.uf,width:e,height:o},i);else for(var r=4*Math.ceil(t.inputs[0].data.length/4/n),s=0;s<n;++s){for(var a=s*r,l=[],p=0,h=i.length;p<h;++p)l.push(i[s].slice(a,a+r));this.le[s].postMessage({buffers:l,meta:t.Ch,imageOps:this.uf,width:e,height:o},l)}}},r.prototype.Qg=function(t,e){this.$p||(this.cd[t]=e.data,0===--this.je&&this.Nj())},r.prototype.Nj=function(){var t,e,o=this.vf,i=this.le.length;if(1===i)t=new Uint8ClampedArray(this.cd[0].buffer),e=this.cd[0].meta;else{var n=o.inputs[0].data.length;t=new Uint8ClampedArray(n),e=Array(n);for(var n=4*Math.ceil(n/4/i),r=0;r<i;++r){var a=r*n;t.set(new Uint8ClampedArray(this.cd[r].buffer),a),e[r]=this.cd[r].meta}}this.vf=null,this.cd={},o.fd(null,s(t,o.inputs[0].width,o.inputs[0].height),e),this.Ng()},e.ma=r},{"./util":3}],3:[function(t,e,o){var i=!0;try{new ImageData(10,10)}catch(t){i=!1}var n=document.createElement("canvas").getContext("2d");o.$l=function(t,e,o){return i?new ImageData(t,e,o):(e=n.createImageData(e,o),e.data.set(t),e)}},{}]},{},[1])(1)}),Im=e.ma}(),h(gy,ff),gy.prototype.A=function(t,e){this.C=new Im.yj({operation:t,Gl:"image"===this.Ha,Go:1,lib:e,threads:this.Oa}),this.s()},gy.prototype.Z=function(t,e,o,i){o=!0;for(var n,r=0,s=this.i.length;r<s;++r)if(n=this.i[r].a.la(),"ready"!==n.V()){o=!1;break}if(!o)return null;if(t=t.slice(),!my(this,t,e))return this.o;o=this.g.canvas,n=Math.round(et(t)/e),r=Math.round(J(t)/e),n===o.width&&r===o.height||(o.width=n,o.height=r),n=og({},this.Y),n.viewState=og({},n.viewState);var r=X(t),s=Math.round(et(t)/e),a=Math.round(J(t)/e);return n.extent=t,n.focus=X(t),n.size[0]=s,n.size[1]=a,s=n.viewState,s.center=r,s.projection=i,s.resolution=e,this.o=i=new Uc(t,e,1,this.l,o,this.S.bind(this,n)),this.v={extent:t,resolution:e,kp:this.f},i},gy.prototype.S=function(t,e){for(var o=this.i.length,i=Array(o),n=0;n<o;++n){var r;r=this.i[n];var s=t,a=t.layerStatesArray[n];if(r.qd(s,a)){var l=s.size[0],p=s.size[1];if(BE){var h=BE.canvas;h.width!==l||h.height!==p?BE=Ee(l,p):BE.clearRect(0,0,l,p)}else BE=Ee(l,p);r.I(s,a,BE),r=BE.getImageData(0,0,l,p)}else r=null;if(!r){i=null;break}i[n]=r}i&&(o={},this.b(new by(VE,t,o)),this.C.Eo(i,o,this.oa.bind(this,t,e))),Mo(t.tileQueue,16,16)},gy.prototype.oa=function(t,e,o,i,n){o?e(o):i&&(this.b(new by(WE,t,n)),my(this,t.extent,t.viewState.resolution/t.pixelRatio)||this.g.putImageData(i,0,0),e(null))};var BE=null;h(by,ne),gy.prototype.Ic=function(){return null};var VE="beforeoperations",WE="afteroperations";h(Ey,ey);var zE=[new Wt({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.'}),UE],HE={terrain:{Hb:"jpg",opaque:!0},"terrain-background":{Hb:"jpg",opaque:!0},"terrain-labels":{Hb:"png",opaque:!1},"terrain-lines":{Hb:"png",opaque:!1},"toner-background":{Hb:"png",opaque:!0},toner:{Hb:"png",opaque:!0},"toner-hybrid":{Hb:"png",opaque:!1},"toner-labels":{Hb:"png",opaque:!1},"toner-lines":{Hb:"png",opaque:!1},"toner-lite":{Hb:"png",opaque:!0},watercolor:{Hb:"jpg",opaque:!0}},qE={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}};h(Sy,Zf),Sy.prototype.u=function(){return this.i},Sy.prototype.pb=function(t){return t},Sy.prototype.Fc=function(t,e,o){var i=this.tileGrid;if(i||(i=this.Ib(o)),!(i.b.length<=t[0])){var n=i.Ta(t,this.o),r=x(i.fb(t[0]),this.j);1!=e&&(r=M(r,e,this.j)),i={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},og(i,this.i);var s=this.urls;return s?(o=o.nb.split(":").pop(),i.SIZE=r[0]+","+r[1],i.BBOX=n.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(i.DPI?i.DPI*e:90*e),t=(1==s.length?s[0]:s[w((t[1]<<t[0])+t[2],s.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),t=ly(t,i)):t=void 0,t}},Sy.prototype.A=function(t){og(this.i,t),qf(this,Py(this))},h(wy,zf),wy.prototype.Lc=function(t,e,o){var i=this.Sb(t,e,o);if(this.a.b.hasOwnProperty(i))return this.a.get(i);var n=x(this.tileGrid.fb(t));return t=[t,e,o],e=(e=Yf(this,t))?Yf(this,e).toString():"",n=new Ay(t,n,e),this.a.set(i,n),n},h(Ay,Bc),Ay.prototype.Z=function(){if(this.f)return this.f;var t=this.c,e=Ee(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.Fa,t[0]/2,t[1]/2),this.f=e.canvas},Ay.prototype.load=function(){},h(Cy,Zf),Xy=Cy.prototype,Xy.On=function(t){if(t=t.target,!t.status||200<=t.status&&300>t.status){var e;try{e=JSON.parse(t.responseText)}catch(t){return void this.Le()}this.di(e)}else this.Le()},Xy.Nn=function(){this.Le()},Xy.Vk=function(){return this.i},Xy.di=function(t){var e,o=Et("EPSG:4326"),i=this.c;if(t.bounds){var n=wt(o,i);e=rt(t.bounds,n)}var r=t.minzoom||0,n=t.maxzoom||22;if(this.tileGrid=i=Ut({extent:Vt(i),maxZoom:n,minZoom:r}),this.tileUrlFunction=jf(t.tiles,i),void 0!==t.attribution&&!this.l){o=void 0!==e?e:o.D(),e={};for(var s;r<=n;++r)s=r.toString(),e[s]=[Nt(i,o,r)];this.ua([new Wt({html:t.attribution,tileRanges:e})])}this.i=t,qu(this,"ready")},Xy.Le=function(){qu(this,"error")},h(My,zf),Xy=My.prototype,Xy.Sn=function(t){if(t=t.target,!t.status||200<=t.status&&300>t.status){var e;try{e=JSON.parse(t.responseText)}catch(t){return void this.Me()}this.bg(e)}else this.Me()},Xy.Rn=function(){this.Me()},Xy.Sk=function(){return this.g},Xy.dk=function(t,e,o,i,n){this.tileGrid?(e=this.tileGrid.we(t,e),Iy(this.Lc(e[0],e[1],e[2],1,this.c),t,o,i,n)):!0===n?setTimeout(function(){o.call(i,null)},0):o.call(i,null)},Xy.Me=function(){qu(this,"error")},Xy.bg=function(t){var e,o=Et("EPSG:4326"),i=this.c;if(t.bounds){var n=wt(o,i);e=rt(t.bounds,n)}var r=t.minzoom||0,n=t.maxzoom||22;this.tileGrid=i=Ut({extent:Vt(i),maxZoom:n,minZoom:r}),this.g=t.template;var s=t.grids;if(s){if(this.o=jf(s,i),void 0!==t.attribution){for(o=void 0!==e?e:o.D(),e={};r<=n;++r)s=r.toString(),e[s]=[Nt(i,o,r)];this.ua([new Wt({html:t.attribution,tileRanges:e})])}qu(this,"ready")}else qu(this,"error")},Xy.Lc=function(t,e,o,i,n){var r=this.Sb(t,e,o);return this.a.b.hasOwnProperty(r)?this.a.get(r):(t=[t,e,o],e=Yf(this,t,n),i=this.o(e,i,n),i=new xy(t,void 0!==i?0:4,void 0!==i?i:"",this.tileGrid.Ta(t),this.v,this.i),this.a.set(r,i),i)},Xy.Eg=function(t,e,o){t=this.Sb(t,e,o),this.a.b.hasOwnProperty(t)&&this.a.get(t)},h(xy,Bc),Xy=xy.prototype,Xy.Z=function(){return null},Xy.getData=function(t){if(!this.g||!this.j)return null;var e=this.g[Math.floor((1-(t[1]-this.f[1])/(this.f[3]-this.f[1]))*this.g.length)];return"string"!=typeof e?null:(e=e.charCodeAt(Math.floor((t[0]-this.f[0])/(this.f[2]-this.f[0])*e.length)),93<=e&&e--,35<=e&&e--,e-=32,t=null,e in this.j&&(e=this.j[e],t=this.c&&e in this.c?this.c[e]:e),t)},Xy.ib=function(){return this.o},Xy.xe=function(){this.state=3,this.s()},Xy.ei=function(t){this.g=t.grid,this.j=t.keys,this.c=t.data,this.state=4,this.s()},Xy.Qn=function(t){if(t=t.target,!t.status||200<=t.status&&300>t.status){var e;try{e=JSON.parse(t.responseText)}catch(t){return void this.xe()}this.ei(e)}else this.xe()},Xy.Pn=function(){this.xe()},Xy.load=function(){this.I&&Ry(this)},h(Ty,Zf),Xy=Ty.prototype,Xy.Tn=function(t,e,o,i){o=Et(o);var n=this.tileGrid;if(n||(n=this.Ib(o)),e=n.we(t,e),!(n.b.length<=e[0])){var r=n.La(e[0]),s=n.Ta(e,this.ea),n=x(n.fb(e[0]),this.j),a=this.u;return a&&(n=C(n,a,this.j),s=R(s,r*a,s)),a={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.i.LAYERS},og(a,this.i,i),i=Math.floor((s[3]-t[1])/r),a[this.o?"I":"X"]=Math.floor((t[0]-s[0])/r),a[this.o?"J":"Y"]=i,Ly(this,e,n,s,1,o,a)}},Xy.Kf=function(){return this.u},Xy.Sb=function(t,e,o){return this.S+Zf.prototype.Sb.call(this,t,e,o)},Xy.Un=function(){return this.i},Xy.pb=function(t){return this.Y&&void 0!==this.A?t:1},Xy.Fc=function(t,e,o){var i=this.tileGrid;if(i||(i=this.Ib(o)),!(i.b.length<=t[0])){1==e||this.Y&&void 0!==this.A||(e=1);var n=i.La(t[0]),r=i.Ta(t,this.ea),i=x(i.fb(t[0]),this.j),s=this.u;return s&&(i=C(i,s,this.j),r=R(r,n*s,r)),1!=e&&(i=M(i,e,this.j)),n={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},og(n,this.i),Ly(this,t,i,r,e,o,n)}},Xy.cb=function(t){Zf.prototype.cb.call(this,t),Gy(this)},Xy.Vn=function(t){og(this.i,t),Gy(this),Ny(this),qf(this,Oy(this))},h(ky,Bc),Xy=ky.prototype,Xy.Z=function(){return-1==this.f.xg?null:this.c.canvas},Xy.rm=function(){return this.j},Xy.ib=function(){return this.o},Xy.load=function(){0==this.state&&(this.state=1,this.s(),this.I(this,this.o),this.v(null,NaN,null))},Xy.po=function(t,e){this.Xf(e),this.Hi(t)},Xy.oo=function(){this.state=3,this.s()},Xy.Hi=function(t){this.g=t,this.state=2,this.s()},Xy.Xf=function(t){this.l=t},Xy.Mi=function(t){this.v=t},h(jy,Xf),jy.prototype.Lc=function(t,e,o,i,n){var r=this.Sb(t,e,o);return this.a.b.hasOwnProperty(r)?this.a.get(r):(t=[t,e,o],i=(e=Yf(this,t,n))?this.tileUrlFunction(e,i,n):void 0,i=new this.tileClass(t,void 0!==i?0:4,void 0!==i?i:"",this.i,this.tileLoadFunction),Jt(i,"change",this.gi,this),this.a.set(r,i),i)},jy.prototype.pb=function(t){return void 0==t?Xf.prototype.pb.call(this,t):t},jy.prototype.Sd=function(t,e){var o=x(this.tileGrid.fb(t));return[Math.round(o[0]*e),Math.round(o[1]*e)]},h(Fy,Tt),Fy.prototype.o=function(){return this.j},h(By,Zf),Xy=By.prototype,Xy.rk=function(){return this.i},Xy.Wn=function(){return this.u},Xy.Xn=function(){return this.A},Xy.Fk=function(){return this.o},Xy.Qk=function(){return this.Y},Xy.Yn=function(){return this.S},Xy.Xk=function(){return this.ea},Xy.Gp=function(t){og(this.i,t),qf(this,Vy(this))},h(Wy,Zf),h(zy,Wc),zy.prototype.Z=function(){if(this.f)return this.f;var t=Wc.prototype.Z.call(this);if(2==this.state){if(256==t.width&&256==t.height)return this.f=t;var e=Ee(256,256);return e.drawImage(t,0,0),this.f=e.canvas}return t};var YE="default",KE="truncated";Hy.prototype.get=function(t){return this.c[t]||null},Hy.prototype.add=function(t,e,o,i,n){var r,s,a;for(s=0,a=this.a.length;s<a;++s)if(r=this.a[s],r.width>=e+this.b&&r.height>=o+this.b)return a={offsetX:r.x+this.b,offsetY:r.y+this.b,image:this.i},this.c[t]=a,i.call(n,this.f,r.x+this.b,r.y+this.b),t=s,e+=this.b,i=o+this.b,r.width-e>r.height-i?(o={x:r.x+e,y:r.y,width:r.width-e,height:r.height},e={x:r.x,y:r.y+i,width:e,height:r.height-i},qy(this,t,o,e)):(o={x:r.x+e,y:r.y,width:r.width-e,height:i},e={x:r.x,y:r.y+i,width:r.width,height:r.height-i},qy(this,t,o,e)),a;return null},Yy.prototype.add=function(t,e,o,i,n,r){return e+this.b>this.f||o+this.b>this.f?null:(i=Ky(this,!1,t,e,o,i,r))?(t=Ky(this,!0,t,e,o,n||c,r),{offsetX:i.offsetX,offsetY:i.offsetY,image:i.image,Fl:t.image}):null},d.prototype.code=d.prototype.code,t("ol.Attribution",Wt),Wt.prototype.getHTML=Wt.prototype.f,t("ol.Collection",de),de.prototype.clear=de.prototype.clear,de.prototype.extend=de.prototype.Tf,de.prototype.forEach=de.prototype.forEach,de.prototype.getArray=de.prototype.am,de.prototype.item=de.prototype.item,de.prototype.getLength=de.prototype.ec,de.prototype.insertAt=de.prototype.Be,de.prototype.pop=de.prototype.pop,de.prototype.push=de.prototype.push,de.prototype.remove=de.prototype.remove,de.prototype.removeAt=de.prototype.tg,de.prototype.setAt=de.prototype.mp,ye.prototype.element=ye.prototype.element,t("ol.color.asArray",ge),t("ol.color.asString",me),t("ol.colorlike.asColorLike",_e),t("ol.control.defaults",Ne),t("ol.coordinate.add",ko),t("ol.coordinate.createStringXY",function(t){return function(e){return qo(e,t)}}),t("ol.coordinate.format",Fo),t("ol.coordinate.rotate",Bo),t("ol.coordinate.toStringHDMS",function(t,e){return t?jo(t[1],"NS",e)+" "+jo(t[0],"EW",e):""}),t("ol.coordinate.toStringXY",qo),t("ol.DeviceOrientation",Ta),Ta.prototype.getAlpha=Ta.prototype.jk,Ta.prototype.getBeta=Ta.prototype.mk,Ta.prototype.getGamma=Ta.prototype.uk,Ta.prototype.getHeading=Ta.prototype.bm,Ta.prototype.getTracking=Ta.prototype.Fh,Ta.prototype.setTracking=Ta.prototype.Uf,t("ol.easing.easeIn",xe),t("ol.easing.easeOut",Ie),t("ol.easing.inAndOut",Re),t("ol.easing.linear",Te),t("ol.easing.upAndDown",function(t){return.5>t?Re(2*t):1-Re(2*(t-.5))}),t("ol.extent.boundingExtent",I),t("ol.extent.buffer",R),t("ol.extent.containsCoordinate",G),t("ol.extent.containsExtent",O),t("ol.extent.containsXY",N),t("ol.extent.createEmpty",D),t("ol.extent.equals",B),t("ol.extent.extend",V),t("ol.extent.getBottomLeft",Y),t("ol.extent.getBottomRight",K),t("ol.extent.getCenter",X),t("ol.extent.getHeight",J),t("ol.extent.getIntersection",Q),t("ol.extent.getSize",function(t){return[t[2]-t[0],t[3]-t[1]]}),t("ol.extent.getTopLeft",$),t("ol.extent.getTopRight",tt),t("ol.extent.getWidth",et),t("ol.extent.intersects",ot),t("ol.extent.isEmpty",it),t("ol.extent.applyTransform",rt),t("ol.Feature",Va),Va.prototype.clone=Va.prototype.clone,Va.prototype.getGeometry=Va.prototype.U,Va.prototype.getId=Va.prototype.dm,Va.prototype.getGeometryName=Va.prototype.wk,Va.prototype.getStyle=Va.prototype.em,Va.prototype.getStyleFunction=Va.prototype.Nc,Va.prototype.setGeometry=Va.prototype.Sa,Va.prototype.setStyle=Va.prototype.Vf,Va.prototype.setId=Va.prototype.kc,Va.prototype.setGeometryName=Va.prototype.Vc,t("ol.featureloader.xhr",cl),t("ol.Geolocation",Ic),Ic.prototype.getAccuracy=Ic.prototype.hk,Ic.prototype.getAccuracyGeometry=Ic.prototype.ik,Ic.prototype.getAltitude=Ic.prototype.kk,Ic.prototype.getAltitudeAccuracy=Ic.prototype.lk,Ic.prototype.getHeading=Ic.prototype.fm,Ic.prototype.getPosition=Ic.prototype.gm,Ic.prototype.getProjection=Ic.prototype.Gh,Ic.prototype.getSpeed=Ic.prototype.Rk,Ic.prototype.getTracking=Ic.prototype.Hh,Ic.prototype.getTrackingOptions=Ic.prototype.th,Ic.prototype.setProjection=Ic.prototype.Ih,Ic.prototype.setTracking=Ic.prototype.Ee,Ic.prototype.setTrackingOptions=Ic.prototype.Si,t("ol.Graticule",Nc),Nc.prototype.getMap=Nc.prototype.jm,Nc.prototype.getMeridians=Nc.prototype.Gk,Nc.prototype.getParallels=Nc.prototype.Nk,Nc.prototype.setMap=Nc.prototype.setMap,t("ol.has.DEVICE_PIXEL_RATIO",Cg),t("ol.has.CANVAS",xg),t("ol.has.DEVICE_ORIENTATION",Ig),t("ol.has.GEOLOCATION",Rg),t("ol.has.TOUCH",Tg),t("ol.has.WEBGL",vg),Fc.prototype.getImage=Fc.prototype.Z,Fc.prototype.load=Fc.prototype.load,Wc.prototype.getImage=Wc.prototype.Z,t("ol.inherits",h),t("ol.interaction.defaults",qn),t("ol.Kinetic",Yi),t("ol.loadingstrategy.all",Wu),t("ol.loadingstrategy.bbox",function(t){return[t]}),t("ol.loadingstrategy.tile",function(t){return function(e,o){var i=t.Mc(o),n=Nt(t,e,i),r=[],i=[i,0,0];for(i[1]=n.da;i[1]<=n.ba;++i[1])for(i[2]=n.fa;i[2]<=n.ja;++i[2])r.push(t.Ta(i));return r}}),t("ol.Map",ua),ua.prototype.addControl=ua.prototype.Rj,ua.prototype.addInteraction=ua.prototype.Sj,ua.prototype.addLayer=ua.prototype.Sg,ua.prototype.addOverlay=ua.prototype.Tg,ua.prototype.forEachFeatureAtPixel=ua.prototype.re,ua.prototype.forEachLayerAtPixel=ua.prototype.pm,ua.prototype.hasFeatureAtPixel=ua.prototype.El,ua.prototype.getEventCoordinate=ua.prototype.sk,ua.prototype.getEventPixel=ua.prototype.te,ua.prototype.getTarget=ua.prototype.Of,ua.prototype.getTargetElement=ua.prototype.Kc,ua.prototype.getCoordinateFromPixel=ua.prototype.Za,ua.prototype.getControls=ua.prototype.qk,ua.prototype.getOverlays=ua.prototype.Lk,ua.prototype.getOverlayById=ua.prototype.Kk,ua.prototype.getInteractions=ua.prototype.xk,ua.prototype.getLayerGroup=ua.prototype.Jc,ua.prototype.getLayers=ua.prototype.Jh,ua.prototype.getPixelFromCoordinate=ua.prototype.Ka,ua.prototype.getSize=ua.prototype.Mb,ua.prototype.getView=ua.prototype.$,ua.prototype.getViewport=ua.prototype.Yk,ua.prototype.renderSync=ua.prototype.ip,ua.prototype.render=ua.prototype.render,ua.prototype.removeControl=ua.prototype.ap,ua.prototype.removeInteraction=ua.prototype.bp,ua.prototype.removeLayer=ua.prototype.ep,ua.prototype.removeOverlay=ua.prototype.fp,ua.prototype.setLayerGroup=ua.prototype.Li,ua.prototype.setSize=ua.prototype.Ag,ua.prototype.setTarget=ua.prototype.Fe,ua.prototype.setView=ua.prototype.vp,ua.prototype.updateSize=ua.prototype.xd,ze.prototype.originalEvent=ze.prototype.originalEvent,ze.prototype.pixel=ze.prototype.pixel,ze.prototype.coordinate=ze.prototype.coordinate,ze.prototype.dragging=ze.prototype.dragging,We.prototype.map=We.prototype.map,We.prototype.frameState=We.prototype.frameState,t("ol.Object",pe),pe.prototype.get=pe.prototype.get,pe.prototype.getKeys=pe.prototype.O,pe.prototype.getProperties=pe.prototype.N,pe.prototype.set=pe.prototype.set,pe.prototype.setProperties=pe.prototype.H,pe.prototype.unset=pe.prototype.P,ue.prototype.key=ue.prototype.key,ue.prototype.oldValue=ue.prototype.oldValue,t("ol.Observable",le),t("ol.Observable.unByKey",function(t){if(Array.isArray(t))for(var e=0,o=t.length;e<o;++e)te(t[e]);else te(t)}),le.prototype.changed=le.prototype.s,le.prototype.dispatchEvent=le.prototype.b,le.prototype.getRevision=le.prototype.L,le.prototype.on=le.prototype.J,le.prototype.once=le.prototype.once,le.prototype.un=le.prototype.K,t("ol.Overlay",fa),fa.prototype.getElement=fa.prototype.se,fa.prototype.getId=fa.prototype.qm,fa.prototype.getMap=fa.prototype.Ge,fa.prototype.getOffset=fa.prototype.qh,fa.prototype.getPosition=fa.prototype.Kh,fa.prototype.getPositioning=fa.prototype.rh,fa.prototype.setElement=fa.prototype.Gi,fa.prototype.setMap=fa.prototype.setMap,fa.prototype.setOffset=fa.prototype.Ni,fa.prototype.setPosition=fa.prototype.Wf,fa.prototype.setPositioning=fa.prototype.Qi,t("ol.proj.METERS_PER_UNIT",ng),t("ol.proj.setProj4",function(t){rg=t}),t("ol.proj.getPointResolution",dt),t("ol.proj.addEquivalentProjections",ft),t("ol.proj.addProjection",gt),t("ol.proj.addCoordinateTransforms",_t),t("ol.proj.fromLonLat",function(t,e){return Mt(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}),t("ol.proj.toLonLat",function(t,e){return Mt(t,void 0!==e?e:"EPSG:3857","EPSG:4326")}),t("ol.proj.get",Et),t("ol.proj.equivalent",St),t("ol.proj.getTransform",Pt),t("ol.proj.transform",Mt),t("ol.proj.transformExtent",xt),t("ol.render.toContext",function(t,e){var o=t.canvas,i=e||{},n=i.pixelRatio||Cg;return(i=i.size)&&(o.width=i[0]*n,o.height=i[1]*n,o.style.width=i[0]+"px",o.style.height=i[1]+"px"),o=[0,0,o.width,o.height],i=cr(nr(),n,n),new wr(t,n,o,i,0)}),t("ol.size.toSize",x),t("ol.Sphere",pt),pt.prototype.geodesicArea=pt.prototype.a,pt.prototype.haversineDistance=pt.prototype.b,Bc.prototype.getTileCoord=Bc.prototype.i,Bc.prototype.load=Bc.prototype.load,t("ol.tilegrid.createXYZ",Ut),ky.prototype.getFormat=ky.prototype.rm,ky.prototype.setFeatures=ky.prototype.Hi;ky.prototype.setProjection=ky.prototype.Xf,ky.prototype.setLoader=ky.prototype.Mi,t("ol.View",ki),ki.prototype.animate=ki.prototype.animate,ki.prototype.constrainCenter=ki.prototype.Ec,ki.prototype.constrainResolution=ki.prototype.constrainResolution,ki.prototype.constrainRotation=ki.prototype.constrainRotation,ki.prototype.getCenter=ki.prototype.Ba,ki.prototype.calculateExtent=ki.prototype.ed,ki.prototype.getMaxResolution=ki.prototype.sm,ki.prototype.getMinResolution=ki.prototype.tm,ki.prototype.getProjection=ki.prototype.um,ki.prototype.getResolution=ki.prototype.Ua,ki.prototype.getResolutions=ki.prototype.vm,ki.prototype.getRotation=ki.prototype.Va,ki.prototype.getZoom=ki.prototype.$k,ki.prototype.fit=ki.prototype.Ff,ki.prototype.centerOn=ki.prototype.$j,ki.prototype.rotate=ki.prototype.rotate,ki.prototype.setCenter=ki.prototype.wb,ki.prototype.setResolution=ki.prototype.Xc,ki.prototype.setRotation=ki.prototype.He,ki.prototype.setZoom=ki.prototype.yp,t("ol.xml.getAllTextContent",Ha),t("ol.xml.parse",Xa),Jr.prototype.getGL=Jr.prototype.lo,Jr.prototype.useProgram=Jr.prototype.Rc,t("ol.tilegrid.TileGrid",Tt),Tt.prototype.forEachTileCoord=Tt.prototype.eh,Tt.prototype.getMaxZoom=Tt.prototype.oh,Tt.prototype.getMinZoom=Tt.prototype.ph,Tt.prototype.getOrigin=Tt.prototype.Qc,Tt.prototype.getResolution=Tt.prototype.La,Tt.prototype.getResolutions=Tt.prototype.oi,Tt.prototype.getTileCoordExtent=Tt.prototype.Ta,Tt.prototype.getTileCoordForCoordAndResolution=Tt.prototype.we,Tt.prototype.getTileCoordForCoordAndZ=Tt.prototype.Pf,Tt.prototype.getTileSize=Tt.prototype.fb,Tt.prototype.getZForResolution=Tt.prototype.Mc,t("ol.tilegrid.WMTS",Fy),Fy.prototype.getMatrixIds=Fy.prototype.o,t("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",Uy),t("ol.style.AtlasManager",Yy),t("ol.style.Circle",Na),Na.prototype.setRadius=Na.prototype.Wc,t("ol.style.Fill",ka),ka.prototype.clone=ka.prototype.clone,ka.prototype.getColor=ka.prototype.f,ka.prototype.setColor=ka.prototype.c,t("ol.style.Icon",Kp),Kp.prototype.clone=Kp.prototype.clone,Kp.prototype.getAnchor=Kp.prototype.Hc,Kp.prototype.getColor=Kp.prototype.Zn,Kp.prototype.getImage=Kp.prototype.Z,Kp.prototype.getOrigin=Kp.prototype.Pc,Kp.prototype.getSrc=Kp.prototype.$n,Kp.prototype.getSize=Kp.prototype.jc,Kp.prototype.load=Kp.prototype.load,t("ol.style.Image",La),La.prototype.getOpacity=La.prototype.Pe,La.prototype.getRotateWithView=La.prototype.Qe,La.prototype.getRotation=La.prototype.Re,La.prototype.getScale=La.prototype.Se,La.prototype.getSnapToPixel=La.prototype.ve,La.prototype.setOpacity=La.prototype.rd,La.prototype.setRotation=La.prototype.Te,La.prototype.setScale=La.prototype.sd,t("ol.style.RegularShape",Ga),Ga.prototype.clone=Ga.prototype.clone,Ga.prototype.getAnchor=Ga.prototype.Hc,Ga.prototype.getAngle=Ga.prototype.ki,Ga.prototype.getFill=Ga.prototype.Ca,Ga.prototype.getImage=Ga.prototype.Z,Ga.prototype.getOrigin=Ga.prototype.Pc,Ga.prototype.getPoints=Ga.prototype.li,Ga.prototype.getRadius=Ga.prototype.mi,Ga.prototype.getRadius2=Ga.prototype.sh,Ga.prototype.getSize=Ga.prototype.jc,Ga.prototype.getStroke=Ga.prototype.Da,t("ol.style.Stroke",Ps),Ps.prototype.clone=Ps.prototype.clone,Ps.prototype.getColor=Ps.prototype.ao,Ps.prototype.getLineCap=Ps.prototype.Ak,Ps.prototype.getLineDash=Ps.prototype.bo,Ps.prototype.getLineDashOffset=Ps.prototype.Bk,Ps.prototype.getLineJoin=Ps.prototype.Ck,Ps.prototype.getMiterLimit=Ps.prototype.Hk,Ps.prototype.getWidth=Ps.prototype.co,Ps.prototype.setColor=Ps.prototype.eo,Ps.prototype.setLineCap=Ps.prototype.qp,Ps.prototype.setLineDash=Ps.prototype.setLineDash,Ps.prototype.setLineDashOffset=Ps.prototype.rp,Ps.prototype.setLineJoin=Ps.prototype.sp,Ps.prototype.setMiterLimit=Ps.prototype.tp,Ps.prototype.setWidth=Ps.prototype.wp,t("ol.style.Style",Da),Da.prototype.clone=Da.prototype.clone,Da.prototype.getGeometry=Da.prototype.U,Da.prototype.getGeometryFunction=Da.prototype.vk,Da.prototype.getFill=Da.prototype.Ca,Da.prototype.setFill=Da.prototype.cf,Da.prototype.getImage=Da.prototype.Z,Da.prototype.setImage=Da.prototype.zg,Da.prototype.getStroke=Da.prototype.Da,Da.prototype.setStroke=Da.prototype.df,Da.prototype.getText=Da.prototype.Pa,Da.prototype.setText=Da.prototype.ef,Da.prototype.getZIndex=Da.prototype.za,Da.prototype.setGeometry=Da.prototype.Sa,Da.prototype.setZIndex=Da.prototype.Wb,t("ol.style.Text",Xp),Xp.prototype.clone=Xp.prototype.clone,Xp.prototype.getFont=Xp.prototype.tk,Xp.prototype.getOffsetX=Xp.prototype.Ik,Xp.prototype.getOffsetY=Xp.prototype.Jk,Xp.prototype.getFill=Xp.prototype.Ca,Xp.prototype.getRotateWithView=Xp.prototype.fo,Xp.prototype.getRotation=Xp.prototype.ho,Xp.prototype.getScale=Xp.prototype.io,Xp.prototype.getStroke=Xp.prototype.Da,Xp.prototype.getText=Xp.prototype.Pa,Xp.prototype.getTextAlign=Xp.prototype.Tk,Xp.prototype.getTextBaseline=Xp.prototype.Uk,Xp.prototype.setFont=Xp.prototype.Ii,Xp.prototype.setOffsetX=Xp.prototype.Oi,Xp.prototype.setOffsetY=Xp.prototype.Pi,Xp.prototype.setFill=Xp.prototype.cf,Xp.prototype.setRotation=Xp.prototype.jo,Xp.prototype.setScale=Xp.prototype.ni,Xp.prototype.setStroke=Xp.prototype.df,Xp.prototype.setText=Xp.prototype.ef,Xp.prototype.setTextAlign=Xp.prototype.Ri,Xp.prototype.setTextBaseline=Xp.prototype.up,t("ol.source.BingMaps",ty),t("ol.source.BingMaps.TOS_ATTRIBUTION",jE),ty.prototype.getApiKey=ty.prototype.Y,ty.prototype.getImagerySet=ty.prototype.ea,t("ol.source.CartoDB",oy),oy.prototype.getConfig=oy.prototype.pk,oy.prototype.updateConfig=oy.prototype.Fp,oy.prototype.setConfig=oy.prototype.np,t("ol.source.Cluster",ry),ry.prototype.getSource=ry.prototype.lb,ry.prototype.setDistance=ry.prototype.mb,t("ol.source.Image",ff),mf.prototype.image=mf.prototype.image,t("ol.source.ImageArcGISRest",py),py.prototype.getParams=py.prototype.rn,py.prototype.getImageLoadFunction=py.prototype.qn,py.prototype.getUrl=py.prototype.sn,py.prototype.setImageLoadFunction=py.prototype.tn,py.prototype.setUrl=py.prototype.vn,py.prototype.updateParams=py.prototype.wn,t("ol.source.ImageCanvas",vf),t("ol.source.ImageMapGuide",hy),hy.prototype.getParams=hy.prototype.yn,hy.prototype.getImageLoadFunction=hy.prototype.xn,hy.prototype.updateParams=hy.prototype.An,hy.prototype.setImageLoadFunction=hy.prototype.zn,t("ol.source.ImageStatic",cy),t("ol.source.ImageVector",_f),_f.prototype.getSource=_f.prototype.Bn,_f.prototype.getStyle=_f.prototype.Cn,_f.prototype.getStyleFunction=_f.prototype.Dn,_f.prototype.setStyle=_f.prototype.ci,t("ol.source.ImageWMS",uy),uy.prototype.getGetFeatureInfoUrl=uy.prototype.Gn,uy.prototype.getParams=uy.prototype.In,uy.prototype.getImageLoadFunction=uy.prototype.Hn,uy.prototype.getUrl=uy.prototype.Jn,uy.prototype.setImageLoadFunction=uy.prototype.Kn,uy.prototype.setUrl=uy.prototype.Ln,uy.prototype.updateParams=uy.prototype.Mn,t("ol.source.OSM",yy),t("ol.source.OSM.ATTRIBUTION",UE),t("ol.source.Raster",gy),gy.prototype.setOperation=gy.prototype.A,by.prototype.extent=by.prototype.extent,by.prototype.resolution=by.prototype.resolution,by.prototype.data=by.prototype.data,t("ol.source.Source",zu),zu.prototype.getAttributions=zu.prototype.xa,zu.prototype.getLogo=zu.prototype.wa,zu.prototype.getProjection=zu.prototype.ya,zu.prototype.getState=zu.prototype.V,zu.prototype.refresh=zu.prototype.va,zu.prototype.setAttributions=zu.prototype.ua,t("ol.source.Stamen",Ey),t("ol.source.Tile",zf),zf.prototype.getTileGrid=zf.prototype.ab,Kf.prototype.tile=Kf.prototype.tile,t("ol.source.TileArcGISRest",Sy),Sy.prototype.getParams=Sy.prototype.u,Sy.prototype.updateParams=Sy.prototype.A,t("ol.source.TileDebug",wy),t("ol.source.TileImage",Zf),Zf.prototype.setRenderReprojectionEdges=Zf.prototype.Nb,Zf.prototype.setTileGridForProjection=Zf.prototype.Ob,t("ol.source.TileJSON",Cy),Cy.prototype.getTileJSON=Cy.prototype.Vk;t("ol.source.TileUTFGrid",My),My.prototype.getTemplate=My.prototype.Sk,My.prototype.forDataAtCoordinateAndResolution=My.prototype.dk,t("ol.source.TileWMS",Ty),Ty.prototype.getGetFeatureInfoUrl=Ty.prototype.Tn,Ty.prototype.getParams=Ty.prototype.Un,Ty.prototype.updateParams=Ty.prototype.Vn,Xf.prototype.getTileLoadFunction=Xf.prototype.ob,Xf.prototype.getTileUrlFunction=Xf.prototype.qb,Xf.prototype.getUrls=Xf.prototype.rb,Xf.prototype.setTileLoadFunction=Xf.prototype.xb,Xf.prototype.setTileUrlFunction=Xf.prototype.bb,Xf.prototype.setUrl=Xf.prototype.jb,Xf.prototype.setUrls=Xf.prototype.cb,t("ol.source.Vector",Yu),Yu.prototype.addFeature=Yu.prototype.zb,
Yu.prototype.addFeatures=Yu.prototype.dd,Yu.prototype.clear=Yu.prototype.clear,Yu.prototype.forEachFeature=Yu.prototype.bh,Yu.prototype.forEachFeatureInExtent=Yu.prototype.ac,Yu.prototype.forEachFeatureIntersectingExtent=Yu.prototype.dh,Yu.prototype.getFeaturesCollection=Yu.prototype.lh,Yu.prototype.getFeatures=Yu.prototype.Ne,Yu.prototype.getFeaturesAtCoordinate=Yu.prototype.kh,Yu.prototype.getFeaturesInExtent=Yu.prototype.Hf,Yu.prototype.getClosestFeatureToCoordinate=Yu.prototype.gh,Yu.prototype.getExtent=Yu.prototype.D,Yu.prototype.getFeatureById=Yu.prototype.jh,Yu.prototype.getFormat=Yu.prototype.hi,Yu.prototype.getUrl=Yu.prototype.ii,Yu.prototype.removeFeature=Yu.prototype.Db,td.prototype.feature=td.prototype.feature,t("ol.source.VectorTile",jy),t("ol.source.WMTS",By),By.prototype.getDimensions=By.prototype.rk,By.prototype.getFormat=By.prototype.Wn,By.prototype.getLayer=By.prototype.Xn,By.prototype.getMatrixSet=By.prototype.Fk,By.prototype.getRequestEncoding=By.prototype.Qk,By.prototype.getStyle=By.prototype.Yn,By.prototype.getVersion=By.prototype.Xk,By.prototype.updateDimensions=By.prototype.Gp,t("ol.source.WMTS.optionsFromCapabilities",function(t,e){var i,n,s,a=r(t.Contents.Layer,function(t){return t.Identifier==e.layer}),p=t.Contents.TileMatrixSet;i=1<a.TileMatrixSetLink.length?"projection"in e?l(a.TileMatrixSetLink,function(t){var o=r(p,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),i=Et(o),n=Et(e.projection);return i&&n?St(i,n):o==e.projection}):l(a.TileMatrixSetLink,function(t){return t.TileMatrixSet==e.matrixSet}):0,0>i&&(i=0),n=a.TileMatrixSetLink[i].TileMatrixSet,s=a.TileMatrixSetLink[i].TileMatrixSetLimits;var h=a.Format[0];"format"in e&&(h=e.format),i=l(a.Style,function(t){return"style"in e?t.Title==e.style:t.isDefault}),0>i&&(i=0),i=a.Style[i].Identifier;var c={};"Dimension"in a&&a.Dimension.forEach(function(t){var e=t.Identifier,o=t.Default;void 0===o&&(o=t.Value[0]),c[e]=o});var u,d=r(t.Contents.TileMatrixSet,function(t){return t.Identifier==n});u=Et("projection"in e?e.projection:d.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var f,y,g=a.WGS84BoundingBox;void 0!==g&&(y=Et("EPSG:4326").D(),y=g[0]==y[0]&&g[2]==y[2],f=xt(g,"EPSG:4326",u),(g=u.D())&&(O(g,f)||(f=void 0))),s=Uy(d,f,s);var m=[],d=e.requestEncoding,d=void 0!==d?d:"";if("OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){f=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(var g=0,v=f.length;g<v;++g){var _=r(f[g].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===d&&(d=_[0]),"KVP"!==d)break;o(_,"KVP")&&m.push(f[g].href)}}return m.length||(d="REST",a.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(h=t.format,m.push(t.template))})),{urls:m,layer:e.layer,matrixSet:n,format:h,projection:u,requestEncoding:d,tileGrid:s,style:i,dimensions:c,wrapX:y}}),t("ol.source.XYZ",ey),t("ol.source.Zoomify",Wy),Er.prototype.vectorContext=Er.prototype.vectorContext,Er.prototype.frameState=Er.prototype.frameState,Er.prototype.context=Er.prototype.context,Er.prototype.glContext=Er.prototype.glContext,Rh.prototype.get=Rh.prototype.get,Rh.prototype.getExtent=Rh.prototype.D,Rh.prototype.getGeometry=Rh.prototype.U,Rh.prototype.getProperties=Rh.prototype.mn,Rh.prototype.getType=Rh.prototype.T,t("ol.render.VectorContext",Pr),sa.prototype.setStyle=sa.prototype.pd,sa.prototype.drawGeometry=sa.prototype.mc,sa.prototype.drawFeature=sa.prototype.oe,wr.prototype.drawCircle=wr.prototype.$b,wr.prototype.setStyle=wr.prototype.pd,wr.prototype.drawGeometry=wr.prototype.mc,wr.prototype.drawFeature=wr.prototype.oe,t("ol.proj.common.add",tr),t("ol.proj.Projection",ht),ht.prototype.getCode=ht.prototype.nk,ht.prototype.getExtent=ht.prototype.D,ht.prototype.getUnits=ht.prototype.Jb,ht.prototype.getMetersPerUnit=ht.prototype.sc,ht.prototype.getWorldExtent=ht.prototype.Zk,ht.prototype.isGlobal=ht.prototype.Kl,ht.prototype.setGlobal=ht.prototype.pp,ht.prototype.setExtent=ht.prototype.ln,ht.prototype.setWorldExtent=ht.prototype.xp,ht.prototype.setGetPointResolution=ht.prototype.op,t("ol.proj.Units.METERS_PER_UNIT",ng),t("ol.layer.Base",Yn),Yn.prototype.getExtent=Yn.prototype.D,Yn.prototype.getMaxResolution=Yn.prototype.gc,Yn.prototype.getMinResolution=Yn.prototype.hc,Yn.prototype.getOpacity=Yn.prototype.ic,Yn.prototype.getVisible=Yn.prototype.Kb,Yn.prototype.getZIndex=Yn.prototype.za,Yn.prototype.setExtent=Yn.prototype.uc,Yn.prototype.setMaxResolution=Yn.prototype.zc,Yn.prototype.setMinResolution=Yn.prototype.Ac,Yn.prototype.setOpacity=Yn.prototype.vc,Yn.prototype.setVisible=Yn.prototype.wc,Yn.prototype.setZIndex=Yn.prototype.Wb,t("ol.layer.Group",Xn),Xn.prototype.getLayers=Xn.prototype.od,Xn.prototype.setLayers=Xn.prototype.Sh,t("ol.layer.Heatmap",nf),nf.prototype.getBlur=nf.prototype.fh,nf.prototype.getGradient=nf.prototype.mh,nf.prototype.getRadius=nf.prototype.Th,nf.prototype.setBlur=nf.prototype.Ei,nf.prototype.setGradient=nf.prototype.Ki,nf.prototype.setRadius=nf.prototype.Wc,t("ol.layer.Image",wf),wf.prototype.getSource=wf.prototype.la,t("ol.layer.Layer",er),er.prototype.getSource=er.prototype.la,er.prototype.setMap=er.prototype.setMap,er.prototype.setSource=er.prototype.Yc,t("ol.layer.Tile",Tf),Tf.prototype.getPreload=Tf.prototype.Pd,Tf.prototype.getSource=Tf.prototype.la,Tf.prototype.setPreload=Tf.prototype.Uh,Tf.prototype.getUseInterimTilesOnError=Tf.prototype.Td,Tf.prototype.setUseInterimTilesOnError=Tf.prototype.Vh,t("ol.layer.Vector",Vu),Vu.prototype.getSource=Vu.prototype.la,Vu.prototype.getStyle=Vu.prototype.C,Vu.prototype.getStyleFunction=Vu.prototype.G,Vu.prototype.setStyle=Vu.prototype.g,t("ol.layer.VectorTile",Of),Of.prototype.getPreload=Of.prototype.Pd,Of.prototype.getUseInterimTilesOnError=Of.prototype.Td,Of.prototype.setPreload=Of.prototype.Wh,Of.prototype.setUseInterimTilesOnError=Of.prototype.Xh,t("ol.interaction.DoubleClickZoom",$i),t("ol.interaction.DoubleClickZoom.handleEvent",tn),t("ol.interaction.DragAndDrop",Hc),t("ol.interaction.DragAndDrop.handleEvent",Yo),Kc.prototype.features=Kc.prototype.features,Kc.prototype.file=Kc.prototype.file,Kc.prototype.projection=Kc.prototype.projection,t("ol.interaction.DragBox",An),An.prototype.getGeometry=An.prototype.U,Rn.prototype.coordinate=Rn.prototype.coordinate,Rn.prototype.mapBrowserEvent=Rn.prototype.mapBrowserEvent,t("ol.interaction.DragPan",fn),t("ol.interaction.DragRotate",vn),t("ol.interaction.DragRotateAndZoom",Xc),t("ol.interaction.DragZoom",Tn),t("ol.interaction.Draw",ed),t("ol.interaction.Draw.handleEvent",id),ed.prototype.removeLastPoint=ed.prototype.cp,ed.prototype.finishDrawing=ed.prototype.Nd,ed.prototype.extend=ed.prototype.Om,t("ol.interaction.Draw.createRegularPolygon",function(t,e){return function(o,i){var n=o[0],r=o[1],s=Math.sqrt(Wo(n,r)),a=i||Oi(new Rc(n),t);return Ni(a,n,s,e||Math.atan((r[1]-n[1])/(r[0]-n[0]))),a}}),t("ol.interaction.Draw.createBox",function(){return function(t,e){var o=I(t),i=e||new Ri(null);return i.pa([[Y(o),K(o),tt(o),$(o),Y(o)]]),i}}),dd.prototype.feature=dd.prototype.feature,t("ol.interaction.Extent",fd),fd.prototype.getExtent=fd.prototype.D,fd.prototype.setExtent=fd.prototype.g,Ad.prototype.extent_=Ad.prototype.b,t("ol.interaction.Interaction",Xi),Xi.prototype.getActive=Xi.prototype.c,Xi.prototype.getMap=Xi.prototype.i,Xi.prototype.setActive=Xi.prototype.Ia,t("ol.interaction.KeyboardPan",Ln),t("ol.interaction.KeyboardPan.handleEvent",Gn),t("ol.interaction.KeyboardZoom",On),t("ol.interaction.KeyboardZoom.handleEvent",Nn),t("ol.interaction.Modify",Cd),t("ol.interaction.Modify.handleEvent",Nd),Cd.prototype.removePoint=Cd.prototype.Ci,Bd.prototype.features=Bd.prototype.features,Bd.prototype.mapBrowserEvent=Bd.prototype.mapBrowserEvent,t("ol.interaction.MouseWheelZoom",kn),t("ol.interaction.MouseWheelZoom.handleEvent",Dn),kn.prototype.setMouseAnchor=kn.prototype.S,t("ol.interaction.PinchRotate",jn),t("ol.interaction.PinchZoom",Vn),t("ol.interaction.Pointer",cn),t("ol.interaction.Pointer.handleEvent",dn),t("ol.interaction.Select",Vd),Vd.prototype.getFeatures=Vd.prototype.Ym,Vd.prototype.getHitTolerance=Vd.prototype.Zm,Vd.prototype.getLayer=Vd.prototype.$m,t("ol.interaction.Select.handleEvent",Wd),Vd.prototype.setHitTolerance=Vd.prototype.bn,Vd.prototype.setMap=Vd.prototype.setMap,Hd.prototype.selected=Hd.prototype.selected,Hd.prototype.deselected=Hd.prototype.deselected,Hd.prototype.mapBrowserEvent=Hd.prototype.mapBrowserEvent,t("ol.interaction.Snap",qd),qd.prototype.addFeature=qd.prototype.zb,qd.prototype.removeFeature=qd.prototype.Db,t("ol.interaction.Translate",Zd),Zd.prototype.getHitTolerance=Zd.prototype.G,Zd.prototype.setHitTolerance=Zd.prototype.R,of.prototype.features=of.prototype.features,of.prototype.coordinate=of.prototype.coordinate,t("ol.geom.Circle",Rc),Rc.prototype.clone=Rc.prototype.clone,Rc.prototype.getCenter=Rc.prototype.Ba,Rc.prototype.getRadius=Rc.prototype.Vd,Rc.prototype.getType=Rc.prototype.T,Rc.prototype.intersectsExtent=Rc.prototype.Xa,Rc.prototype.setCenter=Rc.prototype.wb,Rc.prototype.setCenterAndRadius=Rc.prototype.yg,Rc.prototype.setRadius=Rc.prototype.Wc,Rc.prototype.transform=Rc.prototype.tb,t("ol.geom.Geometry",Xo),Xo.prototype.getClosestPoint=Xo.prototype.Ab,Xo.prototype.intersectsCoordinate=Xo.prototype.sb,Xo.prototype.getExtent=Xo.prototype.D,Xo.prototype.rotate=Xo.prototype.rotate;return Xo.prototype.scale=Xo.prototype.scale,Xo.prototype.simplify=Xo.prototype.Pb,Xo.prototype.transform=Xo.prototype.tb,t("ol.geom.GeometryCollection",rp),rp.prototype.clone=rp.prototype.clone,rp.prototype.getGeometries=rp.prototype.If,rp.prototype.getType=rp.prototype.T,rp.prototype.intersectsExtent=rp.prototype.Xa,rp.prototype.setGeometries=rp.prototype.Ji,rp.prototype.applyTransform=rp.prototype.Dc,rp.prototype.translate=rp.prototype.translate,t("ol.geom.LinearRing",gi),gi.prototype.clone=gi.prototype.clone,gi.prototype.getArea=gi.prototype.Km,gi.prototype.getCoordinates=gi.prototype.X,gi.prototype.getType=gi.prototype.T,gi.prototype.setCoordinates=gi.prototype.pa,t("ol.geom.LineString",El),El.prototype.appendCoordinate=El.prototype.Tj,El.prototype.clone=El.prototype.clone,El.prototype.forEachSegment=El.prototype.gk,El.prototype.getCoordinateAtM=El.prototype.Im,El.prototype.getCoordinates=El.prototype.X,El.prototype.getCoordinateAt=El.prototype.hh,El.prototype.getLength=El.prototype.Jm,El.prototype.getType=El.prototype.T,El.prototype.intersectsExtent=El.prototype.Xa,El.prototype.setCoordinates=El.prototype.pa,t("ol.geom.MultiLineString",Pl),Pl.prototype.appendLineString=Pl.prototype.Uj,Pl.prototype.clone=Pl.prototype.clone,Pl.prototype.getCoordinateAtM=Pl.prototype.Lm,Pl.prototype.getCoordinates=Pl.prototype.X,Pl.prototype.getLineString=Pl.prototype.Dk,Pl.prototype.getLineStrings=Pl.prototype.hd,Pl.prototype.getType=Pl.prototype.T,Pl.prototype.intersectsExtent=Pl.prototype.Xa,Pl.prototype.setCoordinates=Pl.prototype.pa,t("ol.geom.MultiPoint",Cl),Cl.prototype.appendPoint=Cl.prototype.Wj,Cl.prototype.clone=Cl.prototype.clone,Cl.prototype.getCoordinates=Cl.prototype.X,Cl.prototype.getPoint=Cl.prototype.Ok,Cl.prototype.getPoints=Cl.prototype.Ie,Cl.prototype.getType=Cl.prototype.T,Cl.prototype.intersectsExtent=Cl.prototype.Xa,Cl.prototype.setCoordinates=Cl.prototype.pa,t("ol.geom.MultiPolygon",Ml),Ml.prototype.appendPolygon=Ml.prototype.Xj,Ml.prototype.clone=Ml.prototype.clone,Ml.prototype.getArea=Ml.prototype.Mm,Ml.prototype.getCoordinates=Ml.prototype.X,Ml.prototype.getInteriorPoints=Ml.prototype.zk,Ml.prototype.getPolygon=Ml.prototype.Pk,Ml.prototype.getPolygons=Ml.prototype.Od,Ml.prototype.getType=Ml.prototype.T,Ml.prototype.intersectsExtent=Ml.prototype.Xa,Ml.prototype.setCoordinates=Ml.prototype.pa,t("ol.geom.Point",vi),vi.prototype.clone=vi.prototype.clone,vi.prototype.getCoordinates=vi.prototype.X,vi.prototype.getType=vi.prototype.T,vi.prototype.intersectsExtent=vi.prototype.Xa,vi.prototype.setCoordinates=vi.prototype.pa,t("ol.geom.Polygon",Ri),Ri.prototype.appendLinearRing=Ri.prototype.Vj,Ri.prototype.clone=Ri.prototype.clone,Ri.prototype.getArea=Ri.prototype.Nm,Ri.prototype.getCoordinates=Ri.prototype.X,Ri.prototype.getInteriorPoint=Ri.prototype.yk,Ri.prototype.getLinearRingCount=Ri.prototype.Ek,Ri.prototype.getLinearRing=Ri.prototype.nh,Ri.prototype.getLinearRings=Ri.prototype.jd,Ri.prototype.getType=Ri.prototype.T,Ri.prototype.intersectsExtent=Ri.prototype.Xa,Ri.prototype.setCoordinates=Ri.prototype.pa,t("ol.geom.Polygon.circular",Li),t("ol.geom.Polygon.fromExtent",Gi),t("ol.geom.Polygon.fromCircle",Oi),t("ol.geom.SimpleGeometry",Qo),Qo.prototype.getFirstCoordinate=Qo.prototype.bc,Qo.prototype.getLastCoordinate=Qo.prototype.cc,Qo.prototype.getLayout=Qo.prototype.dc,Qo.prototype.applyTransform=Qo.prototype.Dc,Qo.prototype.translate=Qo.prototype.translate,t("ol.format.EsriJSON",Ll),Ll.prototype.readFeature=Ll.prototype.Ub,Ll.prototype.readFeatures=Ll.prototype.Qa,Ll.prototype.readGeometry=Ll.prototype.Tc,Ll.prototype.readProjection=Ll.prototype.kb,Ll.prototype.writeGeometry=Ll.prototype.bd,Ll.prototype.writeGeometryObject=Ll.prototype.ee,Ll.prototype.writeFeature=Ll.prototype.yd,Ll.prototype.writeFeatureObject=Ll.prototype.ad,Ll.prototype.writeFeatures=Ll.prototype.Xb,Ll.prototype.writeFeaturesObject=Ll.prototype.ce,t("ol.format.Feature",ul),t("ol.format.filter.and",ip),t("ol.format.filter.or",function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(ep,e))}),t("ol.format.filter.not",function(t){return new $l(t)}),t("ol.format.filter.bbox",np),t("ol.format.filter.intersects",function(t,e,o){return new Yl(t,e,o)}),t("ol.format.filter.within",function(t,e,o){return new op(t,e,o)}),t("ol.format.filter.equalTo",function(t,e,o){return new Wl(t,e,o)}),t("ol.format.filter.notEqualTo",function(t,e,o){return new tp(t,e,o)}),t("ol.format.filter.lessThan",function(t,e){return new Jl(t,e)}),t("ol.format.filter.lessThanOrEqualTo",function(t,e){return new Ql(t,e)}),t("ol.format.filter.greaterThan",function(t,e){return new zl(t,e)}),t("ol.format.filter.greaterThanOrEqualTo",function(t,e){return new Hl(t,e)}),t("ol.format.filter.isNull",function(t){return new Zl(t)}),t("ol.format.filter.between",function(t,e,o){return new Kl(t,e,o)}),t("ol.format.filter.like",function(t,e,o,i,n,r){return new Xl(t,e,o,i,n,r)}),t("ol.format.GeoJSON",pp),pp.prototype.readFeature=pp.prototype.Ub,pp.prototype.readFeatures=pp.prototype.Qa,pp.prototype.readGeometry=pp.prototype.Tc,pp.prototype.readProjection=pp.prototype.kb,pp.prototype.writeFeature=pp.prototype.yd,pp.prototype.writeFeatureObject=pp.prototype.ad,pp.prototype.writeFeatures=pp.prototype.Xb,pp.prototype.writeFeaturesObject=pp.prototype.ce,pp.prototype.writeGeometry=pp.prototype.bd,pp.prototype.writeGeometryObject=pp.prototype.ee,t("ol.format.GML",xp),xp.prototype.writeFeatures=xp.prototype.Xb,xp.prototype.writeFeaturesNode=xp.prototype.Yb,t("ol.format.GML2",Rp),t("ol.format.GML3",xp),xp.prototype.writeGeometryNode=xp.prototype.de,xp.prototype.writeFeatures=xp.prototype.Xb,xp.prototype.writeFeaturesNode=xp.prototype.Yb,yp.prototype.readFeatures=yp.prototype.Qa,t("ol.format.GPX",Tp),Tp.prototype.readFeature=Tp.prototype.Ub,Tp.prototype.readFeatures=Tp.prototype.Qa,Tp.prototype.readProjection=Tp.prototype.kb,Tp.prototype.writeFeatures=Tp.prototype.Xb,Tp.prototype.writeFeaturesNode=Tp.prototype.Yb,t("ol.format.IGC",Hp),Hp.prototype.readFeature=Hp.prototype.Ub,Hp.prototype.readFeatures=Hp.prototype.Qa,Hp.prototype.readProjection=Hp.prototype.kb,t("ol.format.KML",Zp),Zp.prototype.readFeature=Zp.prototype.Ub,Zp.prototype.readFeatures=Zp.prototype.Qa,Zp.prototype.readName=Zp.prototype.Ro,Zp.prototype.readNetworkLinks=Zp.prototype.So,Zp.prototype.readRegion=Zp.prototype.Vo,Zp.prototype.readRegionFromNode=Zp.prototype.$e,Zp.prototype.readProjection=Zp.prototype.kb,Zp.prototype.writeFeatures=Zp.prototype.Xb,Zp.prototype.writeFeaturesNode=Zp.prototype.Yb,t("ol.format.MVT",Th),Th.prototype.readFeatures=Th.prototype.Qa,Th.prototype.readProjection=Th.prototype.kb,Th.prototype.setLayers=Th.prototype.Hm,t("ol.format.OSMXML",Gh),Gh.prototype.readFeatures=Gh.prototype.Qa,Gh.prototype.readProjection=Gh.prototype.kb,t("ol.format.Polyline",Fh),t("ol.format.Polyline.encodeDeltas",Uh),t("ol.format.Polyline.decodeDeltas",Bh),t("ol.format.Polyline.encodeFloats",Vh),t("ol.format.Polyline.decodeFloats",Wh),Fh.prototype.readFeature=Fh.prototype.Ub,Fh.prototype.readFeatures=Fh.prototype.Qa,Fh.prototype.readGeometry=Fh.prototype.Tc,Fh.prototype.readProjection=Fh.prototype.kb,Fh.prototype.writeGeometry=Fh.prototype.bd,t("ol.format.TopoJSON",zh),zh.prototype.readFeatures=zh.prototype.Qa,zh.prototype.readProjection=zh.prototype.kb,t("ol.format.WFS",Xh),Xh.prototype.readFeatures=Xh.prototype.Qa,Xh.prototype.readTransactionResponse=Xh.prototype.j,Xh.prototype.readFeatureCollectionMetadata=Xh.prototype.l,Xh.prototype.writeGetFeature=Xh.prototype.o,Xh.prototype.writeTransaction=Xh.prototype.v,Xh.prototype.readProjection=Xh.prototype.kb,t("ol.format.WKT",rc),rc.prototype.readFeature=rc.prototype.Ub,rc.prototype.readFeatures=rc.prototype.Qa,rc.prototype.readGeometry=rc.prototype.Tc,rc.prototype.writeFeature=rc.prototype.yd,rc.prototype.writeFeatures=rc.prototype.Xb,rc.prototype.writeGeometry=rc.prototype.bd,t("ol.format.WMSCapabilities",Ec),Ec.prototype.read=Ec.prototype.read,t("ol.format.WMSGetFeatureInfo",Cc),Cc.prototype.readFeatures=Cc.prototype.Qa,t("ol.format.WMTSCapabilities",Mc),Mc.prototype.read=Mc.prototype.read,t("ol.format.filter.And",Fl),t("ol.format.filter.Bbox",Ul),t("ol.format.filter.Comparison",Bl),t("ol.format.filter.ComparisonBinary",Vl),t("ol.format.filter.EqualTo",Wl),t("ol.format.filter.Filter",Dl),t("ol.format.filter.GreaterThan",zl),t("ol.format.filter.GreaterThanOrEqualTo",Hl),t("ol.format.filter.Intersects",Yl),t("ol.format.filter.IsBetween",Kl),t("ol.format.filter.IsLike",Xl),t("ol.format.filter.IsNull",Zl),t("ol.format.filter.LessThan",Jl),t("ol.format.filter.LessThanOrEqualTo",Ql),t("ol.format.filter.Not",$l),t("ol.format.filter.NotEqualTo",tp),t("ol.format.filter.Or",ep),t("ol.format.filter.Spatial",ql),t("ol.format.filter.Within",op),t("ol.events.condition.altKeyOnly",function(t){return t=t.originalEvent,t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}),t("ol.events.condition.altShiftKeysOnly",en),t("ol.events.condition.always",Yo),t("ol.events.condition.click",function(t){return"click"==t.type}),t("ol.events.condition.never",Ko),t("ol.events.condition.pointerMove",nn),t("ol.events.condition.singleClick",rn),t("ol.events.condition.doubleClick",function(t){return"dblclick"==t.type}),t("ol.events.condition.noModifierKeys",sn),t("ol.events.condition.platformModifierKeyOnly",function(t){return t=t.originalEvent,!t.altKey&&(Ag?t.metaKey:t.ctrlKey)&&!t.shiftKey}),t("ol.events.condition.shiftKeyOnly",an),t("ol.events.condition.targetNotEditable",ln),t("ol.events.condition.mouseOnly",pn),t("ol.events.condition.primaryAction",hn),ne.prototype.type=ne.prototype.type,ne.prototype.target=ne.prototype.target,ne.prototype.preventDefault=ne.prototype.preventDefault,ne.prototype.stopPropagation=ne.prototype.stopPropagation,t("ol.control.Attribution",Ae),t("ol.control.Attribution.render",Ce),Ae.prototype.getCollapsible=Ae.prototype.xm,Ae.prototype.setCollapsible=Ae.prototype.Am,Ae.prototype.setCollapsed=Ae.prototype.zm,Ae.prototype.getCollapsed=Ae.prototype.wm,t("ol.control.Control",we),we.prototype.getMap=we.prototype.g,we.prototype.setMap=we.prototype.setMap,we.prototype.setTarget=we.prototype.i,t("ol.control.FullScreen",ke),t("ol.control.MousePosition",Ue),t("ol.control.MousePosition.render",Be),Ue.prototype.getCoordinateFormat=Ue.prototype.ih,Ue.prototype.getProjection=Ue.prototype.Lh,Ue.prototype.setCoordinateFormat=Ue.prototype.Fi,Ue.prototype.setProjection=Ue.prototype.Mh,t("ol.control.OverviewMap",va),t("ol.control.OverviewMap.render",_a),va.prototype.getCollapsible=va.prototype.Dm,va.prototype.setCollapsible=va.prototype.Gm,va.prototype.setCollapsed=va.prototype.Fm,va.prototype.getCollapsed=va.prototype.Cm,va.prototype.getOverviewMap=va.prototype.Mk,t("ol.control.Rotate",Le),t("ol.control.Rotate.render",Ge),t("ol.control.ScaleLine",Pa),Pa.prototype.getUnits=Pa.prototype.Jb,t("ol.control.ScaleLine.render",wa),Pa.prototype.setUnits=Pa.prototype.G,t("ol.control.Zoom",Oe),t("ol.control.ZoomSlider",Ca),t("ol.control.ZoomSlider.render",Ma),t("ol.control.ZoomToExtent",Ra),pe.prototype.changed=pe.prototype.s,pe.prototype.dispatchEvent=pe.prototype.b,pe.prototype.getRevision=pe.prototype.L,pe.prototype.on=pe.prototype.J,pe.prototype.once=pe.prototype.once,pe.prototype.un=pe.prototype.K,de.prototype.get=de.prototype.get,de.prototype.getKeys=de.prototype.O,de.prototype.getProperties=de.prototype.N,de.prototype.set=de.prototype.set,de.prototype.setProperties=de.prototype.H,de.prototype.unset=de.prototype.P,de.prototype.changed=de.prototype.s,de.prototype.dispatchEvent=de.prototype.b,de.prototype.getRevision=de.prototype.L,de.prototype.on=de.prototype.J,de.prototype.once=de.prototype.once,de.prototype.un=de.prototype.K,ye.prototype.type=ye.prototype.type,ye.prototype.target=ye.prototype.target,ye.prototype.preventDefault=ye.prototype.preventDefault,ye.prototype.stopPropagation=ye.prototype.stopPropagation,Ta.prototype.get=Ta.prototype.get,Ta.prototype.getKeys=Ta.prototype.O,Ta.prototype.getProperties=Ta.prototype.N,Ta.prototype.set=Ta.prototype.set,Ta.prototype.setProperties=Ta.prototype.H,Ta.prototype.unset=Ta.prototype.P,Ta.prototype.changed=Ta.prototype.s,Ta.prototype.dispatchEvent=Ta.prototype.b,Ta.prototype.getRevision=Ta.prototype.L,Ta.prototype.on=Ta.prototype.J,Ta.prototype.once=Ta.prototype.once,Ta.prototype.un=Ta.prototype.K,Va.prototype.get=Va.prototype.get,Va.prototype.getKeys=Va.prototype.O,Va.prototype.getProperties=Va.prototype.N,Va.prototype.set=Va.prototype.set,Va.prototype.setProperties=Va.prototype.H,Va.prototype.unset=Va.prototype.P,Va.prototype.changed=Va.prototype.s,Va.prototype.dispatchEvent=Va.prototype.b,Va.prototype.getRevision=Va.prototype.L,Va.prototype.on=Va.prototype.J,Va.prototype.once=Va.prototype.once,Va.prototype.un=Va.prototype.K,Ic.prototype.get=Ic.prototype.get,Ic.prototype.getKeys=Ic.prototype.O,Ic.prototype.getProperties=Ic.prototype.N,Ic.prototype.set=Ic.prototype.set,Ic.prototype.setProperties=Ic.prototype.H,Ic.prototype.unset=Ic.prototype.P,Ic.prototype.changed=Ic.prototype.s,Ic.prototype.dispatchEvent=Ic.prototype.b,Ic.prototype.getRevision=Ic.prototype.L,Ic.prototype.on=Ic.prototype.J,Ic.prototype.once=Ic.prototype.once,Ic.prototype.un=Ic.prototype.K,Wc.prototype.getTileCoord=Wc.prototype.i,Wc.prototype.load=Wc.prototype.load,ua.prototype.get=ua.prototype.get,ua.prototype.getKeys=ua.prototype.O,ua.prototype.getProperties=ua.prototype.N,ua.prototype.set=ua.prototype.set,ua.prototype.setProperties=ua.prototype.H,ua.prototype.unset=ua.prototype.P,ua.prototype.changed=ua.prototype.s,ua.prototype.dispatchEvent=ua.prototype.b,ua.prototype.getRevision=ua.prototype.L,ua.prototype.on=ua.prototype.J,ua.prototype.once=ua.prototype.once,ua.prototype.un=ua.prototype.K,We.prototype.type=We.prototype.type,We.prototype.target=We.prototype.target,We.prototype.preventDefault=We.prototype.preventDefault,We.prototype.stopPropagation=We.prototype.stopPropagation,ze.prototype.map=ze.prototype.map,ze.prototype.frameState=ze.prototype.frameState,ze.prototype.type=ze.prototype.type,ze.prototype.target=ze.prototype.target,ze.prototype.preventDefault=ze.prototype.preventDefault,ze.prototype.stopPropagation=ze.prototype.stopPropagation,He.prototype.originalEvent=He.prototype.originalEvent,He.prototype.pixel=He.prototype.pixel,He.prototype.coordinate=He.prototype.coordinate,He.prototype.dragging=He.prototype.dragging,He.prototype.preventDefault=He.prototype.preventDefault,He.prototype.stopPropagation=He.prototype.stopPropagation,He.prototype.map=He.prototype.map,He.prototype.frameState=He.prototype.frameState,He.prototype.type=He.prototype.type,He.prototype.target=He.prototype.target,ue.prototype.type=ue.prototype.type,ue.prototype.target=ue.prototype.target,ue.prototype.preventDefault=ue.prototype.preventDefault,ue.prototype.stopPropagation=ue.prototype.stopPropagation,fa.prototype.get=fa.prototype.get,fa.prototype.getKeys=fa.prototype.O,fa.prototype.getProperties=fa.prototype.N,fa.prototype.set=fa.prototype.set,fa.prototype.setProperties=fa.prototype.H,fa.prototype.unset=fa.prototype.P,fa.prototype.changed=fa.prototype.s,fa.prototype.dispatchEvent=fa.prototype.b,fa.prototype.getRevision=fa.prototype.L,fa.prototype.on=fa.prototype.J,fa.prototype.once=fa.prototype.once,fa.prototype.un=fa.prototype.K,ky.prototype.getTileCoord=ky.prototype.i,ky.prototype.load=ky.prototype.load,ki.prototype.get=ki.prototype.get,ki.prototype.getKeys=ki.prototype.O,ki.prototype.getProperties=ki.prototype.N,ki.prototype.set=ki.prototype.set,ki.prototype.setProperties=ki.prototype.H,ki.prototype.unset=ki.prototype.P,ki.prototype.changed=ki.prototype.s,ki.prototype.dispatchEvent=ki.prototype.b,ki.prototype.getRevision=ki.prototype.L,ki.prototype.on=ki.prototype.J,ki.prototype.once=ki.prototype.once,ki.prototype.un=ki.prototype.K,Fy.prototype.forEachTileCoord=Fy.prototype.eh,Fy.prototype.getMaxZoom=Fy.prototype.oh,Fy.prototype.getMinZoom=Fy.prototype.ph,Fy.prototype.getOrigin=Fy.prototype.Qc,Fy.prototype.getResolution=Fy.prototype.La,Fy.prototype.getResolutions=Fy.prototype.oi,Fy.prototype.getTileCoordExtent=Fy.prototype.Ta,Fy.prototype.getTileCoordForCoordAndResolution=Fy.prototype.we,Fy.prototype.getTileCoordForCoordAndZ=Fy.prototype.Pf,Fy.prototype.getTileSize=Fy.prototype.fb,Fy.prototype.getZForResolution=Fy.prototype.Mc,Ga.prototype.getOpacity=Ga.prototype.Pe,Ga.prototype.getRotateWithView=Ga.prototype.Qe,Ga.prototype.getRotation=Ga.prototype.Re,Ga.prototype.getScale=Ga.prototype.Se,Ga.prototype.getSnapToPixel=Ga.prototype.ve,Ga.prototype.setOpacity=Ga.prototype.rd,Ga.prototype.setRotation=Ga.prototype.Te,Ga.prototype.setScale=Ga.prototype.sd,Na.prototype.clone=Na.prototype.clone,Na.prototype.getAngle=Na.prototype.ki,Na.prototype.getFill=Na.prototype.Ca,Na.prototype.getPoints=Na.prototype.li,Na.prototype.getRadius=Na.prototype.mi,Na.prototype.getRadius2=Na.prototype.sh,Na.prototype.getStroke=Na.prototype.Da,Na.prototype.getOpacity=Na.prototype.Pe,Na.prototype.getRotateWithView=Na.prototype.Qe,Na.prototype.getRotation=Na.prototype.Re,Na.prototype.getScale=Na.prototype.Se,Na.prototype.getSnapToPixel=Na.prototype.ve,Na.prototype.setOpacity=Na.prototype.rd,Na.prototype.setRotation=Na.prototype.Te,Na.prototype.setScale=Na.prototype.sd,Kp.prototype.getOpacity=Kp.prototype.Pe,Kp.prototype.getRotateWithView=Kp.prototype.Qe,Kp.prototype.getRotation=Kp.prototype.Re,Kp.prototype.getScale=Kp.prototype.Se,Kp.prototype.getSnapToPixel=Kp.prototype.ve,Kp.prototype.setOpacity=Kp.prototype.rd,Kp.prototype.setRotation=Kp.prototype.Te,Kp.prototype.setScale=Kp.prototype.sd,zu.prototype.get=zu.prototype.get,zu.prototype.getKeys=zu.prototype.O,zu.prototype.getProperties=zu.prototype.N,zu.prototype.set=zu.prototype.set,zu.prototype.setProperties=zu.prototype.H,zu.prototype.unset=zu.prototype.P,zu.prototype.changed=zu.prototype.s,zu.prototype.dispatchEvent=zu.prototype.b,zu.prototype.getRevision=zu.prototype.L,zu.prototype.on=zu.prototype.J,zu.prototype.once=zu.prototype.once,zu.prototype.un=zu.prototype.K,zf.prototype.getAttributions=zf.prototype.xa,zf.prototype.getLogo=zf.prototype.wa,zf.prototype.getProjection=zf.prototype.ya,zf.prototype.getState=zf.prototype.V,zf.prototype.refresh=zf.prototype.va,zf.prototype.setAttributions=zf.prototype.ua,zf.prototype.get=zf.prototype.get,zf.prototype.getKeys=zf.prototype.O,zf.prototype.getProperties=zf.prototype.N,zf.prototype.set=zf.prototype.set,zf.prototype.setProperties=zf.prototype.H,zf.prototype.unset=zf.prototype.P,zf.prototype.changed=zf.prototype.s,zf.prototype.dispatchEvent=zf.prototype.b,zf.prototype.getRevision=zf.prototype.L,zf.prototype.on=zf.prototype.J,zf.prototype.once=zf.prototype.once,zf.prototype.un=zf.prototype.K,Xf.prototype.getTileGrid=Xf.prototype.ab,Xf.prototype.refresh=Xf.prototype.va,Xf.prototype.getAttributions=Xf.prototype.xa,Xf.prototype.getLogo=Xf.prototype.wa,Xf.prototype.getProjection=Xf.prototype.ya,Xf.prototype.getState=Xf.prototype.V,Xf.prototype.setAttributions=Xf.prototype.ua,Xf.prototype.get=Xf.prototype.get,Xf.prototype.getKeys=Xf.prototype.O,Xf.prototype.getProperties=Xf.prototype.N,Xf.prototype.set=Xf.prototype.set,Xf.prototype.setProperties=Xf.prototype.H,Xf.prototype.unset=Xf.prototype.P,Xf.prototype.changed=Xf.prototype.s,Xf.prototype.dispatchEvent=Xf.prototype.b,Xf.prototype.getRevision=Xf.prototype.L,Xf.prototype.on=Xf.prototype.J,Xf.prototype.once=Xf.prototype.once,Xf.prototype.un=Xf.prototype.K,Zf.prototype.getTileLoadFunction=Zf.prototype.ob,Zf.prototype.getTileUrlFunction=Zf.prototype.qb,Zf.prototype.getUrls=Zf.prototype.rb,Zf.prototype.setTileLoadFunction=Zf.prototype.xb,Zf.prototype.setTileUrlFunction=Zf.prototype.bb,Zf.prototype.setUrl=Zf.prototype.jb,Zf.prototype.setUrls=Zf.prototype.cb,Zf.prototype.getTileGrid=Zf.prototype.ab,Zf.prototype.refresh=Zf.prototype.va,Zf.prototype.getAttributions=Zf.prototype.xa,Zf.prototype.getLogo=Zf.prototype.wa,Zf.prototype.getProjection=Zf.prototype.ya,Zf.prototype.getState=Zf.prototype.V,Zf.prototype.setAttributions=Zf.prototype.ua,Zf.prototype.get=Zf.prototype.get,Zf.prototype.getKeys=Zf.prototype.O,Zf.prototype.getProperties=Zf.prototype.N,Zf.prototype.set=Zf.prototype.set,Zf.prototype.setProperties=Zf.prototype.H,Zf.prototype.unset=Zf.prototype.P,Zf.prototype.changed=Zf.prototype.s,Zf.prototype.dispatchEvent=Zf.prototype.b,Zf.prototype.getRevision=Zf.prototype.L,Zf.prototype.on=Zf.prototype.J,Zf.prototype.once=Zf.prototype.once,Zf.prototype.un=Zf.prototype.K,ty.prototype.setRenderReprojectionEdges=ty.prototype.Nb,ty.prototype.setTileGridForProjection=ty.prototype.Ob,ty.prototype.getTileLoadFunction=ty.prototype.ob,ty.prototype.getTileUrlFunction=ty.prototype.qb,ty.prototype.getUrls=ty.prototype.rb,ty.prototype.setTileLoadFunction=ty.prototype.xb,ty.prototype.setTileUrlFunction=ty.prototype.bb,ty.prototype.setUrl=ty.prototype.jb,ty.prototype.setUrls=ty.prototype.cb,ty.prototype.getTileGrid=ty.prototype.ab,ty.prototype.refresh=ty.prototype.va,ty.prototype.getAttributions=ty.prototype.xa,ty.prototype.getLogo=ty.prototype.wa,ty.prototype.getProjection=ty.prototype.ya,ty.prototype.getState=ty.prototype.V,ty.prototype.setAttributions=ty.prototype.ua,ty.prototype.get=ty.prototype.get,ty.prototype.getKeys=ty.prototype.O,ty.prototype.getProperties=ty.prototype.N,ty.prototype.set=ty.prototype.set,ty.prototype.setProperties=ty.prototype.H,ty.prototype.unset=ty.prototype.P,ty.prototype.changed=ty.prototype.s,ty.prototype.dispatchEvent=ty.prototype.b,ty.prototype.getRevision=ty.prototype.L,ty.prototype.on=ty.prototype.J,ty.prototype.once=ty.prototype.once,ty.prototype.un=ty.prototype.K,ey.prototype.setRenderReprojectionEdges=ey.prototype.Nb,ey.prototype.setTileGridForProjection=ey.prototype.Ob,ey.prototype.getTileLoadFunction=ey.prototype.ob,ey.prototype.getTileUrlFunction=ey.prototype.qb,ey.prototype.getUrls=ey.prototype.rb,ey.prototype.setTileLoadFunction=ey.prototype.xb,ey.prototype.setTileUrlFunction=ey.prototype.bb,ey.prototype.setUrl=ey.prototype.jb,ey.prototype.setUrls=ey.prototype.cb,ey.prototype.getTileGrid=ey.prototype.ab,ey.prototype.refresh=ey.prototype.va,ey.prototype.getAttributions=ey.prototype.xa,ey.prototype.getLogo=ey.prototype.wa,ey.prototype.getProjection=ey.prototype.ya,ey.prototype.getState=ey.prototype.V,ey.prototype.setAttributions=ey.prototype.ua,ey.prototype.get=ey.prototype.get,ey.prototype.getKeys=ey.prototype.O,ey.prototype.getProperties=ey.prototype.N,ey.prototype.set=ey.prototype.set,ey.prototype.setProperties=ey.prototype.H,ey.prototype.unset=ey.prototype.P,ey.prototype.changed=ey.prototype.s,ey.prototype.dispatchEvent=ey.prototype.b,ey.prototype.getRevision=ey.prototype.L,ey.prototype.on=ey.prototype.J,
ey.prototype.once=ey.prototype.once,ey.prototype.un=ey.prototype.K,oy.prototype.setRenderReprojectionEdges=oy.prototype.Nb,oy.prototype.setTileGridForProjection=oy.prototype.Ob,oy.prototype.getTileLoadFunction=oy.prototype.ob,oy.prototype.getTileUrlFunction=oy.prototype.qb,oy.prototype.getUrls=oy.prototype.rb,oy.prototype.setTileLoadFunction=oy.prototype.xb,oy.prototype.setTileUrlFunction=oy.prototype.bb,oy.prototype.setUrl=oy.prototype.jb,oy.prototype.setUrls=oy.prototype.cb,oy.prototype.getTileGrid=oy.prototype.ab,oy.prototype.refresh=oy.prototype.va,oy.prototype.getAttributions=oy.prototype.xa,oy.prototype.getLogo=oy.prototype.wa,oy.prototype.getProjection=oy.prototype.ya,oy.prototype.getState=oy.prototype.V,oy.prototype.setAttributions=oy.prototype.ua,oy.prototype.get=oy.prototype.get,oy.prototype.getKeys=oy.prototype.O,oy.prototype.getProperties=oy.prototype.N,oy.prototype.set=oy.prototype.set,oy.prototype.setProperties=oy.prototype.H,oy.prototype.unset=oy.prototype.P,oy.prototype.changed=oy.prototype.s,oy.prototype.dispatchEvent=oy.prototype.b,oy.prototype.getRevision=oy.prototype.L,oy.prototype.on=oy.prototype.J,oy.prototype.once=oy.prototype.once,oy.prototype.un=oy.prototype.K,Yu.prototype.getAttributions=Yu.prototype.xa,Yu.prototype.getLogo=Yu.prototype.wa,Yu.prototype.getProjection=Yu.prototype.ya,Yu.prototype.getState=Yu.prototype.V,Yu.prototype.refresh=Yu.prototype.va,Yu.prototype.setAttributions=Yu.prototype.ua,Yu.prototype.get=Yu.prototype.get,Yu.prototype.getKeys=Yu.prototype.O,Yu.prototype.getProperties=Yu.prototype.N,Yu.prototype.set=Yu.prototype.set,Yu.prototype.setProperties=Yu.prototype.H,Yu.prototype.unset=Yu.prototype.P,Yu.prototype.changed=Yu.prototype.s,Yu.prototype.dispatchEvent=Yu.prototype.b,Yu.prototype.getRevision=Yu.prototype.L,Yu.prototype.on=Yu.prototype.J,Yu.prototype.once=Yu.prototype.once,Yu.prototype.un=Yu.prototype.K,ry.prototype.addFeature=ry.prototype.zb,ry.prototype.addFeatures=ry.prototype.dd,ry.prototype.clear=ry.prototype.clear,ry.prototype.forEachFeature=ry.prototype.bh,ry.prototype.forEachFeatureInExtent=ry.prototype.ac,ry.prototype.forEachFeatureIntersectingExtent=ry.prototype.dh,ry.prototype.getFeaturesCollection=ry.prototype.lh,ry.prototype.getFeatures=ry.prototype.Ne,ry.prototype.getFeaturesAtCoordinate=ry.prototype.kh,ry.prototype.getFeaturesInExtent=ry.prototype.Hf,ry.prototype.getClosestFeatureToCoordinate=ry.prototype.gh,ry.prototype.getExtent=ry.prototype.D,ry.prototype.getFeatureById=ry.prototype.jh,ry.prototype.getFormat=ry.prototype.hi,ry.prototype.getUrl=ry.prototype.ii,ry.prototype.removeFeature=ry.prototype.Db,ry.prototype.getAttributions=ry.prototype.xa,ry.prototype.getLogo=ry.prototype.wa,ry.prototype.getProjection=ry.prototype.ya,ry.prototype.getState=ry.prototype.V,ry.prototype.refresh=ry.prototype.va,ry.prototype.setAttributions=ry.prototype.ua,ry.prototype.get=ry.prototype.get,ry.prototype.getKeys=ry.prototype.O,ry.prototype.getProperties=ry.prototype.N,ry.prototype.set=ry.prototype.set,ry.prototype.setProperties=ry.prototype.H,ry.prototype.unset=ry.prototype.P,ry.prototype.changed=ry.prototype.s,ry.prototype.dispatchEvent=ry.prototype.b,ry.prototype.getRevision=ry.prototype.L,ry.prototype.on=ry.prototype.J,ry.prototype.once=ry.prototype.once,ry.prototype.un=ry.prototype.K,ff.prototype.getAttributions=ff.prototype.xa,ff.prototype.getLogo=ff.prototype.wa,ff.prototype.getProjection=ff.prototype.ya,ff.prototype.getState=ff.prototype.V,ff.prototype.refresh=ff.prototype.va,ff.prototype.setAttributions=ff.prototype.ua,ff.prototype.get=ff.prototype.get,ff.prototype.getKeys=ff.prototype.O,ff.prototype.getProperties=ff.prototype.N,ff.prototype.set=ff.prototype.set,ff.prototype.setProperties=ff.prototype.H,ff.prototype.unset=ff.prototype.P,ff.prototype.changed=ff.prototype.s,ff.prototype.dispatchEvent=ff.prototype.b,ff.prototype.getRevision=ff.prototype.L,ff.prototype.on=ff.prototype.J,ff.prototype.once=ff.prototype.once,ff.prototype.un=ff.prototype.K,mf.prototype.type=mf.prototype.type,mf.prototype.target=mf.prototype.target,mf.prototype.preventDefault=mf.prototype.preventDefault,mf.prototype.stopPropagation=mf.prototype.stopPropagation,py.prototype.getAttributions=py.prototype.xa,py.prototype.getLogo=py.prototype.wa,py.prototype.getProjection=py.prototype.ya,py.prototype.getState=py.prototype.V,py.prototype.refresh=py.prototype.va,py.prototype.setAttributions=py.prototype.ua,py.prototype.get=py.prototype.get,py.prototype.getKeys=py.prototype.O,py.prototype.getProperties=py.prototype.N,py.prototype.set=py.prototype.set,py.prototype.setProperties=py.prototype.H,py.prototype.unset=py.prototype.P,py.prototype.changed=py.prototype.s,py.prototype.dispatchEvent=py.prototype.b,py.prototype.getRevision=py.prototype.L,py.prototype.on=py.prototype.J,py.prototype.once=py.prototype.once,py.prototype.un=py.prototype.K,vf.prototype.getAttributions=vf.prototype.xa,vf.prototype.getLogo=vf.prototype.wa,vf.prototype.getProjection=vf.prototype.ya,vf.prototype.getState=vf.prototype.V,vf.prototype.refresh=vf.prototype.va,vf.prototype.setAttributions=vf.prototype.ua,vf.prototype.get=vf.prototype.get,vf.prototype.getKeys=vf.prototype.O,vf.prototype.getProperties=vf.prototype.N,vf.prototype.set=vf.prototype.set,vf.prototype.setProperties=vf.prototype.H,vf.prototype.unset=vf.prototype.P,vf.prototype.changed=vf.prototype.s,vf.prototype.dispatchEvent=vf.prototype.b,vf.prototype.getRevision=vf.prototype.L,vf.prototype.on=vf.prototype.J,vf.prototype.once=vf.prototype.once,vf.prototype.un=vf.prototype.K,hy.prototype.getAttributions=hy.prototype.xa,hy.prototype.getLogo=hy.prototype.wa,hy.prototype.getProjection=hy.prototype.ya,hy.prototype.getState=hy.prototype.V,hy.prototype.refresh=hy.prototype.va,hy.prototype.setAttributions=hy.prototype.ua,hy.prototype.get=hy.prototype.get,hy.prototype.getKeys=hy.prototype.O,hy.prototype.getProperties=hy.prototype.N,hy.prototype.set=hy.prototype.set,hy.prototype.setProperties=hy.prototype.H,hy.prototype.unset=hy.prototype.P,hy.prototype.changed=hy.prototype.s,hy.prototype.dispatchEvent=hy.prototype.b,hy.prototype.getRevision=hy.prototype.L,hy.prototype.on=hy.prototype.J,hy.prototype.once=hy.prototype.once,hy.prototype.un=hy.prototype.K,cy.prototype.getAttributions=cy.prototype.xa,cy.prototype.getLogo=cy.prototype.wa,cy.prototype.getProjection=cy.prototype.ya,cy.prototype.getState=cy.prototype.V,cy.prototype.refresh=cy.prototype.va,cy.prototype.setAttributions=cy.prototype.ua,cy.prototype.get=cy.prototype.get,cy.prototype.getKeys=cy.prototype.O,cy.prototype.getProperties=cy.prototype.N,cy.prototype.set=cy.prototype.set,cy.prototype.setProperties=cy.prototype.H,cy.prototype.unset=cy.prototype.P,cy.prototype.changed=cy.prototype.s,cy.prototype.dispatchEvent=cy.prototype.b,cy.prototype.getRevision=cy.prototype.L,cy.prototype.on=cy.prototype.J,cy.prototype.once=cy.prototype.once,cy.prototype.un=cy.prototype.K,_f.prototype.getAttributions=_f.prototype.xa,_f.prototype.getLogo=_f.prototype.wa,_f.prototype.getProjection=_f.prototype.ya,_f.prototype.getState=_f.prototype.V,_f.prototype.refresh=_f.prototype.va,_f.prototype.setAttributions=_f.prototype.ua,_f.prototype.get=_f.prototype.get,_f.prototype.getKeys=_f.prototype.O,_f.prototype.getProperties=_f.prototype.N,_f.prototype.set=_f.prototype.set,_f.prototype.setProperties=_f.prototype.H,_f.prototype.unset=_f.prototype.P,_f.prototype.changed=_f.prototype.s,_f.prototype.dispatchEvent=_f.prototype.b,_f.prototype.getRevision=_f.prototype.L,_f.prototype.on=_f.prototype.J,_f.prototype.once=_f.prototype.once,_f.prototype.un=_f.prototype.K,uy.prototype.getAttributions=uy.prototype.xa,uy.prototype.getLogo=uy.prototype.wa,uy.prototype.getProjection=uy.prototype.ya,uy.prototype.getState=uy.prototype.V,uy.prototype.refresh=uy.prototype.va,uy.prototype.setAttributions=uy.prototype.ua,uy.prototype.get=uy.prototype.get,uy.prototype.getKeys=uy.prototype.O,uy.prototype.getProperties=uy.prototype.N,uy.prototype.set=uy.prototype.set,uy.prototype.setProperties=uy.prototype.H,uy.prototype.unset=uy.prototype.P,uy.prototype.changed=uy.prototype.s,uy.prototype.dispatchEvent=uy.prototype.b,uy.prototype.getRevision=uy.prototype.L,uy.prototype.on=uy.prototype.J,uy.prototype.once=uy.prototype.once,uy.prototype.un=uy.prototype.K,yy.prototype.setRenderReprojectionEdges=yy.prototype.Nb,yy.prototype.setTileGridForProjection=yy.prototype.Ob,yy.prototype.getTileLoadFunction=yy.prototype.ob,yy.prototype.getTileUrlFunction=yy.prototype.qb,yy.prototype.getUrls=yy.prototype.rb,yy.prototype.setTileLoadFunction=yy.prototype.xb,yy.prototype.setTileUrlFunction=yy.prototype.bb,yy.prototype.setUrl=yy.prototype.jb,yy.prototype.setUrls=yy.prototype.cb,yy.prototype.getTileGrid=yy.prototype.ab,yy.prototype.refresh=yy.prototype.va,yy.prototype.getAttributions=yy.prototype.xa,yy.prototype.getLogo=yy.prototype.wa,yy.prototype.getProjection=yy.prototype.ya,yy.prototype.getState=yy.prototype.V,yy.prototype.setAttributions=yy.prototype.ua,yy.prototype.get=yy.prototype.get,yy.prototype.getKeys=yy.prototype.O,yy.prototype.getProperties=yy.prototype.N,yy.prototype.set=yy.prototype.set,yy.prototype.setProperties=yy.prototype.H,yy.prototype.unset=yy.prototype.P,yy.prototype.changed=yy.prototype.s,yy.prototype.dispatchEvent=yy.prototype.b,yy.prototype.getRevision=yy.prototype.L,yy.prototype.on=yy.prototype.J,yy.prototype.once=yy.prototype.once,yy.prototype.un=yy.prototype.K,gy.prototype.getAttributions=gy.prototype.xa,gy.prototype.getLogo=gy.prototype.wa,gy.prototype.getProjection=gy.prototype.ya,gy.prototype.getState=gy.prototype.V,gy.prototype.refresh=gy.prototype.va,gy.prototype.setAttributions=gy.prototype.ua,gy.prototype.get=gy.prototype.get,gy.prototype.getKeys=gy.prototype.O,gy.prototype.getProperties=gy.prototype.N,gy.prototype.set=gy.prototype.set,gy.prototype.setProperties=gy.prototype.H,gy.prototype.unset=gy.prototype.P,gy.prototype.changed=gy.prototype.s,gy.prototype.dispatchEvent=gy.prototype.b,gy.prototype.getRevision=gy.prototype.L,gy.prototype.on=gy.prototype.J,gy.prototype.once=gy.prototype.once,gy.prototype.un=gy.prototype.K,by.prototype.type=by.prototype.type,by.prototype.target=by.prototype.target,by.prototype.preventDefault=by.prototype.preventDefault,by.prototype.stopPropagation=by.prototype.stopPropagation,Ey.prototype.setRenderReprojectionEdges=Ey.prototype.Nb,Ey.prototype.setTileGridForProjection=Ey.prototype.Ob,Ey.prototype.getTileLoadFunction=Ey.prototype.ob,Ey.prototype.getTileUrlFunction=Ey.prototype.qb,Ey.prototype.getUrls=Ey.prototype.rb,Ey.prototype.setTileLoadFunction=Ey.prototype.xb,Ey.prototype.setTileUrlFunction=Ey.prototype.bb,Ey.prototype.setUrl=Ey.prototype.jb,Ey.prototype.setUrls=Ey.prototype.cb,Ey.prototype.getTileGrid=Ey.prototype.ab,Ey.prototype.refresh=Ey.prototype.va,Ey.prototype.getAttributions=Ey.prototype.xa,Ey.prototype.getLogo=Ey.prototype.wa,Ey.prototype.getProjection=Ey.prototype.ya,Ey.prototype.getState=Ey.prototype.V,Ey.prototype.setAttributions=Ey.prototype.ua,Ey.prototype.get=Ey.prototype.get,Ey.prototype.getKeys=Ey.prototype.O,Ey.prototype.getProperties=Ey.prototype.N,Ey.prototype.set=Ey.prototype.set,Ey.prototype.setProperties=Ey.prototype.H,Ey.prototype.unset=Ey.prototype.P,Ey.prototype.changed=Ey.prototype.s,Ey.prototype.dispatchEvent=Ey.prototype.b,Ey.prototype.getRevision=Ey.prototype.L,Ey.prototype.on=Ey.prototype.J,Ey.prototype.once=Ey.prototype.once,Ey.prototype.un=Ey.prototype.K,Kf.prototype.type=Kf.prototype.type,Kf.prototype.target=Kf.prototype.target,Kf.prototype.preventDefault=Kf.prototype.preventDefault,Kf.prototype.stopPropagation=Kf.prototype.stopPropagation,Sy.prototype.setRenderReprojectionEdges=Sy.prototype.Nb,Sy.prototype.setTileGridForProjection=Sy.prototype.Ob,Sy.prototype.getTileLoadFunction=Sy.prototype.ob,Sy.prototype.getTileUrlFunction=Sy.prototype.qb,Sy.prototype.getUrls=Sy.prototype.rb,Sy.prototype.setTileLoadFunction=Sy.prototype.xb,Sy.prototype.setTileUrlFunction=Sy.prototype.bb,Sy.prototype.setUrl=Sy.prototype.jb,Sy.prototype.setUrls=Sy.prototype.cb,Sy.prototype.getTileGrid=Sy.prototype.ab,Sy.prototype.refresh=Sy.prototype.va,Sy.prototype.getAttributions=Sy.prototype.xa,Sy.prototype.getLogo=Sy.prototype.wa,Sy.prototype.getProjection=Sy.prototype.ya,Sy.prototype.getState=Sy.prototype.V,Sy.prototype.setAttributions=Sy.prototype.ua,Sy.prototype.get=Sy.prototype.get,Sy.prototype.getKeys=Sy.prototype.O,Sy.prototype.getProperties=Sy.prototype.N,Sy.prototype.set=Sy.prototype.set,Sy.prototype.setProperties=Sy.prototype.H,Sy.prototype.unset=Sy.prototype.P,Sy.prototype.changed=Sy.prototype.s,Sy.prototype.dispatchEvent=Sy.prototype.b,Sy.prototype.getRevision=Sy.prototype.L,Sy.prototype.on=Sy.prototype.J,Sy.prototype.once=Sy.prototype.once,Sy.prototype.un=Sy.prototype.K,wy.prototype.getTileGrid=wy.prototype.ab,wy.prototype.refresh=wy.prototype.va,wy.prototype.getAttributions=wy.prototype.xa,wy.prototype.getLogo=wy.prototype.wa,wy.prototype.getProjection=wy.prototype.ya,wy.prototype.getState=wy.prototype.V,wy.prototype.setAttributions=wy.prototype.ua,wy.prototype.get=wy.prototype.get,wy.prototype.getKeys=wy.prototype.O,wy.prototype.getProperties=wy.prototype.N,wy.prototype.set=wy.prototype.set,wy.prototype.setProperties=wy.prototype.H,wy.prototype.unset=wy.prototype.P,wy.prototype.changed=wy.prototype.s,wy.prototype.dispatchEvent=wy.prototype.b,wy.prototype.getRevision=wy.prototype.L,wy.prototype.on=wy.prototype.J,wy.prototype.once=wy.prototype.once,wy.prototype.un=wy.prototype.K,Cy.prototype.setRenderReprojectionEdges=Cy.prototype.Nb,Cy.prototype.setTileGridForProjection=Cy.prototype.Ob,Cy.prototype.getTileLoadFunction=Cy.prototype.ob,Cy.prototype.getTileUrlFunction=Cy.prototype.qb,Cy.prototype.getUrls=Cy.prototype.rb,Cy.prototype.setTileLoadFunction=Cy.prototype.xb,Cy.prototype.setTileUrlFunction=Cy.prototype.bb,Cy.prototype.setUrl=Cy.prototype.jb,Cy.prototype.setUrls=Cy.prototype.cb,Cy.prototype.getTileGrid=Cy.prototype.ab,Cy.prototype.refresh=Cy.prototype.va,Cy.prototype.getAttributions=Cy.prototype.xa,Cy.prototype.getLogo=Cy.prototype.wa,Cy.prototype.getProjection=Cy.prototype.ya,Cy.prototype.getState=Cy.prototype.V,Cy.prototype.setAttributions=Cy.prototype.ua,Cy.prototype.get=Cy.prototype.get,Cy.prototype.getKeys=Cy.prototype.O,Cy.prototype.getProperties=Cy.prototype.N,Cy.prototype.set=Cy.prototype.set,Cy.prototype.setProperties=Cy.prototype.H,Cy.prototype.unset=Cy.prototype.P,Cy.prototype.changed=Cy.prototype.s,Cy.prototype.dispatchEvent=Cy.prototype.b,Cy.prototype.getRevision=Cy.prototype.L,Cy.prototype.on=Cy.prototype.J,Cy.prototype.once=Cy.prototype.once,Cy.prototype.un=Cy.prototype.K,My.prototype.getTileGrid=My.prototype.ab,My.prototype.refresh=My.prototype.va,My.prototype.getAttributions=My.prototype.xa,My.prototype.getLogo=My.prototype.wa,My.prototype.getProjection=My.prototype.ya,My.prototype.getState=My.prototype.V,My.prototype.setAttributions=My.prototype.ua,My.prototype.get=My.prototype.get,My.prototype.getKeys=My.prototype.O,My.prototype.getProperties=My.prototype.N,My.prototype.set=My.prototype.set,My.prototype.setProperties=My.prototype.H,My.prototype.unset=My.prototype.P,My.prototype.changed=My.prototype.s,My.prototype.dispatchEvent=My.prototype.b,My.prototype.getRevision=My.prototype.L,My.prototype.on=My.prototype.J,My.prototype.once=My.prototype.once,My.prototype.un=My.prototype.K,Ty.prototype.setRenderReprojectionEdges=Ty.prototype.Nb,Ty.prototype.setTileGridForProjection=Ty.prototype.Ob,Ty.prototype.getTileLoadFunction=Ty.prototype.ob,Ty.prototype.getTileUrlFunction=Ty.prototype.qb,Ty.prototype.getUrls=Ty.prototype.rb,Ty.prototype.setTileLoadFunction=Ty.prototype.xb,Ty.prototype.setTileUrlFunction=Ty.prototype.bb,Ty.prototype.setUrl=Ty.prototype.jb,Ty.prototype.setUrls=Ty.prototype.cb,Ty.prototype.getTileGrid=Ty.prototype.ab,Ty.prototype.refresh=Ty.prototype.va,Ty.prototype.getAttributions=Ty.prototype.xa,Ty.prototype.getLogo=Ty.prototype.wa,Ty.prototype.getProjection=Ty.prototype.ya,Ty.prototype.getState=Ty.prototype.V,Ty.prototype.setAttributions=Ty.prototype.ua,Ty.prototype.get=Ty.prototype.get,Ty.prototype.getKeys=Ty.prototype.O,Ty.prototype.getProperties=Ty.prototype.N,Ty.prototype.set=Ty.prototype.set,Ty.prototype.setProperties=Ty.prototype.H,Ty.prototype.unset=Ty.prototype.P,Ty.prototype.changed=Ty.prototype.s,Ty.prototype.dispatchEvent=Ty.prototype.b,Ty.prototype.getRevision=Ty.prototype.L,Ty.prototype.on=Ty.prototype.J,Ty.prototype.once=Ty.prototype.once,Ty.prototype.un=Ty.prototype.K,td.prototype.type=td.prototype.type,td.prototype.target=td.prototype.target,td.prototype.preventDefault=td.prototype.preventDefault,td.prototype.stopPropagation=td.prototype.stopPropagation,jy.prototype.getTileLoadFunction=jy.prototype.ob,jy.prototype.getTileUrlFunction=jy.prototype.qb,jy.prototype.getUrls=jy.prototype.rb,jy.prototype.setTileLoadFunction=jy.prototype.xb,jy.prototype.setTileUrlFunction=jy.prototype.bb,jy.prototype.setUrl=jy.prototype.jb,jy.prototype.setUrls=jy.prototype.cb,jy.prototype.getTileGrid=jy.prototype.ab,jy.prototype.refresh=jy.prototype.va,jy.prototype.getAttributions=jy.prototype.xa,jy.prototype.getLogo=jy.prototype.wa,jy.prototype.getProjection=jy.prototype.ya,jy.prototype.getState=jy.prototype.V,jy.prototype.setAttributions=jy.prototype.ua,jy.prototype.get=jy.prototype.get,jy.prototype.getKeys=jy.prototype.O,jy.prototype.getProperties=jy.prototype.N,jy.prototype.set=jy.prototype.set,jy.prototype.setProperties=jy.prototype.H,jy.prototype.unset=jy.prototype.P,jy.prototype.changed=jy.prototype.s,jy.prototype.dispatchEvent=jy.prototype.b,jy.prototype.getRevision=jy.prototype.L,jy.prototype.on=jy.prototype.J,jy.prototype.once=jy.prototype.once,jy.prototype.un=jy.prototype.K,By.prototype.setRenderReprojectionEdges=By.prototype.Nb,By.prototype.setTileGridForProjection=By.prototype.Ob,By.prototype.getTileLoadFunction=By.prototype.ob,By.prototype.getTileUrlFunction=By.prototype.qb,By.prototype.getUrls=By.prototype.rb,By.prototype.setTileLoadFunction=By.prototype.xb,By.prototype.setTileUrlFunction=By.prototype.bb,By.prototype.setUrl=By.prototype.jb,By.prototype.setUrls=By.prototype.cb,By.prototype.getTileGrid=By.prototype.ab,By.prototype.refresh=By.prototype.va,By.prototype.getAttributions=By.prototype.xa,By.prototype.getLogo=By.prototype.wa,By.prototype.getProjection=By.prototype.ya,By.prototype.getState=By.prototype.V,By.prototype.setAttributions=By.prototype.ua,By.prototype.get=By.prototype.get,By.prototype.getKeys=By.prototype.O,By.prototype.getProperties=By.prototype.N,By.prototype.set=By.prototype.set,By.prototype.setProperties=By.prototype.H,By.prototype.unset=By.prototype.P,By.prototype.changed=By.prototype.s,By.prototype.dispatchEvent=By.prototype.b,By.prototype.getRevision=By.prototype.L,By.prototype.on=By.prototype.J,By.prototype.once=By.prototype.once,By.prototype.un=By.prototype.K,Wy.prototype.setRenderReprojectionEdges=Wy.prototype.Nb,Wy.prototype.setTileGridForProjection=Wy.prototype.Ob,Wy.prototype.getTileLoadFunction=Wy.prototype.ob,Wy.prototype.getTileUrlFunction=Wy.prototype.qb,Wy.prototype.getUrls=Wy.prototype.rb,Wy.prototype.setTileLoadFunction=Wy.prototype.xb,Wy.prototype.setTileUrlFunction=Wy.prototype.bb,Wy.prototype.setUrl=Wy.prototype.jb,Wy.prototype.setUrls=Wy.prototype.cb,Wy.prototype.getTileGrid=Wy.prototype.ab,Wy.prototype.refresh=Wy.prototype.va,Wy.prototype.getAttributions=Wy.prototype.xa,Wy.prototype.getLogo=Wy.prototype.wa,Wy.prototype.getProjection=Wy.prototype.ya,Wy.prototype.getState=Wy.prototype.V,Wy.prototype.setAttributions=Wy.prototype.ua,Wy.prototype.get=Wy.prototype.get,Wy.prototype.getKeys=Wy.prototype.O,Wy.prototype.getProperties=Wy.prototype.N,Wy.prototype.set=Wy.prototype.set,Wy.prototype.setProperties=Wy.prototype.H,Wy.prototype.unset=Wy.prototype.P,Wy.prototype.changed=Wy.prototype.s,Wy.prototype.dispatchEvent=Wy.prototype.b,Wy.prototype.getRevision=Wy.prototype.L,Wy.prototype.on=Wy.prototype.J,Wy.prototype.once=Wy.prototype.once,Wy.prototype.un=Wy.prototype.K,kf.prototype.getTileCoord=kf.prototype.i,kf.prototype.load=kf.prototype.load,_u.prototype.changed=_u.prototype.s,_u.prototype.dispatchEvent=_u.prototype.b,_u.prototype.getRevision=_u.prototype.L,_u.prototype.on=_u.prototype.J,_u.prototype.once=_u.prototype.once,_u.prototype.un=_u.prototype.K,ju.prototype.changed=ju.prototype.s,ju.prototype.dispatchEvent=ju.prototype.b,ju.prototype.getRevision=ju.prototype.L,ju.prototype.on=ju.prototype.J,ju.prototype.once=ju.prototype.once,ju.prototype.un=ju.prototype.K,Ef.prototype.changed=Ef.prototype.s,Ef.prototype.dispatchEvent=Ef.prototype.b,Ef.prototype.getRevision=Ef.prototype.L,Ef.prototype.on=Ef.prototype.J,Ef.prototype.once=Ef.prototype.once,Ef.prototype.un=Ef.prototype.K,Rf.prototype.changed=Rf.prototype.s,Rf.prototype.dispatchEvent=Rf.prototype.b,Rf.prototype.getRevision=Rf.prototype.L,Rf.prototype.on=Rf.prototype.J,Rf.prototype.once=Rf.prototype.once,Rf.prototype.un=Rf.prototype.K,Bu.prototype.changed=Bu.prototype.s,Bu.prototype.dispatchEvent=Bu.prototype.b,Bu.prototype.getRevision=Bu.prototype.L,Bu.prototype.on=Bu.prototype.J,Bu.prototype.once=Bu.prototype.once,Bu.prototype.un=Bu.prototype.K,Mu.prototype.changed=Mu.prototype.s,Mu.prototype.dispatchEvent=Mu.prototype.b,Mu.prototype.getRevision=Mu.prototype.L,Mu.prototype.on=Mu.prototype.J,Mu.prototype.once=Mu.prototype.once,Mu.prototype.un=Mu.prototype.K,rf.prototype.changed=rf.prototype.s,rf.prototype.dispatchEvent=rf.prototype.b,rf.prototype.getRevision=rf.prototype.L,rf.prototype.on=rf.prototype.J,rf.prototype.once=rf.prototype.once,rf.prototype.un=rf.prototype.K,sf.prototype.changed=sf.prototype.s,sf.prototype.dispatchEvent=sf.prototype.b,sf.prototype.getRevision=sf.prototype.L,sf.prototype.on=sf.prototype.J,sf.prototype.once=sf.prototype.once,sf.prototype.un=sf.prototype.K,Af.prototype.changed=Af.prototype.s,Af.prototype.dispatchEvent=Af.prototype.b,Af.prototype.getRevision=Af.prototype.L,Af.prototype.on=Af.prototype.J,Af.prototype.once=Af.prototype.once,Af.prototype.un=Af.prototype.K,Ou.prototype.changed=Ou.prototype.s,Ou.prototype.dispatchEvent=Ou.prototype.b,Ou.prototype.getRevision=Ou.prototype.L,Ou.prototype.on=Ou.prototype.J,Ou.prototype.once=Ou.prototype.once,Ou.prototype.un=Ou.prototype.K,Lf.prototype.changed=Lf.prototype.s,Lf.prototype.dispatchEvent=Lf.prototype.b,Lf.prototype.getRevision=Lf.prototype.L,Lf.prototype.on=Lf.prototype.J,Lf.prototype.once=Lf.prototype.once,Lf.prototype.un=Lf.prototype.K,Er.prototype.type=Er.prototype.type,Er.prototype.target=Er.prototype.target,Er.prototype.preventDefault=Er.prototype.preventDefault,Er.prototype.stopPropagation=Er.prototype.stopPropagation,to.prototype.type=to.prototype.type,to.prototype.target=to.prototype.target,to.prototype.preventDefault=to.prototype.preventDefault,to.prototype.stopPropagation=to.prototype.stopPropagation,Yn.prototype.get=Yn.prototype.get,Yn.prototype.getKeys=Yn.prototype.O,Yn.prototype.getProperties=Yn.prototype.N,Yn.prototype.set=Yn.prototype.set,Yn.prototype.setProperties=Yn.prototype.H,Yn.prototype.unset=Yn.prototype.P,Yn.prototype.changed=Yn.prototype.s,Yn.prototype.dispatchEvent=Yn.prototype.b,Yn.prototype.getRevision=Yn.prototype.L,Yn.prototype.on=Yn.prototype.J,Yn.prototype.once=Yn.prototype.once,Yn.prototype.un=Yn.prototype.K,Xn.prototype.getExtent=Xn.prototype.D,Xn.prototype.getMaxResolution=Xn.prototype.gc,Xn.prototype.getMinResolution=Xn.prototype.hc,Xn.prototype.getOpacity=Xn.prototype.ic,Xn.prototype.getVisible=Xn.prototype.Kb,Xn.prototype.getZIndex=Xn.prototype.za,Xn.prototype.setExtent=Xn.prototype.uc,Xn.prototype.setMaxResolution=Xn.prototype.zc,Xn.prototype.setMinResolution=Xn.prototype.Ac,Xn.prototype.setOpacity=Xn.prototype.vc,Xn.prototype.setVisible=Xn.prototype.wc,Xn.prototype.setZIndex=Xn.prototype.Wb,Xn.prototype.get=Xn.prototype.get,Xn.prototype.getKeys=Xn.prototype.O,Xn.prototype.getProperties=Xn.prototype.N,Xn.prototype.set=Xn.prototype.set,Xn.prototype.setProperties=Xn.prototype.H,Xn.prototype.unset=Xn.prototype.P,Xn.prototype.changed=Xn.prototype.s,Xn.prototype.dispatchEvent=Xn.prototype.b,Xn.prototype.getRevision=Xn.prototype.L,Xn.prototype.on=Xn.prototype.J,Xn.prototype.once=Xn.prototype.once,Xn.prototype.un=Xn.prototype.K,er.prototype.getExtent=er.prototype.D,er.prototype.getMaxResolution=er.prototype.gc,er.prototype.getMinResolution=er.prototype.hc,er.prototype.getOpacity=er.prototype.ic,er.prototype.getVisible=er.prototype.Kb,er.prototype.getZIndex=er.prototype.za,er.prototype.setExtent=er.prototype.uc,er.prototype.setMaxResolution=er.prototype.zc,er.prototype.setMinResolution=er.prototype.Ac,er.prototype.setOpacity=er.prototype.vc,er.prototype.setVisible=er.prototype.wc,er.prototype.setZIndex=er.prototype.Wb,er.prototype.get=er.prototype.get,er.prototype.getKeys=er.prototype.O,er.prototype.getProperties=er.prototype.N,er.prototype.set=er.prototype.set,er.prototype.setProperties=er.prototype.H,er.prototype.unset=er.prototype.P,er.prototype.changed=er.prototype.s,er.prototype.dispatchEvent=er.prototype.b,er.prototype.getRevision=er.prototype.L,er.prototype.on=er.prototype.J,er.prototype.once=er.prototype.once,er.prototype.un=er.prototype.K,Vu.prototype.setMap=Vu.prototype.setMap,Vu.prototype.setSource=Vu.prototype.Yc,Vu.prototype.getExtent=Vu.prototype.D,Vu.prototype.getMaxResolution=Vu.prototype.gc,Vu.prototype.getMinResolution=Vu.prototype.hc,Vu.prototype.getOpacity=Vu.prototype.ic,Vu.prototype.getVisible=Vu.prototype.Kb,Vu.prototype.getZIndex=Vu.prototype.za,Vu.prototype.setExtent=Vu.prototype.uc,Vu.prototype.setMaxResolution=Vu.prototype.zc,Vu.prototype.setMinResolution=Vu.prototype.Ac,Vu.prototype.setOpacity=Vu.prototype.vc,Vu.prototype.setVisible=Vu.prototype.wc,Vu.prototype.setZIndex=Vu.prototype.Wb,Vu.prototype.get=Vu.prototype.get,Vu.prototype.getKeys=Vu.prototype.O,Vu.prototype.getProperties=Vu.prototype.N,Vu.prototype.set=Vu.prototype.set,Vu.prototype.setProperties=Vu.prototype.H,Vu.prototype.unset=Vu.prototype.P,Vu.prototype.changed=Vu.prototype.s,Vu.prototype.dispatchEvent=Vu.prototype.b,Vu.prototype.getRevision=Vu.prototype.L,Vu.prototype.on=Vu.prototype.J,Vu.prototype.once=Vu.prototype.once,Vu.prototype.un=Vu.prototype.K,nf.prototype.getSource=nf.prototype.la,nf.prototype.getStyle=nf.prototype.C,nf.prototype.getStyleFunction=nf.prototype.G,nf.prototype.setStyle=nf.prototype.g,nf.prototype.setMap=nf.prototype.setMap,nf.prototype.setSource=nf.prototype.Yc,nf.prototype.getExtent=nf.prototype.D,nf.prototype.getMaxResolution=nf.prototype.gc,nf.prototype.getMinResolution=nf.prototype.hc,nf.prototype.getOpacity=nf.prototype.ic,nf.prototype.getVisible=nf.prototype.Kb,nf.prototype.getZIndex=nf.prototype.za,nf.prototype.setExtent=nf.prototype.uc,nf.prototype.setMaxResolution=nf.prototype.zc,nf.prototype.setMinResolution=nf.prototype.Ac,nf.prototype.setOpacity=nf.prototype.vc,nf.prototype.setVisible=nf.prototype.wc,nf.prototype.setZIndex=nf.prototype.Wb,nf.prototype.get=nf.prototype.get,nf.prototype.getKeys=nf.prototype.O,nf.prototype.getProperties=nf.prototype.N,nf.prototype.set=nf.prototype.set,nf.prototype.setProperties=nf.prototype.H,nf.prototype.unset=nf.prototype.P,nf.prototype.changed=nf.prototype.s,nf.prototype.dispatchEvent=nf.prototype.b,nf.prototype.getRevision=nf.prototype.L,nf.prototype.on=nf.prototype.J,nf.prototype.once=nf.prototype.once,nf.prototype.un=nf.prototype.K,wf.prototype.setMap=wf.prototype.setMap,wf.prototype.setSource=wf.prototype.Yc,wf.prototype.getExtent=wf.prototype.D,wf.prototype.getMaxResolution=wf.prototype.gc,wf.prototype.getMinResolution=wf.prototype.hc,wf.prototype.getOpacity=wf.prototype.ic,wf.prototype.getVisible=wf.prototype.Kb,wf.prototype.getZIndex=wf.prototype.za,wf.prototype.setExtent=wf.prototype.uc,wf.prototype.setMaxResolution=wf.prototype.zc,wf.prototype.setMinResolution=wf.prototype.Ac,wf.prototype.setOpacity=wf.prototype.vc,wf.prototype.setVisible=wf.prototype.wc,wf.prototype.setZIndex=wf.prototype.Wb,wf.prototype.get=wf.prototype.get,wf.prototype.getKeys=wf.prototype.O,wf.prototype.getProperties=wf.prototype.N,wf.prototype.set=wf.prototype.set,wf.prototype.setProperties=wf.prototype.H,wf.prototype.unset=wf.prototype.P,wf.prototype.changed=wf.prototype.s,wf.prototype.dispatchEvent=wf.prototype.b,wf.prototype.getRevision=wf.prototype.L,wf.prototype.on=wf.prototype.J,wf.prototype.once=wf.prototype.once,wf.prototype.un=wf.prototype.K,Tf.prototype.setMap=Tf.prototype.setMap,Tf.prototype.setSource=Tf.prototype.Yc,Tf.prototype.getExtent=Tf.prototype.D,Tf.prototype.getMaxResolution=Tf.prototype.gc,Tf.prototype.getMinResolution=Tf.prototype.hc,Tf.prototype.getOpacity=Tf.prototype.ic,Tf.prototype.getVisible=Tf.prototype.Kb,Tf.prototype.getZIndex=Tf.prototype.za,Tf.prototype.setExtent=Tf.prototype.uc,Tf.prototype.setMaxResolution=Tf.prototype.zc,Tf.prototype.setMinResolution=Tf.prototype.Ac,Tf.prototype.setOpacity=Tf.prototype.vc,Tf.prototype.setVisible=Tf.prototype.wc,Tf.prototype.setZIndex=Tf.prototype.Wb,Tf.prototype.get=Tf.prototype.get,Tf.prototype.getKeys=Tf.prototype.O,Tf.prototype.getProperties=Tf.prototype.N,Tf.prototype.set=Tf.prototype.set,Tf.prototype.setProperties=Tf.prototype.H,Tf.prototype.unset=Tf.prototype.P,Tf.prototype.changed=Tf.prototype.s,Tf.prototype.dispatchEvent=Tf.prototype.b,Tf.prototype.getRevision=Tf.prototype.L,Tf.prototype.on=Tf.prototype.J,Tf.prototype.once=Tf.prototype.once,Tf.prototype.un=Tf.prototype.K,Of.prototype.getSource=Of.prototype.la,Of.prototype.getStyle=Of.prototype.C,Of.prototype.getStyleFunction=Of.prototype.G,Of.prototype.setStyle=Of.prototype.g,Of.prototype.setMap=Of.prototype.setMap,Of.prototype.setSource=Of.prototype.Yc,Of.prototype.getExtent=Of.prototype.D,Of.prototype.getMaxResolution=Of.prototype.gc,Of.prototype.getMinResolution=Of.prototype.hc,Of.prototype.getOpacity=Of.prototype.ic,Of.prototype.getVisible=Of.prototype.Kb,Of.prototype.getZIndex=Of.prototype.za,Of.prototype.setExtent=Of.prototype.uc,Of.prototype.setMaxResolution=Of.prototype.zc,Of.prototype.setMinResolution=Of.prototype.Ac,Of.prototype.setOpacity=Of.prototype.vc,Of.prototype.setVisible=Of.prototype.wc,Of.prototype.setZIndex=Of.prototype.Wb,Of.prototype.get=Of.prototype.get,Of.prototype.getKeys=Of.prototype.O,Of.prototype.getProperties=Of.prototype.N,Of.prototype.set=Of.prototype.set,Of.prototype.setProperties=Of.prototype.H,Of.prototype.unset=Of.prototype.P,Of.prototype.changed=Of.prototype.s,Of.prototype.dispatchEvent=Of.prototype.b,Of.prototype.getRevision=Of.prototype.L,Of.prototype.on=Of.prototype.J,Of.prototype.once=Of.prototype.once,Of.prototype.un=Of.prototype.K,Xi.prototype.get=Xi.prototype.get,Xi.prototype.getKeys=Xi.prototype.O,Xi.prototype.getProperties=Xi.prototype.N,Xi.prototype.set=Xi.prototype.set,Xi.prototype.setProperties=Xi.prototype.H,Xi.prototype.unset=Xi.prototype.P,Xi.prototype.changed=Xi.prototype.s,Xi.prototype.dispatchEvent=Xi.prototype.b,Xi.prototype.getRevision=Xi.prototype.L,Xi.prototype.on=Xi.prototype.J,Xi.prototype.once=Xi.prototype.once,Xi.prototype.un=Xi.prototype.K,$i.prototype.getActive=$i.prototype.c,$i.prototype.getMap=$i.prototype.i,$i.prototype.setActive=$i.prototype.Ia,$i.prototype.get=$i.prototype.get,$i.prototype.getKeys=$i.prototype.O,$i.prototype.getProperties=$i.prototype.N,$i.prototype.set=$i.prototype.set,$i.prototype.setProperties=$i.prototype.H,$i.prototype.unset=$i.prototype.P,$i.prototype.changed=$i.prototype.s,$i.prototype.dispatchEvent=$i.prototype.b,$i.prototype.getRevision=$i.prototype.L,$i.prototype.on=$i.prototype.J,$i.prototype.once=$i.prototype.once,$i.prototype.un=$i.prototype.K,Hc.prototype.getActive=Hc.prototype.c,Hc.prototype.getMap=Hc.prototype.i,Hc.prototype.setActive=Hc.prototype.Ia,Hc.prototype.get=Hc.prototype.get,Hc.prototype.getKeys=Hc.prototype.O,Hc.prototype.getProperties=Hc.prototype.N,Hc.prototype.set=Hc.prototype.set,Hc.prototype.setProperties=Hc.prototype.H,Hc.prototype.unset=Hc.prototype.P,Hc.prototype.changed=Hc.prototype.s,Hc.prototype.dispatchEvent=Hc.prototype.b,Hc.prototype.getRevision=Hc.prototype.L,Hc.prototype.on=Hc.prototype.J,Hc.prototype.once=Hc.prototype.once,
Hc.prototype.un=Hc.prototype.K,Kc.prototype.type=Kc.prototype.type,Kc.prototype.target=Kc.prototype.target,Kc.prototype.preventDefault=Kc.prototype.preventDefault,Kc.prototype.stopPropagation=Kc.prototype.stopPropagation,cn.prototype.getActive=cn.prototype.c,cn.prototype.getMap=cn.prototype.i,cn.prototype.setActive=cn.prototype.Ia,cn.prototype.get=cn.prototype.get,cn.prototype.getKeys=cn.prototype.O,cn.prototype.getProperties=cn.prototype.N,cn.prototype.set=cn.prototype.set,cn.prototype.setProperties=cn.prototype.H,cn.prototype.unset=cn.prototype.P,cn.prototype.changed=cn.prototype.s,cn.prototype.dispatchEvent=cn.prototype.b,cn.prototype.getRevision=cn.prototype.L,cn.prototype.on=cn.prototype.J,cn.prototype.once=cn.prototype.once,cn.prototype.un=cn.prototype.K,An.prototype.getActive=An.prototype.c,An.prototype.getMap=An.prototype.i,An.prototype.setActive=An.prototype.Ia,An.prototype.get=An.prototype.get,An.prototype.getKeys=An.prototype.O,An.prototype.getProperties=An.prototype.N,An.prototype.set=An.prototype.set,An.prototype.setProperties=An.prototype.H,An.prototype.unset=An.prototype.P,An.prototype.changed=An.prototype.s,An.prototype.dispatchEvent=An.prototype.b,An.prototype.getRevision=An.prototype.L,An.prototype.on=An.prototype.J,An.prototype.once=An.prototype.once,An.prototype.un=An.prototype.K,Rn.prototype.type=Rn.prototype.type,Rn.prototype.target=Rn.prototype.target,Rn.prototype.preventDefault=Rn.prototype.preventDefault,Rn.prototype.stopPropagation=Rn.prototype.stopPropagation,fn.prototype.getActive=fn.prototype.c,fn.prototype.getMap=fn.prototype.i,fn.prototype.setActive=fn.prototype.Ia,fn.prototype.get=fn.prototype.get,fn.prototype.getKeys=fn.prototype.O,fn.prototype.getProperties=fn.prototype.N,fn.prototype.set=fn.prototype.set,fn.prototype.setProperties=fn.prototype.H,fn.prototype.unset=fn.prototype.P,fn.prototype.changed=fn.prototype.s,fn.prototype.dispatchEvent=fn.prototype.b,fn.prototype.getRevision=fn.prototype.L,fn.prototype.on=fn.prototype.J,fn.prototype.once=fn.prototype.once,fn.prototype.un=fn.prototype.K,vn.prototype.getActive=vn.prototype.c,vn.prototype.getMap=vn.prototype.i,vn.prototype.setActive=vn.prototype.Ia,vn.prototype.get=vn.prototype.get,vn.prototype.getKeys=vn.prototype.O,vn.prototype.getProperties=vn.prototype.N,vn.prototype.set=vn.prototype.set,vn.prototype.setProperties=vn.prototype.H,vn.prototype.unset=vn.prototype.P,vn.prototype.changed=vn.prototype.s,vn.prototype.dispatchEvent=vn.prototype.b,vn.prototype.getRevision=vn.prototype.L,vn.prototype.on=vn.prototype.J,vn.prototype.once=vn.prototype.once,vn.prototype.un=vn.prototype.K,Xc.prototype.getActive=Xc.prototype.c,Xc.prototype.getMap=Xc.prototype.i,Xc.prototype.setActive=Xc.prototype.Ia,Xc.prototype.get=Xc.prototype.get,Xc.prototype.getKeys=Xc.prototype.O,Xc.prototype.getProperties=Xc.prototype.N,Xc.prototype.set=Xc.prototype.set,Xc.prototype.setProperties=Xc.prototype.H,Xc.prototype.unset=Xc.prototype.P,Xc.prototype.changed=Xc.prototype.s,Xc.prototype.dispatchEvent=Xc.prototype.b,Xc.prototype.getRevision=Xc.prototype.L,Xc.prototype.on=Xc.prototype.J,Xc.prototype.once=Xc.prototype.once,Xc.prototype.un=Xc.prototype.K,Tn.prototype.getGeometry=Tn.prototype.U,Tn.prototype.getActive=Tn.prototype.c,Tn.prototype.getMap=Tn.prototype.i,Tn.prototype.setActive=Tn.prototype.Ia,Tn.prototype.get=Tn.prototype.get,Tn.prototype.getKeys=Tn.prototype.O,Tn.prototype.getProperties=Tn.prototype.N,Tn.prototype.set=Tn.prototype.set,Tn.prototype.setProperties=Tn.prototype.H,Tn.prototype.unset=Tn.prototype.P,Tn.prototype.changed=Tn.prototype.s,Tn.prototype.dispatchEvent=Tn.prototype.b,Tn.prototype.getRevision=Tn.prototype.L,Tn.prototype.on=Tn.prototype.J,Tn.prototype.once=Tn.prototype.once,Tn.prototype.un=Tn.prototype.K,ed.prototype.getActive=ed.prototype.c,ed.prototype.getMap=ed.prototype.i,ed.prototype.setActive=ed.prototype.Ia,ed.prototype.get=ed.prototype.get,ed.prototype.getKeys=ed.prototype.O,ed.prototype.getProperties=ed.prototype.N,ed.prototype.set=ed.prototype.set,ed.prototype.setProperties=ed.prototype.H,ed.prototype.unset=ed.prototype.P,ed.prototype.changed=ed.prototype.s,ed.prototype.dispatchEvent=ed.prototype.b,ed.prototype.getRevision=ed.prototype.L,ed.prototype.on=ed.prototype.J,ed.prototype.once=ed.prototype.once,ed.prototype.un=ed.prototype.K,dd.prototype.type=dd.prototype.type,dd.prototype.target=dd.prototype.target,dd.prototype.preventDefault=dd.prototype.preventDefault,dd.prototype.stopPropagation=dd.prototype.stopPropagation,fd.prototype.getActive=fd.prototype.c,fd.prototype.getMap=fd.prototype.i,fd.prototype.setActive=fd.prototype.Ia,fd.prototype.get=fd.prototype.get,fd.prototype.getKeys=fd.prototype.O,fd.prototype.getProperties=fd.prototype.N,fd.prototype.set=fd.prototype.set,fd.prototype.setProperties=fd.prototype.H,fd.prototype.unset=fd.prototype.P,fd.prototype.changed=fd.prototype.s,fd.prototype.dispatchEvent=fd.prototype.b,fd.prototype.getRevision=fd.prototype.L,fd.prototype.on=fd.prototype.J,fd.prototype.once=fd.prototype.once,fd.prototype.un=fd.prototype.K,Ad.prototype.type=Ad.prototype.type,Ad.prototype.target=Ad.prototype.target,Ad.prototype.preventDefault=Ad.prototype.preventDefault,Ad.prototype.stopPropagation=Ad.prototype.stopPropagation,Ln.prototype.getActive=Ln.prototype.c,Ln.prototype.getMap=Ln.prototype.i,Ln.prototype.setActive=Ln.prototype.Ia,Ln.prototype.get=Ln.prototype.get,Ln.prototype.getKeys=Ln.prototype.O,Ln.prototype.getProperties=Ln.prototype.N,Ln.prototype.set=Ln.prototype.set,Ln.prototype.setProperties=Ln.prototype.H,Ln.prototype.unset=Ln.prototype.P,Ln.prototype.changed=Ln.prototype.s,Ln.prototype.dispatchEvent=Ln.prototype.b,Ln.prototype.getRevision=Ln.prototype.L,Ln.prototype.on=Ln.prototype.J,Ln.prototype.once=Ln.prototype.once,Ln.prototype.un=Ln.prototype.K,On.prototype.getActive=On.prototype.c,On.prototype.getMap=On.prototype.i,On.prototype.setActive=On.prototype.Ia,On.prototype.get=On.prototype.get,On.prototype.getKeys=On.prototype.O,On.prototype.getProperties=On.prototype.N,On.prototype.set=On.prototype.set,On.prototype.setProperties=On.prototype.H,On.prototype.unset=On.prototype.P,On.prototype.changed=On.prototype.s,On.prototype.dispatchEvent=On.prototype.b,On.prototype.getRevision=On.prototype.L,On.prototype.on=On.prototype.J,On.prototype.once=On.prototype.once,On.prototype.un=On.prototype.K,Cd.prototype.getActive=Cd.prototype.c,Cd.prototype.getMap=Cd.prototype.i,Cd.prototype.setActive=Cd.prototype.Ia,Cd.prototype.get=Cd.prototype.get,Cd.prototype.getKeys=Cd.prototype.O,Cd.prototype.getProperties=Cd.prototype.N,Cd.prototype.set=Cd.prototype.set,Cd.prototype.setProperties=Cd.prototype.H,Cd.prototype.unset=Cd.prototype.P,Cd.prototype.changed=Cd.prototype.s,Cd.prototype.dispatchEvent=Cd.prototype.b,Cd.prototype.getRevision=Cd.prototype.L,Cd.prototype.on=Cd.prototype.J,Cd.prototype.once=Cd.prototype.once,Cd.prototype.un=Cd.prototype.K,Bd.prototype.type=Bd.prototype.type,Bd.prototype.target=Bd.prototype.target,Bd.prototype.preventDefault=Bd.prototype.preventDefault,Bd.prototype.stopPropagation=Bd.prototype.stopPropagation,kn.prototype.getActive=kn.prototype.c,kn.prototype.getMap=kn.prototype.i,kn.prototype.setActive=kn.prototype.Ia,kn.prototype.get=kn.prototype.get,kn.prototype.getKeys=kn.prototype.O,kn.prototype.getProperties=kn.prototype.N,kn.prototype.set=kn.prototype.set,kn.prototype.setProperties=kn.prototype.H,kn.prototype.unset=kn.prototype.P,kn.prototype.changed=kn.prototype.s,kn.prototype.dispatchEvent=kn.prototype.b,kn.prototype.getRevision=kn.prototype.L,kn.prototype.on=kn.prototype.J,kn.prototype.once=kn.prototype.once,kn.prototype.un=kn.prototype.K,jn.prototype.getActive=jn.prototype.c,jn.prototype.getMap=jn.prototype.i,jn.prototype.setActive=jn.prototype.Ia,jn.prototype.get=jn.prototype.get,jn.prototype.getKeys=jn.prototype.O,jn.prototype.getProperties=jn.prototype.N,jn.prototype.set=jn.prototype.set,jn.prototype.setProperties=jn.prototype.H,jn.prototype.unset=jn.prototype.P,jn.prototype.changed=jn.prototype.s,jn.prototype.dispatchEvent=jn.prototype.b,jn.prototype.getRevision=jn.prototype.L,jn.prototype.on=jn.prototype.J,jn.prototype.once=jn.prototype.once,jn.prototype.un=jn.prototype.K,Vn.prototype.getActive=Vn.prototype.c,Vn.prototype.getMap=Vn.prototype.i,Vn.prototype.setActive=Vn.prototype.Ia,Vn.prototype.get=Vn.prototype.get,Vn.prototype.getKeys=Vn.prototype.O,Vn.prototype.getProperties=Vn.prototype.N,Vn.prototype.set=Vn.prototype.set,Vn.prototype.setProperties=Vn.prototype.H,Vn.prototype.unset=Vn.prototype.P,Vn.prototype.changed=Vn.prototype.s,Vn.prototype.dispatchEvent=Vn.prototype.b,Vn.prototype.getRevision=Vn.prototype.L,Vn.prototype.on=Vn.prototype.J,Vn.prototype.once=Vn.prototype.once,Vn.prototype.un=Vn.prototype.K,Vd.prototype.getActive=Vd.prototype.c,Vd.prototype.getMap=Vd.prototype.i,Vd.prototype.setActive=Vd.prototype.Ia,Vd.prototype.get=Vd.prototype.get,Vd.prototype.getKeys=Vd.prototype.O,Vd.prototype.getProperties=Vd.prototype.N,Vd.prototype.set=Vd.prototype.set,Vd.prototype.setProperties=Vd.prototype.H,Vd.prototype.unset=Vd.prototype.P,Vd.prototype.changed=Vd.prototype.s,Vd.prototype.dispatchEvent=Vd.prototype.b,Vd.prototype.getRevision=Vd.prototype.L,Vd.prototype.on=Vd.prototype.J,Vd.prototype.once=Vd.prototype.once,Vd.prototype.un=Vd.prototype.K,Hd.prototype.type=Hd.prototype.type,Hd.prototype.target=Hd.prototype.target,Hd.prototype.preventDefault=Hd.prototype.preventDefault,Hd.prototype.stopPropagation=Hd.prototype.stopPropagation,qd.prototype.getActive=qd.prototype.c,qd.prototype.getMap=qd.prototype.i,qd.prototype.setActive=qd.prototype.Ia,qd.prototype.get=qd.prototype.get,qd.prototype.getKeys=qd.prototype.O,qd.prototype.getProperties=qd.prototype.N,qd.prototype.set=qd.prototype.set,qd.prototype.setProperties=qd.prototype.H,qd.prototype.unset=qd.prototype.P,qd.prototype.changed=qd.prototype.s,qd.prototype.dispatchEvent=qd.prototype.b,qd.prototype.getRevision=qd.prototype.L,qd.prototype.on=qd.prototype.J,qd.prototype.once=qd.prototype.once,qd.prototype.un=qd.prototype.K,Zd.prototype.getActive=Zd.prototype.c,Zd.prototype.getMap=Zd.prototype.i,Zd.prototype.setActive=Zd.prototype.Ia,Zd.prototype.get=Zd.prototype.get,Zd.prototype.getKeys=Zd.prototype.O,Zd.prototype.getProperties=Zd.prototype.N,Zd.prototype.set=Zd.prototype.set,Zd.prototype.setProperties=Zd.prototype.H,Zd.prototype.unset=Zd.prototype.P,Zd.prototype.changed=Zd.prototype.s,Zd.prototype.dispatchEvent=Zd.prototype.b,Zd.prototype.getRevision=Zd.prototype.L,Zd.prototype.on=Zd.prototype.J,Zd.prototype.once=Zd.prototype.once,Zd.prototype.un=Zd.prototype.K,of.prototype.type=of.prototype.type,of.prototype.target=of.prototype.target,of.prototype.preventDefault=of.prototype.preventDefault,of.prototype.stopPropagation=of.prototype.stopPropagation,Xo.prototype.get=Xo.prototype.get,Xo.prototype.getKeys=Xo.prototype.O,Xo.prototype.getProperties=Xo.prototype.N,Xo.prototype.set=Xo.prototype.set,Xo.prototype.setProperties=Xo.prototype.H,Xo.prototype.unset=Xo.prototype.P,Xo.prototype.changed=Xo.prototype.s,Xo.prototype.dispatchEvent=Xo.prototype.b,Xo.prototype.getRevision=Xo.prototype.L,Xo.prototype.on=Xo.prototype.J,Xo.prototype.once=Xo.prototype.once,Xo.prototype.un=Xo.prototype.K,Qo.prototype.getClosestPoint=Qo.prototype.Ab,Qo.prototype.intersectsCoordinate=Qo.prototype.sb,Qo.prototype.getExtent=Qo.prototype.D,Qo.prototype.rotate=Qo.prototype.rotate,Qo.prototype.scale=Qo.prototype.scale,Qo.prototype.simplify=Qo.prototype.Pb,Qo.prototype.transform=Qo.prototype.tb,Qo.prototype.get=Qo.prototype.get,Qo.prototype.getKeys=Qo.prototype.O,Qo.prototype.getProperties=Qo.prototype.N,Qo.prototype.set=Qo.prototype.set,Qo.prototype.setProperties=Qo.prototype.H,Qo.prototype.unset=Qo.prototype.P,Qo.prototype.changed=Qo.prototype.s,Qo.prototype.dispatchEvent=Qo.prototype.b,Qo.prototype.getRevision=Qo.prototype.L,Qo.prototype.on=Qo.prototype.J,Qo.prototype.once=Qo.prototype.once,Qo.prototype.un=Qo.prototype.K,Rc.prototype.getFirstCoordinate=Rc.prototype.bc,Rc.prototype.getLastCoordinate=Rc.prototype.cc,Rc.prototype.getLayout=Rc.prototype.dc,Rc.prototype.rotate=Rc.prototype.rotate,Rc.prototype.scale=Rc.prototype.scale,Rc.prototype.getClosestPoint=Rc.prototype.Ab,Rc.prototype.intersectsCoordinate=Rc.prototype.sb,Rc.prototype.getExtent=Rc.prototype.D,Rc.prototype.simplify=Rc.prototype.Pb,Rc.prototype.get=Rc.prototype.get,Rc.prototype.getKeys=Rc.prototype.O,Rc.prototype.getProperties=Rc.prototype.N,Rc.prototype.set=Rc.prototype.set,Rc.prototype.setProperties=Rc.prototype.H,Rc.prototype.unset=Rc.prototype.P,Rc.prototype.changed=Rc.prototype.s,Rc.prototype.dispatchEvent=Rc.prototype.b,Rc.prototype.getRevision=Rc.prototype.L,Rc.prototype.on=Rc.prototype.J,Rc.prototype.once=Rc.prototype.once,Rc.prototype.un=Rc.prototype.K,rp.prototype.getClosestPoint=rp.prototype.Ab,rp.prototype.intersectsCoordinate=rp.prototype.sb,rp.prototype.getExtent=rp.prototype.D,rp.prototype.rotate=rp.prototype.rotate,rp.prototype.scale=rp.prototype.scale,rp.prototype.simplify=rp.prototype.Pb,rp.prototype.transform=rp.prototype.tb,rp.prototype.get=rp.prototype.get,rp.prototype.getKeys=rp.prototype.O,rp.prototype.getProperties=rp.prototype.N,rp.prototype.set=rp.prototype.set,rp.prototype.setProperties=rp.prototype.H,rp.prototype.unset=rp.prototype.P,rp.prototype.changed=rp.prototype.s,rp.prototype.dispatchEvent=rp.prototype.b,rp.prototype.getRevision=rp.prototype.L,rp.prototype.on=rp.prototype.J,rp.prototype.once=rp.prototype.once,rp.prototype.un=rp.prototype.K,gi.prototype.getFirstCoordinate=gi.prototype.bc,gi.prototype.getLastCoordinate=gi.prototype.cc,gi.prototype.getLayout=gi.prototype.dc,gi.prototype.rotate=gi.prototype.rotate,gi.prototype.scale=gi.prototype.scale,gi.prototype.getClosestPoint=gi.prototype.Ab,gi.prototype.intersectsCoordinate=gi.prototype.sb,gi.prototype.getExtent=gi.prototype.D,gi.prototype.simplify=gi.prototype.Pb,gi.prototype.transform=gi.prototype.tb,gi.prototype.get=gi.prototype.get,gi.prototype.getKeys=gi.prototype.O,gi.prototype.getProperties=gi.prototype.N,gi.prototype.set=gi.prototype.set,gi.prototype.setProperties=gi.prototype.H,gi.prototype.unset=gi.prototype.P,gi.prototype.changed=gi.prototype.s,gi.prototype.dispatchEvent=gi.prototype.b,gi.prototype.getRevision=gi.prototype.L,gi.prototype.on=gi.prototype.J,gi.prototype.once=gi.prototype.once,gi.prototype.un=gi.prototype.K,El.prototype.getFirstCoordinate=El.prototype.bc,El.prototype.getLastCoordinate=El.prototype.cc,El.prototype.getLayout=El.prototype.dc,El.prototype.rotate=El.prototype.rotate,El.prototype.scale=El.prototype.scale,El.prototype.getClosestPoint=El.prototype.Ab,El.prototype.intersectsCoordinate=El.prototype.sb,El.prototype.getExtent=El.prototype.D,El.prototype.simplify=El.prototype.Pb,El.prototype.transform=El.prototype.tb,El.prototype.get=El.prototype.get,El.prototype.getKeys=El.prototype.O,El.prototype.getProperties=El.prototype.N,El.prototype.set=El.prototype.set,El.prototype.setProperties=El.prototype.H,El.prototype.unset=El.prototype.P,El.prototype.changed=El.prototype.s,El.prototype.dispatchEvent=El.prototype.b,El.prototype.getRevision=El.prototype.L,El.prototype.on=El.prototype.J,El.prototype.once=El.prototype.once,El.prototype.un=El.prototype.K,Pl.prototype.getFirstCoordinate=Pl.prototype.bc,Pl.prototype.getLastCoordinate=Pl.prototype.cc,Pl.prototype.getLayout=Pl.prototype.dc,Pl.prototype.rotate=Pl.prototype.rotate,Pl.prototype.scale=Pl.prototype.scale,Pl.prototype.getClosestPoint=Pl.prototype.Ab,Pl.prototype.intersectsCoordinate=Pl.prototype.sb,Pl.prototype.getExtent=Pl.prototype.D,Pl.prototype.simplify=Pl.prototype.Pb,Pl.prototype.transform=Pl.prototype.tb,Pl.prototype.get=Pl.prototype.get,Pl.prototype.getKeys=Pl.prototype.O,Pl.prototype.getProperties=Pl.prototype.N,Pl.prototype.set=Pl.prototype.set,Pl.prototype.setProperties=Pl.prototype.H,Pl.prototype.unset=Pl.prototype.P,Pl.prototype.changed=Pl.prototype.s,Pl.prototype.dispatchEvent=Pl.prototype.b,Pl.prototype.getRevision=Pl.prototype.L,Pl.prototype.on=Pl.prototype.J,Pl.prototype.once=Pl.prototype.once,Pl.prototype.un=Pl.prototype.K,Cl.prototype.getFirstCoordinate=Cl.prototype.bc,Cl.prototype.getLastCoordinate=Cl.prototype.cc,Cl.prototype.getLayout=Cl.prototype.dc,Cl.prototype.rotate=Cl.prototype.rotate,Cl.prototype.scale=Cl.prototype.scale,Cl.prototype.getClosestPoint=Cl.prototype.Ab,Cl.prototype.intersectsCoordinate=Cl.prototype.sb,Cl.prototype.getExtent=Cl.prototype.D,Cl.prototype.simplify=Cl.prototype.Pb,Cl.prototype.transform=Cl.prototype.tb,Cl.prototype.get=Cl.prototype.get,Cl.prototype.getKeys=Cl.prototype.O,Cl.prototype.getProperties=Cl.prototype.N,Cl.prototype.set=Cl.prototype.set,Cl.prototype.setProperties=Cl.prototype.H,Cl.prototype.unset=Cl.prototype.P,Cl.prototype.changed=Cl.prototype.s,Cl.prototype.dispatchEvent=Cl.prototype.b,Cl.prototype.getRevision=Cl.prototype.L,Cl.prototype.on=Cl.prototype.J,Cl.prototype.once=Cl.prototype.once,Cl.prototype.un=Cl.prototype.K,Ml.prototype.getFirstCoordinate=Ml.prototype.bc,Ml.prototype.getLastCoordinate=Ml.prototype.cc,Ml.prototype.getLayout=Ml.prototype.dc,Ml.prototype.rotate=Ml.prototype.rotate,Ml.prototype.scale=Ml.prototype.scale,Ml.prototype.getClosestPoint=Ml.prototype.Ab,Ml.prototype.intersectsCoordinate=Ml.prototype.sb,Ml.prototype.getExtent=Ml.prototype.D,Ml.prototype.simplify=Ml.prototype.Pb,Ml.prototype.transform=Ml.prototype.tb,Ml.prototype.get=Ml.prototype.get,Ml.prototype.getKeys=Ml.prototype.O,Ml.prototype.getProperties=Ml.prototype.N,Ml.prototype.set=Ml.prototype.set,Ml.prototype.setProperties=Ml.prototype.H,Ml.prototype.unset=Ml.prototype.P,Ml.prototype.changed=Ml.prototype.s,Ml.prototype.dispatchEvent=Ml.prototype.b,Ml.prototype.getRevision=Ml.prototype.L,Ml.prototype.on=Ml.prototype.J,Ml.prototype.once=Ml.prototype.once,Ml.prototype.un=Ml.prototype.K,vi.prototype.getFirstCoordinate=vi.prototype.bc,vi.prototype.getLastCoordinate=vi.prototype.cc,vi.prototype.getLayout=vi.prototype.dc,vi.prototype.rotate=vi.prototype.rotate,vi.prototype.scale=vi.prototype.scale,vi.prototype.getClosestPoint=vi.prototype.Ab,vi.prototype.intersectsCoordinate=vi.prototype.sb,vi.prototype.getExtent=vi.prototype.D,vi.prototype.simplify=vi.prototype.Pb,vi.prototype.transform=vi.prototype.tb,vi.prototype.get=vi.prototype.get,vi.prototype.getKeys=vi.prototype.O,vi.prototype.getProperties=vi.prototype.N,vi.prototype.set=vi.prototype.set,vi.prototype.setProperties=vi.prototype.H,vi.prototype.unset=vi.prototype.P,vi.prototype.changed=vi.prototype.s,vi.prototype.dispatchEvent=vi.prototype.b,vi.prototype.getRevision=vi.prototype.L,vi.prototype.on=vi.prototype.J,vi.prototype.once=vi.prototype.once,vi.prototype.un=vi.prototype.K,Ri.prototype.getFirstCoordinate=Ri.prototype.bc,Ri.prototype.getLastCoordinate=Ri.prototype.cc,Ri.prototype.getLayout=Ri.prototype.dc,Ri.prototype.rotate=Ri.prototype.rotate,Ri.prototype.scale=Ri.prototype.scale,Ri.prototype.getClosestPoint=Ri.prototype.Ab,Ri.prototype.intersectsCoordinate=Ri.prototype.sb,Ri.prototype.getExtent=Ri.prototype.D,Ri.prototype.simplify=Ri.prototype.Pb,Ri.prototype.transform=Ri.prototype.tb,Ri.prototype.get=Ri.prototype.get,Ri.prototype.getKeys=Ri.prototype.O,Ri.prototype.getProperties=Ri.prototype.N,Ri.prototype.set=Ri.prototype.set,Ri.prototype.setProperties=Ri.prototype.H,Ri.prototype.unset=Ri.prototype.P,Ri.prototype.changed=Ri.prototype.s,Ri.prototype.dispatchEvent=Ri.prototype.b,Ri.prototype.getRevision=Ri.prototype.L,Ri.prototype.on=Ri.prototype.J,Ri.prototype.once=Ri.prototype.once,Ri.prototype.un=Ri.prototype.K,xp.prototype.readFeatures=xp.prototype.Qa,Rp.prototype.readFeatures=Rp.prototype.Qa,xp.prototype.readFeatures=xp.prototype.Qa,we.prototype.get=we.prototype.get,we.prototype.getKeys=we.prototype.O,we.prototype.getProperties=we.prototype.N,we.prototype.set=we.prototype.set,we.prototype.setProperties=we.prototype.H,we.prototype.unset=we.prototype.P,we.prototype.changed=we.prototype.s,we.prototype.dispatchEvent=we.prototype.b,we.prototype.getRevision=we.prototype.L,we.prototype.on=we.prototype.J,we.prototype.once=we.prototype.once,we.prototype.un=we.prototype.K,Ae.prototype.getMap=Ae.prototype.g,Ae.prototype.setMap=Ae.prototype.setMap,Ae.prototype.setTarget=Ae.prototype.i,Ae.prototype.get=Ae.prototype.get,Ae.prototype.getKeys=Ae.prototype.O,Ae.prototype.getProperties=Ae.prototype.N,Ae.prototype.set=Ae.prototype.set,Ae.prototype.setProperties=Ae.prototype.H,Ae.prototype.unset=Ae.prototype.P,Ae.prototype.changed=Ae.prototype.s,Ae.prototype.dispatchEvent=Ae.prototype.b,Ae.prototype.getRevision=Ae.prototype.L,Ae.prototype.on=Ae.prototype.J,Ae.prototype.once=Ae.prototype.once,Ae.prototype.un=Ae.prototype.K,ke.prototype.getMap=ke.prototype.g,ke.prototype.setMap=ke.prototype.setMap,ke.prototype.setTarget=ke.prototype.i,ke.prototype.get=ke.prototype.get,ke.prototype.getKeys=ke.prototype.O,ke.prototype.getProperties=ke.prototype.N,ke.prototype.set=ke.prototype.set,ke.prototype.setProperties=ke.prototype.H,ke.prototype.unset=ke.prototype.P,ke.prototype.changed=ke.prototype.s,ke.prototype.dispatchEvent=ke.prototype.b,ke.prototype.getRevision=ke.prototype.L,ke.prototype.on=ke.prototype.J,ke.prototype.once=ke.prototype.once,ke.prototype.un=ke.prototype.K,Ue.prototype.getMap=Ue.prototype.g,Ue.prototype.setMap=Ue.prototype.setMap,Ue.prototype.setTarget=Ue.prototype.i,Ue.prototype.get=Ue.prototype.get,Ue.prototype.getKeys=Ue.prototype.O,Ue.prototype.getProperties=Ue.prototype.N,Ue.prototype.set=Ue.prototype.set,Ue.prototype.setProperties=Ue.prototype.H,Ue.prototype.unset=Ue.prototype.P,Ue.prototype.changed=Ue.prototype.s,Ue.prototype.dispatchEvent=Ue.prototype.b,Ue.prototype.getRevision=Ue.prototype.L,Ue.prototype.on=Ue.prototype.J,Ue.prototype.once=Ue.prototype.once,Ue.prototype.un=Ue.prototype.K,va.prototype.getMap=va.prototype.g,va.prototype.setMap=va.prototype.setMap,va.prototype.setTarget=va.prototype.i,va.prototype.get=va.prototype.get,va.prototype.getKeys=va.prototype.O,va.prototype.getProperties=va.prototype.N,va.prototype.set=va.prototype.set,va.prototype.setProperties=va.prototype.H,va.prototype.unset=va.prototype.P,va.prototype.changed=va.prototype.s,va.prototype.dispatchEvent=va.prototype.b,va.prototype.getRevision=va.prototype.L,va.prototype.on=va.prototype.J,va.prototype.once=va.prototype.once,va.prototype.un=va.prototype.K,Le.prototype.getMap=Le.prototype.g,Le.prototype.setMap=Le.prototype.setMap,Le.prototype.setTarget=Le.prototype.i,Le.prototype.get=Le.prototype.get,Le.prototype.getKeys=Le.prototype.O,Le.prototype.getProperties=Le.prototype.N,Le.prototype.set=Le.prototype.set,Le.prototype.setProperties=Le.prototype.H,Le.prototype.unset=Le.prototype.P,Le.prototype.changed=Le.prototype.s,Le.prototype.dispatchEvent=Le.prototype.b,Le.prototype.getRevision=Le.prototype.L,Le.prototype.on=Le.prototype.J,Le.prototype.once=Le.prototype.once,Le.prototype.un=Le.prototype.K,Pa.prototype.getMap=Pa.prototype.g,Pa.prototype.setMap=Pa.prototype.setMap,Pa.prototype.setTarget=Pa.prototype.i,Pa.prototype.get=Pa.prototype.get,Pa.prototype.getKeys=Pa.prototype.O,Pa.prototype.getProperties=Pa.prototype.N,Pa.prototype.set=Pa.prototype.set,Pa.prototype.setProperties=Pa.prototype.H,Pa.prototype.unset=Pa.prototype.P,Pa.prototype.changed=Pa.prototype.s,Pa.prototype.dispatchEvent=Pa.prototype.b,Pa.prototype.getRevision=Pa.prototype.L,Pa.prototype.on=Pa.prototype.J,Pa.prototype.once=Pa.prototype.once,Pa.prototype.un=Pa.prototype.K,Oe.prototype.getMap=Oe.prototype.g,Oe.prototype.setMap=Oe.prototype.setMap,Oe.prototype.setTarget=Oe.prototype.i,Oe.prototype.get=Oe.prototype.get,Oe.prototype.getKeys=Oe.prototype.O,Oe.prototype.getProperties=Oe.prototype.N,Oe.prototype.set=Oe.prototype.set,Oe.prototype.setProperties=Oe.prototype.H,Oe.prototype.unset=Oe.prototype.P,Oe.prototype.changed=Oe.prototype.s,Oe.prototype.dispatchEvent=Oe.prototype.b,Oe.prototype.getRevision=Oe.prototype.L,Oe.prototype.on=Oe.prototype.J,Oe.prototype.once=Oe.prototype.once,Oe.prototype.un=Oe.prototype.K,Ca.prototype.getMap=Ca.prototype.g,Ca.prototype.setMap=Ca.prototype.setMap,Ca.prototype.setTarget=Ca.prototype.i,Ca.prototype.get=Ca.prototype.get,Ca.prototype.getKeys=Ca.prototype.O,Ca.prototype.getProperties=Ca.prototype.N,Ca.prototype.set=Ca.prototype.set,Ca.prototype.setProperties=Ca.prototype.H,Ca.prototype.unset=Ca.prototype.P,Ca.prototype.changed=Ca.prototype.s,Ca.prototype.dispatchEvent=Ca.prototype.b,Ca.prototype.getRevision=Ca.prototype.L,Ca.prototype.on=Ca.prototype.J,Ca.prototype.once=Ca.prototype.once,Ca.prototype.un=Ca.prototype.K,Ra.prototype.getMap=Ra.prototype.g,Ra.prototype.setMap=Ra.prototype.setMap,Ra.prototype.setTarget=Ra.prototype.i,Ra.prototype.get=Ra.prototype.get,Ra.prototype.getKeys=Ra.prototype.O,Ra.prototype.getProperties=Ra.prototype.N,Ra.prototype.set=Ra.prototype.set,Ra.prototype.setProperties=Ra.prototype.H,Ra.prototype.unset=Ra.prototype.P,Ra.prototype.changed=Ra.prototype.s,Ra.prototype.dispatchEvent=Ra.prototype.b,Ra.prototype.getRevision=Ra.prototype.L,Ra.prototype.on=Ra.prototype.J,Ra.prototype.once=Ra.prototype.once,Ra.prototype.un=Ra.prototype.K,Qy.ol}),function(t,e){gp=function(t){return"function"==typeof e?e(t):e}(ol)}(0,function(t){var e,o,i,n,r,s,a,l,p,h,c,u,d,f,y,g,m,v,_,b,E,S,P,w,A,C,M,x,I,R,T,L,G,O,N,k,D,j,F,U,B,V,W,z,H,q,Y,K,X,Z,J,Q,$,tt;return function(t,e){o=function(t,t){return"function"==typeof e?e(t,t):e}({},{})}(0,function(t,e){var o,i,n,r,s,a,l,p,h,c,u,d,f,y,g,m,v,_,b,E,S,P,w,A,C,M,x,I,R,T,L,G,O,N,k,D,j,F,U,B,V,W,z,H,q,Y,K,X,Z,J,Q,$,tt,et,ot,it,nt,rt,st,at,lt,pt,ht,ct,ut,dt,ft,yt,gt,mt,vt,_t,bt,Et,St,Pt,wt,At,Ct,Mt,xt,It,Rt,Tt,Lt,Gt,Ot,Nt,kt,Dt,jt,Ft,Ut,Bt,Vt;return o=void 0,i={loggers:[{root:!0,level:"all",appenders:[{type:"Console",layout:{type:"PatternLayout",pattern:"%d{yyyy-MM-dd HH:mm:ss} [%p] %c - %m%n"}}]}]},function(t,e){return{getLogger:function(o){t.load(e,function(t){if(t)throw t});var i=o||"default";return t.getLogger(i)}}}(o,i),n=function(){return{normalyzeParameters:function(t){var e=null;if(t){var o=[];for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n||(n=""),o.push(i+"="+n)}e=o.join("&")}return e},normalyzeUrl:function(t,e,o){var i=t;if(t){var n=t.indexOf("?");-1===n&&(i+="?"),-1!==n&&n!==t.length-1&&(i+="&")}return e&&(i+="string"==typeof e?e:this.normalyzeParameters(e)),o&&(i=encodeURIComponent(i)),i},indent:function(t,e){var o=t||0;return new Array(o+1).join("\t")+e}}}(),function(t,e){r=function(){return"function"==typeof e?e():e}()}(0,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function o(t){V=t}function i(t){W=t}function n(){return void 0!==B?function(){B(s)}:r()}function r(){var t=setTimeout;return function(){return t(s,1)}}function s(){for(var t=0;t<U;t+=2){(0,X[t])(X[t+1]),X[t]=void 0,X[t+1]=void 0}U=0}function a(t,e){var o=arguments,i=this,n=new this.constructor(p);void 0===n[J]&&x(n);var r=i._state;return r?function(){var t=o[r-1];W(function(){return A(r,n,t,i._result)})}():E(i,n,t,e),n}function l(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var o=new e(p);return m(o,t),o}function p(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function c(){return new TypeError("A promises callback cannot return that same promise.")}function u(t){try{return t.then}catch(t){return et.error=t,et}}function d(t,e,o,i){try{t.call(e,o,i)}catch(t){return t}}function f(t,e,o){W(function(t){var i=!1,n=d(o,e,function(o){i||(i=!0,e!==o?m(t,o):_(t,o))},function(e){i||(i=!0,b(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&n&&(i=!0,b(t,n))},t)}function y(t,e){e._state===$?_(t,e._result):e._state===tt?b(t,e._result):E(e,void 0,function(e){return m(t,e)},function(e){return b(t,e)})}function g(t,o,i){o.constructor===t.constructor&&i===a&&o.constructor.resolve===l?y(t,o):i===et?(b(t,et.error),et.error=null):void 0===i?_(t,o):e(i)?f(t,o,i):_(t,o)}function m(e,o){e===o?b(e,h()):t(o)?g(e,o,u(o)):_(e,o)}function v(t){t._onerror&&t._onerror(t._result),S(t)}function _(t,e){t._state===Q&&(t._result=e,t._state=$,0!==t._subscribers.length&&W(S,t))}function b(t,e){t._state===Q&&(t._state=tt,t._result=e,W(v,t))}function E(t,e,o,i){var n=t._subscribers,r=n.length;t._onerror=null,n[r]=e,n[r+$]=o,n[r+tt]=i,0===r&&t._state&&W(S,t)}function S(t){var e=t._subscribers,o=t._state;if(0!==e.length){for(var i=void 0,n=void 0,r=t._result,s=0;s<e.length;s+=3)i=e[s],n=e[s+o],i?A(o,i,n,r):n(r);t._subscribers.length=0}}function P(){this.error=null}function w(t,e){try{return t(e)}catch(t){return ot.error=t,ot}}function A(t,o,i,n){var r=e(i),s=void 0,a=void 0,l=void 0,p=void 0;if(r){if(s=w(i,n),s===ot?(p=!0,a=s.error,s.error=null):l=!0,o===s)return void b(o,c())}else s=n,l=!0;o._state!==Q||(r&&l?m(o,s):p?b(o,a):t===$?_(o,s):t===tt&&b(o,s))}function C(t,e){try{e(function(e){m(t,e)},function(e){b(t,e)})}catch(e){b(t,e)}}function M(){return it++}function x(t){t[J]=it++,t._state=void 0,t._result=void 0,t._subscribers=[]}function I(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[J]||x(this.promise),F(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):b(this.promise,R())}function R(){return new Error("Array Methods must be provided an Array")}function T(t){return new I(this,t).promise}function L(t){var e=this;return new e(F(t)?function(o,i){for(var n=t.length,r=0;r<n;r++)e.resolve(t[r]).then(o,i)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function G(t){var e=this,o=new e(p);return b(o,t),o}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function k(t){this[J]=M(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&O(),this instanceof k?C(this,t):N())}function D(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var o=null;try{o=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===o&&!e.cast)return}t.Promise=k}var j=void 0;j=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var F=j,U=0,B=void 0,V=void 0,W=function(t,e){X[U]=t,X[U+1]=e,2===(U+=2)&&(V?V(s):Z())},z="undefined"!=typeof window?window:void 0,H=z||{},q=H.MutationObserver||H.WebKitMutationObserver,Y="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=Y?function(){return function(){return process.nextTick(s)}}():q?function(){var t=0,e=new q(s),o=document.createTextNode("");return e.observe(o,{characterData:!0}),function(){o.data=t=++t%2}}():K?function(){var t=new MessageChannel;return t.port1.onmessage=s,function(){return t.port2.postMessage(0)}}():void 0===z&&"function"==typeof require?function(){try{var t=require,e=t("vertx");return B=e.runOnLoop||e.runOnContext,n()}catch(t){return r()}}():r();var J=Math.random().toString(36).substring(16),Q=void 0,$=1,tt=2,et=new P,ot=new P,it=0;return I.prototype._enumerate=function(){for(var t=this.length,e=this._input,o=0;this._state===Q&&o<t;o++)this._eachEntry(e[o],o)},I.prototype._eachEntry=function(t,e){var o=this._instanceConstructor,i=o.resolve;if(i===l){var n=u(t);if(n===a&&t._state!==Q)this._settledAt(t._state,e,t._result);else if("function"!=typeof n)this._remaining--,this._result[e]=t;else if(o===k){var r=new o(p);g(r,t,n),this._willSettleAt(r,e)}else this._willSettleAt(new o(function(e){return e(t)}),e)
}else this._willSettleAt(i(t),e)},I.prototype._settledAt=function(t,e,o){var i=this.promise;i._state===Q&&(this._remaining--,t===tt?b(i,o):this._result[e]=o),0===this._remaining&&_(i,this._result)},I.prototype._willSettleAt=function(t,e){var o=this;E(t,void 0,function(t){return o._settledAt($,e,t)},function(t){return o._settledAt(tt,e,t)})},k.all=T,k.race=L,k.resolve=l,k.reject=G,k._setScheduler=o,k._setAsap=i,k._asap=W,k.prototype={constructor:k,then:a,catch:function(t){return this.then(null,t)}},k.polyfill=D,k.Promise=k,k}),s=function(o,i,n,r){return{call:function(t){if(n.polyfill(),!t.url)throw new Error("missing parameter : url is not defined !");if(!t.method)throw new Error("missing parameter : method is not defined !");t.format||(t.format="text");var e={};switch(e.url=t.url,e.data=t.data?t.data:null,e.method=t.method,e.timeOut=t.timeOut||0,e.scope=t.scope||this,e.proxy=t.proxy||null,e.content=t.content||null,e.headers=t.headers||{referer:"http://localhost"},t.method){case"DELETE":case"GET":break;case"PUT":case"POST":e.content=t.content?t.content:"application/x-www-form-urlencoded",e.headers=t.headers?t.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(t.format){case"text":this.__call(e).then(function(e){t.onResponse.call(this,e)}).catch(function(e){t.onFailure.call(this,e)});break;case"json":this.__callJSON(e).then(function(e){t.onResponse.call(this,e)}).catch(function(e){t.onFailure.call(this,e)});break;case"xml":this.__callXML(e).then(function(e){t.onResponse.call(this,e)}).catch(function(e){t.onFailure.call(this,e)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(e){return new Promise(function(o,n){var r="POST"===e.method||"PUT"===e.method;e.data&&("object"==typeof e.data&&Object.keys(e.data).length||"string"==typeof e.data&&e.data.length)&&!r&&(e.url=i.normalyzeUrl(e.url,e.data));var s=null;if("undefined"==typeof window){var a=t;e.data&&"string"==typeof e.data&&r&&(e.body=e.data),a(e,function(t,e,i){!t&&200==e.statusCode&&i?o(i):n("Errors Occured on Http Request (nodejs) : "+i)})}else if(window.XMLHttpRequest){s=new XMLHttpRequest,s.open(e.method,e.url,!0),s.overrideMimeType=e.content;var l=null;e.timeOut>0&&(l=window.setTimeout(function(){n({message:"TimeOut Occured on Http Request with XMLHttpRequest !",status:-1})},e.timeOut)),r&&s.setRequestHeader("Content-type",e.content),s.onerror=function(t){console.log(t),n(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(){n(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status)window.clearTimeout(l),o(s.response);else{var t="Errors Occured on Http Request (status : '"+s.status+"' | response : '"+s.response+"')",e=s.status;n({message:t,status:e})}};var p=e.data&&r?e.data:null;s.send(p)}else{if(!window.XDomainRequest)throw new Error("CORS not supported");s=new XDomainRequest,s.open(e.method,e.url),s.overrideMimeType=e.content,e.timeOut>0&&(s.timeout=e.timeout),r&&s.setRequestHeader("Content-type",e.content),s.onerror=function(){n(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(){n(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onload=function(){if(200==s.status)o(s.responseText);else{var t="Errors Occured on Http Request (status : '"+s.status+"' | response : '"+s.responseText+"')",e=s.status;n({message:t,status:e})}};var h=e.data&&r?e.data:null;s.send(h)}})},__callJSON:function(t){return this.__call(t).then(JSON.parse).catch(function(e){throw console.log("_callJSON failed on : ",t.url,e),e})},__callXML:function(t){return this.__call(t).then(function(t){var o;if("undefined"==typeof window){o=(new(0,e.DOMParser)).parseFromString(t,"text/xml")}else if(window.DOMParser){var i=new window.DOMParser;o=i.parseFromString(t,"text/xml")}else o=new window.ActiveXObject("Microsoft.XMLDOM"),o.async=!1,o.loadXML(t);return o}).catch(function(e){throw console.log("__callXML failed on : ",t.url,e),e})}}}(0,n,r),a=function(){return{PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(t,e){if(!arguments)return"Message indefined !";var o=Array.prototype.slice.call(arguments),i=o.shift(),n=o,r=this[i];try{r=Array.isArray(n)&&n.length>0?r.replace("%var%",n.join(" - ")):r.replace("%var%","%var% (not specified)")}catch(t){}return r}}}(),l=function(){function t(e){if(!(this instanceof t))throw new TypeError("ErrorService constructor cannot be called as a function.");var o=e;"string"==typeof e||e instanceof String?(this.message=e,this.status=-1,this.type=t.TYPE_UNKERR):(this.message=o.message||"undefined!?",this.type=o.type,this.status=o.status||-1),this.name="ErrorService",this.stack=(new Error).stack}return t.TYPE_SRVERR="SERVICE_ERROR",t.TYPE_USEERR="USAGE_ERROR",t.TYPE_UNKERR="UNKNOWN_ERROR",t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),t}(),p=function(t){return{uuid:function(){var t=Math.floor(Date.now());return function(){return t++}}(),call:function(t){if(!t)throw new Error("missing parameter : options !");if(!t.url)throw new Error("missing parameter : options.url !");if(t.timeOut||(t.timeOut=0),!t.onResponse)throw new Error("missing parameter : options.onResponse !");var e="string"==typeof t.callbackSuffix?t.callbackSuffix:this.uuid(),o=!1,i=!1,n=t.url.indexOf("callback=");if(-1!=n){o=!0;var r=t.url.indexOf("&",n);-1===r&&(r=t.url.length);var s=t.url.substring(n+9,r);s&&(i=!0,t.callbackName=s)}if(!o){var a=t.url.indexOf("?");-1===a?t.url=t.url+"?callback=":a===t.url.length?t.url=t.url+"callback=":t.url=t.url+"&callback="}var l=!!t.callbackName||i;if(i||(t.callbackName||(t.callbackName="callback",(e||""===e)&&(t.callbackName+=e)),t.url=t.url.replace("callback=","callback="+t.callbackName)),t.onTimeOut||(t.onTimeOut=function(){console.log("TimeOut while invoking url : "+t.url)}),!l){var p=this,h=null;t.timeOut>0&&(h=window.setTimeout(function(){window[t.callbackName]=function(){},t.onTimeOut(),p._deleteScript(e)},t.timeOut)),window[t.callbackName]=function(o){window.clearTimeout(h),t.onResponse(o),p._deleteScript(e)}}this._createScript(e,t.url)},_createScript:function(t,e){var o,i=document.getElementById("results"+t);o=document.createElement("script"),o.setAttribute("type","text/javascript"),o.setAttribute("src",e),o.setAttribute("charset","UTF-8"),o.setAttribute("id","results"+t),o.setAttribute("async","true");var n=document.documentElement||document.getElementsByTagName("head")[0];null===i?n.appendChild(o):n.replaceChild(o,i)},_deleteScript:function(t){var e=document.getElementById("results"+t);if(e){var o=e.parentNode||document.documentElement;if(!o)return;o.removeChild(e)}}}}(),h=function(t,e,o){return{send:function(i){var n=i||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if("undefined"==typeof window&&"JSONP"===i.protocol)return void console.log("Value(s) for parameter(s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");if("XHR"===i.protocol||"json"===i.format?n.wrap=!1:"JSONP"===i.protocol&&"xml"===i.format&&(n.wrap=!0),n.callback=(i.protocol,null),n.output=n.wrap?"json":null,n.wrap){var r={};r.output=n.output,r.callback=n.callback,delete r.callback,n.url=t.normalyzeUrl(i.url,r)}switch(n.protocol){case"XHR":"GET"===i.method&&i.nocache&&(n.url=t.normalyzeUrl(n.url,{t:(new Date).getTime()})),e.call(n);break;case"JSONP":n.data&&(n.url=t.normalyzeUrl(n.url,n.data)),o.call(n);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}}}(n,s,p),c=function(){var t="undefined"!=typeof window,e=t&&location&&location.protocol&&0===location.protocol.indexOf("https:")?"https://":"http://",o="wxs.ign.fr",i=e+o.concat("/","%KEY%"),n=function(t){return this._key.replace(t?"%KEY%":null,t)};return{Alti:{_key:{"elevation-json":i+"/alti/rest/elevation.json","elevation-xml":i+"/alti/rest/elevation.xml","profil-json":i+"/alti/rest/elevationLine.json","profil-xml":i+"/alti/rest/elevationLine.xml",wps:i+"/alti/wps"},url:function(t){return{"elevation-json":this._key["elevation-json"].replace(t?"%KEY%":null,t),"elevation-xml":this._key["elevation-xml"].replace(t?"%KEY%":null,t),"profil-json":this._key["profil-json"].replace(t?"%KEY%":null,t),"profil-xml":this._key["profil-xml"].replace(t?"%KEY%":null,t),wps:this._key.wps.replace(t?"%KEY%":null,t)}}},ProcessIsoCurve:{_key:{"iso-json":i+"/isochrone/isochrone.json","iso-xml":i+"/isochrone/isochrone.xml"},url:function(t){return{"iso-json":this._key["iso-json"].replace(t?"%KEY%":null,t),"iso-xml":this._key["iso-xml"].replace(t?"%KEY%":null,t)}}},AutoComplete:{_key:i+"/ols/apis/completion",url:n},ReverseGeocode:{_key:i+"/geoportail/ols",url:n},AutoConf:{_key:{apiKey:i+"/autoconf",apiKeys:i+"/autoconf?keys=%KEYS%"},url:function(t){var i="";if(Array.isArray(t)&&t.length>0){i=t[0];for(var n=1;n<t.length;n++)i+=","+t[n]}return{apiKey:this._key.apiKey.replace(t?"%KEY%":null,t),apiKeys:this._key.apiKeys.replace("%KEY%",t[0]).replace("%KEYS%",i),aggregate:e+o.concat("/")+t+"/autoconf/id/"}}},Geocode:{_key:i+"/geoportail/ols",url:n},Route:{_key:{ols:i+"/itineraire/ols","route-json":i+"/itineraire/rest/route.json","route-xml":i+"/itineraire/rest/route.xml"},url:function(t){return{ols:this._key.ols.replace(t?"%KEY%":null,t),"route-json":this._key["route-json"].replace(t?"%KEY%":null,t),"route-xml":this._key["route-xml"].replace(t?"%KEY%":null,t)}}}}}(),u=function(t,e,o,i,n,r){function s(t){if(!(this instanceof s))throw new TypeError(o.getMessage("CLASS_CONSTRUCTOR"));this.options={protocol:"XHR",proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(t){console.log("onSuccess - la reponse est la suivante : ",t)},onFailure:function(t){200!==t.status&&t.status?console.log("onFailure - Erreur (",t.status,") : ",t.message):console.log("onFailure : ",t.message)}};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);if(!this.options.apiKey&&!this.options.serverUrl)throw new Error(o.getMessage("PARAM_MISSING","apiKey","serverUrl"));if(this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(t){console.log("onSuccess - la réponse brute du service est la suivante : ",t)}),!(null!==this.options.onSuccess&&"function"==typeof this.options.onSuccess))throw new Error(o.getMessage("PARAM_MISSING","onSuccess()"));if(!this.options.serverUrl){var i=r[this.CLASSNAME].url(this.options.apiKey);"string"==typeof i&&(this.options.serverUrl=i)}switch(this.options.httpMethod="string"==typeof t.httpMethod?t.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(o.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(o.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol="string"==typeof t.protocol?t.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(o.getMessage("PARAM_UNKNOWN","protocol"))}if("undefined"==typeof window&&"JSONP"===this.options.protocol)throw new Error(o.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));"JSONP"===this.options.protocol&&(this.options.httpMethod="GET"),this.options.nocache=t.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}return s.prototype={constructor:s,call:function(){function t(){this.buildRequest.call(this,r,e)}function e(t){this.callService.call(this,r,o)}function o(t){this.analyzeResponse.call(this,r,i)}function i(t){if(!t)return r.call(this,new n("Analyse de la reponse en échec !?"));this.options.onSuccess.call(this,t)}function r(t){var e=t;e instanceof n||(e=new n(t.message)),this.options.onFailure.call(this,e)}t.call(this)},buildRequest:function(t,e){},callService:function(t,o){var r=null,s=this.request,a=!(!this.options.proxyURL||"XHR"!==this.options.protocol);this.options.serverUrl=e.normalyzeUrl(this.options.serverUrl,{"gp-access-lib":"1.1.0"},!1),a&&("GET"===this.options.httpMethod&&(r=this.options.proxyURL+e.normalyzeUrl(this.options.serverUrl,this.request,!0),s=null),"POST"===this.options.httpMethod&&(r=this.options.proxyURL+e.normalyzeUrl(this.options.serverUrl,null,!0),s=this.request));var l=this,p={url:r||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:"XHR"!==this.options.protocol,callbackSuffix:this.options.callbackSuffix,data:s,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(e){var i=null;if("XHR"==l.options.protocol&&(i=e),"JSONP"==l.options.protocol){if(!e)return void t.call(l,new n("Le contenu de la reponse est vide !?"));if(e.http){if(200!==e.http.status)return void t.call(l,new n({status:e.http.status,message:e.http.error,type:n.TYPE_SRVERR}));if(i=e.xml,l.options.rawResponse&&(i=e),"function"==typeof l.options.onBeforeParse){var r=l.options.onBeforeParse(i);"string"==typeof r&&(i=r)}}else i=e}l.response=i,o.call(l,i)},onFailure:function(e){e.type=n.TYPE_SRVERR,t.call(l,new n(e))},onTimeOut:function(){t.call(l,new n("TimeOut!"))}};i.send(p)},analyzeResponse:function(t,e){}},s}(0,n,a,h,l,c),d=function(t){function e(t){if(!(this instanceof e))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.options=t||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json"}return e.CLASSNAME="AltiRequest",e.prototype={constructor:e,setPositions:function(t){for(var e=[],o=0;o<t.length;o++){var i=t[o];i.lon&&i.lat&&e.push(i)}this.positions=e},getPositions:function(t){if(!t)return this.positions;var e=this.positions.length-1;return t>e||t<e?this.positions:this.positions[t]},addPositions:function(t){for(var e=0;e<t.length;e++){var o=t[e];o.lon&&o.lat&&this.positions.push(t[e])}},getLon:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lon);return t.join(this.delimiter)},getLat:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lat);return t.join(this.delimiter)}},e.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"delimiter",v:this.delimiter}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"format",v:this.format}),t},e}(),f=function(t,e){function o(t){if(!(this instanceof o))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",e.apply(this,arguments),this.zonly=this.options.zonly||!1}return o.prototype=Object.create(e.prototype,{zonly:{get:function(){return this._zonly},set:function(t){this._zonly=t}}}),o.prototype.constructor=o,o.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"zonly",v:this.zonly}),t.push({k:"format",v:this.format}),t},o}(0,d),y=function(t,e){function o(t){if(!(this instanceof o))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",e.apply(this,arguments),this.sampling=this.options.sampling||3}return o.prototype=Object.create(e.prototype,{sampling:{get:function(){return this._sampling},set:function(t){this._sampling=t}}}),o.prototype.constructor=o,o.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"sampling",v:this.sampling}),t.push({k:"format",v:this.format}),t},o}(0,d),g=function(t,e,o,i){function n(t){if(!(this instanceof n))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=t||{},!this.options)throw new Error(e.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(e.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new o(this.options.param);break;case"Profil":this.DataObject=new i(this.options.param);break;default:throw new Error(e.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}return n.prototype={requestString:null,constructor:n,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:"lon=__LON__\nlat=__LAT__\nindent=__INDENT__\ncrs='__CRS__'\n",input:{point:"zonly=__ZONLY__",profil:"sampling=__SAMPLING__"}}},processRequestString:function(){var t="";return"POST"==this.method?t=this.template.post.value:"GET"==this.method&&(t=this.template.get.value),t=t.replace(/__LON__/g,this.DataObject.getLon()),t=t.replace(/__LAT__/g,this.DataObject.getLat()),t=t.replace(/__INDENT__/g,this.DataObject.indent),t=t.replace(/__CRS__/g,this.DataObject.crs),t+=this.__addDataInputs(),this.requestString=t,this.requestString},__addDataInputs:function(){var t;if("POST"==this.method)t=this.template.post;else{if("GET"!=this.method)throw new Error("No other HTTP method supported by the service !");t=this.template.get}var e=null;if("AltiElevationRequest"==this.DataObject.CLASSNAME)return e=t.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly);if("AltiProfilRequest"==this.DataObject.CLASSNAME)return e=t.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}},n}(0,a,f,y),m=function(t){function e(t){if(!(this instanceof e))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=t||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}return e.prototype={requestString:null,constructor:e,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=\x3c!-- __DATAINPUTS__ --\x3e",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs>\x3c!-- __DATAINPUTS__ --\x3e</wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){var t="";if("POST"==this.method)t=this.template.post.value;else{if("GET"!=this.method)return!1;t=this.template.get.value}return t=t.replace(/__SERVICE__/g,this.paramservice),t=t.replace(/__VERSION__/g,this.paramversion),t=t.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),t=t.replace(/__IDENTIFIER__/g,this.paramidentifier),t=t.replace(/__REQUEST__/g,this.paramrequest),"POST"==this.method&&(t=t.replace(/__NAMESPACE__/g,this.namespaceByDefault),t=t.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),!!(t=t.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()))&&(this.requestString=t,!0)},__addDataInputs:function(){for(var t="GET"==this.method?this.template.get.input:this.template.post.input,e="GET"==this.method?";":"",o="",i=this,n=this.DataObject.getData(),r=0;r<n.length;r++)!function(r){e&&(e=r==n.length-1?"":";"),o=o.concat(i.__addDataInput(t,n[r].k,n[r].v),e)}(r);return o},__addDataInput:function(t,e,o){var i=t;return i=i.replace(/__KEY__/g,e),i=i.replace(/__DATA__/g,o)},setMethod:function(t){"GET"!=t&&"POST"!=t||(this.method=t)},getMethod:function(){return this.method}},e}(),v=function(t,e,o,i,n){return{build:function(t){if(!t)throw new Error(e.getMessage("PARAM_EMPTY","options"));if(!t.type)throw new Error(e.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var r=null;switch(t.type){case"Elevation":t.wps.identifier="gs:WPSElevation",r=new i(t.param);break;case"Profil":t.wps.identifier="gs:WPSLineElevation",r=new n(t.param);break;default:throw new Error(e.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var s={data:r,method:t.method,param:t.wps},a=new o(s);if(!a.processRequestString())throw new Error("Enable to process request !");return a.requestString}}}(0,a,m,f,y),_=function(t,e,o,i){return{build:function(t){var n=null,r={type:t.sampling?"Profil":"Elevation",method:t.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null}};r.param.positions=t.positions,r.param.format=t.outputFormat,r.param.sampling=t.sampling,r.param.zonly=t.zonly;var s=null!==t.onError&&"function"==typeof t.onError,a=null!==t.onSuccess&&"function"==typeof t.onSuccess,l=null;switch(t.api){case"REST":var p=new o(r);if(!p.processRequestString()){if(l="Error in process request (rest) !",s)return void t.onError.call(t.scope,new e(l));throw new Error(l)}n=p.requestString;break;case"WPS":if(r.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},!(n=i.build(r))){if(l="Error in process request (wps) !",s)return void t.onError.call(t.scope,new e(l));throw new Error(l)}break;default:if(l="Type of API is not supported by service (REST or WPS) !",s)return void t.onError.call(t.scope,new e(l));throw new Error(l)}return a&&t.onSuccess.call(t.scope,n),n}}}(0,l,g,v),b=function(t,o){function i(t){if(!(this instanceof i))throw new TypeError("XML constructor cannot be called as a function.");this.xmlString=null,this.xmlDoc=null,this.reader=null,t&&(t.xmlString&&"string"==typeof t.xmlString&&(this.xmlString=t.xmlString,this.xmlDoc=n(t.xmlString)),t.reader&&this.setReader(t.reader))}function n(t){if("object"==typeof exports){return(new(0,e.DOMParser)).parseFromString(t,"text/xml")}var o,i,n="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){i=new window.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t);var r=i.parseError;if(r.errorCode)throw r.line&&r.linepos&&(n+="( ligne "+r.line+", colonne "+r.linepos),r.reason&&(n+=":  "+r.reason+")"),new Error(n);return i}if(window.DOMParser){o=new window.DOMParser;try{i=o.parseFromString(t,"text/xml")}catch(t){throw"SyntaxError"===t.message?new Error(n):new Error("Erreur lors du parsing de la réponse du service : "+t.message)}if(i.getElementsByTagName("parsererror").length>0)for(var s=i.getElementsByTagName("parsererror"),a=0;a<s.length;a++){var l=s[a].innerHTML;if(-1==l.indexOf("Huge input lookup"))throw n+="("+l+")",new Error(n)}else if(!i.documentElement)throw new Error(n);return i}throw new Error("Incompatible DOM Parser pour ce navigateur !")}function r(t){var e;return 9===t.nodeType?e=t.documentElement:1===t.nodeType&&(e=t),e}function s(t){var e={};if(t.attributes.length>0){var o=a(t);e.attributes=o}if(t.hasChildNodes())for(var i,n={},r=t.childNodes,l=0;l<r.length;l++)if(i=r[l],3===i.nodeType)e.textContent=i.nodeValue;else if(1===i.nodeType)if(n=s(i),e[i.nodeName]){if(!Array.isArray(e[i.nodeName])){var p=e[i.nodeName];e[i.nodeName]=[],e[i.nodeName].push(p)}e[i.nodeName].push(n)}else e[i.nodeName]=n;return e}function a(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}return i.prototype={constructor:i,getXMLString:function(){return this.xmlString},setXMLString:function(t){t&&"string"==typeof t&&(this.xmlString=t,this.xmlDoc=n(t))},getReader:function(){return this.reader},setReader:function(t){t&&t.read&&"function"==typeof t.read&&(this.reader=t)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(t){this.xmlDoc=t},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=n(this.xmlString)),this.xmlDoc){var t=r(this.xmlDoc);if(t){var e;return this.reader&&this.reader.read?e=this.reader.read(t):(e={},e[t.nodeName]=s(t)),e}return{}}}},i}(),E=function(){function t(){if(!(this instanceof t))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}return t.prototype={constructor:t},t}(),S=function(){function t(){if(!(this instanceof t))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}return t.prototype={constructor:t},t}(),P=function(t,e,o){var i={};return i.READERS={elevations:function(t){var o=new e;if(t.hasChildNodes())for(var n,r,s=t.childNodes,a=0;a<s.length;a++)n=s[a],i.READERS[n.nodeName]&&(r=i.READERS[n.nodeName](n),o.elevations.push(r));return o},elevation:function(t){var e=new o;if(t.hasChildNodes())for(var n,r=t.childNodes,s=0;s<r.length;s++)n=r[s],i.READERS[n.nodeName]&&i.READERS[n.nodeName](n,e);return e},lat:function(t,e){var o=t.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la réponse du service: latitude attendue mais absente");e.lat=parseFloat(o.nodeValue)},lon:function(t,e){var o=t.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la réponse du service: longitude attendue mais absente");e.lon=parseFloat(o.nodeValue)},z:function(t,e){var i=t.firstChild;if(!i||3!==i.nodeType)throw new Error("Erreur dans la lecture de la réponse du service: altitude attendue mais absente");if(!e)return e=new o,e.z=parseFloat(i.nodeValue),e;e.z=parseFloat(i.nodeValue)},acc:function(t,e){var o=t.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la réponse du service: précision (acc) attendue mais absente");e.acc=parseFloat(o.nodeValue)},exceptionreport:function(t){var e={};if(t.hasChildNodes())for(var o,n=t.childNodes,r=0;r<n.length;r++)o=n[r],"Exception"===o.nodeName&&(e.exceptionReport=i.READERS.exception(o));return e},exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e},error:function(t){var e={error:{}};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++){o=i[n];var r;1===o.nodeType&&"code"===o.nodeName&&(r=o.firstChild)&&3===r.nodeType&&(e.error.code=r.nodeValue),1===o.nodeType&&"description"===o.nodeName&&(r=o.firstChild)&&3===r.nodeType&&(e.error.description=r.nodeValue)}return e}},i.read=function(t){if("elevations"===t.nodeName){return i.READERS.elevations(t)}if("ExceptionReport"===t.nodeName){return i.READERS.exceptionreport(t)}if("error"===t.nodeName){return i.READERS.error(t)}throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},i}(0,E,S),w=function(t,e,o,i,n,r,s){return{build:function(t){var a=null;if(!t.response)return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)a=t.response;else{switch(t.outputFormat){case"xml":try{var l=new i({reader:n});if("string"==typeof t.response?l.setXMLString(t.response):l.setXMLDoc(t.response),!(a=l.parse()))throw new Error(o.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(i){var p=i.message;return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",p),status:200,type:e.TYPE_SRVERR}))}break;case"json":var h;if(h="string"==typeof t.response?window.JSON.parse(t.response):t.response,h.error)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",h.error.description),status:200,type:e.TYPE_SRVERR}));if(h){var c,u=h.elevations,d=new r;if(Array.isArray(u)&&u.length)for(var f=0;f<u.length;f++)c=new s,"object"==typeof u[f]?(u[f].lon&&(c.lon=u[f].lon),u[f].lat&&(c.lat=u[f].lat),u[f].z&&(c.z=u[f].z),u[f].acc&&(c.acc=u[f].acc)):"number"==typeof u[f]&&(c.z=u[f]),Array.isArray(d.elevations)&&d.elevations.push(c);a=d}if(!a)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:e.TYPE_UNKERR,status:-1}));break;default:return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:e.TYPE_UNKERR,status:-1}))}if(a.exceptionReport)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",a.exceptionReport),type:e.TYPE_SRVERR,status:200}));if(a.error){var y=a.error.description;return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",y),type:e.TYPE_SRVERR,status:200}))}}t.onSuccess.call(t.scope,a)}}}(0,l,a,b,P,E,S),A=function(t,e,o,i,n,r,s){function a(t){if(!(this instanceof a))throw new TypeError(e.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",i.apply(this,arguments),!t.positions)throw new Error(e.getMessage("PARAM_MISSING","positions"));if(0===t.positions.length)throw new Error(e.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=t.positions,this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"xml",this.options.sampling=t.sampling||null,this.options.api="string"==typeof t.api?t.api.toUpperCase():"REST","REST"===this.options.api&&(this.options.httpMethod="GET"),this.options.zonly=t.zonly||!1,!this.options.serverUrl){var o=n.Alti.url(this.options.apiKey),r=null;switch(this.options.api){case"WPS":r=o.wps;break;case"REST":r=o[(t.sampling?"profil":"elevation")+"-"+this.options.outputFormat];break;default:throw new Error(e.getMessage("PARAM_UNKNOWN","api"))}if(!r)throw new Error("Url by default not found !");this.options.serverUrl=r}var s=this.options.serverUrl.lastIndexOf(".");if(-1!==s){var l=this.options.serverUrl.substring(s+1)
;if(l&&l.length<5)switch(l.toLowerCase()){case"json":case"xml":this.options.outputFormat=l.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}return a.prototype=Object.create(i.prototype,{}),a.prototype.constructor=a,a.prototype.buildRequest=function(t,e){var o={httpMethod:this.options.httpMethod,onSuccess:function(t){this.request=t,e.call(this,this.request)},onError:t,scope:this,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly};r.build(o)},a.prototype.analyzeResponse=function(t,i){if(this.response){var n={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:t,onSuccess:i,scope:this};s.build(n)}else t.call(this,new o(e.getMessage("SERVICE_RESPONSE_EMPTY")))},a}(0,a,l,u,c,_,w),C=function(){function t(){if(!(this instanceof t))throw new TypeError("AutoConfResponse constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.territories={},this.tileMatrixSets={},this.services={}}return t.prototype={constructor:t,isConfLoaded:function(t){if(t)return!!this.generalOptions.apiKeys[t]},getLayersId:function(t){return this.generalOptions.apiKeys[t]},getLayersConf:function(t){var e={},o=this.getLayersId(t);if(o)for(var i=0;i<o.length;i++){var n=o[i];e[n]=this.layers[n]}return e},getLayerConf:function(t){if(this.layers)return this.layers[t]},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(t){if(this.tileMatrixSets)return this.tileMatrixSets[t]},getTerritories:function(){return this.territories},getTerritoryConf:function(t){if(this.territories)return this.territories[t]},getServices:function(){return this.services},getServiceConf:function(t){if(this.services)return this.services[t]}},t}(),M=function(){function t(){if(!(this instanceof t))throw new TypeError("Constraint constructor cannot be called as a function.");this.crs=null,this.bbox={left:null,right:null,top:null,bottom:null},this.minScaleDenominator=null,this.maxScaleDenominator=null,this.temporalExtent=[null,null]}return t.prototype={constructor:t},t}(),x=function(){function t(){if(!(this instanceof t))throw new TypeError("Format constructor cannot be called as a function.");this.current=null,this.name=null}return t.prototype={constructor:t},t}(),I=function(){function t(){if(!(this instanceof t))throw new TypeError("Layer constructor cannot be called as a function.")}return t.prototype={constructor:t,getName:function(){return this.name},getTitle:function(){return this.title},getDescription:function(){return this.description},getLayerId:function(){return this.layerId},getQuicklookUrl:function(){return this.quicklookUrl},getDefaultProjection:function(){return this.defaultProjection},getProjections:function(){var t=[];return t.push(this.defaultProjection),t.concat(this.additionalProjections)},getBBOX:function(){if(this.globalConstraint)return this.globalConstraint.bbox},getMinScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.minScaleDenominator},getMaxScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.maxScaleDenominator},getTMSID:function(){if(this.wmtsOptions)return this.wmtsOptions.tileMatrixSetLink},getServiceParams:function(){return this.serviceParams},getServerUrl:function(t){if(t&&this.serviceParams&&this.serviceParams.serverUrl)return this.serviceParams.serverUrl[t]},getLegends:function(){return this.legends},getMetadata:function(){return this.metadata},getStyles:function(){return this.styles},getDefaultStyle:function(){if(this.styles){for(var t,e=this.styles,o=0;o<e.length;o++)if(!0===e[o].current){t=e[o].name;break}return t}},getThematics:function(){return this.thematics},getDefaultFormat:function(){if(this.formats){for(var t,e=this.formats,o=0;o<e.length;o++)if(!0===e[o].current){t=e[o].name;break}return t}},getConstraints:function(){return this.constraints},getOriginators:function(){return this.originators},getDimensions:function(){return this.dimensions},getAggregatedLayers:function(){return this.isAggregate?this.aggregatedLayers:void 0}},t}(),R=function(){function t(){if(!(this instanceof t))throw new TypeError("Legend constructor cannot be called as a function.");this.format=null,this.url=null,this.minScaleDenominator=null}return t.prototype={constructor:t},t}(),T=function(){function t(){if(!(this instanceof t))throw new TypeError("Metadata constructor cannot be called as a function.");this.format=null,this.url=null}return t.prototype={constructor:t},t}(),L=function(){function t(){if(!(this instanceof t))throw new TypeError("Originator constructor cannot be called as a function.");this.name=null,this.attribution=null,this.logo=null,this.url=null,this.constraints=[]}return t.prototype={constructor:t},t}(),G=function(){function t(){if(!(this instanceof t))throw new TypeError("Service constructor cannot be called as a function.");this.title=null,this.serverUrl=null,this.version=null}return t.prototype={constructor:t},t}(),O=function(){function t(){if(!(this instanceof t))throw new TypeError("Style constructor cannot be called as a function.");this.name=null,this.title=null,this.current=null}return t.prototype={constructor:t},t}(),N=function(){function t(){if(!(this instanceof t))throw new TypeError("Territory constructor cannot be called as a function.");this.isDefault=null,this.defaultCRS=null,this.additionalCRS=[],this.geoBBOX={left:null,right:null,top:null,bottom:null},this.geoCenter={lon:null,lat:null},this.defaultOptions={resolution:null,minScaleDenominator:null,maxScaleDenominator:null},this.defaultLayers=[]}return t.prototype={constructor:t},t}(),k=function(){function t(){if(!(this instanceof t))throw new TypeError("Thematic constructor cannot be called as a function.");this.inspire=null,this.name=null}return t.prototype={constructor:t},t}(),D=function(){function t(){if(!(this instanceof t))throw new TypeError("TileMatrixSet constructor cannot be called as a function.");this.projection=null,this.nativeResolutions=[],this.matrixIds=[],this.tileMatrices={}}return t.prototype={constructor:t,getResolutions:function(){return this.nativeResolutions},getMatrixIds:function(){return this.matrixIds},getProjection:function(){return this.projection},getTileMatrices:function(){return this.tileMatrices},getTopLeftCorner:function(){var t,e=this.getTileMatrices();if(e)for(var o in e)if(e.hasOwnProperty(o)){t=e[o].topLeftCorner;break}return t}},t}(),j=function(){function t(){if(!(this instanceof t))throw new TypeError("TileMatrix constructor cannot be called as a function.");this.matrixId=null,this.matrixHeight=null,this.matrixWidth=null,this.scaleDenominator=null,this.tileHeight=null,this.tileWidth=null,this.topLeftCorner=null}return t.prototype={constructor:t,getTopLeftCorner:function(){return this.topLeftCorner},getScaleDenominator:function(){return this.scaleDenominator},getTileHeight:function(){return this.tileHeight},getTileWidth:function(){return this.tileWidth},getMatrixHeight:function(){return this.matrixHeight},getMatrixWidth:function(){return this.matrixWidth}},t}(),F=function(){function t(){if(!(this instanceof t))throw new TypeError("TileMatrixLimit constructor cannot be called as a function.");this.minTileRow=null,this.maxTileRow=null,this.minTileCol=null,this.maxTileCol=null}return t.prototype={constructor:t},t}(),U=function(t,e,o,i,n,r,s,a,l,p,h,c,u,d,f){function y(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}function g(t,e){if(t.hasChildNodes())for(var o,i,n,r=t.childNodes,s=0;s<r.length;s++)if(o=r[s],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,n=o.prefix||_.DEFAULTPREFIX,_.READERS[n][i]){var a=_.READERS[n][i];a(o,e)}else g(o,e)}function m(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild,3!==e.nodeType&&4!==e.nodeType||(o=e.nodeValue)),o}function v(t){if(t.attributes.length>0){var e=y(t);for(var o in e)if(e.hasOwnProperty(o)){if("version"===o&&e.version!==_.VERSION)return void console.log("[AutoConfResponseReader] autoconf version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(e[o]!==_.NAMESPACES.xmlns)return void console.log("[AutoConfResponseReader] autoconf response default namespace is not the expected one");continue}var i=o.split(":")[0],n=o.split(":")[1];if("xmlns"===i&&n&&_.NAMESPACES[n]&&_.NAMESPACES[n]!==e[o])return void console.log("[AutoConfResponseReader] autoconf response "+o+" namespace is not the expected one");if("schemaLocation"===n&&e[o]!==_.SCHEMALOCATION[0]&&e[o]!==_.SCHEMALOCATION[1])return void console.log("[AutoConfResponseReader] autoconf response schema location is not the expected one")}}}var _={};return _.VERSION="1.1.0",_.NAMESPACES={xmlns:"http://www.opengis.net/context",gpp:"http://api.ign.fr/geoportail",ows:"http://www.opengis.net/ows/1.1",sld:"http://www.opengis.net/sld",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},_.SCHEMALOCATION=["http://www.opengis.net/context http://gpp3-wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf/autoconf.xsd","http://www.opengis.net/context http://gpp3-wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://gpp3-wxs.ign.fr/schemas/autoconf.xsd"],_.DEFAULTPREFIX="context",_.READERS={context:{ViewContext:function(t){v(t);var o=new e;return g(t,o),o},Title:function(t,e){e&&e.generalOptions?e.generalOptions.title=m(t):e&&e.lyr&&(e.lyr.title=m(t))},Abstract:function(t,e){e&&e.lyr&&(e.lyr.description=m(t))},Server:function(t,e){var o=t.getAttribute("service"),i=t.getAttribute("title"),n=t.getAttribute("version");if(o)if(e&&e.services&&"object"==typeof e.services&&!e.services[o]){var r=new l;r.title=i,r.version=n,g(t,r),e.services[o]=r}else e&&e.lyr&&(e.lyr.serviceParams||(e.lyr.serviceParams={}),e.lyr.serviceParams.id=o,e.lyr.serviceParams.version=n)},OnlineResource:function(t,e){e&&e.hasOwnProperty("serverUrl")&&(e.serverUrl=t.getAttribute("xlink:href"))},LayerList:function(t,e){if(g(t,e),e&&e.layers&&e.generalOptions&&e.services)for(var o in e.layers)if(e.layers.hasOwnProperty(o)){var i=e.layers[o],n=i.apiKeys;if(n&&Array.isArray(n))for(var r=0;r<n.length;r++){var s=n[r];e.generalOptions.apiKeys&&(e.generalOptions.apiKeys[s]&&Array.isArray(e.generalOptions.apiKeys[s])||(e.generalOptions.apiKeys[s]=[]),e.generalOptions.apiKeys[s].push(o))}var a=i.serviceParams;if(a&&a.id&&!e.services[a.id]){var p=new l;a.serverUrl&&(p.serverUrl=a.serverUrl),a.version&&(p.version=a.version),e.services[a.id]=p}if(i.wmtsOptions&&i.wmtsOptions.tileMatrixSetLink&&e.tileMatrixSets){var h=i.wmtsOptions.tileMatrixSetLink,c=e.tileMatrixSets;for(var u in c)c.hasOwnProperty(u)&&u===h&&(i.defaultProjection=c[u].projection)}}},Layer:function(t,e){if(e&&e.layers){var o={lyr:new n,lyrId:null},i=t.getAttribute("hidden");o.lyr.hidden="1"===i;var r=t.getAttribute("queryable");if(o.lyr.queryable="1"===r,g(t,o),o.lyrId){if(o.lyr.serviceParams&&o.lyr.serviceParams.id){var s=o.lyr.serviceParams.id;if(-1!==s.toUpperCase().indexOf("OPENLS")||-1!==s.toUpperCase().indexOf("ELEVATION")){var a=o.lyrId.split("$")[0];o.lyrId=a+"$"+s}}o.lyr.layerId=o.lyrId,e.layers[o.lyrId]=o.lyr}}},Name:function(t,e){e&&e.lyr&&(e.lyr.name=m(t))},SRS:function(t,e){e&&e.lyr&&(e.lyr.defaultProjection=m(t))},Format:function(t,e){if(e&&e.lyr){var o=new i,n=t.getAttribute("current");o.current="1"===n,o.name=m(t),e.lyr.formats&&Array.isArray(e.lyr.formats)||(e.lyr.formats=[]),e.lyr.formats.push(o)}},Style:function(t,e){if(e&&e.lyr){var o=new p,i=t.getAttribute("current");if(o.current="1"===i||1===i,t.hasChildNodes)for(var n,r,s=t.childNodes,a=0;a<s.length;a++)n=s[a],1===n.nodeType&&(r=n.localName||n.baseName||n.nodeName,"Name"===r?o.name=m(n):"Title"===r&&(o.title=m(n)));e.lyr.styles&&Array.isArray(e.lyr.styles)||(e.lyr.styles=[]),e.lyr.styles.push(o)}},Dimension:function(t,e){var o=t.getAttribute("name"),i=m(t);e&&e.lyr&&(e.lyr.dimensions||(e.lyr.dimensions={}),"Type"===o?e.lyr.dimensions.type=i:"VisibilityRange"===o?e.lyr.dimensions.visibilityRange=i:"VisibilityMode "===o?e.lyr.dimensions.visibilityMode=i:"GeometricType"===o?e.lyr.dimensions.geometricType=i:"NoDataValue"===o&&(e.lyr.dimensions.noDataValue=i))}},gpp:{Theme:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("theme")&&(e.generalOptions.theme=m(t))},defaultGMLGFIStyleUrl:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("defaultGMLGFIStyle")&&(e.generalOptions.defaultGMLGFIStyle=m(t))},Territory:function(t,e){var o=t.getAttribute("id");if(o){var i=new h,n=t.getAttribute("default");i.isDefault="1"===n,g(t,i),e&&e.territories&&"object"==typeof e.territories&&(e.territories[o]=i)}},defaultCRS:function(t,e){e&&e.hasOwnProperty("defaultCRS")&&(e.defaultCRS=m(t))},AdditionalCRS:function(t,e){var o=m(t);o&&e&&(Array.isArray(e.additionalCRS)?e.additionalCRS.push(o):(e.additionalProjections&&Array.isArray(e.additionalProjections)||(e.additionalProjections=[]),e.additionalProjections.push(o)))},DefaultLayer:function(t,e){var o=t.getAttribute("layerId");o&&e&&Array.isArray(e.defaultLayers)&&e.defaultLayers.push(o)},BoundingBox:function(t,e){if(e){var i=m(t).split(",");if(4===i.length){var n={left:parseFloat(i[0]),right:parseFloat(i[2]),top:parseFloat(i[3]),bottom:parseFloat(i[1])},r=t.getAttribute("minT"),s=t.getAttribute("maxT");if(e.hasOwnProperty("geoBBOX"))e.geoBBOX=n;else if(e.hasOwnProperty("bbox"))if(e.bbox.left||e.bbox.right||e.bbox.top||e.bbox.bottom){e.multiConstraints||(e.multiConstraints=[]);var a=new o;a.bbox=n,a.temporalExtent=[r,s],e.multiConstraints.push(a)}else e.bbox=n,e.temporalExtent=[r,s];else e.globalConstraint||(e.globalConstraint=new o),e.globalConstraint.bbox=n,e.globalConstraint.temporalExtent=[r,s]}}},Resolution:function(t,e){var o=m(t);o&&e&&e.defaultOptions&&e.defaultOptions.hasOwnProperty("resolution")&&(e.defaultOptions.resolution=parseFloat(o))},x:function(t,e){var o=m(t);o&&e&&e.geoCenter&&e.geoCenter.hasOwnProperty("lon")&&(e.geoCenter.lon=parseFloat(o))},y:function(t,e){var o=m(t);o&&e&&e.geoCenter&&e.geoCenter.hasOwnProperty("lat")&&(e.geoCenter.lat=parseFloat(o))},Resolutions:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("wgs84Resolutions")&&(e.generalOptions.wgs84Resolutions=m(t).split(","))},Layer:function(t,e){if(e&&e.hasOwnProperty("lyrId")&&e.lyr){e.lyrId=t.getAttribute("id");var o=t.getAttribute("aggregate"),i=t.getAttribute("more");(o||i)&&(e.lyr.isAggregate=!0),g(t,e.lyr)}},Constraint:function(t,e){var i=new o;if(g(t,i),e)if(e.constraints&&Array.isArray(e.constraints)||(e.constraints=[]),i.multiConstraints&&Array.isArray(i.multiConstraints)){var n=new o;n.crs=i.crs,n.bbox=i.bbox,n.minScaleDenominator=i.minScaleDenominator,n.maxScaleDenominator=i.maxScaleDenominator,n.temporalExtent=i.temporalExtent,e.constraints.push(n);for(var r=0;r<i.multiConstraints.length;r++)n=new o,n.crs=i.crs,n.minScaleDenominator=i.minScaleDenominator,n.maxScaleDenominator=i.maxScaleDenominator,n.bbox=i.multiConstraints[r].bbox,n.temporalExtent=i.multiConstraints[r].temporalExtent,e.constraints.push(n)}else e.constraints.push(i)},CRS:function(t,e){e&&e.hasOwnProperty("crs")&&(e.crs=m(t))},Thematic:function(t,e){if(e){var o=new c;o.inspire=!1,o.name=m(t),e.thematics&&Array.isArray(e.thematics)||(e.thematics=[]),e.thematics.push(o)}},InspireThematic:function(t,e){if(e){var o=new c;o.inspire=!0,o.name=m(t),e.thematics&&Array.isArray(e.thematics)||(e.thematics=[]),e.thematics.push(o)}},Originator:function(t,e){if(e){var o=new a;o.name=t.getAttribute("name"),g(t,o),e.originators&&Array.isArray(e.originators)||(e.originators=[]),e.originators.push(o)}},Attribution:function(t,e){e&&e.hasOwnProperty("attribution")&&(e.attribution=m(t))},Logo:function(t,e){e&&e.hasOwnProperty("logo")&&(e.logo=m(t))},URL:function(t,e){e&&e.hasOwnProperty("url")&&(e.url=m(t))},Legend:function(t,e){var o=new r;g(t,o),e&&(e.legends&&Array.isArray(e.legends)||(e.legends=[]),e.legends.push(o))},LegendURL:function(t,e){if(e&&e.hasOwnProperty("format")&&(e.format=t.getAttribute("format"),t.hasChildNodes)){var o=t.childNodes[0];"OnlineResource"===(o.localName||o.baseName||o.nodeName)&&e.hasOwnProperty("url")&&(e.url=o.getAttribute("xlink:href"))}},QuickLook:function(t,e){if(t.hasChildNodes){var o=t.childNodes[0];"OnlineResource"===(o.localName||o.baseName||o.nodeName)&&e&&(e.quicklookUrl=o.getAttribute("xlink:href"))}},MetadataURL:function(t,e){if(e){var o=new s;if(o.format=t.getAttribute("format"),t.hasChildNodes){var i=t.childNodes[0];"OnlineResource"===(i.localName||i.baseName||i.nodeName)&&(o.url=i.getAttribute("xlink:href"))}e.metadata||Array.isArray(e.metadata)||(e.metadata=[]),e.metadata.push(o)}},Key:function(t,e){if(e){var o=t.getAttribute("id");e.apiKeys&&Array.isArray(e.apiKeys)||(e.apiKeys=[]),e.apiKeys.push(o);var i=m(t);e.serviceParams||(e.serviceParams={}),e.serviceParams.serverUrl||(e.serviceParams.serverUrl={}),e.serviceParams.serverUrl[o]||(e.serviceParams.serverUrl[o]=i)}}},ows:{Identifier:function(t,e){e&&e.hasOwnProperty("TMS")?e.identifier=m(t):e&&e.hasOwnProperty("matrixId")&&(e.matrixId=m(t))},SupportedCRS:function(t,e){e&&e.TMS&&e.TMS.hasOwnProperty("projection")&&(e.TMS.projection=m(t))}},sld:{MinScaleDenominator:function(t,e){var i=m(t);i&&e&&(e.hasOwnProperty("defaultOptions")?e.defaultOptions.minScaleDenominator=parseFloat(i):e.lyr?(e.lyr.globalConstraint||(e.lyr.globalConstraint=new o),e.lyr.globalConstraint.minScaleDenominator=parseFloat(i)):e.hasOwnProperty("minScaleDenominator")&&(e.minScaleDenominator=parseFloat(i)))},MaxScaleDenominator:function(t,e){var i=m(t);i&&e&&(e.hasOwnProperty("defaultOptions")?e.defaultOptions.maxScaleDenominator=parseFloat(i):e.lyr?(e.lyr.globalConstraint||(e.lyr.globalConstraint=new o),e.lyr.globalConstraint.maxScaleDenominator=parseFloat(i)):e.hasOwnProperty("maxScaleDenominator")&&(e.maxScaleDenominator=parseFloat(i)))}},wmts:{TileMatrixSetLimits:function(t,e){if(e){var o={};g(t,o),e.wmtsOptions||(e.wmtsOptions={}),e.wmtsOptions.tileMatrixSetLimits=o}},TileMatrixLimits:function(t,e){var o,i=new f;if(t.hasChildNodes){for(var n=t.childNodes,r=0;r<n.length;r++){var s=n[r],a=s.localName||s.baseName||s.nodeName;"TileMatrix"===a?o=m(s):"MinTileRow"===a?i.minTileRow=m(s):"MaxTileRow"===a?i.maxTileRow=m(s):"MinTileCol"===a?i.minTileCol=m(s):"MaxTileCol"===a&&(i.maxTileCol=m(s))}o&&e&&!e[o]&&(e[o]=i)}},TileMatrixSet:function(t,e){if(e&&e.tileMatrixSets){var o={};o.TMS=new u,o.resolutions=[],g(t,o);var i=o.TMS.tileMatrices;for(var n in i)i.hasOwnProperty(n)&&o.TMS.matrixIds.push(n);if(("IGNF:WGS84G"===o.TMS.getProjection()||"EPSG:4326"===o.TMS.getProjection())&&e.generalOptions&&Array.isArray(e.generalOptions.wgs84Resolutions))for(var r=e.generalOptions.wgs84Resolutions,s=0;s<r.length;s++)o.resolutions[s]=parseFloat(r[s]);Array.isArray(o.resolutions)&&void 0!==o.resolutions.sort&&o.resolutions.sort(function(t,e){return e-t}),o.TMS.nativeResolutions=o.resolutions,e.tileMatrixSets[o.identifier]=o.TMS}else e&&!e.wmtsOptions&&(e.wmtsOptions={}),e.wmtsOptions.tileMatrixSetLink=m(t)},TileMatrix:function(t,e){if(e){var o=new d;if(g(t,o),e.TMS&&e.TMS.getProjection()){var i=e.TMS.getProjection();if("EPSG:3857"===i||"EPSG:2154"===i){var n=28e-5*o.scaleDenominator;e.resolutions&&Array.isArray(e.resolutions)&&e.resolutions.push(n)}}e.TMS&&e.TMS.tileMatrices&&(e.TMS.tileMatrices[o.matrixId]=o)}},ScaleDenominator:function(t,e){var o=m(t);o&&e&&e.hasOwnProperty("scaleDenominator")&&(e.scaleDenominator=parseFloat(o))},TopLeftCorner:function(t,e){var o=m(t).split(" ");o&&e&&(e.topLeftCorner={},e.topLeftCorner.x=parseFloat(o[0]),e.topLeftCorner.y=parseFloat(o[1]))},TileWidth:function(t,e){var o=m(t);o&&e&&e.hasOwnProperty("tileWidth")&&(e.tileWidth=parseInt(o,10))},TileHeight:function(t,e){var o=m(t);o&&e&&e.hasOwnProperty("tileHeight")&&(e.tileHeight=parseInt(o,10))},MatrixWidth:function(t,e){var o=m(t);o&&e&&e.hasOwnProperty("matrixWidth")&&(e.matrixWidth=parseInt(o,10))},MatrixHeight:function(t,e){var o=m(t);o&&e&&e.hasOwnProperty("matrixHeight")&&(e.matrixHeight=parseInt(o,10))}},serviceException:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"exception"===o.nodeName&&(e.exceptionReport=_.READERS.exception(o));return e},exception:function(t){var e={},o=t.getAttribute("code");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},_.read=function(t){if("ViewContext"===t.nodeName){var e=t.prefix||_.DEFAULTPREFIX;return _.READERS[e][t.nodeName](t)}if("serviceException"===t.nodeName){return _.READERS[t.nodeName](t)}throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},_}(0,C,M,x,I,R,T,L,G,O,N,k,D,j,F),B=function(t,e,o,i,n){return{build:function(t){var r=null;if(!t.response)return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)r=t.response;else{try{var s=new i({reader:n});"string"==typeof t.response?s.setXMLString(t.response):s.setXMLDoc(t.response),r=s.parse()}catch(i){var a=i.message;return"string"==typeof t.response?a+="\n(raw response service'"+t.response+"')":a+="\n(raw response service'"+t.response.documentElement.innerHTML+"')",void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",a),status:200,type:e.TYPE_SRVERR}))}var l=!0;for(var p in r)r.hasOwnProperty(p)&&(l=!1);if(l)return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_EMPTY_2")));if(r.exceptionReport)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",r.exceptionReport),type:e.TYPE_SRVERR,status:200}))}var h="undefined"!=typeof window?window:{};h.Gp||(h.Gp={}),h.Gp.Config?this.mergeConfig(h.Gp.Config,r,t.layerId):h.Gp.Config=r,t.onSuccess.call(t.scope,h.Gp.Config)},mergeConfig:function(t,e,o){if(e&&t){for(var i in e)if(e.hasOwnProperty(i))if("generalOptions"==i)for(var n in e[i].apiKeys)e[i].apiKeys.hasOwnProperty(n)&&!t.generalOptions.apiKeys[n]&&(t.generalOptions.apiKeys[n]=e[i].apiKeys[n]);else if(t[i])for(var r in e[i])e[i].hasOwnProperty(r)&&!t[i][r]&&(t[i][r]=e[i][r]);if(o){var s=[];for(var a in e.layers)e.layers.hasOwnProperty(a)&&s.push(a);t.layers[o]&&(t.layers[o].aggregatedLayers=s)}}}}}(0,l,a,b,U),V=function(t,e,o,i,n,r,s){function a(t){if(!(this instanceof a))throw new TypeError(e.getMessage("CLASS_CONSTRUCTOR","AutoConf"));if(this.CLASSNAME="AutoConf",t||(t={}),t.protocol=t.protocol||"JSONP",r.apply(this,arguments),!this.options.serverUrl&&!this.options.serverUrl){var o=n.AutoConf.url(this.options.apiKey);this.options.layerId?this.options.serverUrl=o.aggregate+this.options.layerId:Array.isArray(this.options.apiKey)&&this.options.apiKey.length>0?this.options.serverUrl=o.apiKeys:this.options.serverUrl=o.apiKey}"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"xml"}return a.prototype=Object.create(r.prototype,{}),a.prototype.constructor=a,a.prototype.buildRequest=function(t,e){var o="undefined"!=typeof window?window:{};if(o.Gp&&o.Gp.Config&&o.Gp.Config.generalOptions&&o.Gp.Config.layers&&o.Gp.Config.generalOptions.apiKeys[this.options.apiKey]){if(!this.options.layerId)return void this.options.onSuccess.call(this,o.Gp.Config);if(o.Gp.Config.layers[this.options.layerId]&&o.Gp.Config.layers[this.options.layerId].aggregatedLayers)return void this.options.onSuccess.call(this,o.Gp.Config)}this.request="";var n;n=-1===this.options.serverUrl.indexOf("http://"),!n&&this.layerId&&(this.request=i.normalyzeParameters({layerId:this.layerId})),e.call(this,this.request)},a.prototype.analyzeResponse=function(t,i){if(this.response){var n={layerId:this.options.layerId,response:this.response,rawResponse:this.options.rawResponse,onSuccess:i,onError:t,scope:this};s.build(n)}else t.call(this,new o(e.getMessage("SERVICE_RESPONSE_EMPTY")))},a}(0,a,l,n,c,u,B),W=function(t){function e(t){if(!(this instanceof e))throw new TypeError("RequestHeader constructor cannot be called as a function.");this.options=t||{srsName:"EPSG:4326"};for(var o in t)t.hasOwnProperty(o)&&(this.options[o]=t[o])}return e.prototype={requestString:null,template:'<RequestHeader srsName="__SRSNAME__"/>',constructor:e,toString:function(){var t=null;return t=this.template,t=t.replace(/__SRSNAME__/g,this.options.srsName),this.requestString=t,this.requestString}},e}(),z=function(t){function e(t){if(!(this instanceof e))throw new TypeError("Request constructor cannot be called as a function.");this.options=t||{maximumResponses:25,methodName:null,version:"1.2"};for(var o in t)t.hasOwnProperty(o)&&(this.options[o]=t[o])}return e.prototype={requestString:null,template:'<Request maximumResponses="__MAXRESPONSES__" methodName="__METHODNAME__" requestID="__UUID__" version="__VERSION__">\x3c!-- __REQUESTSERVICE__ --\x3e</Request>',constructor:e,guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},toString:function(){var t=null;return t=this.template,t=t.replace(/__MAXRESPONSES__/g,this.options.maximumResponses),t=t.replace(/__METHODNAME__/g,this.options.methodName),t=t.replace(/__UUID__/g,this.guid()),t=t.replace(/__VERSION__/g,this.options.version),this.requestString=t,this.requestString}},e}(),H=function(t){function e(t){if(!(this instanceof e))throw new TypeError("AbstractService constructor cannot be called as a function.");this.options=t||{};for(var o in t)t.hasOwnProperty(o)&&(this.options[o]=t[o])}return e.prototype={strRequest:null,oRequest:null,oFilter:null,constructor:e,addRequest:function(t){},addFilter:function(t){},toString:function(){}},e}(),q=function(t,e,o,i){function n(t){if(!(this instanceof n))throw new TypeError("XLS constructor cannot be called as a function.");this.options={srsName:"EPSG:4326",maximumResponses:25};for(var e in t)t.hasOwnProperty(e)&&t[e]&&(this.options[e]=t[e])}return n.VERSION="1.2",n.prototype={requestString:null,namespace:!1,oService:null,constructor:n,template:'<?xml version="1.0" encoding="UTF-8"?>\n<XLS version="__VERSION__"\n__NAMESPACE__ \n__SCHEMALOCATION__>\n__REQUESTHEADER__\n__REQUEST__\n</XLS>\n',namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns:xls="http://www.opengis.net/xls"','xmlns:gml="http://www.opengis.net/gml"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"'},setService:function(t){t&&t instanceof i&&(this.oService=t)},getService:function(){return this.oService}},n.prototype.addNamespace=function(t,e){for(var o=t.key,i=!1,n=this.namespaceByDefault().split(" "),r=0;r<n.length;r++){if(n[r].split("=")[0]==="xmlns:"+o){i=!0;break}}if(!i)return e;var s,a;return s=/<(\w+[\s>])/g,a="<"+o+":$1",e=e.replace(s,a),s=/<\/(\w+[\s>])/g,a="</"+o+":$1",e=e.replace(s,a)},n.prototype.build=function(){var t=!!this.getService(),i="";i=this.template,i=i.replace(/__VERSION__/g,n.VERSION),i=i.replace(/__NAMESPACE__/g,this.namespaceByDefault),i=i.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault);var r=new e({srsName:this.options.srsName});i=i.replace(/__REQUESTHEADER__/g,r.toString());var s=new o({maximumResponses:this.options.maximumResponses,version:n.VERSION,methodName:t?this.getService().CLASSTYPE:null});if(i=i.replace(/__REQUEST__/g,s.toString()),t&&(i=i.replace(/<!-- __REQUESTSERVICE__ -->/g,this.getService().toString())),i)return this.namespace&&(i=this.addNamespace({key:"xls",url:"http://www.opengis.net/xls"},i)),this.requestString=i,this.requestString},n}(0,W,z,H),Y=function(t,e){function o(t){if(!(this instanceof o))throw new TypeError("Address constructor cannot be called as a function.");if(this.options=t||{location:{},type:["StreetAddress"],filter:{}},!t.location)throw new Error("l'option 'location' n'est pas renseignée !");for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}return o.prototype={constructor:o,requestString:null,template:{address:'<Address countryCode="__COUNTRYCODE__">__LOCATION____PLACE____POSTALCODE____ENVELOPE__</Address>',location:{freeFormAddress:"<freeFormAddress>__FREEFORMADDRESSVALUE__</freeFormAddress>",streetAddress:{container:"<StreetAddress>__STREET____BUILDING__</StreetAddress>",building:'<Building number="__BUILDINGVALUE__"/>',street:"<Street>__STREETVALUE__</Street>"}},place:'<Place type="__PLACETYPE__">__PLACEVALUE__</Place>',postalCode:"<PostalCode>__POSTALCODEVALUE__</PostalCode>",envelope:"<gml:Envelope><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>"}},o.prototype.toString=function(){var t=null;if(t=this.template.address,t=t.replace(/__COUNTRYCODE__/g,this.options.type),"string"==typeof this.options.location){var e=this.template.location.freeFormAddress;e=e.replace(/__FREEFORMADDRESSVALUE__/g,this.options.location),t=t.replace(/__LOCATION__/g,e)}else{var o="",i="";this.options.location.number&&(o=this.template.location.streetAddress.building,o=o.replace(/__BUILDINGVALUE__/g,this.options.location.number)),this.options.location.street&&(i=this.template.location.streetAddress.street,i=i.replace(/__STREETVALUE__/g,this.options.location.street));var n=this.template.location.streetAddress.container;n=n.replace(/__STREET__/g,i),n=n.replace(/__BUILDING__/g,o),t=t.replace(/__LOCATION__/g,n)}var r="";this.options.location.postalCode&&(r=this.template.postalCode,r=r.replace(/__POSTALCODEVALUE__/g,this.options.location.postalCode));var s="";if(this.options.filter){var a=this.options.filter.bbox;a&&(s=this.template.envelope,s=s.replace(/__LEFT__/g,a.left),s=s.replace(/__BOTTOM__/g,a.bottom),s=s.replace(/__RIGHT__/g,a.right),s=s.replace(/__TOP__/g,a.top))}var l=[],p="";if(this.options.filter){var h=this.options.filter;for(var c in h)"bbox"!==c&&(p=this.template.place,p=p.replace(/__PLACETYPE__/g,c),p=p.replace(/__PLACEVALUE__/g,h[c]),l.push(p))}var u="";return this.options.location.city&&(u=this.template.place,u=u.replace(/__PLACETYPE__/g,"Municipality"),u=u.replace(/__PLACEVALUE__/g,this.options.location.city),l.push(u)),t=t.replace(/__POSTALCODE__/g,r),t=t.replace(/__PLACE__/g,l.join("\n")),t=t.replace(/__ENVELOPE__/g,s),this.requestString=t,this.requestString},o}(),K=function(t){function e(){if(!(this instanceof e))throw new TypeError("GeocodeFilterExtension constructor cannot be called as a function.");this.filters=[]}return e.prototype={constructor:e,addFilterExtensions:function(t){t&&this.filters.push(t)},getNames:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].CLASSNAME);return t},getFilter:function(t){var e=null;for(var o in this.filters)this.filters[o].CLASSNAME==t&&(e=this.filters[o]);return e},getFilters:function(){return this.filters},getAttributs:function(t){var e=[];for(var o in this.filters)this.filters[o].CLASSNAME==t&&(e=this.filters[o].attributesList);return e},setPlaceAttributs:function(t,e){var o=this.getFilter(t),i=this.getAttributs(t);for(var n in i){var r=i[n];e[r]&&(o.placeAttributes[r]=e[r])}},getPlaceAttributs:function(t){var e={};for(var o in this.filters)this.filters[o].CLASSNAME==t&&(e=this.filters[o].placeAttributes);return e}},e}(),X=function(t,e,o){function i(t){if(!(this instanceof i))throw new TypeError("GeocodeRequest constructor cannot be called as a function.");this.options=t||{};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="GeocodeRequest"}return i.prototype={strRequest:null,oAddress:null,oFilter:null,template:'<GeocodeRequest returnFreeForm="__RETURNFREEFORM__">__ADDRESS__</GeocodeRequest>',addAddress:function(t){t instanceof e&&(this.oAddress=t)},addFilter:function(t){
t instanceof o&&(this.oFilter=t)},constructor:i,toString:function(){var t="";if(t=this.template,!this.oAddress){var o={};if(o.location=this.options.location,o.type=this.options.filterOptions.type||["StreetAddress"],o.filter=this.options.filterOptions,delete o.filter.type,this.oFilter){o.filter={};for(var i in o.type){var n=o.type[i],r=this.oFilter.getFilter(n);if(r){for(var s=this.options.filterOptions,a=r.attributesList,l=0;l<a.length;l++){var p=a[l];if(s[p]){var h=r.serviceAttributes[l];r.placeAttributes[h]=s[p]}}var c=r.placeAttributes;for(var u in c)c.hasOwnProperty(u)&&(o.filter[u]=c[u])}}}if(this.oAddress=new e(o),!this.oAddress)throw new Error("La construction de l'adresse n'est pas correctement definie !?")}return t=t.replace(/__ADDRESS__/g,this.oAddress.toString()),t=t.replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=t,this.strRequest}},i}(0,Y,K),Z=function(t){function e(t){if(!(this instanceof e))throw new TypeError("Position constructor cannot be called as a function.");if(this.options=t||{},!t.position)throw new Error("l'option 'position' n'est pas renseignée !");for(var o in t)t.hasOwnProperty(o)&&(this.options[o]=t[o])}return e.prototype={constructor:e,requestString:null,template:{position:"<Position>__GMLPOINT____GMLFILTER__</Position>",gml:{point:'<gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point>',pos:null,filter:{bbox:'<gml:Envelope xmlns:gml="http://www.opengis.net/gml"><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>',circle:'<gml:CircleByCenterPoint xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos><gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>',polygon:'<gml:Polygon xmlns:gml="http://www.opengis.net/gml"><gml:exterior><gml:LinearRing><gml:posList>__XY__</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>',multipolygon:null}}}},e.prototype.toString=function(){var t=this.template.position,e=this.template.gml.point;e=e.replace(/__X__/g,this.options.position.x),e=e.replace(/__Y__/g,this.options.position.y);var o="";if(this.options.filter){var i=this.options.filter;for(var n in i)switch(n){case"circle":o=this.template.gml.filter[n],o=o.replace(/__X__/g,i[n].x),o=o.replace(/__Y__/g,i[n].y),o=o.replace(/__RADIUS__/g,i[n].radius);break;case"bbox":o=this.template.gml.filter[n],o=o.replace(/__LEFT__/g,i[n].left),o=o.replace(/__BOTTOM__/g,i[n].bottom),o=o.replace(/__RIGHT__/g,i[n].right),o=o.replace(/__TOP__/g,i[n].top);break;case"polygon":o=this.template.gml.filter[n];for(var r="",s=i[n],a=0;a<s.length;a++){var l=s[a];if(Array.isArray(l))break;(l.x&&l.y||0===l.x||0===l.y)&&(r+=l.x+" "+l.y),s.length!==a+1&&(r+=" ")}o=o.replace(/__XY__/g,r)}}return t=t.replace(/__GMLPOINT__/g,e),t=t.replace(/__GMLFILTER__/g,o),this.requestString=t,this.requestString},e}(),J=function(t){function e(t){if(!(this instanceof e))throw new TypeError("Preference constructor cannot be called as a function.");this.type=t}return e.prototype={constructor:e,requestString:null,template:"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>"},e.prototype.toString=function(){for(var t=[],e="",o=0;o<this.type.length;o++)e=this.template,e=e.replace(/__TYPE__/g,this.type[o]),t.push(e);return this.strRequest=t.join("\n"),this.strRequest},e}(),Q=function(t,e,o){function i(t){if(!(this instanceof i))throw new TypeError("ReverseGeocodeRequest constructor cannot be called as a function.");this.options=t||{};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="ReverseGeocodeRequest"}return i.prototype={strRequest:null,oPosition:null,oPreference:null,constructor:i,template:'<ReverseGeocodeRequest returnFreeForm="__RETURNFREEFORM__">__POSITION____PREFERENCE__</ReverseGeocodeRequest>',addPosition:function(t){t instanceof e&&(this.oPosition=t)},addPreferences:function(t){t instanceof o&&(this.oPreference=t)},toString:function(){var t="";if(t=this.template,!this.oPreference&&(this.oPreference=new o(this.options.filterOptions.type||["StreetAddress"]),!this.oPreference))throw new Error("Les preferences ne sont pas definies !?");if(t=t.replace(/__PREFERENCE__/g,this.oPreference.toString()),!this.oPosition){var i={position:this.options.position,filter:{}};if(this.options.filterOptions&&(i.filter=this.options.filterOptions,delete i.filter.type),this.oPosition=new e(i),!this.oPosition)throw new Error("La position et ses filtres ne sont pas definis !?")}return t=t.replace(/__POSITION__/g,this.oPosition.toString()),t=t.replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=t,this.strRequest}},i}(0,Z,J),$=function(t,e,o,i,n){function r(t){if(!(this instanceof r))throw new TypeError("LocationUtilityService constructor cannot be called as a function.");this.CLASSNAME="LocationUtilityService",this.CLASSTYPE=null,e.apply(this,arguments),this.options&&(this.CLASSTYPE=this.options.location?"GeocodeRequest":this.options.position?"ReverseGeocodeRequest":null)}return r.prototype=Object.create(e.prototype,{}),r.prototype.constructor=r,r.prototype.addRequest=function(t){switch(this.CLASSTYPE=t.CLASSNAME,this.CLASSTYPE){case"GeocodeRequest":case"ReverseGeocodeRequest":this.oRequest=t;break;default:throw new Error("Ce n'est pas un objet de type 'LUS Request' !?")}},r.prototype.addFilter=function(t){t instanceof n&&(this.oFilter=t)},r.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseignées, impossible de construire la requête !");if("GeocodeRequest"===this.CLASSTYPE){var t={location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new o(t),this.oFilter&&this.oRequest.addFilter(this.oFilter)}else if("ReverseGeocodeRequest"===this.CLASSTYPE){var e={position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new i(e)}}if(!this.oRequest)throw new Error("Type de Geocodage indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest},r}(0,H,X,Q,K),tt=function(){function t(){if(!(this instanceof t))throw new TypeError("GeocodeLocation constructor cannot be called as a function.");this.placeAttributes={},this.attributesList=[],this.serviceAttributes=[]}return t.prototype={constructor:t},t}(),et=function(t){function e(){if(!(this instanceof e))throw new TypeError("StreetAddress constructor cannot be called as a function.");t.apply(this,arguments),this.CLASSNAME="StreetAddress",this.attributesList=["bbox","ID","IDTR","quality","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","ID","IDTR","Qualite","Territoire","Commune","Departement","INSEE","Municipality"]}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}(tt),ot=function(t){function e(){if(!(this instanceof e))throw new TypeError("PositionOfInterest constructor cannot be called as a function.");t.apply(this,arguments),this.CLASSNAME="PositionOfInterest",this.attributesList=["bbox","importance","nature","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","Importance","Nature","Territoire","Commune","Departement","INSEE","Municipality"]}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}(tt),it=function(t){function e(){if(!(this instanceof e))throw new TypeError("CadastralParcel constructor cannot be called as a function.");t.apply(this,arguments),this.CLASSNAME="CadastralParcel",this.attributesList=["absorbedCity","sheet","number","section","commune","department","insee","municipality","origin"],this.serviceAttributes=["CommuneAbsorbee","Feuille","Numero","Section","Commune","Departement","INSEE","Municipality","Type"]}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}(tt),nt=function(t){function e(){if(!(this instanceof e))throw new TypeError("Administratif constructor cannot be called as a function.");t.apply(this,arguments),this.CLASSNAME="Administratif",this.attributesList=["bbox","prefecture","inseeRegion","inseeDepartment","municipality"],this.serviceAttributes=["bbox","Prefecture","InseeRegion","InseeDepartement","Municipality"]}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}(tt),rt=function(t,e,o,i,n,r,s,a){return{build:function(t){var l=null,p=new i;p.addFilterExtensions(new a),p.addFilterExtensions(new n),p.addFilterExtensions(new r),p.addFilterExtensions(new s);var h=new o({location:t.location,returnFreeForm:t.returnFreeForm,filterOptions:t.filterOptions});h.addFilter(p);var c=new e({srsName:t.srs,maximumResponses:t.maximumResponses});if(c.namespace=!0,c.setService(h),l=c.build(),"GET"==t.httpMethod){l="qxml="+encodeURIComponent(l).replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E").replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}return l}}}(0,q,$,K,et,ot,it,nt),st=function(){function t(){if(!(this instanceof t))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}return t.prototype={constructor:t},t}(),at=function(){function t(){if(!(this instanceof t))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position={x:null,y:null},this.matchType=null,this.placeAttributes={},this.type=null}return t.prototype={constructor:t},t}(),lt=function(t){function e(){if(!(this instanceof e))throw new TypeError("DirectGeocodedLocation constructor cannot be called as a function.");t.apply(this,arguments),this.CLASSNAME="DirectGeocodedLocation",this.accuracy=null}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}(at),pt=function(t,e,o,i,n){function r(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}function s(t,e){if(t.hasChildNodes())for(var o,i,n,r=t.childNodes,a=0;a<r.length;a++)if(o=r[a],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,n=o.prefix||p.DEFAULTPREFIX,p.READERS[n][i]){var l=p.READERS[n][i];l(o,e)}else s(o,e)}function a(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild,3===e.nodeType&&(o=e.nodeValue)),o}function l(t){if(t.attributes.length>0){var e=r(t);for(var o in e)if(e.hasOwnProperty(o)){if("version"===o&&e.version!==p.VERSION)return void console.log("[DirectGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(e[o]!==p.NAMESPACES[p.DEFAULTPREFIX])return void console.log("[DirectGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var i=o.split(":")[0],n=o.split(":")[1];if("xmlns"===i&&n&&p.NAMESPACES[n]&&p.NAMESPACES[n]!==e[o])return void console.log("[DirectGeocodeResponseReader] geocode response "+o+" namespace is not the expected one");if("schemaLocation"===n&&p.SCHEMALOCATION!==e[o])return void console.log("[DirectGeocodeResponseReader] geocode response schema location is not the expected one")}}}var p={};return p.VERSION="1.2",p.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},p.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",p.DEFAULTPREFIX="xls",p.READERS={xls:{XLS:function(t){var e=new i;return l(t),s(t,e),e},GeocodedAddress:function(t,e){var o=new n;s(t,o),e&&Array.isArray(e.locations)&&e.locations.push(o)},GeocodeMatchCode:function(t,e){var o=t.getAttribute("accuracy");o&&e&&(e.accuracy=parseFloat(o));var i=t.getAttribute("matchType");i&&e&&(e.matchType=i)},Address:function(t,e){var o=t.getAttribute("countryCode");e&&o&&(e.type=o),s(t,e)},freeFormAddress:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.freeform=a(t))},Building:function(t,e){var o=t.getAttribute("number");e&&e.hasOwnProperty("placeAttributes")&&(o?e.placeAttributes.number=o:t.getAttribute("buildingName")?e.placeAttributes.number=t.getAttribute("buildingName"):t.getAttribute("subdivision")&&(e.placeAttributes.number=t.getAttribute("subdivision")))},Street:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&("StreetAddress"===e.type?e.placeAttributes.street=a(t):"CadastralParcel"===e.type&&(e.placeAttributes.cadastralParcel=a(t)))},Place:function(t,e){var o=t.getAttribute("type"),i=a(t);if(e&&e.hasOwnProperty("placeAttributes"))if("Municipality"===o)e.placeAttributes.municipality=i;else if("Bbox"===o){var n=i.split(";");4===n.length&&(e.placeAttributes.bbox={left:parseFloat(n[0]),right:parseFloat(n[2]),top:parseFloat(n[1]),bottom:parseFloat(n[3])})}else"Commune"===o?e.placeAttributes.commune=i:"Departement"===o?e.placeAttributes.department=i:"INSEE"===o?e.placeAttributes.insee=i:"Qualite"===o?e.placeAttributes.quality=i:"Territoire"===o?e.placeAttributes.territory=i:"ID"===o?e.placeAttributes.ID=i:"ID_TR"===o?e.placeAttributes.IDTR=i:"Importance"===o?e.placeAttributes.importance=parseInt(i,10):"Nature"===o?e.placeAttributes.nature=i:"Numero"===o?e.placeAttributes.number=i:"Feuille"===o?e.placeAttributes.sheet=i:"Section"===o?e.placeAttributes.section=i:"CommuneAbsorbee"===o?e.placeAttributes.absorbedCity=i:"Arrondissement"===o?i&&(e.placeAttributes.arrondissement=i):"Type"===o?e.placeAttributes.origin=i:"Prefecture"===o?e.placeAttributes.prefecture=i:"InseeRegion"===o?e.placeAttributes.inseeRegion=i:"InseeDepartment"===o&&(e.placeAttributes.inseeDepartment=i)},PostalCode:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.postalCode=a(t))},Error:function(t){var i=t.getAttribute("message"),n=t.getAttribute("errorCode"),r=e.getMessage("SERVICE_RESPONSE_EXCEPTION","("+n+") : "+i);throw new o({message:r,type:o.TYPE_SRVERR})}},gml:{pos:function(t,e){var o=a(t);e&&o&&(e.position={x:parseFloat(o.split(" ")[0]),y:parseFloat(o.split(" ")[1])})}},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"Exception"===o.nodeName&&(e.exceptionReport=p.READERS.Exception(o));return e},Exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},p.read=function(t){if("XLS"===t.nodeName){var i=t.prefix;i||(i=p.DEFAULTPREFIX);return p.READERS[i][t.nodeName](t)}if("ExceptionReport"===t.nodeName){return p.READERS[t.nodeName](t)}var n=e.getMessage("SERVICE_RESPONSE_ANALYSE",t.nodeName);throw new o({message:n,type:o.TYPE_UNKERR,status:200})},p}(0,a,l,st,lt),ht=function(t,e,o,i,n){return{build:function(t){var r=null;if(!t.response)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EMPTY"),type:e.TYPE_SRVERR,status:-1}));if(t.rawResponse)r=t.response;else{try{var s=new i({reader:n});if("string"==typeof t.response?s.setXMLString(t.response):s.setXMLDoc(t.response),!(r=s.parse()))throw new Error("L'analyse de la réponse du service !?")}catch(i){var a=i.message;return"string"==typeof t.response?a+="('"+t.response+"')":a+="('"+t.response.documentElement.innerHTML+"')",void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_ANALYSE",a),type:e.TYPE_UNKERR,status:-1}))}if(r.exceptionReport)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",r.exceptionReport),type:e.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,r)}}}(0,l,a,b,pt),ct=function(t,e,o,i,n,r){function s(t){if(!(this instanceof s))throw new TypeError(e.getMessage("CLASS_CONSTRUCTOR","Geocode"));if(this.CLASSNAME="Geocode",i.apply(this,arguments),!t.location)throw new Error(e.getMessage("PARAM_MISSING","location"));if("object"==typeof t.location&&0===Object.keys(t.location).length)throw new Error(e.getMessage("PARAM_EMPTY","location"));if("string"==typeof t.location&&0===t.location.length)throw new Error(e.getMessage("PARAM_EMPTY","location"));this.options.location=t.location,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var o=Object.keys(t.filterOptions),n=0;n<o.length;n++){var r=o[n];-1!==["department","number","postalCode","insee","importance","ID","IDTR","absorbedCity","sheet","section","inseeRegion","inseeDepartment"].indexOf(r)&&"string"!=typeof t.filterOptions[r]&&(t.filterOptions[r]=t.filterOptions[r].toString()),t.filterOptions[r]||delete this.options.filterOptions[r]}this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],this.options.maximumResponses=t.maximumResponses||25,this.options.returnFreeForm=t.returnFreeForm||!1,this.options.srs=t.srs||"EPSG:4326",this.options.outputFormat=this.options.rawResponse?"":"xml"}return s.prototype=Object.create(i.prototype,{}),s.prototype.constructor=s,s.prototype.buildRequest=function(t,i){var r={httpMethod:this.options.httpMethod,location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:this.options.srs,maximumResponses:this.options.maximumResponses};this.request=n.build(r),this.request?i.call(this,this.request):t.call(this,new o(e.getMessage("SERVICE_REQUEST_BUILD")))},s.prototype.analyzeResponse=function(t,i){if(this.response){var n={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:i,scope:this};r.build(n)}else t.call(this,new o(e.getMessage("SERVICE_RESPONSE_EMPTY")))},s}(0,a,l,u,rt,ht),ut=function(t,e,o){return{build:function(t){var i=t||{},n=null,r=new o({position:i.position,returnFreeForm:i.returnFreeForm,filterOptions:i.filterOptions}),s=new e({srsName:i.srs,maximumResponses:i.maximumResponses});if(s.namespace=!0,s.setService(r),n=s.build(),"GET"==i.httpMethod){n="qxml="+encodeURIComponent(n).replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E").replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}return n}}}(0,q,$),dt=function(t){function e(){if(!(this instanceof e))throw new TypeError("ReverseGeocodedLocation constructor cannot be called as a function.");t.apply(this,arguments),this.CLASSNAME="ReverseGeocodedLocation",this.searchCenterDistance=null}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}(at),ft=function(t,e,o,i,n){function r(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}function s(t,e){if(t.hasChildNodes())for(var o,i,n,r=t.childNodes,a=0;a<r.length;a++)if(o=r[a],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,n=o.prefix||p.DEFAULTPREFIX,p.READERS[n][i]){var l=p.READERS[n][i];l(o,e)}else s(o,e)}function a(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild,3===e.nodeType&&(o=e.nodeValue)),o}function l(t){if(t.attributes.length>0){var e=r(t);for(var o in e)if(e.hasOwnProperty(o)){if("version"===o&&e.version!==p.VERSION)return void console.log("[ReverseGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(e[o]!==p.NAMESPACES[p.DEFAULTPREFIX])return void console.log("[ReverseGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var i=o.split(":")[0],n=o.split(":")[1];if("xmlns"===i&&n&&p.NAMESPACES[n]&&p.NAMESPACES[n]!==e[o])return void console.log("[ReverseGeocodeResponseReader] geocode response "+o+" namespace is not the expected one");if("schemaLocation"===n&&p.SCHEMALOCATION!==e[o])return void console.log("[ReverseGeocodeResponseReader] geocode response schema location is not the expected one")}}}var p={};return p.VERSION="1.2",p.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},p.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",p.DEFAULTPREFIX="xls",p.READERS={xls:{XLS:function(t){var e=new i;return l(t),s(t,e),e},ReverseGeocodedLocation:function(t,e){var o=new n;s(t,o),e&&Array.isArray(e.locations)&&e.locations.push(o)},Address:function(t,e){var o=t.getAttribute("countryCode");e&&o&&(e.type=o),s(t,e)},Building:function(t,e){var o=t.getAttribute("number");e&&e.hasOwnProperty("placeAttributes")&&(o?e.placeAttributes.number=o:t.getAttribute("buildingName")?e.placeAttributes.number=t.getAttribute("buildingName"):t.getAttribute("subdivision")&&(e.placeAttributes.number=t.getAttribute("subdivision")))},Street:function(t,e){"StreetAddress"===e.type?e.placeAttributes.street=a(t):"CadastralParcel"===e.type&&(e.placeAttributes.cadastralParcel=a(t))},Place:function(t,e){var o=t.getAttribute("type"),i=a(t);if(e&&e.hasOwnProperty("placeAttributes"))if("Municipality"===o)e.placeAttributes.municipality=i;else if("Bbox"===o){var n=i.split(";");4===n.length&&(e.placeAttributes.bbox={left:parseFloat(n[0]),right:parseFloat(n[2]),top:parseFloat(n[1]),bottom:parseFloat(n[3])})}else"Commune"===o?e.placeAttributes.commune=i:"Departement"===o?e.placeAttributes.department=i:"INSEE"===o?e.placeAttributes.insee=i:"Qualite"===o?e.placeAttributes.quality=i:"Territoire"===o?e.placeAttributes.territory=i:"ID"===o?e.placeAttributes.ID=i:"ID_TR"===o?e.placeAttributes.IDTR=i:"Importance"===o?e.placeAttributes.importance=parseInt(i,10):"Nature"===o?e.placeAttributes.nature=i:"Numero"===o?e.placeAttributes.number=i:"Feuille"===o?e.placeAttributes.sheet=i:"Section"===o?e.placeAttributes.section=i:"CommuneAbsorbee"===o?e.placeAttributes.absorbedCity=i:"Arrondissement"===o?i&&(e.placeAttributes.arrondissement=i):"Type"===o?e.placeAttributes.origin=i:"Prefecture"===o?e.placeAttributes.prefecture=i:"InseeRegion"===o?e.placeAttributes.inseeRegion=i:"InseeDepartment"===o&&(e.placeAttributes.inseeDepartment=i)},PostalCode:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.postalCode=a(t))},SearchCentreDistance:function(t,e){e&&(e.searchCenterDistance=parseFloat(t.getAttribute("value")))},Error:function(t){var i=t.getAttribute("message"),n=t.getAttribute("errorCode"),r=e.getMessage("SERVICE_RESPONSE_EXCEPTION","("+n+") : "+i);throw new o({message:r,type:o.TYPE_SRVERR})}},gml:{pos:function(t,e){var o=a(t);e&&o&&(e.position={x:parseFloat(o.split(" ")[0]),y:parseFloat(o.split(" ")[1])})}},xlsext:{ExtendedGeocodeMatchCode:function(t,e){e&&(e.matchType=a(t))}},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"Exception"===o.nodeName&&(e.exceptionReport=p.READERS.Exception(o));return e},Exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},p.read=function(t){if("XLS"===t.nodeName){var e=t.prefix;e||(e=p.DEFAULTPREFIX);return p.READERS[e][t.nodeName](t)}if("ExceptionReport"===t.nodeName){return p.READERS[t.nodeName](t)}throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},p}(0,a,l,st,dt),yt=function(t,e,o,i,n){return{build:function(t){var r=null;if(!t.response)return void t.onError.call(t.scope,new o({message:e.getMessage("SERVICE_RESPONSE_EMPTY"),type:o.TYPE_SRVERR,status:-1}));if(t.rawResponse)r=t.response;else{try{var s=new i({reader:n});if("string"==typeof t.response?s.setXMLString(t.response):s.setXMLDoc(t.response),!(r=s.parse()))throw new Error("L'analyse de la réponse du service !?")}catch(e){return e.status=200,void t.onError.call(t.scope,e)}if(r.exceptionReport)return void t.onError.call(t.scope,new o({message:e.getMessage("SERVICE_RESPONSE_EXCEPTION",r.exceptionReport),type:o.TYPE_SRVERR,status:200}));if(t.scope&&t.scope.options&&t.scope.options.srs&&"EPSG:4326"!==t.scope.options.srs){var a,l;if(r||r.locations||r.locations.length)for(var p=0;p<r.locations.length;p++)(a=r.locations[p])&&(l=a.position)&&(a.position={x:l.y,y:l.x})}}t.onSuccess.call(t.scope,r)}}}(0,a,l,b,ft),gt=function(t,e,o,i,n,r){function s(t){if(!(this instanceof s))throw new TypeError(e.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));if(this.CLASSNAME="ReverseGeocode",i.apply(this,arguments),!t.position)throw new Error(e.getMessage("PARAM_MISSING","position"));if(null==t.position.x)throw new Error(e.getMessage("PARAM_MISSING","position.x"));if(null==t.position.y)throw new Error(e.getMessage("PARAM_MISSING","position.y"));this.options.position=t.position,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var o=Object.keys(t.filterOptions),n=0;n<o.length;n++){var r=o[n];t.filterOptions[r]&&0!==Object.keys(t.filterOptions[r]).length||delete this.options.filterOptions[r]}if(this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],!Array.isArray(this.options.filterOptions.type))throw new Error(e.getMessage("PARAM_TYPE","filterOptions.type"));if(this.options.maximumResponses=t.maximumResponses||25,this.options.returnFreeForm=t.returnFreeForm||!1,this.options.srs=t.srs||"CRS:84",-1===s.geoEPSG.indexOf(this.options.srs)){if(this.options.position={x:this.options.position.y,y:this.options.position.x},this.options.filterOptions&&this.options.filterOptions.circle){var a=this.options.filterOptions.circle;this.options.filterOptions.circle={x:a.y,y:a.x,radius:a.radius}}if(this.options.filterOptions&&this.options.filterOptions.polygon){var l=this.options.filterOptions.polygon;for(n=0;n<l.length;n++){var p=l[n];this.options.filterOptions.polygon[n]={x:p.y,y:p.x}}}}this.options.outputFormat=this.options.rawResponse?"":"xml"}return s.prototype=Object.create(i.prototype,{}),s.prototype.constructor=s,s.prototype.buildRequest=function(t,i){var r={httpMethod:this.options.httpMethod,position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:"EPSG:4326",maximumResponses:this.options.maximumResponses};this.request=n.build(r),this.request?i.call(this,this.request):t.call(this,new o(e.getMessage("SERVICE_REQUEST_BUILD")))},s.prototype.analyzeResponse=function(t,i){if(this.response){var n={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:i,scope:this};r.build(n)}else t.call(this,new o(e.getMessage("SERVICE_RESPONSE_EMPTY")))},s.geoEPSG=["EPSG:4326"],s}(0,a,l,u,ut,yt),mt=function(){function t(){if(!(this instanceof t))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}return t.prototype={constructor:t},t}(),vt=function(){function t(){if(!(this instanceof t))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}return t.prototype={constructor:t},t}(),_t=function(t,e,o,i,n,r){return{build:function(t){var i=null;if(!t.response)return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)i=t.response;else{var s;if(s="string"==typeof t.response?window.JSON.parse(t.response):t.response){if(s.error)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",s.error.description),status:s.error.code,type:e.TYPE_SRVERR}));if(i=new n,!s.results||!Array.isArray(s.results))return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_FORMAT_3")));for(var a,l=0;l<s.results.length;l++){var p=s.results[l];a=new r,a&&(p&&"StreetAddress"===p.country?(a.street=p.street,a.type="StreetAddress"):p&&"PositionOfInterest"===p.country&&(a.poi=p.street,a.kind=p.kind,a.type="PositionOfInterest"),a.position&&(a.position.x=p.x,a.position.y=p.y),a.commune=p.city,a.fullText=p.fulltext,a.postalCode=p.zipcode,a.classification=p.classification),i.suggestedLocations.push(a)}if(!i.suggestedLocations.length)return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_FORMAT_3")))}if(!i)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:e.TYPE_UNKERR,status:-1}));if(i.exceptionReport)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",i.exceptionReport),type:e.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,i)}}}(0,l,a,0,mt,vt),bt=function(t,e,o,i,n,r){function s(e){if(!(this instanceof s))throw new TypeError(i.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));if(this.CLASSNAME="AutoComplete",t.apply(this,arguments),!e.text)throw new Error(i.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.filterOptions&&"object"==typeof e.filterOptions||(this.options.filterOptions=e.filterOptions={territory:[],type:["StreetAddress"]}),0===Object.keys(e.filterOptions).length&&(this.options.filterOptions={territory:[],type:["StreetAddress"]}),this.options.filterOptions.type=e.filterOptions.type||["StreetAddress"],this.options.filterOptions.territory=e.filterOptions.territory||[],this.options.maximumResponses=e.maximumResponses||10,"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}return s.prototype=Object.create(t.prototype,{}),s.prototype.constructor=s,s.prototype.buildRequest=function(t,e){var o="";this.options.filterOptions.territory&&(o=this.options.filterOptions.territory.join(";"));var i="";this.options.filterOptions.type&&(i=this.options.filterOptions.type.join(",")),this.request=r.normalyzeParameters({text:encodeURIComponent(this.options.text),type:i,terr:o,maximumResponses:this.options.maximumResponses}),e.call(this,this.request)},s.prototype.analyzeResponse=function(t,o){if(this.response){var r={response:this.response,rawResponse:this.options.rawResponse,onSuccess:o,onError:t,scope:this};e.build(r)}else t.call(this,new n(i.getMessage("SERVICE_RESPONSE_EMPTY")))},s}(u,_t,0,a,l,n),Et=function(t){function e(t){if(!(this instanceof e))throw new TypeError("RoutePlan constructor cannot be called as a function.");if(this.options=t||{},!t.startPoint)throw new Error("l'option 'startPoint' n'est pas renseignée !");if(!t.endPoint)throw new Error("l'option 'endPoint' n'est pas renseignée !");for(var o in t)t.hasOwnProperty(o)&&(this.options[o]=t[o])}return e.prototype={constructor:e,requestString:null,template:{routePlan:"<RoutePlan>__ROUTEPREFERENCE____GRAPH____WAYPOINTLIST____AVOIDLIST__</RoutePlan>",routePreference:"<RoutePreference>__VALUEROUTEPREFERENCE__</RoutePreference>",graph:'<xlsext:graphName xmlns:xlsext="http://www.opengis.net/xlsext" name="__VALUEGRAPH__"/>',wayPointList:{container:"<WayPointList>__STARTPOINT____VIAPOINT____ENDPOINT__</WayPointList>",point:'<Position><gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point></Position>',startPoint:"<StartPoint>__POINT__</StartPoint>",endPoint:"<EndPoint>__POINT__</EndPoint>",viaPoint:"<ViaPoint>__POINT__</ViaPoint>"},avoidList:{container:"<AvoidList>__AVOIDFEATURE__</AvoidList>",avoidFeature:"<AvoidFeature>__VALUEAVOIDFEATURE__</AvoidFeature>"}},toString:function(){var t="";if(t=this.template.routePlan,this.options.routePreference){var e=this.template.routePreference;e=e.replace(/__VALUEROUTEPREFERENCE__/,this.options.routePreference),t=t.replace(/__ROUTEPREFERENCE__/g,e)}if(t=t.replace(/__ROUTEPREFERENCE__/g,""),this.options.avoidFeature){for(var o=this.template.avoidList.container,i=[],n=0;n<this.options.avoidFeature.length;n++){var r=this.template.avoidList.avoidFeature;r=r.replace(/__VALUEAVOIDFEATURE__/,this.options.avoidFeature[n]),i.push(r)}o=o.replace(/__AVOIDFEATURE__/,i.join("\n")),t=t.replace(/__AVOIDLIST__/g,o)}if(t=t.replace(/__AVOIDLIST__/g,""),this.options.graph){var s=this.template.graph
;s=s.replace(/__VALUEGRAPH__/,this.options.graph),t=t.replace(/__GRAPH__/g,s)}t=t.replace(/__GRAPH__/g,"");var a=this.template.wayPointList.container,l="";if(l=this.template.wayPointList.point,l=l.replace(/__X__/,this.options.startPoint.x),l=l.replace(/__Y__/,this.options.startPoint.y),a=a.replace(/__STARTPOINT__/,this.template.wayPointList.startPoint.replace(/__POINT__/,l)),l=this.template.wayPointList.point,l=l.replace(/__X__/,this.options.endPoint.x),l=l.replace(/__Y__/,this.options.endPoint.y),a=a.replace(/__ENDPOINT__/,this.template.wayPointList.endPoint.replace(/__POINT__/,l)),this.options.viaPoint){for(var p=[],h=0;h<this.options.viaPoint.length;h++){var c=this.options.viaPoint[h];l=this.template.wayPointList.point,l=l.replace(/__X__/,c.x),l=l.replace(/__Y__/,c.y),p.push(l)}a=a.replace(/__VIAPOINT__/,this.template.wayPointList.viaPoint.replace(/__POINT__/,p.join("\n")))}else a=a.replace(/__VIAPOINT__/,"");return t=t.replace(/__WAYPOINTLIST__/g,a),this.requestString=t,this.requestString}},e}(),St=function(t,e){function o(t){if(!(this instanceof o))throw new TypeError("DetermineRouteRequest constructor cannot be called as a function.");this.options=t||{};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="DetermineRouteRequest"}return o.prototype={strRequest:null,oRoutePlan:null,template:{determineRouteRequest:'<DetermineRouteRequest distanceUnit="__DISTANCEUNIT__">__ROUTEPLAN____ROUTEINSTRUCTIONREQUEST____ROUTEGEOMETRYREQUEST____ROUTEMAPREQUEST__</DetermineRouteRequest>',routeInstructionRequest:'<RouteInstructionsRequest provideGeometry="__PROVIDEGEOMETRY__" provideBoundingBox="__PROVIDEBBOX__" />',routeGeometryRequest:"<RouteGeometryRequest />",routeMapRequest:""},addRoute:function(t){t instanceof e&&(this.oRoutePlan=t)},constructor:o,toString:function(){var t="";if(t=this.template.determineRouteRequest,t=t.replace(/__DISTANCEUNIT__/g,this.options.distanceUnit||"KM"),!this.oRoutePlan){var o=this.options.route;if(this.oRoutePlan=new e(o),!this.oRoutePlan)throw new Error("La construction du calcul d'initineraire n'est pas correctement definie !?")}t=t.replace(/__ROUTEPLAN__/g,this.oRoutePlan.toString());var i=this.template.routeInstructionRequest;i=i.replace(/__PROVIDEGEOMETRY__/g,this.options.provideGeometry||!1),i=i.replace(/__PROVIDEBBOX__/g,this.options.provideBoundingBox||!1),t=t.replace(/__ROUTEINSTRUCTIONREQUEST__/g,i);var n=this.template.routeGeometryRequest;t=t.replace(/__ROUTEGEOMETRYREQUEST__/g,n);var r=this.template.routeMapRequest;return t=t.replace(/__ROUTEMAPREQUEST__/g,r),this.strRequest=t,this.strRequest}},o}(0,Et),Pt=void 0,wt=function(t,e,o,i){function n(t){if(!(this instanceof n))throw new TypeError("RouteService constructor cannot be called as a function.");this.CLASSNAME="RouteService",this.CLASSTYPE="RouteRequest",e.apply(this,arguments)}return n.prototype=Object.create(e.prototype,{}),n.prototype.constructor=n,n.prototype.addRequest=function(t){if("DetermineRouteRequest"!==t.CLASSNAME)throw new Error("Ce n'est pas un objet de type 'Route Request' !?");this.oRequest=t},n.prototype.addFilter=function(t){t instanceof i&&(this.oFilter=t)},n.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseignées, impossible de construire la requête !");if("RouteRequest"===this.CLASSTYPE){var t={distanceUnit:this.options.distanceUnit||null,provideGeometry:this.options.provideGeometry||null,provideBoundingBox:this.options.provideBoundingBox||null,route:{routePreference:this.options.routePreference||null,startPoint:this.options.startPoint,viaPoint:this.options.viaPoint||null,endPoint:this.options.endPoint,avoidFeature:this.options.avoidFeature||null,graph:this.options.graph||null,expectedStartTime:this.options.expectedStartTime||null}};this.oRequest=new o(t),this.oFilter&&this.oRequest.addFilter(this.oFilter)}}if(!this.oRequest)throw new Error("Type de requête indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest},n}(0,H,St,Pt),At=function(t,e,o){return{build:function(t){var i=null,n={startPoint:t.startPoint,endPoint:t.endPoint,viaPoint:t.viaPoints,provideBoundingBox:t.provideBbox,avoidFeature:t.exclusions,expectedStartTime:t.expectedStartTime,distanceUnit:t.distanceUnit,graph:t.graph,provideGeometry:t.geometryInInstructions,routePreference:t.routePreference},r=new o(n),s=new e({srsName:t.srs,maximumResponses:t.maximumResponses});if(s.namespace=!0,s.setService(r),i=s.build(),"GET"==t.httpMethod){i="qxml="+encodeURIComponent(i).replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E").replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}return i}}}(0,q,wt),Ct=function(t){function e(t){if(!(this instanceof e))throw new TypeError("RouteParamREST constructor cannot be called as a function.");if(this.options=t||{},this.origin=this.options.startPoint.x+","+this.options.startPoint.y,this.destination=this.options.endPoint.x+","+this.options.endPoint.y,this.waypoints=this.options.viaPoints||null,this.startDateTime=this.options.expectedStartTime||null,this.graphName=this.options.graph,this.srs=this.options.srs,this.exclusions=this.options.exclusions,this.method="TIME",this.options.routePreference){switch(this.options.routePreference){case"fastest":this.method="TIME";break;case"shortest":this.method="DISTANCE";break;default:this.method="TIME"}}this.format=this.options.geometryInInstructions?"STANDARDEXT":"STANDARD",this.tolerance=10,this.profileId=null,this.profileName=null}return e.CLASSNAME="RouteParamREST",e.prototype={constructor:e,getWaypoints:function(){if(this.waypoints){for(var t=[],e=0;e<this.waypoints.length;e++){var o=this.waypoints[e];t.push(o.x+","+o.y)}return t.join(";")}},getExclusions:function(){return this.exclusions.join(";")}},e.prototype.getParams=function(){var t=[];return t.push({k:"origin",v:this.origin}),t.push({k:"destination",v:this.destination}),t.push({k:"method",v:this.method}),this.waypoints&&t.push({k:"waypoints",v:this.getWaypoints()}),this.startDateTime&&t.push({k:"startDateTime",v:this.startDateTime}),this.graphName&&t.push({k:"graphName",v:this.graphName}),this.exclusions&&t.push({k:"exclusions",v:this.getExclusions()}),this.srs&&t.push({k:"srs",v:this.srs}),this.format&&t.push({k:"format",v:this.format}),t},e}(),Mt=function(t,e,o){function i(t){if(!(this instanceof i))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!t)throw new Error(e.getMessage("PARAM_EMPTY","options"));this.settings=t}return i.prototype={requestString:null,constructor:i,processRequestString:function(){for(var t=new o(this.settings),e=t.getParams(),i="",n=0;n<e.length;n++){var r=e[n];i&&(i+="&"),i+=r.k+"="+r.v}return this.requestString=i,this.requestString}},i}(0,a,Ct),xt=function(t,e,o,i){return{build:function(t){var n=null,r=t||{},s=null!==t.onError&&"function"==typeof t.onError,a=null;switch(t.api){case"REST":var l=new i(r);if(!l.processRequestString()){if(a="Error process request (rest) !",s)return void t.onError.call(t.scope,new e(a));throw new Error(a)}n=l.requestString;break;case"OLS":if(!(n=o.build(r))){if(a="Error process request (ols) !",s)return void t.onError.call(t.scope,new e(a));throw new Error(a)}break;default:if(a="Type of API is not supported by service (REST or OLS) !",s)return void t.onError.call(t.scope,new e(a));throw new Error(a)}return n}}}(0,l,At,Mt),It=function(t){return{toJson:function(t,e,o){var i=null;try{if(!t)throw new Error("La chaine WKT n'est pas renseignée !");e||(e=function(t){console.log(t)}),o||(o=function(t){console.log(t)});var n,r;if(n=/(-?\d+\.?[0-9]*)\s(-?\d+\.?[0-9]+)/g,r="[$1,$2]",t=t.replace(n,r),n=/^(\w+)/,n.exec(t),"POLYGON"===RegExp.$1?(r='{"type" : "Polygon",',t=t.replace(RegExp.$1,r),n=/(\({2}?)/,r='"coordinates" : [[',t=t.replace(n,r),n=/(\){2}?)/,r="]]}",t=t.replace(n,r),n=/(\()/g,r="[",t=t.replace(n,r),n=/(\))/g,r="]",t=t.replace(n,r)):"LINESTRING"===RegExp.$1&&(r='{"type" : "LineString",',t=t.replace(RegExp.$1,r),n=/(\(\(?)/,r='"coordinates" : [',t=t.replace(n,r),n=/(\)\)?)/,r="]}",t=t.replace(n,r)),!(i=JSON.parse(t)))throw new Error("Le JSON est vide !");if(!i.type)throw new Error("Le type de geometrie n'est pas connu !");if(!i.coordinates)throw new Error("La liste des points est vide !");e.call(this,i)}catch(t){if("SyntaxError"===t.name)return void o.call(this,"Erreur de parsing JSON !");o.call(this,t)}}}}(),Rt=function(){function t(){if(!(this instanceof t))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}return t.prototype={constructor:t},t}(),Tt=function(){function t(){if(!(this instanceof t))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}return t.prototype={constructor:t},t}(),Lt=function(t,e,o,i,n,r){function s(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild)&&3===e.nodeType&&(o=e.nodeValue),o}function a(t,e){if(t.hasChildNodes())for(var o,i,n=t.childNodes,r=0;r<n.length;r++)if(o=n[r],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,l.READERS[i]){var s=l.READERS[i];s(o,e)}else a(o,e)}var l={};return l.READERS={routeResult:function(t){var e=new n;if(a(t,e),"error"===e.status){var r=o.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new i({message:r,type:i.TYPE_SRVERR})}return e},status:function(t,e){var o=s(t);"ERROR"!==o&&"error"!==o||e&&(e.status="error")},message:function(t,e){e&&(e.message=s(t))},distance:function(t,e){e&&(e.totalDistance=s(t))},durationSeconds:function(t,e){e&&(e.totalTime=parseFloat(s(t)))},bounds:function(t,e){if(e&&e.bbox){var o=s(t).split(/[,;]/);e.bbox.left=parseFloat(o[0]),e.bbox.bottom=parseFloat(o[1]),e.bbox.right=parseFloat(o[2]),e.bbox.top=parseFloat(o[3])}},geometryWkt:function(t,i){if(i){var n=t.innerHTML,r=function(t){i.routeGeometry=t},s=function(){var t=o.getMessage("PARAM_FORMAT",["geometryWkt"]);throw new Error(t)};e.toJson(n,r,s)}},step:function(t,e){var o,i=new r;if(t.hasChildNodes)for(var n,a,l=t.childNodes,p=0;p<l.length;p++)n=l[p],1===n.nodeType&&(a=n.localName||n.baseName||n.nodeName,"durationSeconds"===a?i.duration=s(n):"distance"===a?i.distance=s(n):"navInstruction"===a?i.code=s(n):"name"===a&&(o=s(n)));if(i.code)switch(i.code){case"F":i.instruction="Valeur non renseignée"!=o?"Tout droit "+o:"Continuer tout droit ";break;case"B":i.instruction="Demi-tour "+o;break;case"L":i.instruction="Tourner à gauche "+o;break;case"R":i.instruction="Tourner à droite "+o;break;case"BL":i.instruction="Tourner très à gauche "+o;break;case"BR":i.instruction="Tourner très à droite "+o;break;case"FL":i.instruction="Tourner légèrement à gauche "+o;break;case"FR":i.instruction="Tourner légèrement à droite "+o;break;case"round_about_entry":i.instruction="Entrée rond-point "+o;break;case"round_about_exit":i.instruction="Sortie rond-point "+o;break;case null:i.instruction="Prendre "+o;break;default:i.instruction="?"+i.code+"? "+o}Array.isArray(e.routeInstructions)&&e.routeInstructions.push(i)}},l.read=function(t){if("routeResult"===t.nodeName)return l.READERS.routeResult(t);throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},l}(0,It,a,l,Rt,Tt),Gt=function(t){var e={};return e.READERS={},e.read=function(t){},e}(),Ot=function(t,e,o,i,n,r,s,a,l){return{build:function(t){var p=null;if(!t.response)return void t.onError.call(t.scope,new e(n.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)p=t.response;else{switch(t.outputFormat){case"xml":var h="REST"===t.api?r:s;try{var c=new o({reader:h});if("string"==typeof t.response?c.setXMLString(t.response):c.setXMLDoc(t.response),!(p=c.parse()))throw new e(n.getMessage("SERVICE_RESPONSE_FORMAT","xml"))}catch(o){return void t.onError.call(t.scope,new e(n.getMessage("SERVICE_RESPONSE_ANALYSE",t.response)))}break;case"json":var u;if(u="string"==typeof t.response?window.JSON.parse(t.response):t.response,u.message)return void t.onError.call(t.scope,new e(n.getMessage("SERVICE_RESPONSE_EXCEPTION",u.message)));if(u){var d=[],f=[],y=[];if(p=new a,p.hasOwnProperty("totalTime")&&(p.totalTime=parseFloat(u.durationSeconds)),p.hasOwnProperty("totalDistance")&&(p.totalDistance="m"===t.distanceUnit?u.distanceMeters:u.distance),p.hasOwnProperty("bbox")){var g=u.bounds.split(/[,;]/);p.bbox.left=parseFloat(g[0]),p.bbox.bottom=parseFloat(g[1]),p.bbox.right=parseFloat(g[2]),p.bbox.top=parseFloat(g[3])}var m=function(t){p.routeGeometry=t},v=function(o){console.log(o),t.onError.call(t.scope,new e(n.getMessage("PARAM_FORMAT",["geometryWkt"])))};if(p.hasOwnProperty("routeGeometry")){var _=u.geometryWkt||u.simplifiedWkt;if(_&&(i.toJson(_,m,v),!p.routeGeometry))return}if(p.hasOwnProperty("routeInstructions")){var b,E=u.legs;if(Array.isArray(E)&&E.length)for(b=0;b<E.length;b++)d.push(E[b]);if(Array.isArray(d)&&d.length)for(b=0;b<d.length;b++)f.push(d[b].steps);if(Array.isArray(f)&&f.length)for(b=0;b<f.length;b++)y=y.concat(f[b]);y.forEach(function(e){p.routeInstructions.push(new l),p.routeInstructions[p.routeInstructions.length-1].duration=e.durationSeconds,p.routeInstructions[p.routeInstructions.length-1].distance="m"===t.distanceUnit?e.distanceMeters:e.distance,p.routeInstructions[p.routeInstructions.length-1].code=e.navInstruction;for(var o=[],i=0;i<e.points.length;i++){var n=e.points[i].split(",");n&&o.push(n)}switch(o&&0!==o.length?p.routeInstructions[p.routeInstructions.length-1].geometry={coordinates:o,type:"LineString"}:p.routeInstructions[p.routeInstructions.length-1].geometry=null,"Valeur non renseignée"==e.name&&(e.name=""),e.navInstruction){case"F":e.name?p.routeInstructions[p.routeInstructions.length-1].instruction="Tout droit "+e.name:p.routeInstructions[p.routeInstructions.length-1].instruction="Continuer tout droit ";break;case"B":p.routeInstructions[p.routeInstructions.length-1].instruction="Demi-tour "+e.name;break;case"L":p.routeInstructions[p.routeInstructions.length-1].instruction="Tourner à gauche "+e.name;break;case"R":p.routeInstructions[p.routeInstructions.length-1].instruction="Tourner à droite "+e.name;break;case"BL":p.routeInstructions[p.routeInstructions.length-1].instruction="Tourner très à gauche "+e.name;break;case"BR":p.routeInstructions[p.routeInstructions.length-1].instruction="Tourner très à droite "+e.name;break;case"FL":p.routeInstructions[p.routeInstructions.length-1].instruction="Tourner légèrement à gauche "+e.name;break;case"FR":p.routeInstructions[p.routeInstructions.length-1].instruction="Tourner légèrement à droite "+e.name;break;case"round_about_entry":p.routeInstructions[p.routeInstructions.length-1].instruction="Entrée rond-point "+e.name;break;case"round_about_exit":p.routeInstructions[p.routeInstructions.length-1].instruction="Sortie rond-point "+e.name;break;case null:p.routeInstructions[p.routeInstructions.length-1].instruction="Prendre tout droit "+e.name;break;default:p.routeInstructions[p.routeInstructions.length-1].instruction="?"+e.navInstruction+"? "+e.name}})}}if(!p)return void t.onError.call(t.scope,new e(n.getMessage("SERVICE_RESPONSE_ANALYSE","json")));break;default:return void t.onError.call(t.scope,new e(n.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(p&&p.exceptionReport)return void t.onError.call(t.scope,new e(n.getMessage("SERVICE_RESPONSE_EXCEPTION_2")))}t.onSuccess.call(t.scope,p)}}}(0,l,b,It,a,Lt,Gt,Rt,Tt),Nt=function(t,e,o,i,n,r,s){function a(t){if(!(this instanceof a))throw new TypeError(e.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",i.apply(this,arguments),!t.startPoint)throw new Error(e.getMessage("PARAM_MISSING","startPoint"));if(null==t.startPoint.x)throw new Error(e.getMessage("PARAM_MISSING","startPoint.x"));if(null==t.startPoint.y)throw new Error(e.getMessage("PARAM_MISSING","startPoint.y"));if(!t.endPoint)throw new Error(e.getMessage("PARAM_MISSING","endPoint"));if(null==t.endPoint.x)throw new Error(e.getMessage("PARAM_MISSING","endPoint.x"));if(null==t.endPoint.y)throw new Error(e.getMessage("PARAM_MISSING","endPoint.y"));if(this.options.api="string"==typeof t.api?t.api.toUpperCase():"REST",this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"json",this.options.startPoint=t.startPoint,this.options.endPoint=t.endPoint,this.options.viaPoints=t.viaPoints||null,this.options.exclusions=t.exclusions||null,this.options.routePreference=t.routePreference||"fastest",this.options.graph=t.graph||"Voiture",this.options.geometryInInstructions=t.geometryInInstructions||!1,this.options.provideBbox=t.provideBbox||!0,this.options.distanceUnit=t.distanceUnit||"km",this.options.expectedStartTime=null,this.options.srs=t.srs||"EPSG:4326",this.options.api="REST","XHR"===this.options.protocol&&(this.options.httpMethod="GET"),!this.options.serverUrl){var o=n.Route.url(this.options.apiKey),r=null;switch(this.options.api){case"OLS":r=o.ols;break;case"REST":r=o["route-"+this.options.outputFormat];break;default:throw new Error(e.getMessage("PARAM_UNKNOWN","api"))}if(!r)throw new Error("Url by default not found !");this.options.serverUrl=r}var s=this.options.serverUrl.lastIndexOf(".");if(-1!==s){var l=this.options.serverUrl.substring(s+1);if(l&&l.length<5)switch(l.toLowerCase()){case"json":case"xml":this.options.outputFormat=l.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}return a.prototype=Object.create(i.prototype,{}),a.prototype.constructor=a,a.prototype.buildRequest=function(t,i){var n={api:this.options.api,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,exclusions:this.options.exclusions,distanceUnit:this.options.distanceUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs};this.request=r.build(n),this.request?i.call(this,this.request):t.call(this,new o(e.getMessage("SERVICE_REQUEST_BUILD")))},a.prototype.analyzeResponse=function(t,i){if(this.response){var n={distanceUnit:this.options.distanceUnit,response:this.response,outputFormat:this.options.outputFormat,api:this.options.api,rawResponse:this.options.rawResponse,onError:t,onSuccess:i,scope:this};s.build(n)}else t.call(this,new o(e.getMessage("SERVICE_RESPONSE_EMPTY")))},a}(0,a,l,u,c,xt,Ot),kt=function(t){function e(t){if(!(this instanceof e))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");switch(this.options=t||{},this.id=this.options.id,this.location=this.options.position,this.srs=this.options.srs,this.graphName=this.options.graph,this.profileId=this.options.profileId||null,this.profileName=this.options.profileName||null,this.exclusions=this.options.exclusions,this.reverse=this.options.reverse,this.smoothing=this.options.smoothing,this.holes=this.options.holes,this.options.method){case"time":this.method="time",this.time=this.options.time;break;case"distance":this.method="distance",this.distance=this.options.distance;break;default:this.method="time"}}return e.CLASSNAME="ProcessIsoCurveParam",e.prototype={constructor:e,getLocation:function(){return this.location.x+","+this.location.y},getExclusions:function(){return this.exclusions.join(";")}},e.prototype.getParams=function(){var t=[];return t.push({k:"location",v:this.getLocation()}),t.push({k:"smoothing",v:this.smoothing}),t.push({k:"holes",v:this.holes}),t.push({k:"reverse",v:this.reverse}),t.push({k:"method",v:this.method}),this.time&&t.push({k:"time",v:this.time}),this.distance&&t.push({k:"distance",v:this.distance}),t.push({k:"graphName",v:this.graphName}),this.exclusions&&t.push({k:"exclusions",v:this.getExclusions()}),this.srs&&t.push({k:"srs",v:this.srs}),t},e}(),Dt=function(t,e,o){function i(t){if(!(this instanceof i))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!t)throw new Error(e.getMessage("PARAM_EMPTY","options"));this.settings=t,this.mode=this.settings.httpMethod||"GET"}return i.prototype={requestString:null,constructor:i,template:{container:'<?xml version="1.0" encoding="UTF-8"?>\n<isochroneRequest>\n__ID__\t<location>\n\t\t<x>__X__</x>\n\t\t<y>__Y__</y>\n\t</location>\n\t<srs>__SRS__</srs>\n\t<graphName>__GRAPHNAME__</graphName>\n__PROFIL____EXCLUSIONS__\t<method>__METHOD__</method>\n__TIME____DISTANCE__\t<reverse>__REVERSE__</reverse>\n\t<smoothing>__SMOOTHING__</smoothing>\n\t<holes>__HOLES__</holes>\n</isochroneRequest>',id:"\t<id>__IDVALUE__</id>\n",profil:"\t<profileId>__PROFILID__</profileId>\n\t<profileName>__PROFILNAME__</profileName>\n",exclusions:{container:"\t<exclusions>\n__EXCLUSIONFEATURE__\n\t</exclusions>\n",feature:"\t\t<exclusion>__EXCLUSIONVALUE__</exclusion>"},time:"\t<time>__TIMEVALUE__</time>\n",distance:"\t<distance>__DISTANCEVALUE__</distance>\n"},processRequestString:function(){var t="",e=0;switch(this.mode){case"GET":var i=new o(this.settings),n=i.getParams();for(e=0;e<n.length;e++){var r=n[e];t&&(t+="&"),t+=r.k+"="+r.v}break;case"POST":if(t=this.template.container,t=t.replace(/__ID__/g,""),t=t.replace(/__PROFIL__/g,""),t=t.replace(/__X__/g,this.settings.position.x),t=t.replace(/__Y__/g,this.settings.position.y),t=t.replace(/__GRAPHNAME__/g,this.settings.graph),t=t.replace(/__SRS__/g,this.settings.srs),t=t.replace(/__SMOOTHING__/g,this.settings.smoothing),t=t.replace(/__HOLES__/g,this.settings.holes),t=t.replace(/__REVERSE__/g,this.settings.reverse),this.settings.exclusions){var s=this.template.exclusions.container,a=[];for(e=0;e<this.settings.exclusions.length;e++){var l=this.template.exclusions.feature;l=l.replace(/__EXCLUSIONVALUE__/,this.settings.exclusions[e]),a.push(l)}s=s.replace(/__EXCLUSIONFEATURE__/,a.join("\n")),t=t.replace(/__EXCLUSIONS__/g,s)}if(t=t.replace(/__EXCLUSIONS__/g,""),this.settings.distance){var p=this.template.distance;p=p.replace(/__DISTANCEVALUE__/g,this.settings.distance),t=t.replace(/__DISTANCE__/g,p),t=t.replace(/__METHOD__/g,"distance")}if(t=t.replace(/__DISTANCE__/g,""),this.settings.time){var h=this.template.time;h=h.replace(/__TIMEVALUE__/g,this.settings.time),t=t.replace(/__TIME__/g,h),t=t.replace(/__METHOD__/g,"time")}t=t.replace(/__TIME__/g,"")}return this.requestString=t,this.requestString}},i}(0,a,kt),jt=function(){function t(){if(!(this instanceof t))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}return t.prototype={constructor:t},t}(),Ft=function(t,e,o,i,n){function r(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild)&&3===e.nodeType&&(o=e.nodeValue),o}var s={};return s.READERS={isochronResult:function(t){var e=new n;if(t.hasChildNodes())for(var r,a=t.childNodes,l=0;l<a.length;l++)r=a[l],s.READERS[r.nodeName]&&s.READERS[r.nodeName](r,e);if("error"===e.status){var p=i.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new o({message:p,type:o.TYPE_SRVERR})}return e},message:function(t,e){e&&(e.message=r(t))},status:function(t,e){var o=r(t);"ERROR"!==o&&"error"!==o||e&&(e.status="error")},id:function(t,e){e&&(e.id=r(t))},location:function(t,e){var o=r(t);e&&e.location&&(e.location.x=parseFloat(o.split(",")[0]),e.location.y=parseFloat(o.split(",")[1]))},srs:function(t,e){e&&(e.srs=r(t))},distance:function(t,e){e&&(e.distance=parseFloat(r(t)))},time:function(t,e){e&&(e.time=parseFloat(r(t)))},wktGeometry:function(t,o){if(o){var n=t.innerHTML,r=function(t){o.geometry=t},s=function(){var t=i.getMessage("PARAM_FORMAT",["wktGeometry"]);throw new Error(t)};o.hasOwnProperty("geometry")&&e.toJson(n,r,s)}},serviceResult:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],s.READERS[o.nodeName]&&s.READERS[o.nodeName](o,e);return e},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"Exception"===o.nodeName&&(e.exceptionReport=s.READERS.Exception(o));return e},Exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},s.read=function(t){var e;if("isochronResult"===t.nodeName||"isochroneResult"===t.nodeName||"IsochroneResult"===t.nodeName)return e=s.READERS.isochronResult(t);if("ExceptionReport"===t.nodeName)return e=s.READERS[t.nodeName](t);if(s.READERS[t.nodeName]){if(e=s.READERS[t.nodeName](t),"error"===e.status){var n=i.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new o({message:n,type:o.TYPE_SRVERR})}return e}throw new o({message:i.getMessage("SERVICE_RESPONSE_ANALYSE",t.nodeName),type:o.TYPE_UNKERR})},s}(0,It,l,a,jt),Ut=function(t,e,o,i,n,r,s){return{build:function(t){var a=null;if(!t.response)return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)a=t.response;else{switch(t.outputFormat){case"xml":try{var l=new i({reader:r});if("string"==typeof t.response?l.setXMLString(t.response):l.setXMLDoc(t.response),!(a=l.parse()))throw new Error(o.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(i){var p=i.message;return p+="\n(raw response service : '"+t.response+"')",void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",p),status:200,type:e.TYPE_SRVERR}))}break;case"json":var h;if(h="string"==typeof t.response?window.JSON.parse(t.response):t.response,"OK"===h.status||"ok"===h.status){if(!(a=new s))return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_ANALYSE",t.response)));a.time=h.time,a.distance=h.distance,a.message=h.message,a.id=h.id,a.srs=h.srs;var c=function(t){a.geometry=t},u=function(){t.onError.call(t.scope,new e({message:o.getMessage("PARAM_FORMAT","wktGeometry")}))};if(a.hasOwnProperty("geometry")&&(n.toJson(h.wktGeometry,c,u),!a.geometry))return;var d=h.location.split(",");a.location&&(a.location.x=d[0],a.location.y=d[1])}else if("ERROR"===h.status||"error"===h.status){var f=h.message;return f+="\n(raw response service : '"+h+"')",void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_EXCEPTION",f)))}break;default:return void t.onError.call(t.scope,new e(o.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(a&&a.exceptionReport)return void t.onError.call(t.scope,new e({message:o.getMessage("SERVICE_RESPONSE_EXCEPTION",a.exceptionReport),type:e.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,a)}}}(0,l,a,b,It,Ft,jt),Bt=function(t,e,o,i,n,r,s){function a(t){if(!(this instanceof a))throw new TypeError(e.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",i.apply(this,arguments),!t.position)throw new Error(e.getMessage("PARAM_MISSING","position"));if(null==t.position.x)throw new Error(e.getMessage("PARAM_MISSING","position.x"));if(null==t.position.y)throw new Error(e.getMessage("PARAM_MISSING","position.y"));if(!t.time&&!t.distance)throw new Error("Parameter(s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!t.time&&t.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),t.time&&!t.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.exclusions=t.exclusions||null,this.options.graph=t.graph||"Voiture",this.options.reverse=t.reverse||!1,this.options.smoothing=t.smoothing||!1,this.options.holes=t.holes||!1,this.options.srs=t.srs||"EPSG:4326",this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"json",!this.options.serverUrl){var o=n.ProcessIsoCurve.url(this.options.apiKey),r=o["iso-"+this.options.outputFormat];if(!r)throw new Error("Url by default not found !");this.options.serverUrl=r}var s=this.options.serverUrl.lastIndexOf(".");if(-1!==s){var l=this.options.serverUrl.substring(s+1);if(l&&l.length<5)switch(l.toLowerCase()){case"json":case"xml":this.options.outputFormat=l.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}return a.prototype=Object.create(i.prototype,{}),a.prototype.constructor=a,a.prototype.buildRequest=function(t,i){try{var n=new r(this.options);if(!n.processRequestString())throw new Error(e.getMessage("SERVICE_REQUEST_BUILD"));this.request=n.requestString}catch(e){return void t.call(this,new o(e.message))}i.call(this,this.request)},a.prototype.analyzeResponse=function(t,i){if(this.response){var n={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:i,onError:t,scope:this};s.build(n)}else t.call(this,new o(e.getMessage("SERVICE_RESPONSE_EMPTY")))},a}(0,a,l,u,c,Dt,Ut),Vt=function(t,e,o,i,n,r,s){var a={getConfig:function(t){new e(t).call()},getAltitude:function(e){new t(e).call()},geocode:function(t){new o(t).call()},reverseGeocode:function(t){new i(t).call()},autoComplete:function(t){new n(t).call()},route:function(t){new r(t).call()},isoCurve:function(t){new s(t).call()}};return a}(A,V,ct,gt,bt,Nt,Bt),function(t,e,o,i,n,r,s,a,l,p,h,c,u,d,f,y,g,m,v,_,b,E,S,P,w,A,C,M,x,I){var R="undefined"!=typeof window?window:{},T=R.Gp||{servicesVersion:"1.1.0",servicesDate:"2017-11-24",extend:function(t,e){var o,i=t.split("."),n=this;o=i.length;for(var r=0;r<o;r++){void 0===n[i[r]]&&(n[i[r]]={});r===o-1&&(n[i[r]]=e),n=n[i[r]]}return this}};return T.extend("Protocols",{}),T.extend("Protocols.XHR",t),T.extend("Services",e),T.extend("Services.AltiResponse",o),T.extend("Services.Alti.Elevation",i),T.extend("Services.AutoCompleteResponse",n),T.extend("Services.AutoComplete.SuggestedLocation",r),T.extend("Services.GetConfigResponse",s),T.extend("Services.Config.Constraint",a),T.extend("Services.Config.Format",l),T.extend("Services.Config.Layer",p),T.extend("Services.Config.Legend",h),T.extend("Services.Config.Metadata",c),T.extend("Services.Config.Originator",u),T.extend("Services.Config.Service",d),T.extend("Services.Config.Style",f),T.extend("Services.Config.Territory",y),T.extend("Services.Config.Thematic",r),T.extend("Services.Config.TileMatrix",m),T.extend("Services.Config.TileMatrixLimit",v),T.extend("Services.Config.TileMatrixSet",_),T.extend("Services.GeocodeResponse",b),T.extend("Services.Geocode.GeocodedLocation",E),T.extend("Services.Geocode.DirectGeocodedLocation",S),T.extend("Services.Geocode.ReverseGeocodedLocation",P),T.extend("Services.IsoCurveResponse",w),T.extend("Services.RouteResponse",A),T.extend("Services.Route.RouteInstruction",C),T.extend("Error",M),T.extend("Helper",x),T.extend("Services.DefaultUrl",I),R.Gp=T,R.Gp}(s,Vt,E,S,mt,vt,C,M,x,I,R,T,L,G,O,N,0,j,F,D,st,at,lt,dt,jt,Rt,Tt,l,n,c)}),function(t){!function(){var e=document.getElementsByTagName("script"),o=e[e.length-1].getAttribute("data-key");if(o){var i=o.split(/;|,|\|/);if(o&&i.length>1){for(var n=[],r=0;r<i.length;r++)n.push(i[r]);o=n}}var s=e[e.length-1].getAttribute("data-url"),a=e[e.length-1].getAttribute("data-timeout"),l=function(){},p=function(t){throw new Error("Configuration load failed : "+t.message)};if(o||s){var h={apiKey:o,onSuccess:l,onFailure:p};s&&(h.serverUrl=s,h.callbackSuffix=""),a&&(h.timeOut=a),t.Config||t.Services.getConfig(h)}}()}(o),i=function(){return{getZoomLevelFromScaleDenominator:function(t,e){var o={};switch(e){case"EPSG:2154":o={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:o={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,
3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424}}var i=28e-5*t;for(var n in o)if(o.hasOwnProperty(n)&&o[n]<=i)return n=parseInt(n,10);return 0},getAttributions:function(t){var e=t.zoom,o=[];if(null!=t.originators&&t.visibility)for(var i,n=0,r=t.originators.length;n<r;n++){i=!0;for(var s=t.originators[n],a=t.originators[n].constraints||[],l=0,p=a.length;l<p;l++){var h=a[l];i=!0;var c=this.getZoomLevelFromScaleDenominator(h.maxScaleDenominator,t.crs),u=this.getZoomLevelFromScaleDenominator(h.minScaleDenominator,t.crs)||21;c&&c>e&&(i=!1),i&&null!==u&&u<e&&(i=!1);var d=h.bbox;if(i&&d){i=!1;var f=t.extent;if(f){var y=[d.top,d.left,d.bottom,d.right];if(this.intersects(f,y)){i=!0;break}}}}if(i){var g=s.logo,m=s.url,v=s.name?s.name:"",_=s.attribution,b=document.createElement("div");b.className="gp-control-attribution";var E=null;E=document.createElement("a"),E.className="gp-control-attribution-link",E.target="_blank",b.appendChild(E),m&&(E.href=m);var S=!!g,P=null;S?(P=document.createElement("img"),E?(P.className="gp-control-attribution-image",E.appendChild(P)):(P.className="",b.appendChild(P)),P.src=g,P.title=_||v,P.style.height="30px",P.style.width="30px"):E.textContent=v||(_||(m||"")),o.push(b.innerHTML+" ")}}return o},intersects:function(t,e){var o=t[1]<=e[3]&&e[1]<=t[3],i=t[2]<=e[0]&&e[2]<=t[0];return o&&i}}}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("proj4",e):t.proj4=e()}(this,function(){"use strict";function t(t,e){if(t[e])return t[e];for(var o,i=Object.keys(t),n=e.toLowerCase().replace(qe,""),r=-1;++r<i.length;)if(o=i[r],o.toLowerCase().replace(qe,"")===n)return t[o]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ke}function o(t){return new e(t).output()}function i(t,e,o){Array.isArray(e)&&(o.unshift(e),e=null);var i=e?{}:t,r=o.reduce(function(t,e){return n(e,t),t},i);e&&(t[e]=r)}function n(t,e){if(!Array.isArray(t))return void(e[t]=!0);var o=t.shift();if("PARAMETER"===o&&(o=t.shift()),1===t.length)return Array.isArray(t[0])?(e[o]={},void n(t[0],e[o])):void(e[o]=t[0]);if(!t.length)return void(e[o]=!0);if("TOWGS84"===o)return void(e[o]=t);Array.isArray(o)||(e[o]={});var r;switch(o){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[o]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&n(t[2],e[o]));case"SPHEROID":case"ELLIPSOID":return e[o]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&n(t[3],e[o]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void i(e,o,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return n(t,e[o]);return i(e,o,t)}}function r(t,e){var o=e[0],i=e[1];!(o in t)&&i in t&&(t[o]=t[i],3===e.length&&(t[o]=e[2](t[o])))}function s(t){return t*to}function a(t){function e(e){return e*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",s],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["alpha","azimuth",s],["srsCode","name"]].forEach(function(e){return r(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function l(t){var e=this;if(2===arguments.length){var o=arguments[1];"string"==typeof o?"+"===o.charAt(0)?l[t]=Ye(arguments[1]):l[t]=eo(arguments[1]):l[t]=o}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?l.apply(e,t):l(t)});if("string"==typeof t){if(t in l)return l[t]}else"EPSG"in t?l["EPSG:"+t.EPSG]=t:"ESRI"in t?l["ESRI:"+t.ESRI]=t:"IAU2000"in t?l["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function p(t){return"string"==typeof t}function h(t){return t in l}function c(t){return oo.some(function(e){return t.indexOf(e)>-1})}function u(t){return"+"===t[0]}function d(t){return p(t)?h(t)?l[t]:c(t)?eo(t):u(t)?Ye(t):void 0:t}function f(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=no(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function y(t){var e=t.x,o=t.y;if(o*Ue>90&&o*Ue<-90&&e*Ue>180&&e*Ue<-180)return null;var i,n;if(Math.abs(Math.abs(o)-Oe)<=je)return null;if(this.sphere)i=this.x0+this.a*this.k0*so(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Be+.5*o));else{var r=Math.sin(o),s=ao(this.e,o,r);i=this.x0+this.a*this.k0*so(e-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=i,t.y=n,t}function g(t){var e,o,i=t.x-this.x0,n=t.y-this.y0;if(this.sphere)o=Oe-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var r=Math.exp(-n/(this.a*this.k0));if(-9999===(o=lo(this.e,r)))return null}return e=so(this.long0+i/(this.a*this.k0)),t.x=e,t.y=o,t}function m(){}function v(t){return t}function _(t,e){var o=go.length;return t.names?(go[o]=t,t.names.forEach(function(t){yo[t.toLowerCase()]=o}),this):(console.log(e),!0)}function b(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==yo[e]&&go[yo[e]]?go[yo[e]]:void 0}function E(){fo.forEach(_)}function S(t,e,o,i){var n=t*t,r=e*e,s=(n-r)/n,a=0;return i?(t*=1-s*(Ne+s*(ke+s*De)),n=t*t,s=0):a=Math.sqrt(s),{es:s,e:a,ep2:(n-r)/r}}function P(e,o,i,n,r){if(!e){var s=t(vo,n);s||(s=_o),e=s.a,o=s.b,i=s.rf}return i&&!o&&(o=(1-1/i)*e),(0===i||Math.abs(e-o)<je)&&(r=!0,o=e),{a:e,b:o,rf:i,sphere:r}}function w(t,e,o,i,n,r){var s={};return s.datum_type=void 0===t||"none"===t?Le:Te,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=Ie),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=Re,s.datum_params[3]*=Ge,s.datum_params[4]*=Ge,s.datum_params[5]*=Ge,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=o,s.b=i,s.es=n,s.ep2=r,s}function A(e,o){if(!(this instanceof A))return new A(e);o=o||function(t){if(t)throw t};var i=d(e);if("object"!=typeof i)return void o(e);var n=A.projections.get(i.projName);if(!n)return void o(e);if(i.datumCode&&"none"!==i.datumCode){var r=t(bo,i.datumCode);r&&(i.datum_params=r.towgs84?r.towgs84.split(","):null,i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var s=P(i.a,i.b,i.rf,i.ellps,i.sphere),a=S(s.a,s.b,s.rf,i.R_A),l=i.datum||w(i.datumCode,i.datum_params,s.a,s.b,a.es,a.ep2);io(this,i),io(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),o(null,this)}function C(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===Ie?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==Re||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function M(t,e,o){var i,n,r,s,a=t.x,l=t.y,p=t.z?t.z:0;if(l<-Oe&&l>-1.001*Oe)l=-Oe;else if(l>Oe&&l<1.001*Oe)l=Oe;else if(l<-Oe||l>Oe)return null;return a>Math.PI&&(a-=2*Math.PI),n=Math.sin(l),s=Math.cos(l),r=n*n,i=o/Math.sqrt(1-e*r),{x:(i+p)*s*Math.cos(a),y:(i+p)*s*Math.sin(a),z:(i*(1-e)+p)*n}}function x(t,e,o,i){var n,r,s,a,l,p,h,c,u,d,f,y,g,m,v,_,b=t.x,E=t.y,S=t.z?t.z:0;if(n=Math.sqrt(b*b+E*E),r=Math.sqrt(b*b+E*E+S*S),n/o<1e-12){if(m=0,r/o<1e-12)return v=Oe,_=-i,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(E,b);s=S/r,a=n/r,l=1/Math.sqrt(1-e*(2-e)*a*a),c=a*(1-e)*l,u=s*l,g=0;do{g++,h=o/Math.sqrt(1-e*u*u),_=n*c+S*u-h*(1-e*u*u),p=e*h/(h+_),l=1/Math.sqrt(1-p*(2-p)*a*a),d=a*(1-p)*l,f=s*l,y=f*c-d*u,c=d,u=f}while(y*y>1e-24&&g<30);return v=Math.atan(f/Math.abs(d)),{x:m,y:v,z:_}}function I(t,e,o){if(e===Ie)return{x:t.x+o[0],y:t.y+o[1],z:t.z+o[2]};if(e===Re){var i=o[0],n=o[1],r=o[2],s=o[3],a=o[4],l=o[5],p=o[6];return{x:p*(t.x-l*t.y+a*t.z)+i,y:p*(l*t.x+t.y-s*t.z)+n,z:p*(-a*t.x+s*t.y+t.z)+r}}}function R(t,e,o){if(e===Ie)return{x:t.x-o[0],y:t.y-o[1],z:t.z-o[2]};if(e===Re){var i=o[0],n=o[1],r=o[2],s=o[3],a=o[4],l=o[5],p=o[6],h=(t.x-i)/p,c=(t.y-n)/p,u=(t.z-r)/p;return{x:h+l*c-a*u,y:-l*h+c+s*u,z:a*h-s*c+u}}}function T(t){return t===Ie||t===Re}function L(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function G(t,e){return(t.datum.datum_type===Ie||t.datum.datum_type===Re)&&"WGS84"!==e.datumCode||(e.datum.datum_type===Ie||e.datum.datum_type===Re)&&"WGS84"!==t.datumCode}function O(t,e,o){var i;return Array.isArray(o)&&(o=Po(o)),wo(o),t.datum&&e.datum&&G(t,e)&&(i=new A("WGS84"),o=O(t,i,o),t=i),"enu"!==t.axis&&(o=So(t,!1,o)),"longlat"===t.projName?o={x:o.x*Fe,y:o.y*Fe}:(t.to_meter&&(o={x:o.x*t.to_meter,y:o.y*t.to_meter}),o=t.inverse(o)),t.from_greenwich&&(o.x+=t.from_greenwich),o=Eo(t.datum,e.datum,o),e.from_greenwich&&(o={x:o.x-e.from_greenwich,y:o.y}),"longlat"===e.projName?o={x:o.x*Ue,y:o.y*Ue}:(o=e.forward(o),e.to_meter&&(o={x:o.x/e.to_meter,y:o.y/e.to_meter})),"enu"!==e.axis?So(e,!0,o):o}function N(t,e,o){var i,n,r;return Array.isArray(o)?(i=O(t,e,o),3===o.length?[i.x,i.y,i.z]:[i.x,i.y]):(n=O(t,e,o),r=Object.keys(o),2===r.length?n:(r.forEach(function(t){"x"!==t&&"y"!==t&&(n[t]=o[t])}),n))}function k(t){return t instanceof A?t:t.oProj?t.oProj:A(t)}function D(t,e,o){t=k(t);var i,n=!1;return void 0===e?(e=t,t=Ao,n=!0):(void 0!==e.x||Array.isArray(e))&&(o=e,e=t,t=Ao,n=!0),e=k(e),o?N(t,e,o):(i={forward:function(o){return N(t,e,o)},inverse:function(o){return N(e,t,o)}},n&&(i.oProj=e),i)}function j(t,e){return e=e||5,q(W({lat:t[1],lon:t[0]}),e)}function F(t){var e=z(Z(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function U(t){var e=z(Z(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function B(t){return t*(Math.PI/180)}function V(t){return t/Math.PI*180}function W(t){var e,o,i,n,r,s,a,l,p,h=t.lat,c=t.lon,u=6378137,d=B(h),f=B(c);p=Math.floor((c+180)/6)+1,180===c&&(p=60),h>=56&&h<64&&c>=3&&c<12&&(p=32),h>=72&&h<84&&(c>=0&&c<9?p=31:c>=9&&c<21?p=33:c>=21&&c<33?p=35:c>=33&&c<42&&(p=37)),e=6*(p-1)-180+3,l=B(e),o=.006739496752268451,i=u/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),n=Math.tan(d)*Math.tan(d),r=o*Math.cos(d)*Math.cos(d),s=Math.cos(d)*(f-l),a=u*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d));var y=.9996*i*(s+(1-n+r)*s*s*s/6+(5-18*n+n*n+72*r-58*o)*s*s*s*s*s/120)+5e5,g=.9996*(a+i*Math.tan(d)*(s*s/2+(5-n+9*r+4*r*r)*s*s*s*s/24+(61-58*n+n*n+600*r-330*o)*s*s*s*s*s*s/720));return h<0&&(g+=1e7),{northing:Math.round(g),easting:Math.round(y),zoneNumber:p,zoneLetter:H(h)}}function z(t){var e=t.northing,o=t.easting,i=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var r,s,a,l,p,h,c,u,d,f,y=6378137,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=o-5e5,v=e;i<"N"&&(v-=1e7),u=6*(n-1)-180+3,r=.006739496752268451,c=v/.9996,d=c/6367449.145945056,f=d+(3*g/2-27*g*g*g/32)*Math.sin(2*d)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*d)+151*g*g*g/96*Math.sin(6*d),s=y/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),l=r*Math.cos(f)*Math.cos(f),p=.99330562*y/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),h=m/(.9996*s);var _=f-s*Math.tan(f)/p*(h*h/2-(5+3*a+10*l-4*l*l-9*r)*h*h*h*h/24+(61+90*a+298*l+45*a*a-252*r-3*l*l)*h*h*h*h*h*h/720);_=V(_);var b=(h-(1+2*a+l)*h*h*h/6+(5-2*l+28*a-3*l*l+8*r+24*a*a)*h*h*h*h*h/120)/Math.cos(f);b=u+V(b);var E;if(t.accuracy){var S=z({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});E={top:S.lat,right:S.lon,bottom:_,left:b}}else E={lat:_,lon:b};return E}function H(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function q(t,e){var o="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Y(t.easting,t.northing,t.zoneNumber)+o.substr(o.length-5,e)+i.substr(i.length-5,e)}function Y(t,e,o){var i=K(o);return X(Math.floor(t/1e5),Math.floor(e/1e5)%20,i)}function K(t){var e=t%Co;return 0===e&&(e=Co),e}function X(t,e,o){var i=o-1,n=Mo.charCodeAt(i),r=xo.charCodeAt(i),s=n+t-1,a=r+e,l=!1;return s>Go&&(s=s-Go+Io-1,l=!0),(s===Ro||n<Ro&&s>Ro||(s>Ro||n<Ro)&&l)&&s++,(s===To||n<To&&s>To||(s>To||n<To)&&l)&&++s===Ro&&s++,s>Go&&(s=s-Go+Io-1),a>Lo?(a=a-Lo+Io-1,l=!0):l=!1,(a===Ro||r<Ro&&a>Ro||(a>Ro||r<Ro)&&l)&&a++,(a===To||r<To&&a>To||(a>To||r<To)&&l)&&++a===Ro&&a++,a>Lo&&(a=a-Lo+Io-1),String.fromCharCode(s)+String.fromCharCode(a)}function Z(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,o=t.length,i=null,n="",r=0;!/[A-Z]/.test(e=t.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,r++}var s=parseInt(n,10);if(0===r||r+3>o)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(r++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(r,r+=2);for(var l=K(s),p=J(i.charAt(0),l),h=Q(i.charAt(1),l);h<$(a);)h+=2e6;var c=o-r;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var u,d,f,y,g,m=c/2,v=0,_=0;return m>0&&(u=1e5/Math.pow(10,m),d=t.substring(r,r+m),v=parseFloat(d)*u,f=t.substring(r+m),_=parseFloat(f)*u),y=v+p,g=_+h,{easting:y,northing:g,zoneLetter:a,zoneNumber:s,accuracy:u}}function J(t,e){for(var o=Mo.charCodeAt(e-1),i=1e5,n=!1;o!==t.charCodeAt(0);){if(o++,o===Ro&&o++,o===To&&o++,o>Go){if(n)throw"Bad character: "+t;o=Io,n=!0}i+=1e5}return i}function Q(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var o=xo.charCodeAt(e-1),i=0,n=!1;o!==t.charCodeAt(0);){if(o++,o===Ro&&o++,o===To&&o++,o>Lo){if(n)throw"Bad character: "+t;o=Io,n=!0}i+=1e5}return i}function $(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function tt(t,e,o){if(!(this instanceof tt))return new tt(t,e,o);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=o||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function et(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ko(this.es),this.ml0=Do(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ot(t){var e,o,i,n=t.x,r=t.y,s=so(n-this.long0),a=Math.sin(r),l=Math.cos(r);if(this.es){var p=l*s,h=Math.pow(p,2),c=this.ep2*Math.pow(l,2),u=Math.pow(c,2),d=Math.abs(l)>je?Math.tan(r):0,f=Math.pow(d,2),y=Math.pow(f,2);e=1-this.es*Math.pow(a,2),p/=Math.sqrt(e);var g=Do(r,a,l,this.en);o=this.a*(this.k0*p*(1+h/6*(1-f+c+h/20*(5-18*f+y+14*c-58*f*c+h/42*(61+179*y-y*f-479*f)))))+this.x0,i=this.a*(this.k0*(g-this.ml0+a*s*p/2*(1+h/12*(5-f+9*c+4*u+h/30*(61+y-58*f+270*c-330*f*c+h/56*(1385+543*y-y*f-3111*f))))))+this.y0}else{var m=l*Math.sin(s);if(Math.abs(Math.abs(m)-1)<je)return 93;if(o=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,i=l*Math.cos(s)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(i))>=1){if(m-1>je)return 93;i=0}else i=Math.acos(i);r<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=o,t.y=i,t}function it(t){var e,o,i,n,r=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,o=jo(e,this.es,this.en),Math.abs(o)<Oe){var a=Math.sin(o),l=Math.cos(o),p=Math.abs(l)>je?Math.tan(o):0,h=this.ep2*Math.pow(l,2),c=Math.pow(h,2),u=Math.pow(p,2),d=Math.pow(u,2);e=1-this.es*Math.pow(a,2);var f=r*Math.sqrt(e)/this.k0,y=Math.pow(f,2);e*=p,i=o-e*y/(1-this.es)*.5*(1-y/12*(5+3*u-9*h*u+h-4*c-y/30*(61+90*u-252*h*u+45*d+46*h-y/56*(1385+3633*u+4095*d+1574*d*u)))),n=so(this.long0+f*(1-y/6*(1+2*u+h-y/20*(5+28*u+24*d+8*h*u+6*h-y/42*(61+662*u+1320*d+720*d*u))))/l)}else i=Oe*ro(s),n=0;else{var g=Math.exp(r/this.k0),m=.5*(g-1/g),v=this.lat0+s/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(m,2))),i=Math.asin(e),s<0&&(i=-i),n=0===m&&0===_?0:so(Math.atan2(m,_)+this.long0)}return t.x=n,t.y=i,t}function nt(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),o=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),o*=e,this.cgb[1]=o*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=o*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),o*=e,this.cgb[2]=o*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=o*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),o*=e,this.cgb[3]=o*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=o*(1237/630+e*(e*(-24832/14175)-2.4)),o*=e,this.cgb[4]=o*(4174/315+e*(-144838/6237)),this.cbg[4]=o*(-734/315+e*(109598/31185)),o*=e,this.cgb[5]=o*(601676/22275),this.cbg[5]=o*(444337/155925),o=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+o*(.25+o*(1/64+o/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=o*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=o*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),o*=e,this.utg[2]=o*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=o*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),o*=e,this.utg[3]=o*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=o*(49561/161280+e*(-179/168+e*(6601661/7257600))),o*=e,this.utg[4]=o*(-4583/161280+e*(108847/3991680)),this.gtu[4]=o*(34729/80640+e*(-3418889/1995840)),o*=e,this.utg[5]=-.03233083094085698*o,this.gtu[5]=.6650675310896665*o;var i=Ho(this.cbg,this.lat0);this.Zb=-this.Qn*(i+qo(this.gtu,2*i))}function rt(t){var e=so(t.x-this.long0),o=t.y;o=Ho(this.cbg,o);var i=Math.sin(o),n=Math.cos(o),r=Math.sin(e),s=Math.cos(e);o=Math.atan2(i,s*n),e=Math.atan2(r*n,Vo(i,n*s)),e=zo(Math.tan(e));var a=Ko(this.gtu,2*o,2*e);o+=a[0],e+=a[1];var l,p;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,p=this.a*(this.Qn*o+this.Zb)+this.y0):(l=1/0,p=1/0),t.x=l,t.y=p,t}function st(t){var e=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);o=(o-this.Zb)/this.Qn,e/=this.Qn;var i,n;if(Math.abs(e)<=2.623395162778){var r=Ko(this.utg,2*o,2*e);o+=r[0],e+=r[1],e=Math.atan(Bo(e));var s=Math.sin(o),a=Math.cos(o),l=Math.sin(e),p=Math.cos(e);o=Math.atan2(s*p,Vo(l,p*a)),e=Math.atan2(l,p*a),i=so(e+this.long0),n=Ho(this.cgb,o)}else i=1/0,n=1/0;return t.x=i,t.y=n,t}function at(){var t=Jo(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Fe,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Zo.init.apply(this),this.forward=Zo.forward,this.inverse=Zo.inverse}function lt(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Be)/(Math.pow(Math.tan(.5*this.lat0+Be),this.C)*ti(this.e*t,this.ratexp))}function pt(t){var e=t.x,o=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*o+Be),this.C)*ti(this.e*Math.sin(o),this.ratexp))-Oe,t.x=this.C*e,t}function ht(t){for(var e=t.x/this.C,o=t.y,i=Math.pow(Math.tan(.5*o+Be)/this.K,1/this.C),n=ei;n>0&&(o=2*Math.atan(i*ti(this.e*Math.sin(t.y),-.5*this.e))-Oe,!(Math.abs(o-t.y)<1e-14));--n)t.y=o;return n?(t.x=e,t.y=o,t):null}function ct(){ii.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ut(t){var e,o,i,n;return t.x=so(t.x-this.long0),ii.forward.apply(this,[t]),e=Math.sin(t.y),o=Math.cos(t.y),i=Math.cos(t.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*o*i),t.x=n*o*Math.sin(t.x),t.y=n*(this.cosc0*e-this.sinc0*o*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function dt(t){var e,o,i,n,r;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,r=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(r,this.R2);e=Math.sin(s),o=Math.cos(s),n=Math.asin(o*this.sinc0+t.y*e*this.cosc0/r),i=Math.atan2(t.x*e,r*this.cosc0*o-t.y*this.sinc0*e)}else n=this.phic0,i=0;return t.x=i,t.y=n,ii.inverse.apply(this,[t]),t.x=so(t.x+this.long0),t}function ft(t,e,o){return e*=o,Math.tan(.5*(Oe+t))*Math.pow((1-e)/(1+e),.5*o)}function yt(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=je&&(this.k0=.5*(1+ro(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=je&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=je&&(this.k0=.5*this.cons*no(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ao(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=no(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Oe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function gt(t){var e,o,i,n,r,s,a=t.x,l=t.y,p=Math.sin(l),h=Math.cos(l),c=so(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=je&&Math.abs(l+this.lat0)<=je?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*p+this.coslat0*h*Math.cos(c)),t.x=this.a*e*h*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*p-this.sinlat0*h*Math.cos(c))+this.y0,t):(o=2*Math.atan(this.ssfn_(l,p,this.e))-Oe,n=Math.cos(o),i=Math.sin(o),Math.abs(this.coslat0)<=je?(r=ao(this.e,l*this.con,this.con*p),s=2*this.a*this.k0*r/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<je?(e=2*this.a*this.k0/(1+n*Math.cos(c)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*n*Math.cos(c))),t.y=e*(this.cosX0*i-this.sinX0*n*Math.cos(c))+this.y0),t.x=e*n*Math.sin(c)+this.x0,t))}function mt(t){t.x-=this.x0,t.y-=this.y0;var e,o,i,n,r,s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(.5*this.a*this.k0));return e=this.long0,(o=this.lat0,s<=je)?(t.x=e,t.y=o,t):(o=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=so(Math.abs(this.coslat0)<je?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=o,t)}if(Math.abs(this.coslat0)<=je){if(s<=je)return o=this.lat0,e=this.long0,t.x=e,t.y=o,t;t.x*=this.con,t.y*=this.con,i=s*this.cons/(2*this.a*this.k0),o=this.con*lo(this.e,i),e=this.con*so(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=je?r=this.X0:(r=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/s),e=so(this.long0+Math.atan2(t.x*Math.sin(n),s*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),o=-1*lo(this.e,Math.tan(.5*(Oe+r)));return t.x=e,t.y=o,t}function vt(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),o=this.a,i=this.rf,n=1/i,r=2*n-Math.pow(n,2),s=this.e=Math.sqrt(r);this.R=this.k0*o*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),p=Math.log((1+s*e)/(1-s*e));this.K=a-this.alpha*l+this.alpha*s/2*p}function _t(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+o)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t}function bt(t){for(var e=t.x-this.x0,o=t.y-this.y0,i=e/this.R,n=2*(Math.atan(Math.exp(o/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+s/this.alpha,l=0,p=r,h=-1e3,c=0;Math.abs(p-h)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(p))/2)),h=p,p=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=p,t}function Et(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),o=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-o*o);var i=ao(this.e,this.lat0,t),n=this.bl/e*Math.sqrt((1-this.es)/(1-o*o));n*n<1&&(n=1);var r,s;if(isNaN(this.longc)){var a=ao(this.e,this.lat1,Math.sin(this.lat1)),l=ao(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(i,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(i,this.bl);var p=Math.pow(a,this.bl),h=Math.pow(l,this.bl);r=this.el/p,s=.5*(r-1/r);var c=(this.el*this.el-h*p)/(this.el*this.el+h*p),u=(h-p)/(h+p),d=so(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*d)/u)/this.bl,this.long0=so(this.long0);var f=so(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*f)/s),this.alpha=Math.asin(n*Math.sin(this.gamma0))}else r=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=r*Math.pow(i,this.bl),s=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}function St(t){var e,o,i,n=t.x,r=t.y,s=so(n-this.long0);if(Math.abs(Math.abs(r)-Oe)<=je)i=r>0?-1:1,o=this.al/this.bl*Math.log(Math.tan(Be+i*this.gamma0*.5)),e=-1*i*Oe*this.al/this.bl;else{var a=ao(this.e,r,Math.sin(r)),l=this.el/Math.pow(a,this.bl),p=.5*(l-1/l),h=.5*(l+1/l),c=Math.sin(this.bl*s),u=(p*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/h;o=Math.abs(Math.abs(u)-1)<=je?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-u)/(1+u))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=je?this.al*this.bl*s:this.al*Math.atan2(p*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+o):(e-=this.uc,t.x=this.x0+o*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-o*Math.sin(this.alpha)),t}function Pt(t){var e,o;this.no_rot?(o=t.y-this.y0,e=t.x-this.x0):(o=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*o/this.al),n=.5*(i-1/i),r=.5*(i+1/i),s=Math.sin(this.bl*e/this.al),a=(s*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/r,l=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<je?(t.x=this.long0,t.y=Oe):Math.abs(a+1)<je?(t.x=this.long0,t.y=-1*Oe):(t.y=lo(this.e,l),t.x=so(this.long0-Math.atan2(n*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t}function wt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<je)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t)
;var e=Math.sin(this.lat1),o=Math.cos(this.lat1),i=no(this.e,e,o),n=ao(this.e,this.lat1,e),r=Math.sin(this.lat2),s=Math.cos(this.lat2),a=no(this.e,r,s),l=ao(this.e,this.lat2,r),p=ao(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>je?this.ns=Math.log(i/a)/Math.log(n/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(p,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function At(t){var e=t.x,o=t.y;Math.abs(2*Math.abs(o)-Math.PI)<=je&&(o=ro(o)*(Oe-2*je));var i,n,r=Math.abs(Math.abs(o)-Oe);if(r>je)i=ao(this.e,o,Math.sin(o)),n=this.a*this.f0*Math.pow(i,this.ns);else{if((r=o*this.ns)<=0)return null;n=0}var s=this.ns*so(e-this.long0);return t.x=this.k0*(n*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(s))+this.y0,t}function Ct(t){var e,o,i,n,r,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),o=1):(e=-Math.sqrt(s*s+a*a),o=-1);var l=0;if(0!==e&&(l=Math.atan2(o*s,o*a)),0!==e||this.ns>0){if(o=1/this.ns,i=Math.pow(e/(this.a*this.f0),o),-9999===(n=lo(this.e,i)))return null}else n=-Oe;return r=so(l/this.ns+this.long0),t.x=r,t.y=n,t}function Mt(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function xt(t){var e,o,i,n,r,s,a,l=t.x,p=t.y,h=so(l-this.long0);return e=Math.pow((1+this.e*Math.sin(p))/(1-this.e*Math.sin(p)),this.alfa*this.e/2),o=2*(Math.atan(this.k*Math.pow(Math.tan(p/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(o)+Math.sin(this.ad)*Math.cos(o)*Math.cos(i)),r=Math.asin(Math.cos(o)*Math.sin(i)/Math.cos(n)),s=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t}function It(t){var e,o,i,n,r,s,a,l,p=t.x;t.x=t.y,t.y=p,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x),n=r/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),o=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(e)),t.x=this.long0-o/this.alfa,a=e,l=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,h+=1}while(0===l&&h<15);return h>=15?null:t}function Rt(){this.sphere||(this.e0=mi(this.es),this.e1=vi(this.es),this.e2=_i(this.es),this.e3=bi(this.es),this.ml0=this.a*gi(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Tt(t){var e,o,i=t.x,n=t.y;if(i=so(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(i)),o=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var r=Math.sin(n),s=Math.cos(n),a=Ei(this.a,this.e,r),l=Math.tan(n)*Math.tan(n),p=i*Math.cos(n),h=p*p,c=this.es*s*s/(1-this.es),u=this.a*gi(this.e0,this.e1,this.e2,this.e3,n);e=a*p*(1-h*l*(1/6-(8-l+8*c)*h/120)),o=u-this.ml0+a*r/s*h*(.5+(5-l+6*c)*h/24)}return t.x=e+this.x0,t.y=o+this.y0,t}function Lt(t){t.x-=this.x0,t.y-=this.y0;var e,o,i=t.x/this.a,n=t.y/this.a;if(this.sphere){var r=n+this.lat0;e=Math.asin(Math.sin(r)*Math.cos(i)),o=Math.atan2(Math.tan(i),Math.cos(r))}else{var s=this.ml0/this.a+n,a=Pi(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Oe)<=je)return t.x=this.long0,t.y=Oe,n<0&&(t.y*=-1),t;var l=Ei(this.a,this.e,Math.sin(a)),p=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),c=i*this.a/l,u=c*c;e=a-l*Math.tan(a)/p*c*c*(.5-(1+3*h)*c*c/24),o=c*(1-u*(h/3+(1+3*h)*h*u/15))/Math.cos(a)}return t.x=so(o+this.long0),t.y=Si(e),t}function Gt(){var t=Math.abs(this.lat0);if(Math.abs(t-Oe)<je?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<je?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Ci(this.e,1),this.mmf=.5/(1-this.es),this.apa=kt(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Ci(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ot(t){var e,o,i,n,r,s,a,l,p,h,c=t.x,u=t.y;if(c=so(c-this.long0),this.sphere){if(r=Math.sin(u),h=Math.cos(u),i=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((o=this.mode===this.EQUIT?1+h*i:1+this.sinph0*r+this.cosph0*h*i)<=je)return null;o=Math.sqrt(2/o),e=o*h*Math.sin(c),o*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*h*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(u+this.phi0)<je)return null;o=Be-.5*u,o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)),e=o*Math.sin(c),o*=i}}else{switch(a=0,l=0,p=0,i=Math.cos(c),n=Math.sin(c),r=Math.sin(u),s=Ci(this.e,r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:p=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:p=1+l*i;break;case this.N_POLE:p=Oe+u,s=this.qp-s;break;case this.S_POLE:p=u-Oe,s=this.qp+s}if(Math.abs(p)<je)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),o=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*a-this.sinb1*l*i):(p=Math.sqrt(2/(1+l*i)))*a*this.ymf,e=this.xmf*p*l*n;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(p=Math.sqrt(s))*n,o=i*(this.mode===this.S_POLE?p:-p)):e=o=0}}return t.x=this.a*e+this.x0,t.y=this.a*o+this.y0,t}function Nt(t){t.x-=this.x0,t.y-=this.y0;var e,o,i,n,r,s,a,l=t.x/this.a,p=t.y/this.a;if(this.sphere){var h,c=0,u=0;if(h=Math.sqrt(l*l+p*p),(o=.5*h)>1)return null;switch(o=2*Math.asin(o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(u=Math.sin(o),c=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(h)<=je?0:Math.asin(p*u/h),l*=u,p=c*h;break;case this.OBLIQ:o=Math.abs(h)<=je?this.phi0:Math.asin(c*this.sinph0+p*u*this.cosph0/h),l*=u*this.cosph0,p=(c-Math.sin(o)*this.sinph0)*h;break;case this.N_POLE:p=-p,o=Oe-o;break;case this.S_POLE:o-=Oe}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,p):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,p*=this.dd,(s=Math.sqrt(l*l+p*p))<je)return t.x=0,t.y=this.phi0,t;n=2*Math.asin(.5*s/this.rq),i=Math.cos(n),l*=n=Math.sin(n),this.mode===this.OBLIQ?(a=i*this.sinb1+p*n*this.cosb1/s,r=this.qp*a,p=s*this.cosb1*i-p*this.sinb1*n):(a=p*n/s,r=this.qp*a,p=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(r=l*l+p*p))return t.x=0,t.y=this.phi0,t;a=1-r/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,p),o=Dt(Math.asin(a),this.apa)}return t.x=so(this.long0+e),t.y=o,t}function kt(t){var e,o=[];return o[0]=t*Mi,e=t*t,o[0]+=e*xi,o[1]=e*Ri,e*=t,o[0]+=e*Ii,o[1]+=e*Ti,o[2]=e*Li,o}function Dt(t,e){var o=t+t;return t+e[0]*Math.sin(o)+e[1]*Math.sin(o+o)+e[2]*Math.sin(o+o+o)}function jt(){Math.abs(this.lat1+this.lat2)<je||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=no(this.e3,this.sin_po,this.cos_po),this.qs1=Ci(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=no(this.e3,this.sin_po,this.cos_po),this.qs2=Ci(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ci(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>je?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Ft(t){var e=t.x,o=t.y;this.sin_phi=Math.sin(o),this.cos_phi=Math.cos(o);var i=Ci(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,r=this.ns0*so(e-this.long0),s=n*Math.sin(r)+this.x0,a=this.rh-n*Math.cos(r)+this.y0;return t.x=s,t.y=a,t}function Ut(t){var e,o,i,n,r,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),n=0,0!==e&&(n=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(o=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,o)),r=so(n/this.ns0+this.long0),t.x=r,t.y=s,t}function Bt(t,e){var o,i,n,r,s,a=Ni(.5*e);if(t<je)return a;for(var l=t*t,p=1;p<=25;p++)if(o=Math.sin(a),i=Math.cos(a),n=t*o,r=1-n*n,s=.5*r*r/i*(e/(1-l)-o/r+.5/t*Math.log((1-n)/(1+n))),a+=s,Math.abs(s)<=1e-7)return a;return null}function Vt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Wt(t){var e,o,i,n,r,s,a,l,p=t.x,h=t.y;return i=so(p-this.long0),e=Math.sin(h),o=Math.cos(h),n=Math.cos(i),s=this.sin_p14*e+this.cos_p14*o*n,r=1,s>0||Math.abs(s)<=je?(a=this.x0+this.a*r*o*Math.sin(i)/s,l=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*o*n)/s):(a=this.x0+this.infinity_dist*o*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*o*n)),t.x=a,t.y=l,t}function zt(t){var e,o,i,n,r,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(e,this.rc),o=Math.sin(n),i=Math.cos(n),s=Ni(i*this.sin_p14+t.y*o*this.cos_p14/e),r=Math.atan2(t.x*o,e*this.cos_p14*i-t.y*this.sin_p14*o),r=so(this.long0+r)):(s=this.phic0,r=0),t.x=r,t.y=s,t}function Ht(){this.sphere||(this.k0=no(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function qt(t){var e,o,i=t.x,n=t.y,r=so(i-this.long0);if(this.sphere)e=this.x0+this.a*r*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var s=Ci(this.e,Math.sin(n));e=this.x0+this.a*this.k0*r,o=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=o,t}function Yt(t){t.x-=this.x0,t.y-=this.y0;var e,o;return this.sphere?(e=so(this.long0+t.x/this.a/Math.cos(this.lat_ts)),o=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(o=Ui(this.e,2*t.y*this.k0/this.a),e=so(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=o,t}function Kt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Xt(t){var e=t.x,o=t.y,i=so(e-this.long0),n=Si(o-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*n,t}function Zt(t){var e=t.x,o=t.y;return t.x=so(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Si(this.lat0+(o-this.y0)/this.a),t}function Jt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=mi(this.es),this.e1=vi(this.es),this.e2=_i(this.es),this.e3=bi(this.es),this.ml0=this.a*gi(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Qt(t){var e,o,i,n=t.x,r=t.y,s=so(n-this.long0);if(i=s*Math.sin(r),this.sphere)Math.abs(r)<=je?(e=this.a*s,o=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(r),o=this.a*(Si(r-this.lat0)+(1-Math.cos(i))/Math.tan(r)));else if(Math.abs(r)<=je)e=this.a*s,o=-1*this.ml0;else{var a=Ei(this.a,this.e,Math.sin(r))/Math.tan(r);e=a*Math.sin(i),o=this.a*gi(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=o+this.y0,t}function $t(t){var e,o,i,n,r,s,a,l,p;if(i=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=je)e=so(i/this.a+this.long0),o=0;else{s=this.lat0+n/this.a,a=i*i/this.a/this.a+s*s,l=s;var h;for(r=Hi;r;--r)if(h=Math.tan(l),p=-1*(s*(l*h+1)-l-.5*(l*l+a)*h)/((l-s)/h-1),l+=p,Math.abs(p)<=je){o=l;break}e=so(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(o))}else if(Math.abs(n+this.ml0)<=je)o=0,e=so(this.long0+i/this.a);else{s=(this.ml0+n)/this.a,a=i*i/this.a/this.a+s*s,l=s;var c,u,d,f,y;for(r=Hi;r;--r)if(y=this.e*Math.sin(l),c=Math.sqrt(1-y*y)*Math.tan(l),u=this.a*gi(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),f=u/this.a,p=(s*(c*f+1)-f-.5*c*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*c)+(s-f)*(c*d-2/Math.sin(2*l))-d),l-=p,Math.abs(p)<=je){o=l;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(o),2))*Math.tan(o),e=so(this.long0+Math.asin(i*c/this.a)/Math.sin(o))}return t.x=e,t.y=o,t}function te(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function ee(t){var e,o=t.x,i=t.y,n=i-this.lat0,r=o-this.long0,s=n/Ge*1e-5,a=r,l=1,p=0;for(e=1;e<=10;e++)l*=s,p+=this.A[e]*l;var h,c,u=p,d=a,f=1,y=0,g=0,m=0;for(e=1;e<=6;e++)h=f*u-y*d,c=y*u+f*d,f=h,y=c,g=g+this.B_re[e]*f-this.B_im[e]*y,m=m+this.B_im[e]*f+this.B_re[e]*y;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t}function oe(t){var e,o,i,n=t.x,r=t.y,s=n-this.x0,a=r-this.y0,l=a/this.a,p=s/this.a,h=1,c=0,u=0,d=0;for(e=1;e<=6;e++)o=h*l-c*p,i=c*l+h*p,h=o,c=i,u=u+this.C_re[e]*h-this.C_im[e]*c,d=d+this.C_im[e]*h+this.C_re[e]*c;for(var f=0;f<this.iterations;f++){var y,g,m=u,v=d,_=l,b=p;for(e=2;e<=6;e++)y=m*u-v*d,g=v*u+m*d,m=y,v=g,_+=(e-1)*(this.B_re[e]*m-this.B_im[e]*v),b+=(e-1)*(this.B_im[e]*m+this.B_re[e]*v);m=1,v=0;var E=this.B_re[1],S=this.B_im[1];for(e=2;e<=6;e++)y=m*u-v*d,g=v*u+m*d,m=y,v=g,E+=e*(this.B_re[e]*m-this.B_im[e]*v),S+=e*(this.B_im[e]*m+this.B_re[e]*v);var P=E*E+S*S;u=(_*E+b*S)/P,d=(b*E-_*S)/P}var w=u,A=d,C=1,M=0;for(e=1;e<=9;e++)C*=w,M+=this.D[e]*C;var x=this.lat0+M*Ge*1e5,I=this.long0+A;return t.x=I,t.y=x,t}function ie(){}function ne(t){var e=t.x,o=t.y,i=so(e-this.long0),n=this.x0+this.a*i,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+o/2.5))*1.25;return t.x=n,t.y=r,t}function re(t){t.x-=this.x0,t.y-=this.y0;var e=so(this.long0+t.x/this.a),o=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=o,t}function se(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ko(this.es)}function ae(t){var e,o,i=t.x,n=t.y;if(i=so(i-this.long0),this.sphere){if(this.m)for(var r=this.n*Math.sin(n),s=Qi;s;--s){var a=(this.m*n+Math.sin(n)-r)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<je)break}else n=1!==this.n?Math.asin(this.n*Math.sin(n)):n;e=this.a*this.C_x*i*(this.m+Math.cos(n)),o=this.a*this.C_y*n}else{var l=Math.sin(n),p=Math.cos(n);o=this.a*Do(n,l,p,this.en),e=this.a*i*p/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=o,t}function le(t){var e,o,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Ni((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Ni(Math.sin(e)/this.n)),i=so(i+this.long0),e=Si(e)):(e=jo(t.y/this.a,this.es,this.en),n=Math.abs(e),n<Oe?(n=Math.sin(e),o=this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),i=so(o)):n-je<Oe&&(i=this.long0)),t.x=i,t.y=e,t}function pe(){}function he(t){for(var e=t.x,o=t.y,i=so(e-this.long0),n=o,r=Math.PI*Math.sin(o);;){var s=-(n+Math.sin(n)-r)/(1+Math.cos(n));if(n+=s,Math.abs(s)<je)break}n/=2,Math.PI/2-Math.abs(o)<je&&(i=0);var a=.900316316158*this.a*i*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=a,t.y=l,t}function ce(t){var e,o;t.x-=this.x0,t.y-=this.y0,o=t.y/(1.4142135623731*this.a),Math.abs(o)>.999999999999&&(o=.999999999999),e=Math.asin(o);var i=so(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),o=(2*e+Math.sin(2*e))/Math.PI,Math.abs(o)>1&&(o=1);var n=Math.asin(o);return t.x=i,t.y=n,t}function ue(){Math.abs(this.lat1+this.lat2)<je||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=mi(this.es),this.e1=vi(this.es),this.e2=_i(this.es),this.e3=bi(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=no(this.e,this.sinphi,this.cosphi),this.ml1=gi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<je?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=no(this.e,this.sinphi,this.cosphi),this.ml2=gi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=gi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function de(t){var e,o=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var n=gi(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-n)}var r=this.ns*so(o-this.long0),s=this.x0+e*Math.sin(r),a=this.y0+this.rh-e*Math.cos(r);return t.x=s,t.y=a,t}function fe(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,o,i,n;this.ns>=0?(o=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(o=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var r=0;if(0!==o&&(r=Math.atan2(e*t.x,e*t.y)),this.sphere)return n=so(this.long0+r/this.ns),i=Si(this.g-o/this.a),t.x=n,t.y=i,t;var s=this.g-o/this.a;return i=Pi(s,this.e0,this.e1,this.e2,this.e3),n=so(this.long0+r/this.ns),t.x=n,t.y=i,t}function ye(){this.R=this.a}function ge(t){var e,o,i=t.x,n=t.y,r=so(i-this.long0);Math.abs(n)<=je&&(e=this.x0+this.R*r,o=this.y0);var s=Ni(2*Math.abs(n/Math.PI));(Math.abs(r)<=je||Math.abs(Math.abs(n)-Oe)<=je)&&(e=this.x0,o=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,p=Math.sin(s),h=Math.cos(s),c=h/(p+h-1),u=c*c,d=c*(2/p-1),f=d*d,y=Math.PI*this.R*(a*(c-f)+Math.sqrt(l*(c-f)*(c-f)-(f+l)*(u-f)))/(f+l);r<0&&(y=-y),e=this.x0+y;var g=l+c;return y=Math.PI*this.R*(d*g-a*Math.sqrt((f+l)*(l+1)-g*g))/(f+l),o=n>=0?this.y0+y:this.y0-y,t.x=e,t.y=o,t}function me(t){var e,o,i,n,r,s,a,l,p,h,c,u,d;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,i=t.x/c,n=t.y/c,r=i*i+n*n,s=-Math.abs(n)*(1+r),a=s-2*n*n+i*i,l=-2*s+1+2*n*n+r*r,d=n*n/l+(2*a*a*a/l/l/l-9*s*a/l/l)/27,p=(s-a*a/3/l)/l,h=2*Math.sqrt(-p/3),c=3*d/p/h,Math.abs(c)>1&&(c=c>=0?1:-1),u=Math.acos(c)/3,o=t.y>=0?(-h*Math.cos(u+Math.PI/3)-a/3/l)*Math.PI:-(-h*Math.cos(u+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(i)<je?this.long0:so(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(i*i-n*n)+r*r))/2/i),t.x=e,t.y=o,t}function ve(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _e(t){var e,o,i,n,r,s,a,l,p,h,c,u,d,f,y,g,m,v,_,b,E,S,P,w=t.x,A=t.y,C=Math.sin(t.y),M=Math.cos(t.y),x=so(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=je?(t.x=this.x0+this.a*(Oe-A)*Math.sin(x),t.y=this.y0-this.a*(Oe-A)*Math.cos(x),t):Math.abs(this.sin_p12+1)<=je?(t.x=this.x0+this.a*(Oe+A)*Math.sin(x),t.y=this.y0+this.a*(Oe+A)*Math.cos(x),t):(v=this.sin_p12*C+this.cos_p12*M*Math.cos(x),g=Math.acos(v),m=g/Math.sin(g),t.x=this.x0+this.a*m*M*Math.sin(x),t.y=this.y0+this.a*m*(this.cos_p12*C-this.sin_p12*M*Math.cos(x)),t):(e=mi(this.es),o=vi(this.es),i=_i(this.es),n=bi(this.es),Math.abs(this.sin_p12-1)<=je?(r=this.a*gi(e,o,i,n,Oe),s=this.a*gi(e,o,i,n,A),t.x=this.x0+(r-s)*Math.sin(x),t.y=this.y0-(r-s)*Math.cos(x),t):Math.abs(this.sin_p12+1)<=je?(r=this.a*gi(e,o,i,n,Oe),s=this.a*gi(e,o,i,n,A),t.x=this.x0+(r+s)*Math.sin(x),t.y=this.y0+(r+s)*Math.cos(x),t):(a=C/M,l=Ei(this.a,this.e,this.sin_p12),p=Ei(this.a,this.e,C),h=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(p*M)),c=Math.atan2(Math.sin(x),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(x)),_=0===c?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(c)-Math.PI)<=je?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(x)*Math.cos(h)/Math.sin(c)),u=this.e*this.sin_p12/Math.sqrt(1-this.es),d=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es),f=u*d,y=d*d,b=_*_,E=b*_,S=E*_,P=S*_,g=l*_*(1-b*y*(1-y)/6+E/8*f*(1-2*y)+S/120*(y*(4-7*y)-3*u*u*(1-7*y))-P/48*f),t.x=this.x0+g*Math.sin(c),t.y=this.y0+g*Math.cos(c),t))}function be(t){t.x-=this.x0,t.y-=this.y0;var e,o,i,n,r,s,a,l,p,h,c,u,d,f,y,g,m,v,_,b,E,S,P;if(this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Oe*this.a)return;return o=e/this.a,i=Math.sin(o),n=Math.cos(o),r=this.long0,Math.abs(e)<=je?s=this.lat0:(s=Ni(n*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-Oe,r=so(Math.abs(a)<=je?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*i,e*this.cos_p12*n-t.y*this.sin_p12*i))),t.x=r,t.y=s,t}return l=mi(this.es),p=vi(this.es),h=_i(this.es),c=bi(this.es),Math.abs(this.sin_p12-1)<=je?(u=this.a*gi(l,p,h,c,Oe),e=Math.sqrt(t.x*t.x+t.y*t.y),d=u-e,s=Pi(d/this.a,l,p,h,c),r=so(this.long0+Math.atan2(t.x,-1*t.y)),t.x=r,t.y=s,t):Math.abs(this.sin_p12+1)<=je?(u=this.a*gi(l,p,h,c,Oe),e=Math.sqrt(t.x*t.x+t.y*t.y),d=e-u,s=Pi(d/this.a,l,p,h,c),r=so(this.long0+Math.atan2(t.x,t.y)),t.x=r,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),f=Ei(this.a,this.e,this.sin_p12),m=Math.cos(g),v=this.e*this.cos_p12*m,_=-v*v/(1-this.es),b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*m/(1-this.es),E=e/f,S=E-_*(1+_)*Math.pow(E,3)/6-b*(1+3*_)*Math.pow(E,4)/24,P=1-_*S*S/2-E*S*S*S/6,y=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*m),r=so(this.long0+Math.asin(Math.sin(g)*Math.sin(S)/Math.cos(y))),s=Math.atan((1-this.es*P*this.sin_p12/Math.sin(y))*Math.tan(y)/(1-this.es)),t.x=r,t.y=s,t)}function Ee(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Se(t){var e,o,i,n,r,s,a,l,p=t.x,h=t.y;return i=so(p-this.long0),e=Math.sin(h),o=Math.cos(h),n=Math.cos(i),s=this.sin_p14*e+this.cos_p14*o*n,r=1,(s>0||Math.abs(s)<=je)&&(a=this.a*r*o*Math.sin(i),l=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*o*n)),t.x=a,t.y=l,t}function Pe(t){var e,o,i,n,r,s,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),o=Ni(e/this.a),i=Math.sin(o),n=Math.cos(o),s=this.long0,Math.abs(e)<=je?(a=this.lat0,t.x=s,t.y=a,t):(a=Ni(n*this.sin_p14+t.y*i*this.cos_p14/e),r=Math.abs(this.lat0)-Oe,Math.abs(r)<=je?(s=so(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=a,t):(s=so(this.long0+Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i)),t.x=s,t.y=a,t))}function we(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Oe-Be/2?this.face=un.TOP:this.lat0<=-(Oe-Be/2)?this.face=un.BOTTOM:Math.abs(this.long0)<=Be?this.face=un.FRONT:Math.abs(this.long0)<=Oe+Be?this.face=this.long0>0?un.RIGHT:un.LEFT:this.face=un.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Ae(t){var e,o,i,n,r,s,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,o=t.x,this.face===un.TOP)n=Oe-e,o>=Be&&o<=Oe+Be?(l.value=dn.AREA_0,i=o-Oe):o>Oe+Be||o<=-(Oe+Be)?(l.value=dn.AREA_1,i=o>0?o-We:o+We):o>-(Oe+Be)&&o<=-Be?(l.value=dn.AREA_2,i=o+Oe):(l.value=dn.AREA_3,i=o);else if(this.face===un.BOTTOM)n=Oe+e,o>=Be&&o<=Oe+Be?(l.value=dn.AREA_0,i=-o+Oe):o<Be&&o>=-Be?(l.value=dn.AREA_1,i=-o):o<-Be&&o>=-(Oe+Be)?(l.value=dn.AREA_2,i=-o-Oe):(l.value=dn.AREA_3,i=o>0?-o+We:-o-We);else{var p,h,c,u,d,f,y;this.face===un.RIGHT?o=xe(o,+Oe):this.face===un.BACK?o=xe(o,+We):this.face===un.LEFT&&(o=xe(o,-Oe)),u=Math.sin(e),d=Math.cos(e),f=Math.sin(o),y=Math.cos(o),p=d*y,h=d*f,c=u,this.face===un.FRONT?(n=Math.acos(p),i=Me(n,c,h,l)):this.face===un.RIGHT?(n=Math.acos(h),i=Me(n,c,-p,l)):this.face===un.BACK?(n=Math.acos(-p),i=Me(n,c,-h,l)):this.face===un.LEFT?(n=Math.acos(-h),i=Me(n,c,p,l)):(n=i=0,l.value=dn.AREA_0)}return s=Math.atan(12/We*(i+Math.acos(Math.sin(i)*Math.cos(Be))-Oe)),r=Math.sqrt((1-Math.cos(n))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===dn.AREA_1?s+=Oe:l.value===dn.AREA_2?s+=We:l.value===dn.AREA_3&&(s+=1.5*We),a.x=r*Math.cos(s),a.y=r*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t}function Ce(t){var e,o,i,n,r,s,a,l,p,h={lam:0,phi:0},c={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,o=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?c.value=dn.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(c.value=dn.AREA_1,e-=Oe):t.x<0&&-t.x>=Math.abs(t.y)?(c.value=dn.AREA_2,e=e<0?e+We:e-We):(c.value=dn.AREA_3,e+=Oe),p=We/12*Math.tan(e),r=Math.sin(p)/(Math.cos(p)-1/Math.sqrt(2)),s=Math.atan(r),i=Math.cos(e),n=Math.tan(o),a=1-i*i*n*n*(1-Math.cos(Math.atan(1/Math.cos(s)))),a<-1?a=-1:a>1&&(a=1),this.face===un.TOP)l=Math.acos(a),h.phi=Oe-l,c.value===dn.AREA_0?h.lam=s+Oe:c.value===dn.AREA_1?h.lam=s<0?s+We:s-We:c.value===dn.AREA_2?h.lam=s-Oe:h.lam=s;else if(this.face===un.BOTTOM)l=Math.acos(a),h.phi=l-Oe,c.value===dn.AREA_0?h.lam=-s+Oe:c.value===dn.AREA_1?h.lam=-s:c.value===dn.AREA_2?h.lam=-s-Oe:h.lam=s<0?-s-We:-s+We;else{var u,d,f;u=a,p=u*u,f=p>=1?0:Math.sqrt(1-p)*Math.sin(s),p+=f*f,d=p>=1?0:Math.sqrt(1-p),c.value===dn.AREA_1?(p=d,d=-f,f=p):c.value===dn.AREA_2?(d=-d,f=-f):c.value===dn.AREA_3&&(p=d,d=f,f=-p),this.face===un.RIGHT?(p=u,u=-d,d=p):this.face===un.BACK?(u=-u,d=-d):this.face===un.LEFT&&(p=u,u=d,d=-p),h.phi=Math.acos(-f)-Oe,h.lam=Math.atan2(d,u),this.face===un.RIGHT?h.lam=xe(h.lam,-Oe):this.face===un.BACK?h.lam=xe(h.lam,-We):this.face===un.LEFT&&(h.lam=xe(h.lam,+Oe))}if(0!==this.es){var y,g,m;y=h.phi<0?1:0,g=Math.tan(h.phi),m=this.b/Math.sqrt(g*g+this.one_minus_f_squared),h.phi=Math.atan(Math.sqrt(this.a*this.a-m*m)/(this.one_minus_f*m)),y&&(h.phi=-h.phi)}return h.lam+=this.long0,t.x=h.lam,t.y=h.phi,t}function Me(t,e,o,i){var n;return t<je?(i.value=dn.AREA_0,n=0):(n=Math.atan2(e,o),Math.abs(n)<=Be?i.value=dn.AREA_0:n>Be&&n<=Oe+Be?(i.value=dn.AREA_1,n-=Oe):n>Oe+Be||n<=-(Oe+Be)?(i.value=dn.AREA_2,n=n>=0?n-We:n+We):(i.value=dn.AREA_3,n+=Oe)),n}function xe(t,e){var o=t+e;return o<-We?o+=Ve:o>+We&&(o-=Ve),o}var Ie=1,Re=2,Te=4,Le=5,Ge=484813681109536e-20,Oe=Math.PI/2,Ne=.16666666666666666,ke=.04722222222222222,De=.022156084656084655,je=1e-10,Fe=.017453292519943295,Ue=57.29577951308232,Be=Math.PI/4,Ve=2*Math.PI,We=3.14159265359,ze={};ze.greenwich=0,ze.lisbon=-9.131906111111,ze.paris=2.337229166667,ze.bogota=-74.080916666667,ze.madrid=-3.687938888889,ze.rome=12.452333333333,ze.bern=7.439583333333,ze.jakarta=106.807719444444,ze.ferro=-17.666666666667,ze.brussels=4.367975,ze.stockholm=18.058277777778,ze.athens=23.7163375,ze.oslo=10.722916666667;var He={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},qe=/[\s_\-\/\(\)]/g,Ye=function(e){var o,i,n,r={},s=e.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var o=e.split("=");return o.push(!0),t[o[0].toLowerCase()]=o[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*Fe},lat_1:function(t){r.lat1=t*Fe},lat_2:function(t){r.lat2=t*Fe},lat_ts:function(t){r.lat_ts=t*Fe},lon_0:function(t){r.long0=t*Fe},lon_1:function(t){r.long1=t*Fe},lon_2:function(t){r.long2=t*Fe},alpha:function(t){r.alpha=parseFloat(t)*Fe},lonc:function(t){r.longc=t*Fe},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(e){r.units=e;var o=t(He,e);o&&(r.to_meter=o.to_meter)},from_greenwich:function(t){r.from_greenwich=t*Fe},pm:function(e){var o=t(ze,e);r.from_greenwich=(o||parseFloat(e))*Fe},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)}};for(o in s)i=s[o],o in a?(n=a[o],"function"==typeof n?n(i):r[n]=i):r[o]=i;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r},Ke=1,Xe=/\s/,Ze=/[A-Za-z]/,Je=/[A-Za-z84]/,Qe=/[,\]]/,$e=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Xe.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Ke:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Qe.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Ke)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Ke,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if($e.test(t))return void(this.word+=t);if(Qe.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)},e.prototype.quoted=function(t){if('"'===t)return void(this.state=5);this.word+=t},e.prototype.keyword=function(t){if(Je.test(t))return void(this.word+=t);if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=Ke)}if(Qe.test(t))return void this.afterItem(t);throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place)},e.prototype.neutral=function(t){if(Ze.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if($e.test(t))return this.word=t,void(this.state=3);if(Qe.test(t))return void this.afterItem(t);throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place)},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var to=.017453292519943295,eo=function(t){var e=o(t),i=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",i]);var s={};return n(e,s),a(s),s}
;!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(l);var oo=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],io=function(t,e){t=t||{};var o,i;if(!e)return t;for(i in e)void 0!==(o=e[i])&&(t[i]=o);return t},no=function(t,e,o){var i=t*e;return o/Math.sqrt(1-i*i)},ro=function(t){return t<0?-1:1},so=function(t){return Math.abs(t)<=We?t:t-ro(t)*Ve},ao=function(t,e,o){var i=t*o,n=.5*t;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(Oe-e))/i},lo=function(t,e){for(var o,i,n=.5*t,r=Oe-2*Math.atan(e),s=0;s<=15;s++)if(o=t*Math.sin(r),i=Oe-2*Math.atan(e*Math.pow((1-o)/(1+o),n))-r,r+=i,Math.abs(i)<=1e-10)return r;return-9999},po=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],ho={init:f,forward:y,inverse:g,names:po},co=["longlat","identity"],uo={init:m,forward:v,inverse:v,names:co},fo=[ho,uo],yo={},go=[],mo={start:E,add:_,get:b},vo={};vo.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},vo.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},vo.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},vo.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},vo.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},vo.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},vo.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},vo.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},vo.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},vo.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},vo.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},vo.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},vo.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},vo.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},vo.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},vo.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},vo.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},vo.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},vo.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},vo.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},vo.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},vo.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},vo.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},vo.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},vo.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},vo.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},vo.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},vo.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},vo.hough={a:6378270,rf:297,ellipseName:"Hough"},vo.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},vo.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},vo.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},vo.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},vo.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},vo.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},vo.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},vo.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},vo.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},vo.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},vo.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},vo.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var _o=vo.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};vo.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var bo={};bo.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},bo.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},bo.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},bo.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},bo.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},bo.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},bo.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},bo.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},bo.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},bo.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},bo.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},bo.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},bo.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},bo.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},bo.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},bo.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},bo.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},A.projections=mo,A.projections.start();var Eo=function(t,e,o){return C(t,e)?o:t.datum_type===Le||e.datum_type===Le?o:t.es!==e.es||t.a!==e.a||T(t.datum_type)||T(e.datum_type)?(o=M(o,t.es,t.a),T(t.datum_type)&&(o=I(o,t.datum_type,t.datum_params)),T(e.datum_type)&&(o=R(o,e.datum_type,e.datum_params)),x(o,e.es,e.a,e.b)):o},So=function(t,e,o){var i,n,r,s=o.x,a=o.y,l=o.z||0,p={};for(r=0;r<3;r++)if(!e||2!==r||void 0!==o.z)switch(0===r?(i=s,n="x"):1===r?(i=a,n="y"):(i=l,n="z"),t.axis[r]){case"e":p[n]=i;break;case"w":p[n]=-i;break;case"n":p[n]=i;break;case"s":p[n]=-i;break;case"u":void 0!==o[n]&&(p.z=i);break;case"d":void 0!==o[n]&&(p.z=-i);break;default:return null}return p},Po=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},wo=function(t){L(t.x),L(t.y)},Ao=A("WGS84"),Co=6,Mo="AJSAJS",xo="AFAFAF",Io=65,Ro=73,To=79,Lo=86,Go=90,Oo={forward:j,inverse:F,toPoint:U};tt.fromMGRS=function(t){return new tt(U(t))},tt.prototype.toMGRS=function(t){return j([this.x,this.y],t)};var No=.01068115234375,ko=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*No))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*No)));var o=t*t;return e[2]=o*(.46875-t*(.013020833333333334+.007120768229166667*t)),o*=t,e[3]=o*(.3645833333333333-.005696614583333333*t),e[4]=o*t*.3076171875,e},Do=function(t,e,o,i){return o*=e,e*=e,i[0]*t-o*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))},jo=function(t,e,o){for(var i=1/(1-e),n=t,r=20;r;--r){var s=Math.sin(n),a=1-e*s*s;if(a=(Do(n,s,Math.cos(n),o)-t)*(a*Math.sqrt(a))*i,n-=a,Math.abs(a)<je)return n}return n},Fo=["Transverse_Mercator","Transverse Mercator","tmerc"],Uo={init:et,forward:ot,inverse:it,names:Fo},Bo=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Vo=function(t,e){t=Math.abs(t),e=Math.abs(e);var o=Math.max(t,e),i=Math.min(t,e)/(o||1);return o*Math.sqrt(1+Math.pow(i,2))},Wo=function(t){var e=1+t,o=e-1;return 0===o?t:t*Math.log(e)/o},zo=function(t){var e=Math.abs(t);return e=Wo(e*(1+e/(Vo(1,e)+1))),t<0?-e:e},Ho=function(t,e){for(var o,i=2*Math.cos(2*e),n=t.length-1,r=t[n],s=0;--n>=0;)o=i*r-s+t[n],s=r,r=o;return e+o*Math.sin(2*e)},qo=function(t,e){for(var o,i=2*Math.cos(e),n=t.length-1,r=t[n],s=0;--n>=0;)o=i*r-s+t[n],s=r,r=o;return Math.sin(e)*o},Yo=function(t){var e=Math.exp(t);return e=(e+1/e)/2},Ko=function(t,e,o){for(var i,n,r=Math.sin(e),s=Math.cos(e),a=Bo(o),l=Yo(o),p=2*s*l,h=-2*r*a,c=t.length-1,u=t[c],d=0,f=0,y=0;--c>=0;)i=f,n=d,f=u,d=y,u=p*f-i-h*d+t[c],y=h*f-n+p*d;return p=r*l,h=s*a,[p*u-h*y,p*y+h*u]},Xo=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],Zo={init:nt,forward:rt,inverse:st,names:Xo},Jo=function(t,e){if(void 0===t){if((t=Math.floor(30*(so(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t},Qo=["Universal Transverse Mercator System","utm"],$o={init:at,names:Qo,dependsOn:"etmerc"},ti=function(t,e){return Math.pow((1-t)/(1+t),e)},ei=20,oi=["gauss"],ii={init:lt,forward:pt,inverse:ht,names:oi},ni=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],ri={init:ct,forward:ut,inverse:dt,names:ni},si=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ai={init:yt,forward:gt,inverse:mt,names:si,ssfn_:ft},li=["somerc"],pi={init:vt,forward:_t,inverse:bt,names:li},hi=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],ci={init:Et,forward:St,inverse:Pt,names:hi},ui=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],di={init:wt,forward:At,inverse:Ct,names:ui},fi=["Krovak","krovak"],yi={init:Mt,forward:xt,inverse:It,names:fi},gi=function(t,e,o,i,n){return t*n-e*Math.sin(2*n)+o*Math.sin(4*n)-i*Math.sin(6*n)},mi=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},vi=function(t){return.375*t*(1+.25*t*(1+.46875*t))},_i=function(t){return.05859375*t*t*(1+.75*t)},bi=function(t){return t*t*t*(35/3072)},Ei=function(t,e,o){var i=e*o;return t/Math.sqrt(1-i*i)},Si=function(t){return Math.abs(t)<Oe?t:t-ro(t)*Math.PI},Pi=function(t,e,o,i,n){var r,s;r=t/e;for(var a=0;a<15;a++)if(s=(t-(e*r-o*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)))/(e-2*o*Math.cos(2*r)+4*i*Math.cos(4*r)-6*n*Math.cos(6*r)),r+=s,Math.abs(s)<=1e-10)return r;return NaN},wi=["Cassini","Cassini_Soldner","cass"],Ai={init:Rt,forward:Tt,inverse:Lt,names:wi},Ci=function(t,e){var o;return t>1e-7?(o=t*e,(1-t*t)*(e/(1-o*o)-.5/t*Math.log((1-o)/(1+o)))):2*e},Mi=.3333333333333333,xi=.17222222222222222,Ii=.10257936507936508,Ri=.06388888888888888,Ti=.0664021164021164,Li=.016415012942191543,Gi=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Oi={init:Gt,forward:Ot,inverse:Nt,names:Gi,S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Ni=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},ki=["Albers_Conic_Equal_Area","Albers","aea"],Di={init:jt,forward:Ft,inverse:Ut,names:ki,phi1z:Bt},ji=["gnom"],Fi={init:Vt,forward:Wt,inverse:zt,names:ji},Ui=function(t,e){var o=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-o)<1e-6)return e<0?-1*Oe:Oe;for(var i,n,r,s,a=Math.asin(.5*e),l=0;l<30;l++)if(n=Math.sin(a),r=Math.cos(a),s=t*n,i=Math.pow(1-s*s,2)/(2*r)*(e/(1-t*t)-n/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),a+=i,Math.abs(i)<=1e-10)return a;return NaN},Bi=["cea"],Vi={init:Ht,forward:qt,inverse:Yt,names:Bi},Wi=["Equirectangular","Equidistant_Cylindrical","eqc"],zi={init:Kt,forward:Xt,inverse:Zt,names:Wi},Hi=20,qi=["Polyconic","poly"],Yi={init:Jt,forward:Qt,inverse:$t,names:qi},Ki=["New_Zealand_Map_Grid","nzmg"],Xi={init:te,forward:ee,inverse:oe,names:Ki},Zi=["Miller_Cylindrical","mill"],Ji={init:ie,forward:ne,inverse:re,names:Zi},Qi=20,$i=["Sinusoidal","sinu"],tn={init:se,forward:ae,inverse:le,names:$i},en=["Mollweide","moll"],on={init:pe,forward:he,inverse:ce,names:en},nn=["Equidistant_Conic","eqdc"],rn={init:ue,forward:de,inverse:fe,names:nn},sn=["Van_der_Grinten_I","VanDerGrinten","vandg"],an={init:ye,forward:ge,inverse:me,names:sn},ln=["Azimuthal_Equidistant","aeqd"],pn={init:ve,forward:_e,inverse:be,names:ln},hn=["ortho"],cn={init:Ee,forward:Se,inverse:Pe,names:hn},un={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},dn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},fn=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],yn={init:we,forward:Ae,inverse:Ce,names:fn};return D.defaultDatum="WGS84",D.Proj=A,D.WGS84=new D.Proj("WGS84"),D.Point=tt,D.toPoint=Po,D.defs=l,D.transform=O,D.mgrs=Oo,D.version="2.4.4",function(t){t.Proj.projections.add(Uo),t.Proj.projections.add(Zo),t.Proj.projections.add($o),t.Proj.projections.add(ri),t.Proj.projections.add(ai),t.Proj.projections.add(pi),t.Proj.projections.add(ci),t.Proj.projections.add(di),t.Proj.projections.add(yi),t.Proj.projections.add(Ai),t.Proj.projections.add(Oi),t.Proj.projections.add(Di),t.Proj.projections.add(Fi),t.Proj.projections.add(Vi),t.Proj.projections.add(zi),t.Proj.projections.add(Yi),t.Proj.projections.add(Xi),t.Proj.projections.add(Ji),t.Proj.projections.add(tn),t.Proj.projections.add(on),t.Proj.projections.add(rn),t.Proj.projections.add(an),t.Proj.projections.add(pn),t.Proj.projections.add(cn),t.Proj.projections.add(yn)}(D),D}),n=function(t){return{isLoaded:!1,get:function(t){if(""!==t&&null!==t&&void 0!==t){var e=t.split(":");if(2===e.length){var o=e[0],i=e[1];if(this.hasOwnProperty(o)&&this[o].hasOwnProperty(i))return this[o][i]}}},load:function(){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],o=0;o<e.length;o++){var i=e[o],n=this[i];for(var r in n)if(n.hasOwnProperty(r)){var s=i+":"+r;t.defs(s,this.get(s))}}this.isLoaded=!0}},EPSG:{4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",
32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",
RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",REUN47GAUSSL:"+title=Reunion Gauss Laborde +proj=gstmerc +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-21.116666667 +lon_0=55.533333333 +k_0=1.00000000 +x_0=160000.000 +y_0=50000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}}}(proj4),r=function(t){return{proxifyUrl:function(t,e){if(!e||!e.hasOwnProperty("proxyUrl")||null===e.proxyUrl||0==e.proxyUrl.trim().length)return t;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0)for(var o in e.noProxyDomains)if(-1!==t.indexOf(e.noProxyDomains[o]))return t;return e.proxyUrl+encodeURIComponent(t)}}}(),s=function(t,o,i,n){return{getLayerFormat:function(e){var o=e.getSource();return o instanceof t.source.TileWMS||o instanceof t.source.ImageWMS?"wms":o instanceof t.source.WMTS?"wmts":o instanceof t.source.Vector?"vector":"unknown"},displayInfo:function(o,i,n,r,s){if(r||(r="text/html"),null!==n){var a=null,l=null,p=n;p=p.replace(/\n/g,""),p=p.replace(/(>)\s*(<)/g,"$1$2");var h="undefined"!=typeof window?window:null;if("object"==typeof exports&&null===window){l=new(0,e.DOMParser),a=l.parseFromString(p,r)}else if(h.DOMParser)l=new h.DOMParser,a=l.parseFromString(p,r);else{if(!h.ActiveXObject)return console.log("Incompatible environment for DOM Parser !"),!1;a=new h.ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(p)}var c=a.getElementsByTagName("body");if(c&&1===c.length&&!c[0].hasChildNodes())return!1;var u=document.createElement("div");u.className="gp-feature-info-div";var d=document.createElement("input");d.type="button",d.className="gp-styling-button closer",d.onclick=function(){return o.featuresOverlay&&(o.removeOverlay(o.featuresOverlay),o.featuresOverlay=null),!1};var f=document.createElement("div");return f.className="gp-features-content-div",f.innerHTML=n,u.appendChild(f),u.appendChild(d),o.featuresOverlay&&(o.removeOverlay(o.featuresOverlay),o.featuresOverlay=null),o.featuresOverlay=new t.Overlay({element:u,autoPan:s.autoPan,autoPanAnimation:s.autoPanAnimation,autoPanMargin:s.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),o.addOverlay(o.featuresOverlay),o.featuresOverlay.setPosition(i),o.featuresOverlay.render(),!0}},features2html:function(t,e){var o=document.createElement("div");return e.forEach(function(t){var e=t.getProperties();if(e.hasOwnProperty("name")){var i=document.createElement("div");i.className="gp-att-name-div",i.insertAdjacentHTML("afterbegin",e.name),o.appendChild(i)}if(e.hasOwnProperty("description")){var n=document.createElement("div");n.className="gp-att-description-div",n.insertAdjacentHTML("afterbegin",e.description),o.appendChild(n)}var r=null,s=!1,a=null,l=null,p=null;for(r in e)if("geometry"!=r&&"value"!=r&&"name"!=r&&"description"!=r&&"styleUrl"!=r&&("extensionsNode_"!=r||void 0!==e[r])){s||(a=document.createElement("div"),a.className="gp-att-others-div",l=document.createElement("ul"),s=!0),p=document.createElement("li");var h=document.createElement("span");h.className="gp-attname-others-span",h.appendChild(document.createTextNode(r+" : ")),p.appendChild(h),p.appendChild(document.createTextNode(e[r])),l.appendChild(p)}l&&(a.appendChild(l),o.appendChild(a))},t),o.hasChildNodes()||(o=null),o},layerGetFeatureAtCoordinates:function(t,e,o){var i=t.getPixelFromCoordinate(o);return t.hasFeatureAtPixel(i,function(t){return t===e})},displayVectorFeatureInfo:function(t,e,o,i){var n=t.getPixelFromCoordinate(e),r=[];if(t.forEachFeatureAtPixel(n,function(t,e){(!o||o.indexOf(e)>-1)&&r.push(t)}),0==r.length)return!1;var s=this.features2html(t,r);return null!==s&&(this.displayInfo(t,e,s.innerHTML,"text/html",i),!0)},displayFeatureInfo:function(t,e,i,r,s){for(var a={},l=0;l<i.length;l++){var p=i[l],h=p.obj.getZIndex();a[h]||(a[h]=[]),a[h].push(p)}var c=[],u=Object.keys(a);u.sort(function(t,e){return e-t});for(var d=0;d<u.length;d++)for(var f=u[d],y=0;y<a[f].length;++y){var g=a[f][y].obj,m=a[f][y].infoFormat||"text/html",v=!0;if(g.minResolution&&g.minResolution>t.getResolution()&&(v=!1),v&&g.maxResolution&&g.maxResolution<t.getResolution()&&(v=!1),g.getVisible()&&v){var _=this.getLayerFormat(g);if("vector"==_){this.layerGetFeatureAtCoordinates(t,g,e)&&c.push({format:_,scope:this,coordinate:e});continue}if("wms"!=_&&"wmts"!=_){console.log("[ERROR] DisplayFeatureInfo - layer format '"+_+"' not allowed");continue}var b=t.getView().getResolution(),E=null;E="wmts"==_?g.getSource().getGetFeatureInfoUrl(e,b,t.getView().getProjection(),{INFOFORMAT:m}):g.getSource().getGetFeatureInfoUrl(e,b,t.getView().getProjection(),{INFO_FORMAT:m}),c.push({format:m,url:n.proxifyUrl(E,r),scope:this,coordinate:e})}}var S=null,P=this;!function(t,e,o){function i(r){n++,r||n===t.length?o():e(t[n],i)}if(0!==t.length){var n=0;e(t[0],i)}}(c,function(e,i){if("vector"==e.format){if(!S){S=[];for(var n=0;n<u.length;n++)for(var r=u[n],l=0;l<a[r].length;++l)S.push(a[r][l].obj)}i(e.scope.displayVectorFeatureInfo(t,e.coordinate,S,s))}else o.Protocols.XHR.call({url:e.url,method:"GET",scope:e.scope,onResponse:function(o){var n=!1;0!==o.trim().length&&-1===o.indexOf("java.lang.NullPointerException")&&-1===o.indexOf("not queryable")||(n=!0);var r=!n&&P.displayInfo(t,e.coordinate,o,"text/html",s);i(r)},onFailure:function(t){console.log(t),i(!1)}})},function(){})},getPosition:function(t,e){if(t.coordinate)return t.coordinate;var o=[0,0];if(t.offsetX||t.offsetY)o[0]=t.offsetX,o[1]=t.offsetY;else if("touch"===t.pointerType){var i=t.pointers[0];o[0]=i.pageX,o[1]=i.pageY}return e.getCoordinateFromPixel(o)},onDisplayFeatureInfo:function(e,o){if(o.isActive()){var i=o.getMap();if("contextmenu"==e.type||"dblclick"==e.type)e.preventDefault();else if("singleclick"==e.type)for(var n=i.getInteractions().getArray(),r=0;r<n.length;r++)if(n[r].getActive()&&(n[r]instanceof t.interaction.Select||n[r]instanceof t.interaction.Modify||n[r]instanceof t.interaction.Draw))return;var s={};o._proxyUrl&&(s.proxyUrl=o._proxyUrl),o._noProxyDomains&&(s.noProxyDomains=o._noProxyDomains);var a={};o._autoPan&&(a.autoPan=o._autoPan),o._autoPanAnimation&&(a.autoPanAnimation=o._autoPanAnimation),o._autoPanMargin&&(a.autoPanMargin=o._autoPanMargin);for(var l=[],p=0;p<o._layers.length;++p){if((o._layers[p].event?o._layers[p].event:o._defaultEvent)==e.type){var h=l.push(o._layers[p])-1;l[h].infoFormat||(l[h].infoFormat=o._defaultInfoFormat)}}var c=this.getPosition(e,i);this.displayFeatureInfo(i,c,l,s,a)}}}}(t,o,0,r),a=function(){return{detectSupport:function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("iphone")&&-1===e.indexOf("ipod")&&-1===e.indexOf("ipad")&&-1===e.indexOf("android")&&-1===e.indexOf("mobile")&&-1===e.indexOf("blackberry")&&-1===e.indexOf("tablet")&&-1===e.indexOf("phone")&&-1===e.indexOf("touch")||(t=!1),-1===e.indexOf("msie")&&-1===e.indexOf("trident")||(t=!0),t},assign:function(t,e){t=t||{};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},mergeParams:function(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&("object"==typeof e[o]&&t.hasOwnProperty(o)?this.mergeParams(t[o],e[o]):t[o]=e[o])}}}(),l=function(t,o,i){function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");o.format.KML.call(this,t),this.options=t||{}}function r(t){var e=/(>)\s*(<)(\/*)/g,o=/ *(.*) +\n/g,i=/(<.+>)(.+\n)/g;t=t.replace(e,"$1\n$2$3").replace(o,"$1\n").replace(i,"$1\n$2");for(var n="",r=t.split("\n"),s=0,a="other",l={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},p=0;p<r.length;p++){var h=r[p],c=Boolean(h.match(/<.+\/>/)),u=Boolean(h.match(/<\/.+>/)),d=Boolean(h.match(/<[^!].*>/)),f=c?"single":u?"closing":d?"opening":"other",y=a+"->"+f;a=f;var g="";s+=l[y];for(var m=0;m<s;m++)g+="\t";"opening->closing"==y?n=n.substr(0,n.length-1)+h+"\n":n+=g+h+"\n"}return n}function s(t){var o=null,i=null,n="undefined"!=typeof window?window:null;if("object"==typeof exports&&null===window){i=new(0,e.DOMParser),o=i.parseFromString(t,"text/xml")}else n.DOMParser?(i=new n.DOMParser,o=i.parseFromString(t,"text/xml")):n.ActiveXObject?(o=new n.ActiveXObject("Microsoft.XMLDOM"),o.async=!1,o.loadXML(t)):console.log("Incompatible environment for DOM Parser !");return o}function a(t){return(new XMLSerializer).serializeToString(t)}function l(t,e,o){var i=t.documentElement,n=i.childNodes,r=n;1===n.length&&"Document"===n[0].nodeName&&(r=n[0].childNodes);for(var s={},a=-1,l=0;l<r.length;l++){var p=r[l];switch(p.nodeName){case"Style":var h=p.attributes[0];if(h&&"id"===h.nodeName){var c=h.nodeValue,u=p;s[c]=u}break;case"Placemark":a++;for(var d=p.childNodes,f=!1,y=null,g=null,m=p,v=0;v<d.length;v++)switch(d[v].nodeName){case"Point":f=!0;break;case"Style":y=d[v].childNodes;break;case"styleUrl":var _=d[v].textContent.slice(1);s[_]&&(y=s[_].childNodes);break;case"ExtendedData":g=d[v].childNodes;break;case"name":m=null}if(g){var b=o.extendedData;b&&"function"==typeof b&&b(e[a],g)}if(m){var E=o.nameData;E&&"function"==typeof E&&E(e[a],m)}if(f&&y&&y.length){for(var S=null,P=null,w=0;w<y.length;w++)switch(y[w].nodeName){case"LabelStyle":S=y[w];break;case"IconStyle":P=y[w]}e[a].getProperties().name,e[a].getProperties().description;if(!P&&S){var A=o.labelStyle;A&&"function"==typeof A&&A(e[a],S)}else if(P&&!S){var C=o.iconStyle;C&&"function"==typeof C&&C(e[a],P)}else if(P&&S){var M=o.iconLabelStyle;M&&"function"==typeof M&&M(e[a],P,S)}}}}}return o.inherits(n,o.format.KML),n.prototype=Object.create(o.format.KML.prototype,{}),n.prototype.constructor=n,n.prototype.writeFeatures=function(t,e){return this._writeExtendStylesFeatures(t,e)},n.prototype._writeExtendStylesFeatures=function(t,e){var i=o.format.KML.prototype.writeFeatures.call(this,t,e),n=s(i);if(null===n)return i;var p=function(t,e){function i(t){var e=t.toString(16);"#"===e.charAt(0)&&(e=e.slice(1));var o=1;o=parseInt(255*o,10),o=o.toString(16);var i=o;return i+=e.substr(4,2),i+=e.substr(2,2),i+=e.substr(0,2),i.toLowerCase()}if(t){if(t.getProperties().name&&t.getStyle()instanceof o.style.Style){var r=t.getStyle().getText().getStroke();if(!r)return;var s=i(r.getColor())||i("#FFFFFF"),a=r.getWidth()||"0";if(e&&0===e.getElementsByTagName("LabelStyleSimpleExtensionGroup").length){var l=n.createElement("LabelStyleSimpleExtensionGroup");l.setAttribute("fontFamily","Sans"),l.setAttribute("haloColor",s),l.setAttribute("haloRadius",a),l.setAttribute("haloOpacity","1"),e.appendChild(l)}}}},h=function(t,e){if(t&&t.getStyle()instanceof o.style.Style){var i=t.getStyle().getImage();if(!i)return;var r=0,s=0,a=i.getSize(),l=i.getAnchor();if(l.length&&(r=l[0],s=l[1],s=l[1]===a[1]?0:a[1]-l[1]),e&&0===e.getElementsByTagName("hotSpot").length){var p=n.createElement("hotSpot");p.setAttribute("x",r),p.setAttribute("y",s),p.setAttribute("xunits","pixels"),p.setAttribute("yunits","pixels"),e.appendChild(p)}}};l(n,t,{labelStyle:p,iconStyle:h,iconLabelStyle:function(t,e,o){h(t,e),p(t,o)},nameData:function(t,e){for(var o=0;o<e.length;o++)if("name"===e[o].nodeName)return;var i=t.getProperties().name;if(i){var r=n.createElement("name");r.innerHTML=i,e.appendChild(r)}}});var c=a(n);null===c&&(c=i);var u=r(c);return null===u&&(u=i),u},n.prototype.readFeatures=function(t,e){return this._readExtendStylesFeatures(t,e)},n.prototype._readExtendStylesFeatures=function(t,e){var n=o.format.KML.prototype.readFeatures.call(this,t,e),r=null,a="";if(a="string"==typeof t?t:t.documentElement.outerHTML,a=a.replace(/\n/g,""),a=a.replace(/(>)\s*(<)/g,"$1$2"),null===(r=s(a)))return n;var p=function(t,e){function i(t){var e="";e+=t.substr(6,2),e+=t.substr(4,2),e+=t.substr(2,2);for(var o=parseInt(e,16).toString(16),i="",n=o.length||0,r=0;r<6-n;r++)i+="0";return o="#"+i+o,o.toString(16)}if(t){for(var n=t.getProperties().name||"---",r=i("ff000000"),s="#FFFFFF",a=0,l=!1,p=e.childNodes,h=0;h<p.length;h++)switch(p[h].nodeName){case"scale":case"colorMode":break;case"color":r=i(p[h].textContent);break;case"LabelStyleSimpleExtensionGroup":l=!0;for(var c=p[h].attributes,u=0;u<c.length;u++)switch(c[u].nodeName){case"fontFamily":break;case"haloColor":s=i(c[u].nodeValue);break;case"haloRadius":a=parseInt(c[u].nodeValue,10)}}l&&t.setStyle(new o.style.Style({image:new o.style.Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),text:new o.style.Text({font:"16px Sans",textAlign:"left",text:n,fill:new o.style.Fill({color:r}),stroke:new o.style.Stroke({color:s,width:a})})}))}},h=function(t,e){for(var n=null,r=null,s=!1,a=51,l=38,p=!1,h=25.5,c="pixels",u=38,d="pixels",f=e.childNodes,y=0;y<f.length;y++)switch(f[y].nodeName){case"Icon":for(var g=f[y].childNodes,m=0;m<g.length;m++)switch(g[m].nodeName){case"href":n=g[m].textContent;break;case"gx:w":s=!0,a=parseFloat(g[m].textContent);break;case"gx:h":s=!0,l=parseFloat(g[m].textContent)}break;case"hotSpot":p=!0;for(var v=f[y].attributes,_=0;_<v.length;_++)switch(v[_].nodeName){case"x":h=parseFloat(v[_].nodeValue);break;case"y":u=parseFloat(v[_].nodeValue);break;case"yunits":c=v[_].nodeValue;break;case"xunits":d=v[_].nodeValue}break;case"scale":r=parseFloat(f[y].textContent)}var b={src:n,crossOrigin:"anonymous",scale:r||1};s&&i.mergeParams(b,{size:[a,l]}),p&&i.mergeParams(b,{anchor:[h,u],anchorOrigin:"bottom-left",anchorXUnits:c||"pixels",anchorYUnits:d||"pixels"});var E=t.getStyleFunction();if(E){var S=E.call(t,0);if(S&&0!==S.length){var P=1===S.length?S[0]:S[S.length-1];t.setStyle(new o.style.Style({image:new o.style.Icon(b),text:P.getText()}))}}},c=function(t,e){if(t){for(var o=t.getProperties().name||"",i=t.getProperties().description||"",n=null,r=0;r<e.length;r++){var s=e[r],a=s.attributes[0],l=s.childNodes;if("name"===a.nodeName)switch(a.nodeValue){case"label":o=s.textContent;break;case"title":case"attributetitle":for(var p=0;p<l.length;p++)"value"===l[p].nodeName&&(n=l[p].textContent)}}n&&(i=i?n+" : "+i:n),t.setProperties({name:o,description:i})}},u=function(t,e,o){p(t,o),h(t,e)};return l(r,n,{labelStyle:this.options.showPointNames?p:null,iconStyle:h,iconLabelStyle:this.options.showPointNames?u:h,extendedData:c}),n},n}(0,t,a),p=function(t,e,o){function i(t){if(!(this instanceof i))throw new TypeError("ERROR CLASS_CONSTRUCTOR");e.source.WMTS.call(this,t)}return e.inherits(i,e.source.WMTS),i.prototype=Object.create(e.source.WMTS.prototype,{}),i.prototype.constructor=i,i.prototype.getGetFeatureInfoUrl=function(i,n,r,s){var a=this.option&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,l=this.tileGrid,p=this.tileGrid.getTileCoordForCoordAndResolution(i,n),h=l.getTileCoordExtent(p),c=function(t,o,i){var n=[0,0,0],r=e.extent.createEmpty(),s=t[1],a=-t[2]-1,l=o.getTileCoordExtent(t),p=i.getExtent(),h=p;if(null!=h&&i.isGlobal()&&h[0]===p[0]&&h[2]===p[2]){s%=Math.ceil(e.extent.getWidth(h)/e.extent.getWidth(l)),n[0]=t[0],n[1]=s,n[2]=t[2],l=o.getTileCoordExtent(n,r)}return e.extent.intersects(l,h)?[t[0],s,a]:null}(p,l,r);if(!(l.getResolutions().length<=p[0])){var u=l.getResolution(p[0]),d=l.getMatrixIds()[p[0]],f={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:c[1],TILEROW:c[2],TILEMATRIX:d,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};o.assign(f,s);var y=Math.floor((i[0]-h[0])/(u/a)),g=Math.floor((h[3]-i[1])/(u/a));f.I=y,f.J=g;var m=this.urls[0];return t.Helper.normalyzeUrl(m,f)}},i}(o,t,a),h=function(t,e,o){return function(){o.load(),!e.proj.proj4_&&e.proj.setProj4?e.proj.setProj4(t):console.log("WARNING : OpenLayers library should manage proj4 dependency in order to add custom projections (Lambert 93 for instance)")}(),{overloadTransformExtent:function(){e.proj.transformExtent=function(t,o,i){"EPSG:2154"===i&&"EPSG:4326"===o&&(t[0]<-9.62&&(t[0]=-9.62),t[1]<41.18&&(t[1]=41.18),t[2]>10.3&&(t[2]=10.3),t[3]>51.54&&(t[3]=51.54));var n=e.proj.getTransform(o,i);return e.extent.applyTransform(t,n)}},overload:function(){this.overloadTransformExtent()}}}(proj4,t,n),c=function(){return{configuration:null,isConfigLoaded:function(){var t="undefined"!=typeof window?window:{};return!(!t.Gp||!t.Gp.Config||0===Object.keys(t.Gp.Config).length)&&(this.configuration=t.Gp.Config,!0)},getLayerId:function(t,e){var o=null;if(this.configuration){var i=this.configuration.layers;for(var n in i)if(i.hasOwnProperty(n)){var r=n.split("$");if(t===r[0]&&r[1]){var s=r[1].split(":"),a=r[1].split(";");if(a[1]===e){o=n;break}if(s[2]===e){o=n;break}}}}return o||console.log("ERROR layer id ("+t+" / "+e+") was not found !?"),o},getLayerParams:function(t,e,o){var i={};if(this.configuration){var n=this.getLayerId(t,e);if(n){var r=this.configuration.layers[n],s=r.apiKeys[0];if(o&&o!==s)return void console.log("ERROR different keys ("+o+" !== "+s+") !?");o=o||s,i.key=o,i.url=r.getServerUrl(o),i.version=r.getServiceParams().version,i.styles=r.getDefaultStyle(),i.format=r.getDefaultFormat(),i.projection=r.getDefaultProjection(),i.minScale=r.getMinScaleDenominator(),i.maxScale=r.getMaxScaleDenominator(),i.extent=r.getBBOX(),i.legends=r.getLegends(),i.metadata=r.getMetadata(),i.originators=r.getOriginators(),i.title=r.getTitle(),i.description=r.getDescription(),i.quicklookUrl=r.getQuicklookUrl(),r.wmtsOptions&&(i.tileMatrixSetLimits=r.wmtsOptions.tileMatrixSetLimits);var a=r.getTMSID();if(a){i.TMSLink=a;var l=this.configuration.getTMSConf(a);i.matrixOrigin=l.getTopLeftCorner(),i.nativeResolutions=l.nativeResolutions,i.matrixIds=l.matrixIds,i.tileMatrices=l.tileMatrices}}}return i},getServiceParams:function(t,e,o){var i={};if(this.configuration){var n=this.getLayerId(t,e);if(n){var r=this.configuration.layers[n],s=r.apiKeys[0];if(o&&o!==s)return;o=o||s,i.key=o,i.url=r.getServerUrl(o),i.version=r.getServiceParams().version,i.extent=r.getBBOX(),i.title=r.getTitle(),i.description=r.getDescription()}}return i},getResolutions:function(){var t=[];return this.configuration&&(t=this.configuration.generalOptions.wgs84Resolutions),t},getTileMatrix:function(t){var e={};return this.configuration&&t&&(e=this.configuration.tileMatrixSets[t.toUpperCase()]),e},getGlobalConstraints:function(t){var e={};if(t){var o=this.configuration.layers[t];e.projection=o.getDefaultProjection(),e.minScale=o.getMinScaleDenominator(),e.maxScale=o.getMaxScaleDenominator(),e.extent=o.getBBOX()}return e}}}(),u=function(t,e,o,i,n,r,s){function a(i){if(!(this instanceof a))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!i.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof i.layer)throw new Error("ERROR WRONG TYPE : layer");if(!r.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var l=r.getLayerId(i.layer,"WMTS");if(!l||!r.configuration.getLayerConf(l))return console.log("[source WMTS] ERROR : "+i.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new e({});var p=r.getLayerParams(i.layer,"WMTS",i.apiKey);this._originators=p.originators,this._legends=p.legends,this._metadata=p.metadata;var h={url:o.Helper.normalyzeUrl(p.url,{"gp-ol3-ext":"1.0.0"},!1),version:p.version,style:p.styles,format:p.format,projection:p.projection,maxZoom:s.getZoomLevelFromScaleDenominator(p.minScale),layer:i.layer,matrixSet:p.TMSLink,tileGrid:new t.tilegrid.WMTS({resolutions:p.nativeResolutions,matrixIds:p.matrixIds,origin:[p.matrixOrigin.x,p.matrixOrigin.y]})};n.mergeParams(h,i.olParams),e.call(this,h),this._originators=p.originators,this._legends=p.legends,this._metadata=p.metadata,this._description=p.description,this._title=p.title,this._quicklookUrl=p.quicklookUrl}return t.inherits(a,e),a.prototype=Object.create(e.prototype,{}),
a.prototype.constructor=a,a}(t,p,o,0,a,c,i),d=function(t,e,o,i){function n(r){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!r.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof r.layer)throw new Error("ERROR WRONG TYPE : layer");if(!i.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var s=i.getLayerId(r.layer,"WMS");if(!s||!i.configuration.getLayerConf(s))return console.log("[source WMS] ERROR : "+r.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new t.source.TileWMS({});var a=i.getLayerParams(r.layer,"WMS",r.apiKey),l={url:e.Helper.normalyzeUrl(a.url,{"gp-ol3-ext":"1.0.0"},!1),params:{SERVICE:"WMS",LAYERS:r.layer,VERSION:a.version,STYLES:a.styles,FORMAT:a.format}};o.mergeParams(l,r.olParams),t.source.TileWMS.call(this,l),this._originators=a.originators,this._legends=a.legends,this._metadata=a.metadata,this._title=a.title,this._description=a.description,this._quicklookUrl=a.quicklookUrl}return t.inherits(n,t.source.TileWMS),n.prototype=Object.create(t.source.TileWMS.prototype,{}),n.prototype.constructor=n,n}(t,o,a,c),f=function(t,e,o,i,n){function r(i){if(!(this instanceof r))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!i.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof i.layer)throw new Error("ERROR WRONG TYPE : layer");if(!o.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var s;i.olParams&&i.olParams.sourceParams&&(s=i.olParams.sourceParams);var a=new n({layer:i.layer,apiKey:i.apiKey,olParams:s}),l={source:a};if(void 0!==a.getLayer()){var p=o.getLayerId(i.layer,"WMTS"),h=o.getGlobalConstraints(p);if(h&&h.projection){var c;"string"==typeof h.projection&&(c=t.proj.get(h.projection)),c&&c.getUnits()&&("m"===c.getUnits()?(l.minResolution=28e-5*(h.minScale-1),l.maxResolution=28e-5*(h.maxScale+1)):"degrees"===c.getUnits()&&(l.minResolution=28e-5*(h.minScale-1)*180/(6378137*Math.PI),l.maxResolution=28e-5*(h.maxScale+1)*180/(6378137*Math.PI)))}}e.mergeParams(l,i.olParams),t.layer.Tile.call(this,l)}return t.inherits(r,t.layer.Tile),r.prototype=Object.create(t.layer.Tile.prototype,{}),r.prototype.constructor=r,r}(t,a,c,0,u),y=function(t,e,o,i,n){function r(i){if(!(this instanceof r))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!i.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof i.layer)throw new Error("ERROR WRONG TYPE : layer");if(!o.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var s;i.olParams&&i.olParams.sourceParams&&(s=i.olParams.sourceParams);var a=new n({layer:i.layer,apiKey:i.apiKey,olParams:s}),l={source:a};if(void 0!==a.getParams().LAYERS){var p=o.getLayerId(i.layer,"WMS"),h=o.getGlobalConstraints(p);if(s&&s.projection){var c=[h.extent.left,h.extent.bottom,h.extent.right,h.extent.top];l.extent=t.proj.transformExtent(c,"EPSG:4326",s.projection);var u;"string"==typeof s.projection?u=t.proj.get(s.projection):"object"==typeof s.projection&&s.projection.getCode()&&(u=t.proj.get(s.projection.getCode())),u&&u.getUnits()&&("m"===u.getUnits()?(l.minResolution=28e-5*(h.minScale-1),l.maxResolution=28e-5*(h.maxScale+1)):"degrees"===u.getUnits()&&(l.minResolution=28e-5*(h.minScale-1)*180/(6378137*Math.PI),l.maxResolution=28e-5*(h.maxScale+1)*180/(6378137*Math.PI)))}}e.mergeParams(l,i.olParams),t.layer.Tile.call(this,l)}return t.inherits(r,t.layer.Tile),r.prototype=Object.create(t.layer.Tile.prototype,{}),r.prototype.constructor=r,r}(t,a,c,0,d),g=function(){return{generate:function(){var t=Math.floor(Date.now());return function(){return t++}}(),name:function(t){var e=t.lastIndexOf("-");return-1===e?t:t.substring(0,e)},index:function(t){var e=null,o=this.name(t),i=o.lastIndexOf("_");return-1!==i&&(e=o.substring(i+1)),e},uuid:function(t){var e=null,o=t.lastIndexOf("-");return-1!==o&&(e=parseInt(t.substring(o+1),10)),e}}}(),function(t){"use strict";m=function(){return"function"==typeof t?t():t}()}(function(){"use strict";function t(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=m({},e),t[D]=this;var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in o)!(i in e)&&(e[i]=o[i]);Y(e);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&B,n(t,"mousedown",this._onTapStart),n(t,"touchstart",this._onTapStart),this.nativeDraggable&&(n(t,"dragover",this),n(t,"dragenter",this)),H.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){E&&E.state!==t&&(a(E,"display",t?"none":""),!t&&E.state&&S.insertBefore(E,v),E.state=t)}function o(t,e,o){if(t){o=o||F,e=e.split(".");var i=e.shift().toUpperCase(),n=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");do{if(">*"===i&&t.parentNode===o||(""===i||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(n)||[]).length==e.length))return t}while(t!==o&&(t=t.parentNode))}return null}function i(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.preventDefault()}function n(t,e,o){t.addEventListener(e,o,!1)}function r(t,e,o){t.removeEventListener(e,o,!1)}function s(t,e,o){if(t)if(t.classList)t.classList[o?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(k," ").replace(" "+e+" "," ");t.className=(i+(o?" "+e:"")).replace(k," ")}}function a(t,e,o){var i=t&&t.style;if(i){if(void 0===o)return F.defaultView&&F.defaultView.getComputedStyle?o=F.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in i||(e="-webkit-"+e),i[e]=o+("string"==typeof o?"":"px")}}function l(t,e,o){if(t){var i=t.getElementsByTagName(e),n=0,r=i.length;if(o)for(;n<r;n++)o(i[n],n);return i}return[]}function p(t,e,o,i,n,r,s){var a=F.createEvent("Event"),l=(t||e[D]).options,p="on"+o.charAt(0).toUpperCase()+o.substr(1);a.initEvent(o,!0,!0),a.to=e,a.from=n||e,a.item=i||e,a.clone=E,a.oldIndex=r,a.newIndex=s,e.dispatchEvent(a),l[p]&&l[p].call(t,a)}function h(t,e,o,i,n,r){var s,a,l=t[D],p=l.options.onMove;return s=F.createEvent("Event"),s.initEvent("move",!0,!0),s.to=e,s.from=t,s.dragged=o,s.draggedRect=i,s.related=n||e,s.relatedRect=r||e.getBoundingClientRect(),t.dispatchEvent(s),p&&(a=p.call(l,s)),a}function c(t){t.draggable=!1}function u(){W=!1}function d(t,e){var o=t.lastElementChild,i=o.getBoundingClientRect();return(e.clientY-(i.top+i.height)>5||e.clientX-(i.right+i.width)>5)&&o}function f(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,i=0;o--;)i+=e.charCodeAt(o);return i.toString(36)}function y(t){var e=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function g(t,e){var o,i;return function(){void 0===o&&(o=arguments,i=this,setTimeout(function(){1===o.length?t.call(i,o[0]):t.apply(i,o),o=void 0},e))}}function m(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}var v,_,b,E,S,P,w,A,C,M,x,I,R,T,L,G,O,N={},k=/\s+/g,D="Sortable"+(new Date).getTime(),j=window,F=j.document,U=j.parseInt,B=!!("draggable"in F.createElement("div")),V=function(t){return t=F.createElement("x"),t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),W=!1,z=Math.abs,H=[],q=g(function(t,e,o){if(o&&e.scroll){var i,n,r,s,a=e.scrollSensitivity,l=e.scrollSpeed,p=t.clientX,h=t.clientY,c=window.innerWidth,u=window.innerHeight;if(A!==o&&(w=e.scroll,A=o,!0===w)){w=o;do{if(w.offsetWidth<w.scrollWidth||w.offsetHeight<w.scrollHeight)break}while(w=w.parentNode)}w&&(i=w,n=w.getBoundingClientRect(),r=(z(n.right-p)<=a)-(z(n.left-p)<=a),s=(z(n.bottom-h)<=a)-(z(n.top-h)<=a)),r||s||(r=(c-p<=a)-(p<=a),s=(u-h<=a)-(h<=a),(r||s)&&(i=j)),N.vx===r&&N.vy===s&&N.el===i||(N.el=i,N.vx=r,N.vy=s,clearInterval(N.pid),i&&(N.pid=setInterval(function(){i===j?j.scrollTo(j.pageXOffset+r*l,j.pageYOffset+s*l):(s&&(i.scrollTop+=s*l),r&&(i.scrollLeft+=r*l))},24)))}},30),Y=function(t){var e=t.group;e&&"object"==typeof e||(e=t.group={name:e}),["pull","put"].forEach(function(t){t in e||(e[t]=!0)}),t.groups=" "+e.name+(e.put.join?" "+e.put.join(" "):"")+" "};return t.prototype={constructor:t,_onTapStart:function(t){var e=this,i=this.el,n=this.options,r=t.type,s=t.touches&&t.touches[0],a=(s||t).target,l=a,h=n.filter;if(!("mousedown"===r&&0!==t.button||n.disabled)&&(a=o(a,n.draggable,i))){if(I=y(a),"function"==typeof h){if(h.call(this,t,a,this))return p(e,l,"filter",a,i,I),void t.preventDefault()}else if(h&&(h=h.split(",").some(function(t){if(t=o(l,t.trim(),i))return p(e,t,"filter",a,i,I),!0})))return void t.preventDefault();n.handle&&!o(l,n.handle,i)||this._prepareDragStart(t,s,a)}},_prepareDragStart:function(t,e,o){var i,r=this,a=r.el,p=r.options,h=a.ownerDocument;o&&!v&&o.parentNode===a&&(L=t,S=a,v=o,_=v.parentNode,P=v.nextSibling,T=p.group,i=function(){r._disableDelayedDrag(),v.draggable=!0,s(v,r.options.chosenClass,!0),r._triggerDragStart(e)},p.ignore.split(",").forEach(function(t){l(v,t.trim(),c)}),n(h,"mouseup",r._onDrop),n(h,"touchend",r._onDrop),n(h,"touchcancel",r._onDrop),p.delay?(n(h,"mouseup",r._disableDelayedDrag),n(h,"touchend",r._disableDelayedDrag),n(h,"touchcancel",r._disableDelayedDrag),n(h,"mousemove",r._disableDelayedDrag),n(h,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(i,p.delay)):i())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(t,"mouseup",this._disableDelayedDrag),r(t,"touchend",this._disableDelayedDrag),r(t,"touchcancel",this._disableDelayedDrag),r(t,"mousemove",this._disableDelayedDrag),r(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(L={target:v,clientX:t.clientX,clientY:t.clientY},this._onDragStart(L,"touch")):this.nativeDraggable?(n(v,"dragend",this),n(S,"dragstart",this._onDragStart)):this._onDragStart(L,!0);try{F.selection?F.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){S&&v&&(s(v,this.options.ghostClass,!0),t.active=this,p(this,S,"start",v,S,I))},_emulateDragOver:function(){if(G){if(this._lastX===G.clientX&&this._lastY===G.clientY)return;this._lastX=G.clientX,this._lastY=G.clientY,V||a(b,"display","none");var t=F.elementFromPoint(G.clientX,G.clientY),e=t,o=" "+this.options.group.name,i=H.length;if(e)do{if(e[D]&&e[D].options.groups.indexOf(o)>-1){for(;i--;)H[i]({clientX:G.clientX,clientY:G.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);V||a(b,"display","")}},_onTouchMove:function(e){if(L){t.active||this._dragStarted(),this._appendGhost();var o=e.touches?e.touches[0]:e,i=o.clientX-L.clientX,n=o.clientY-L.clientY,r=e.touches?"translate3d("+i+"px,"+n+"px,0)":"translate("+i+"px,"+n+"px)";O=!0,G=o,a(b,"webkitTransform",r),a(b,"mozTransform",r),a(b,"msTransform",r),a(b,"transform",r),e.preventDefault()}},_appendGhost:function(){if(!b){var t,e=v.getBoundingClientRect(),o=a(v),i=this.options;b=v.cloneNode(!0),s(b,i.ghostClass,!1),s(b,i.fallbackClass,!0),a(b,"top",e.top-U(o.marginTop,10)),a(b,"left",e.left-U(o.marginLeft,10)),a(b,"width",e.width),a(b,"height",e.height),a(b,"opacity","0.8"),a(b,"position","fixed"),a(b,"zIndex","100000"),a(b,"pointerEvents","none"),i.fallbackOnBody&&F.body.appendChild(b)||S.appendChild(b),t=b.getBoundingClientRect(),a(b,"width",2*e.width-t.width),a(b,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var o=t.dataTransfer,i=this.options;this._offUpEvents(),"clone"==T.pull&&(E=v.cloneNode(!0),a(E,"display","none"),S.insertBefore(E,v)),e?("touch"===e?(n(F,"touchmove",this._onTouchMove),n(F,"touchend",this._onDrop),n(F,"touchcancel",this._onDrop)):(n(F,"mousemove",this._onTouchMove),n(F,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(o&&(o.effectAllowed="move",i.setData&&i.setData.call(this,o,v)),n(F,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var i,n,r,s=this.el,l=this.options,p=l.group,c=p.put,f=T===p,y=l.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!l.dragoverBubble&&t.stopPropagation()),O=!0,T&&!l.disabled&&(f?y||(r=!S.contains(v)):T.pull&&c&&(T.name===p.name||c.indexOf&&~c.indexOf(T.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if(q(t,l,this.el),W)return;if(i=o(t.target,l.draggable,s),n=v.getBoundingClientRect(),r)return e(!0),void(E||P?S.insertBefore(v,E||P):y||S.appendChild(v));if(0===s.children.length||s.children[0]===b||s===t.target&&(i=d(s,t))){if(i){if(i.animated)return;m=i.getBoundingClientRect()}e(f),!1!==h(S,s,v,n,i,m)&&(v.contains(s)||(s.appendChild(v),_=s),this._animate(n,v),i&&this._animate(m,i))}else if(i&&!i.animated&&i!==v&&void 0!==i.parentNode[D]){C!==i&&(C=i,M=a(i),x=a(i.parentNode));var g,m=i.getBoundingClientRect(),w=m.right-m.left,A=m.bottom-m.top,I=/left|right|inline/.test(M.cssFloat+M.display)||"flex"==x.display&&0===x["flex-direction"].indexOf("row"),R=i.offsetWidth>v.offsetWidth,L=i.offsetHeight>v.offsetHeight,G=(I?(t.clientX-m.left)/w:(t.clientY-m.top)/A)>.5,N=i.nextElementSibling,k=h(S,s,v,n,i,m);if(!1!==k){if(W=!0,setTimeout(u,30),e(f),1===k||-1===k)g=1===k;else if(I){var j=v.offsetTop,F=i.offsetTop;g=j===F?i.previousElementSibling===v&&!R||G&&R:F>j}else g=N!==v&&!L||G&&L;v.contains(s)||(g&&!N?s.appendChild(v):i.parentNode.insertBefore(v,g?N:i)),_=v.parentNode,this._animate(n,v),this._animate(m,i)}}}},_animate:function(t,e){var o=this.options.animation;if(o){var i=e.getBoundingClientRect();a(e,"transition","none"),a(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,a(e,"transition","all "+o+"ms"),a(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){a(e,"transition",""),a(e,"transform",""),e.animated=!1},o)}},_offUpEvents:function(){var t=this.el.ownerDocument;r(F,"touchmove",this._onTouchMove),r(t,"mouseup",this._onDrop),r(t,"touchend",this._onDrop),r(t,"touchcancel",this._onDrop)},_onDrop:function(e){var o=this.el,i=this.options;clearInterval(this._loopId),clearInterval(N.pid),clearTimeout(this._dragStartTimer),r(F,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(F,"drop",this),r(o,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(O&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),b&&b.parentNode.removeChild(b),v&&(this.nativeDraggable&&r(v,"dragend",this),c(v),s(v,this.options.ghostClass,!1),s(v,this.options.chosenClass,!1),S!==_?(R=y(v))>=0&&(p(null,_,"sort",v,S,I,R),p(this,S,"sort",v,S,I,R),p(null,_,"add",v,S,I,R),p(this,S,"remove",v,S,I,R)):(E&&E.parentNode.removeChild(E),v.nextSibling!==P&&(R=y(v))>=0&&(p(this,S,"update",v,S,I,R),p(this,S,"sort",v,S,I,R))),t.active&&(null!==R&&-1!==R||(R=I),p(this,S,"end",v,S,I,R),this.save())),S=v=_=b=P=E=w=A=L=G=O=R=C=M=T=t.active=null)},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?v&&(this._onDragOver(t),i(t)):"drop"!==e&&"dragend"!==e||this._onDrop(t)},toArray:function(){for(var t,e=[],i=this.el.children,n=0,r=i.length,s=this.options;n<r;n++)t=i[n],o(t,s.draggable,this.el)&&e.push(t.getAttribute(s.dataIdAttr)||f(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,n){var r=i.children[n];o(r,this.options.draggable,i)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return o(t,e||this.options.draggable,this.el)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];o[t]=e,"group"===t&&Y(o)},destroy:function(){var t=this.el;t[D]=null,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),H.splice(H.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},t.utils={on:n,off:r,css:a,find:l,is:function(t,e){return!!o(t,e,t)},extend:m,throttle:g,closest:o,toggleClass:s,index:y},t.create=function(e,o){return new t(e,o)},t.version="1.3.0",t}),v=function(t){return{_createDraggableElement:function(e,o){t.create(e,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(t){o._onDragAndDropLayerClick(t)}})},_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayerSwitcher"),t.className="GPwidget",t},_createMainLayersShowElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowLayersList"),t.type="checkbox",t},_createMainLayersElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayersList"),t.className="GPpanel",t},_createMainPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowLayersList"),e.title="Afficher/masquer le gestionnaire de couches";var o=document.createElement("span");o.id=this._addUID("GPshowLayersListOpen"),o.className="GPshowAdvancedToolOpen",o.addEventListener("click",function(){if(document.getElementById(t._addUID("GPshowLayersList")).checked){for(var e=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<e.length;o++)e[o].className="GPlayerInfo";document.getElementById(t._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),e.appendChild(o);var i=document.createElement("span");return i.addEventListener("click",function(){if(document.getElementById(t._addUID("GPshowLayersList")).checked){for(var e=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<e.length;o++)e[o].className="GPlayerInfo";document.getElementById(t._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),i.id=t._addUID("GPshowLayersListClose"),e.appendChild(i),e},_createMainInfoElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayerInfoPanel"),t.className="GPpanel GPlayerInfoPanelClosed",t},_createContainerLayerElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPlayerSwitcher_ID_"+t.id),e.className="GPlayerSwitcher_layer draggable-layer",e.appendChild(this._createBasicToolElement(t));for(var o=this._createAdvancedToolShowElement(t),i=0;i<o.length;i++)e.appendChild(o[i]);return e.appendChild(this._createAdvancedToolElement(t)),e},_createBasicToolElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPbasicTools_ID_"+t.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(t));for(var o=this._createBasicToolVisibilityElement(t),i=0;i<o.length;i++)e.appendChild(o[i]);return e},_createBasicToolNameElement:function(t){var e=document.createElement("span");return e.id=this._addUID("GPname_ID_"+t.id),e.className="GPlayerName",e.title=t.description||t.title,e.innerHTML=t.title,e},_createBasicToolVisibilityElement:function(t){var e=[],o=void 0===t.visibility||t.visibility,i=this._addUID("GPvisibility_ID_"+t.id),n=document.createElement("input");n.id=i,n.type="checkbox",n.checked=o;var r=document.createElement("label");r.htmlFor=i,r.id=this._addUID("GPvisibilityPicto_ID_"+t.id),r.className="GPlayerVisibility",r.title="Afficher/masquer la couche";var s=this;return n.addEventListener?n.addEventListener("click",function(t){s._onVisibilityLayerClick.call(s,t)}):n.attachEvent&&n.attachEvent("onclick",function(t){s._onVisibilityLayerClick.call(s,t)}),e.push(n),e.push(r),e},_createAdvancedToolShowElement:function(t){var e=[],o=document.createElement("label");o.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+t.id),o.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+t.id),o.title="Plus d'outils",o.className="GPshowMoreOptions GPshowLayerAdvancedTools";var i=document.createElement("input");return i.type="checkbox",i.id=this._addUID("GPshowAdvancedTools_ID_"+t.id),e.push(i),e.push(o),e},_createAdvancedToolElement:function(t){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+t.id),e.className="GPlayerAdvancedTools",e.appendChild(this._createAdvancedToolDeleteElement(t)),t.title&&t.description&&e.appendChild(this._createAdvancedToolInformationElement(t)),"feature"!==t.type)for(var o=this._createAdvancedToolOpacityElement(t),i=0;i<o.length;i++)e.appendChild(o[i]);return e},_createAdvancedToolDeleteElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPremove_ID_"+t.id),e.className="GPlayerRemove",e.title="Supprimer la couche",e.layerId=t.id;var o=this;return e.addEventListener?e.addEventListener("click",function(t){o._onDropLayerClick.call(o,t)}):e.attachEvent&&e.attachEvent("onclick",function(t){o._onDropLayerClick.call(o,t)}),e},_createAdvancedToolInformationElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPinfo_ID_"+t.id),e.className="GPlayerInfo",e.title="Informations/légende",e.layerId=t.id;var o=this;return e.addEventListener?e.addEventListener("click",function(t){o._onOpenLayerInfoClick.call(o,t)}):e.attachEvent&&e.attachEvent("onclick",function(t){o._onOpenLayerInfoClick.call(o,t)}),e},_createAdvancedToolOpacityElement:function(t){var e=[],o=document.createElement("div");o.id=this._addUID("GPopacity_ID_"+t.id),o.className="GPlayerOpacity",o.title="Opacité";var i=void 0!==t.opacity?t.opacity:1;i=Math.round(100*i);var n=document.createElement("input");n.id=this._addUID("GPopacityValueDiv_ID_"+t.id),n.type="range",n.value=i;var r=this;n.addEventListener?n.addEventListener("change",function(t){r._onChangeLayerOpacity.call(r,t)}):n.attachEvent&&n.attachEvent("onchange",function(t){r._onChangeLayerOpacity.call(r,t)}),n.addEventListener?n.addEventListener("input",function(t){r._onChangeLayerOpacity.call(r,t)}):n.attachEvent&&n.attachEvent("oninput",function(t){r._onChangeLayerOpacity.call(r,t)}),o.appendChild(n);var s=document.createElement("div");s.id=this._addUID("GPopacityValueDiv_ID_"+t.id),s.className="GPlayerOpacityValue";var a=document.createElement("span");return a.id=this._addUID("GPopacityValue_ID_"+t.id),a.innerHTML=i+"%",s.appendChild(a),e.push(o),e.push(s),e},_createContainerLayerInfoElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPlayerInfoContent");var o=document.createElement("div");if(o.id=this._addUID("GPlayerInfoTitle"),o.innerHTML=t.title,e.appendChild(o),t.quicklookUrl){var i=document.createElement("div");i.id=this._addUID("GPlayerInfoQuicklook"),i.title="Afficher un aperçu de la couche";var n=document.createElement("a");n.href=t.quicklookUrl,n.appendChild(i),e.appendChild(n)}var r=document.createElement("div");r.id=this._addUID("GPlayerInfoClose"),r.title="Fermer la fenêtre";var s=this,a=function(){document.getElementById(s._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var t=document.getElementsByClassName("GPlayerInfoOpened"),e=0;e<t.length;e++)t[e].className="GPlayerInfo"};r.addEventListener?r.addEventListener("click",a):r.attachEvent&&r.attachEvent("onclick",a),e.appendChild(r);var l=document.createElement("div");if(l.id=this._addUID("GPlayerInfoDescription"),l.innerHTML=t.description,e.appendChild(l),t.metadata){var p=document.createElement("div");p.id=this._addUID("GPlayerInfoMetadata");var h=document.createElement("div");h.className="GPlayerInfoSubtitle",h.innerHTML="Métadonnées",p.appendChild(h);for(var c=0;c<t.metadata.length;c++){var u=t.metadata[c].url,d=document.createElement("div");d.className="GPlayerInfoLink";var f=document.createElement("a");f.href=u,f.innerHTML=u,d.appendChild(f),p.appendChild(d)}0!==t.metadata.length&&e.appendChild(p)}if(t.legends){var y=document.createElement("div");y.id=this._addUID("GPlayerInfoLegend");var g=document.createElement("div");g.className="GPlayerInfoSubtitle",g.innerHTML="Légende",y.appendChild(g);for(var m={},v=t.maxScaleDenominator||56e7,_=0;_<t.legends.length;_++){var b=t.legends[_].minScaleDenominator;if(b){var E=b.toString();b=Math.round(parseInt(E.substring(0,3),10)/10)*Math.pow(10,E.length-2)}else b=270;m[b]=t.legends[_]}for(var S in m)if(m.hasOwnProperty(S)){var P=m[S].url;if("string"==typeof P&&-1==P.toLowerCase().indexOf("nolegend.jpg")){var w=document.createElement("div");w.className="GPlayerInfoLink",v=m[S].maxScaleDenominator||v;var A=document.createElement("a");A.href=P,A.innerHTML="Du 1/"+S+" au 1/"+v,w.appendChild(A),y.appendChild(w)}else delete m[S]}0!==Object.keys(m).length&&e.appendChild(y)}return e}}}(m),_=function(t,e,o,i){function n(e){e=e||{};var o=e.options||{},i=e.layers||[];if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(i&&!Array.isArray(i))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(o&&"object"!=typeof o)throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(o,i);var r=this._initContainer(o);t.control.Control.call(this,{element:r,target:o.target,render:o.render})}return t.inherits(n,t.control.Control),n.prototype=Object.create(t.control.Control.prototype,{}),e.assign(n.prototype,i),n.prototype.constructor=n,n.prototype.setMap=function(e){if(e)this._addMapLayers(e),this._listeners.onMoveListener=e.on("moveend",function(){this._onMapMoveEnd.call(this,e)},this),this._listeners.onAddListener=e.getLayers().on("add",function(t){var e,o=t.element;o.hasOwnProperty("gpLayerId")?e=o.gpLayerId:(e=this._layerId,o.gpLayerId=e,this._layerId++),this._layers[e]||this.addLayer(o)},this),this._listeners.onRemoveListener=e.getLayers().on("remove",function(t){var e=t.element,o=e.gpLayerId;this._layers[o]&&this.removeLayer(e)},this);else{t.Observable.unByKey(this._listeners.onMoveListener),t.Observable.unByKey(this._listeners.onAddListener),t.Observable.unByKey(this._listeners.onRemoveListener);for(var o=this._layersOrder.length-1;o>=0;o--)this._layersOrder[o].layer.setZIndex(0)}t.control.Control.prototype.setMap.call(this,e)},n.prototype.addLayer=function(t,e){var o=this.getMap();if(e=e||{},!t)return void console.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");var i=t.gpLayerId;if("undefined"===i)return void console.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for "+t+" layer (layer id not found)");var n=!1;if(o.getLayers().forEach(function(t){t.gpLayerId===i&&(n=!0)},this),!n)return void console.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",t," layer (layer is not in map.getLayers() )");if(this._layers[i]){if(this._layers[i]&&e){for(var r in e)e.hasOwnProperty(r)&&(this._layers[i][r]=e[r]);if(e.title){var s=document.getElementById(this._addUID("GPname_ID_"+i));s&&(s.innerHTML=e.title,s.title=e.description||e.title)}var a=document.getElementById(this._addUID("GPinfo_ID_"+i));if(!document.getElementById(this._addUID("GPinfo_ID_"+i))&&e.description){var l=document.getElementById(this._addUID("GPadvancedTools_ID_"+i));l&&l.appendChild(this._createAdvancedToolInformationElement({id:i}))}a&&"GPlayerInfoOpened"===a.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",a.className)}}else{var p=this.getLayerInfo(t)||{},h=t.getOpacity(),c=t.getVisible(),u=this.isInRange(t,o),d={layer:t,id:i,opacity:null!=h?h:1,visibility:null==c||c,inRange:null==u||u,title:null!=e.title?e.title:p._title||i,description:e.description||p._description||null,legends:e.legends||p._legends||[],metadata:e.metadata||p._metadata||[],quicklookUrl:e.quicklookUrl||p._quicklookUrl||null};this._layers[i]=d;var f=this._createLayerDiv(d);this._layers[i].div=f,t.getZIndex&&0!==t.getZIndex()||t._forceNullzIndex?this._updateLayersOrder(o):(this._layersOrder.unshift(d),this._lastZIndex++,t.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(f,this._layerListContainer.firstChild)),t.on("change:opacity",this._updateLayerOpacity,this),t.on("change:visible",this._updateLayerVisibility,this);var y=this,g=function(t){y._updateLayersOrder.call(y,t)};null==this._layers[i].onZIndexChangeEvent&&(this._layers[i].onZIndexChangeEvent=t.on("change:zIndex",g))}},n.prototype.removeLayer=function(t){var e=t.gpLayerId,o=document.getElementById(this._addUID("GPlayersList")),i=document.getElementById(this._addUID("GPinfo_ID_"+e));i&&"GPlayerInfoOpened"===i.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",i.className);var n=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+e));o.removeChild(n);var r=Math.abs(t.getZIndex()-this._lastZIndex);this._layersOrder.splice(r,1),this._lastZIndex--;for(var s=this._layersOrder,a=0;a<s.length;a++)s[a].layer.setZIndex(this._lastZIndex-a);delete this._layers[e]},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");var e=!document.getElementById(this._addUID("GPshowLayersList")).checked;if(!(t&&e||!t&&!e)){if(!e){for(var o=document.getElementsByClassName("GPlayerInfoOpened"),i=0;i<o.length;i++)o[i].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!t}},n.prototype.getCollapsed=function(){return this.collapsed},n.prototype.setRemovable=function(t,e){if(t){var o=t.gpLayerId;if(null==o)return void console.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");var i=document.getElementById(this._addUID("GPremove_ID_"+o));if(console.log(i.style.display),i)if(!1===e)i.style.display="none";else{if(!0!==e)return;i.style.display="block"}}},n.prototype._initialize=function(t,e){this._uid=o.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=void 0===t.collapsed||t.collapsed,this._layerListContainer=null,this._listeners={};for(var i=0;i<e.length;i++){var n=e[i].layer;if(n){var r;n.hasOwnProperty("gpLayerId")?r=n.gpLayerId:(r=this._layerId,n.gpLayerId=r,this._layerId++);var s=e[i].config||{},a=n.getOpacity(),l=n.getVisible(),p={layer:n,id:r,opacity:null!=a?a:1,visibility:null==l||l,title:null!=s.title?s.title:r,description:s.description||null,legends:s.legends||[],metadata:s.metadata||[],quicklookUrl:s.quicklookUrl||null};this._layers[r]=p}}},n.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._createMainLayersShowElement();t.appendChild(e),this.collapsed?this.collapsed=!0:(e.checked="checked",this.collapsed=!1);var o=this,i=function(t){this.collapsed=!t.target.checked,this.dispatchEvent("change:collapsed")};e.addEventListener("click",function(t){i.call(o,t)});var n=this._layerListContainer=this._createMainLayersElement();t.appendChild(n),this._createDraggableElement(n,this);var r=this._createMainPictoElement();t.appendChild(r);var s=this._createMainInfoElement();return t.appendChild(s),t},n.prototype._addMapLayers=function(t){this._layersIndex={};var e=this;t.getLayers().forEach(function(e){var o;e.hasOwnProperty("gpLayerId")?o=e.gpLayerId:(o=this._layerId,e.gpLayerId=o,this._layerId++);var i=this.getLayerInfo(e)||{};if(this._layers[o])this._layers[o].opacity=e.getOpacity(),this._layers[o].visibility=e.getVisible(),this._layers[o].inRange=this.isInRange(e,t);else{var n=e.getOpacity(),r=e.getVisible(),s=this.isInRange(e,t),a={layer:e,id:o,opacity:null!=n?n:1,visibility:null==r||r,inRange:null==s||s,
title:i._title||o,description:i._description||null,legends:i._legends||[],metadata:i._metadata||[],quicklookUrl:i._quicklookUrl||null};this._layers[o]=a}e.on("change:opacity",this._updateLayerOpacity,this),e.on("change:visible",this._updateLayerVisibility,this);var l=null;void 0!==e.getZIndex&&(l=e.getZIndex(),this._layersIndex[l]&&Array.isArray(this._layersIndex[l])||(this._layersIndex[l]=[]),this._layersIndex[l].push(this._layers[o]))},this);var o=function(t){e._updateLayersOrder.call(e,t)};for(var i in this._layersIndex)if(this._layersIndex.hasOwnProperty(i))for(var n=this._layersIndex[i],r=0;r<n.length;r++)this._layersOrder.unshift(n[r]),this._lastZIndex++,n[r].layer.setZIndex(this._lastZIndex),null==this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent=n[r].layer.on("change:zIndex",o));for(var s=0;s<this._layersOrder.length;s++){var a=this._layersOrder[s],l=this._createLayerDiv(a);this._layerListContainer.appendChild(l),this._layers[a.id].div=l}},n.prototype._createLayerDiv=function(t){var e=t.legends&&0!==t.legends.length,o=t.metadata&&0!==t.metadata.length,i=t.quicklookUrl;(e||o||i)&&(t.displayInformationElement=!0);var n=this._createContainerLayerElement(t);return t.inRange||n.classList.add("outOfRange"),n},n.prototype._onChangeLayerOpacity=function(t){var e=t.target.id,i=o.index(e),n=this._layers[i].layer,r=t.target.value;document.getElementById(this._addUID("GPopacityValue_ID_"+i)).innerHTML=r+"%",n.setOpacity(r/100)},n.prototype._updateLayerOpacity=function(t){var e=t.target.getOpacity();e>1&&(e=1),e<0&&(e=0);var o=t.target.gpLayerId;document.getElementById(this._addUID("GPopacityValueDiv_ID_"+o)).value=Math.round(100*e),document.getElementById(this._addUID("GPopacityValue_ID_"+o)).innerHTML=Math.round(100*e)+"%"},n.prototype._onVisibilityLayerClick=function(t){var e=t.target.id,i=o.index(e);this._layers[i].layer.setVisible(t.target.checked)},n.prototype._updateLayerVisibility=function(t){var e=t.target.getVisible(),o=t.target.gpLayerId;document.getElementById(this._addUID("GPvisibility_ID_"+o)).checked=e},n.prototype._updateLayersOrder=function(){var e=this.getMap();if(e){this._layersIndex={};var o,i;e.getLayers().forEach(function(e){i=e.gpLayerId,t.Observable.unByKey(this._layers[i].onZIndexChangeEvent),this._layers[i].onZIndexChangeEvent=null,o=null,void 0!==e.getZIndex&&(o=e.getZIndex(),this._layersIndex[o]&&Array.isArray(this._layersIndex[o])||(this._layersIndex[o]=[]),this._layersIndex[o].push(this._layers[i]))},this),this._lastZIndex=0;var n=this,r=function(t){n._updateLayersOrder.call(n,t)};this._layersOrder=[];for(var s in this._layersIndex)if(this._layersIndex.hasOwnProperty(s))for(var a=this._layersIndex[s],l=0;l<a.length;l++)this._layersOrder.unshift(a[l]),this._lastZIndex++,null==this._layers[a[l].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[a[l].layer.gpLayerId].onZIndexChangeEvent=a[l].layer.on("change:zIndex",r));if(this._layerListContainer){for(;this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var p=0;p<this._layersOrder.length;p++){var h=this._layersOrder[p];this._layerListContainer.appendChild(h.div)}}else console.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}},n.prototype._onOpenLayerInfoClick=function(t){var e,i,n=t.target.id,r=o.index(n),s=this._layers[r];if(n=document.getElementById(t.target.id),"GPlayerInfoOpened"===n.className)return void 0!==n.classList&&(n.classList.remove("GPlayerInfoOpened"),n.classList.add("GPlayerInfo")),e=document.getElementById(this._addUID("GPlayerInfoPanel")),void 0!==e.classList&&(e.classList.remove("GPpanel"),e.classList.remove("GPlayerInfoPanelOpened"),e.classList.add("GPlayerInfoPanelClosed")),i=document.getElementById(this._addUID("GPlayerInfoContent")),void e.removeChild(i);for(var a=document.getElementsByClassName("GPlayerInfoOpened"),l=0;l<a.length;l++)a[l].className="GPlayerInfo";void 0!==n.classList&&(n.classList.remove("GPlayerInfo"),n.classList.add("GPlayerInfoOpened")),e=document.getElementById(this._addUID("GPlayerInfoPanel")),void 0!==e.classList&&(e.classList.add("GPpanel"),e.classList.remove("GPlayerInfoPanelClosed"),e.classList.add("GPlayerInfoPanelOpened")),(i=document.getElementById(this._addUID("GPlayerInfoContent")))&&e.removeChild(i);var p={title:s.title,description:s.description,quicklookUrl:s.quicklookUrl,metadata:s.metadata,legends:s.legends},h=s.layer.getMaxResolution();p._maxScaleDenominator=h===1/0?56e7:Math.round(h/28e-5);var c=this._createContainerLayerInfoElement(p);e.appendChild(c)},n.prototype._onDropLayerClick=function(t){var e=t.target.id,i=o.index(e),n=this._layers[i].layer;this.getMap().getLayers().remove(n)},n.prototype._onDragAndDropLayerClick=function(){var e=this.getMap(),i=this,n=function(t){i._updateLayersOrder.call(i,t)},r=document.querySelectorAll("div.GPlayerSwitcher_layer"),s=r.length;this._layersOrder=[];for(var a=0;a<r.length;a++){var l=r[a].id,p=o.index(l),h=this._layers[p].layer;t.Observable.unByKey(this._layers[p].onZIndexChangeEvent),this._layers[p].onZIndexChangeEvent=null,h.setZIndex&&(h.setZIndex(s),this._layersOrder.push(this._layers[p]),s--),null==this._layers[p].onZIndexChangeEvent&&(this._layers[p].onZIndexChangeEvent=h.on("change:zIndex",n))}e.updateSize()},n.prototype._onMapMoveEnd=function(t){t.getLayers().forEach(function(e){var o=e.gpLayerId;if(this._layers[o]){var i,n=this._layers[o];this.isInRange(e,t)&&!n.inRange?(n.inRange=!0,i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+o)),i.classList.remove("outOfRange")):!this.isInRange(e,t)&&n.inRange&&(n.inRange=!1,i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+o)),i.classList.add("outOfRange"))}},this)},n.prototype.getLayerDOMId=function(t){var e=null;return this.getMap().getLayers().forEach(function(o){o==t&&(e=o.hasOwnProperty("gpLayerId")?o.gpLayerId:null)},this),null!==e?this._addUID("GPlayerSwitcher_ID_"+e):null},n.prototype.isInRange=function(e,o){if(o){var i=o.getView().getResolution();if(i>e.getMaxResolution()||i<e.getMinResolution())return!1;var n=o.getView().calculateExtent(o.getSize()),r=e.getExtent();return!(r&&!t.extent.intersects(n,r))}},n.prototype.getLayerInfo=function(t){var e={};if(void 0!==t.getSource){var o=t.getSource();e._title=o._title||"",e._description=o._description||"",e._quicklookUrl=o._quicklookUrl||"",e._metadata=o._metadata||[],e._legends=o._legends||[]}return e},n}(t,a,g,v),b=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPgetFeatureInfo"),t.className="GPwidget",t},_createActivateGetFeatureInfoElement:function(t){var e=this,o=document.createElement("input");return o.id=this._addUID("GPactivateGetFeatureInfo"),o.type="checkbox",o.checked=t,o.addEventListener("change",function(t){e.onActivateGetFeatureInfoElementChange(t)}),o},_createMainPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPactivateGetFeatureInfo"),e.title="activer/desactiver l'interrogation des couches";var o=document.createElement("span");o.id=this._addUID("GPgetFeatureInfoActivate"),o.className="GPshowAdvancedToolOpen",e.appendChild(o);var i=document.createElement("span");return i.id=t._addUID("GPgetFeatureInfoDeactivate"),e.appendChild(i),e}}}(),E=function(t,e,o,i,n,r,s){function a(e){e=e||{};var o=e.options||{},i=e.layers||[];if(!(this instanceof a))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(i&&!Array.isArray(i))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(o&&"object"!=typeof o)throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(o,i);var n=this._initContainer(o);t.control.Control.call(this,{element:n,target:o.target,render:o.render})}return t.inherits(a,t.control.Control),a.prototype=Object.create(t.control.Control.prototype,{}),i.assign(a.prototype,s),a.prototype.constructor=a,a.prototype._initialize=function(t,e){if(this._uid=r.generate(),this._events={dblclick:!1,singleclick:!1,contextmenu:!1},this._eventsHandler={},void 0!==t.auto&&"boolean"!=typeof t.auto)return void console.log("[ERROR] GetFeatureInfo:_initialize - auto parameter should be a boolean");if(this._auto=t.auto||!1,void 0!==t.active&&"boolean"!=typeof t.active)return void console.log("[ERROR] GetFeatureInfo:_initialize - active parameter should be a boolean");if(this._active=void 0===t.active||t.active,t.defaultEvent&&"string"!=typeof t.defaultEvent)return void console.log("[ERROR] GetFeatureInfo:_initialize - defaultEvent parameter should be a string");if(this._defaultEvent=t.defaultEvent||"singleclick",!this._isValidEvent(this._defaultEvent))return void console.log("[ERROR] GetFeatureInfo:_initialize - _defaultEvent '"+this._defaultEvent+"' is not a valid event");if(t.defaultInfoFormat&&"string"!=typeof t.defaultInfoFormat)return void console.log("[ERROR] GetFeatureInfo:_initialize - defaultInfoFormat parameter should be a string");if(this._defaultInfoFormat=t.defaultInfoFormat||"text/html",t.cursorStyle&&"string"!=typeof t.cursorStyle)return void console.log("[ERROR] GetFeatureInfo:_initialize - cursorStyle parameter should be a string");if(this._cursorStyle=t.cursorStyle||"pointer",t.proxyUrl){if("string"!=typeof t.proxyUrl)return void console.log("[ERROR] GetFeatureInfo:_initialize - proxyUrl parameter should be a string");this._proxyUrl=t.proxyUrl}if(t.noProxyDomains){if(!Array.isArray(t.noProxyDomains))return void console.log("[ERROR] GetFeatureInfo:_initialize - noProxyDomains parameter should be a array");this._noProxyDomains=t.noProxyDomains}if(void 0!==t.autoPan&&"boolean"!=typeof t.autoPan)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPan parameter should be a boolean");if(this._autoPan=void 0===t.autoPan||t.autoPan,t.autoPanAnimation){if(t.autoPanAnimation.duration&&"number"!=typeof t.autoPanAnimation.duration)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : duration should be a number.");if(t.autoPanAnimation.easing&&"function"!=typeof t.autoPanAnimation.easing)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : easing should be a ol.easing function or a custom function.");this._autoPanAnimation=t.autoPanAnimation}if(t.autoPanMargin){if("number"!=typeof t.autoPanMargin)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPanMargin parameter should be a number");this._autoPanMargin=t.autoPanMargin}if(!Array.isArray(e))return void console.log("[ERROR] GetFeatureInfo:_initialize - layers parameter should be an array");this._setLayers(e),this._activateGetFeatureInfoContainer=null},a.prototype.setMap=function(e){if(t.control.Control.prototype.setMap.call(this,e),this._updateEvents(),null!=e&&(this._cursorStyle&&this._active&&this._activateCursor(!0),e.getLayers().on("remove",function(t){for(var e=0;e<this._layers.length;++e)if(this._layers[e].obj===t.element){this._layers.splice(e,1);break}this._updateEvents()},this),this._auto)){var o=!1;e.getLayers().forEach(function(t){var e=n.getLayerFormat(t);this._hasLayer(t)||"vector"!=e||(this._layers.push({obj:t}),o=!0)},this),o&&this._updateEvents(),e.getLayers().on("add",function(t){"vector"==n.getLayerFormat(t.element)&&this._layers.push({obj:t.element}),this._updateEvents()},this)}},a.prototype.getLayers=function(){return this._layers},a.prototype.setDefaultEvent=function(t){return"string"!=typeof t?void console.log("[ERROR] GetFeatureInfo:setDefaultEvent - eventName parameter should be a string"):t&&this._isValidEvent(t)?(this._defaultEvent=t,void this._updateEvents()):void console.log("[ERROR] GetFeatureInfo:setDefaultEvent - event '"+t+"' is not allowed.")},a.prototype.setCursorStyle=function(t){if("string"!=typeof t)return void console.log("[ERROR] GetFeatureInfo:setCursorStyle - cursorStyle parameter should be a string");this._active&&(!this._cursorStyle&&t?this._activateCursor(!0):this._cursorStyle&&!t&&this._activateCursor(!1)),this._cursorStyle=t},a.prototype.setActive=function(t){this._setActive(t);var e=document.getElementById(this._addUID("GPactivateGetFeatureInfo"));e&&(e.checked=t)},a.prototype._setActive=function(t){if("boolean"!=typeof t)return void console.log("[ERROR] GetFeatureInfo:_setActive - active parameter should be a boolean");this._active!==t&&(this._active=t,this._cursorStyle&&this._activateCursor(t))},a.prototype.isActive=function(){return this._active},a.prototype.setHidden=function(t){this.element.style.visibility=t?"hidden":""},a.prototype.isHidden=function(){return"hidden"==this.element.style.visibility},a.prototype.setLayers=function(t){this._setLayers(t),this._updateEvents()},a.prototype._isValidEvent=function(t){return Object.keys(this._events).indexOf(t)>-1},a.prototype._activateEvent=function(t){var e=this.getMap(),o=this,i=function(t){n.onDisplayFeatureInfo(t,o)};"contextmenu"==t?e.getViewport().addEventListener(t,i):e.on(t,i),this._eventsHandler[t]=i,this._events[t]=!0},a.prototype._deactivateEvent=function(t){var e=this.getMap();"contextmenu"==t?e.getViewport().removeEventListener(t,this._eventsHandler[t]):e.un(t,this._eventsHandler[t]),delete this._eventsHandler[t],this._events[t]=!1},a.prototype._updateEvents=function(){for(var t=[],e=0;e<this._layers.length;++e){var o=this._layers[e].event?this._layers[e].event:this._defaultEvent;t.indexOf(o)<0&&t.push(o)}for(var i in this._events)!this._events[i]&&t.indexOf(i)>=0?this._activateEvent(i):this._events[i]&&t.indexOf(i)<0&&this._deactivateEvent(i)},a.prototype._hasLayer=function(t){for(var e=0;e<this._layers.length;++e)if(this._layers[e].obj===t)return!0;return!1},a.prototype._activateCursor=function(t){var e=this.getMap();if(t){if(this._eventsHandler.hasOwnProperty("pointermove"))return void console.log("[ERROR] _activateCursor - inconsistent state: pointermove event handler already registered");var o=this,i=function(t){var i=e.forEachFeatureAtPixel(t.pixel,function(t,e){for(var i=o.getLayers(),n=0;n<i.length;++n)if(i[n].obj===e)return!0});e.getTargetElement().style.cursor=i?o._cursorStyle:""};this._eventsHandler.pointermove=i,e.on("pointermove",i)}else e.un("pointermove",this._eventsHandler.pointermove),delete this._eventsHandler.pointermove,e.getTargetElement().style.cursor=""},a.prototype._setLayers=function(t){if(!t||!Array.isArray(t))return void console.log("[ERROR] GetFeatureInfo:setLayers - gfiLayers parameter should be a array");this._layers=[];for(var e=0;e<t.length;++e){var o=this._layers.push({})-1;t[e].event&&(this._isValidEvent(t[e].event)?this._layers[o].event=t[e].event:console.log("[ERROR] GetFeatureInfo:setLayers - layer event '"+this._layers[e].event+"' is not allowed.")),t[e].infoFormat&&(this._layers[o].infoFormat=t[e].infoFormat),this._layers[o].obj=t[e].obj}},a.prototype.onActivateGetFeatureInfoElementChange=function(t){this._setActive(t.target.checked)},a.prototype._initContainer=function(t){var e=this._createMainContainerElement(),o=this._activateGetFeatureInfoContainer=this._createActivateGetFeatureInfoElement(this.isActive());e.appendChild(o);var i=this._createMainPictoElement();if(e.appendChild(i),void 0!==t.hidden){if("boolean"!=typeof t.hidden)return void console.log("[ERROR] GetFeatureInfo:_initContainer - hidden parameter should be a boolean");t.hidden&&(e.style.visibility="hidden")}return e},a}(t,proj4,0,a,s,g,b),S=function(){return{lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQ+SURBVFiF3ZlLaFxlGIaf/5zJpJNpaoxpYieoCxULEYK7Lqp0IWQhFLooKNKEtNIULxWlQoJgQQWLFMEg0lQMuXgD0dRSkNJFgoy0IrYNSTpj08xMmoxNYhLUyUwyt/O5mFbjmGTOLS58d3O+y/u95/vnvx0lIvxf4HE9Y7PyU0ETwl6gAQgANcA88AswhuIsKc7TJ0k3qZVrnTmqtpGhHeFloMJERArF+3g5Qaf84UYJ7og5rPai+JhCB6xiHuEQp+Ws0zI0pwloU+0oBrAnBKAGxQBtqt1pKc46UyjgHadFrEIHXXLCbrB9MYWhNYAb3f0bBsI+u0POnpijahtpJrA/tDbCPOU8aGdSsPdWM7SzOUIAam7ntwzrnWlWfnzMYW76tYsUy9RaXYesd6aCJswI0Tw5WvuG6EyEOWUk6UyEae0bQvPkTLEUeCzBupjCyl4iqyfHydkxdh3YQ/nWnSjlp3zrTnYd2MPJ2TFTgszwFNNaDaCwRdkYLd1B/NWNa9r81Y20dAdd4SmCHTGBkh6P7bvXkd0sTxHsiKku6eH13+fIbpanCHbExEp6ZJJTjuxmeYpgXYwiVNLnysCMI7tZniLYmc1Kk/Qe3E1ycXhNW3JxmN6Du13hKYIdMWsXuRpGzsOxugYu9Q+RXgojkiS9FOZS/xDH6howcqUPhWZ4imB9B9CmyoBx4AGrZBYwCTxMl2StBFnvTJdkUbxlOc4a3rYqBOxuNHfQC0RsxZZGhAA9dgLtiTkuOYQOW7Gl0c5xMbN/+xecnTQPq89QPGM/wT9hCJ8+MvjQ81pK8yp92ZvxeMpUNuvVNK0MQAwjI15vRkTSIpKOxWK/yyoBzsS0qiq8DAP3OxWylNMWmoL1XTMresZsjIJllIzk4GosFrvl/HbmiHoCYRAHx2cBo2Pknp4v45U3befQVY/z8/sp+Q5410mKC7P+oBMhALphBNy6jHgDxU92Am+t6PFXhrcPOeRPp7LZYXfEdEkWjWeBlJWwnKEyr41s/3rFwHDAnjY0zsTj8ZR710Qfys/Aq1ZCPrlZef7iwpYF25xKRhLLyQ+i0Wi48NPtrwBt6hsofeQNJ7zhp74PfGE1/Z0ZzNC0y5FIZHa1zf2vAFmeS2vqerkuVeu5pPLa0otXa01f9CklOQw1AfnRiampkIjk1/JzX0y3/LrY7Dm0w5f/ah0Pee/GXWeiSc/G/y+NjBjGuA6h8snK8VEZLbn+uD/MbiPe7P283pd9uvh5cMH3Q8uPdd+uE7ailFw3NO1aNBqdELG2rdk0MbSqLb8p7UZVmVF/59F8Wp97Mhg4ncjqfxWplKQMkbBmGKGJ6emIiNie2TZPDHB5v+/xxrtXBnWFnhfyL1yp/ejCXMUMShIKQnmlQrFYbFJcKmJTxQBc3O9789FtmZfOzfjPvT5S068bmWvj09PTm8G16WL+S/wJLybNu1V6htkAAAAASUVORK5CYII=",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQxSURBVFiF3ZldaBxVFMd/d2ayTRtjQpo2mlilWBEMshoj+FAERZIHIdA3iw+V1icRREFIQAKNgsUHQfBFwZI2WgWxqYUiVTDBBj9ILC5Nu2tjdjemsR+mSZNNNvsxO8eHTTRuk+zMnQmCf9iHnXvO+Z//nDvn3rmjRIT/C6zAI4ZVFRbtKDpQNCM0AvXANIo/EC4inMbmLBFZDJJaBVaZJ9Sd2HQCrwDbXHikgfewOMKPMh9ECsGIeVx1IHxEsQJeMY3iEMNy2m8aht8AtKpOhH70hADUI/TTqjr9puKvMsUE3vabxCp0MSJHdJ31xRSnVj9BVPcfOCj26U45PTHFh30c/am1EaaxuF+nKejd1WLX2gwhAPXL8T3De2XCqooKbuCu/eoiTZ6dXtch75WxaMeNENOyOXx8kHOpGMPOIudSMQ4fH8S0bBcs25Z5PMF7ZVpVL3BgQxvTsvn6+kVq6sK3jc3NRGhraKZgl9t9HGNEXvCSmvfKKJrL2nQfHVpTCEBNXZjuo0OB8JTAu5jiXmtjPL3vLl/jbnlKoNPN6spaVFbt8jXulqcEOmKSZS0yi5O+xt3ylEBHTLSsxbf913yNu+UpgU4DKE/Sc3AvczORNcfmZiL0HNwbCE8JvItxWDvJ1SjYFm0NzZzpG2RpIYbIIksLMc70Dbpsy+54SqCzzlQAY8B9Xsk8YAJ4gBHJe3HyXpkRyaN407OfN7zlVQjobjTv4BgQ1/ItjzjV9Oo46okZEBuhS8u3PDoZEDf7t9vg903zBLBfP8C/4cAnD87teclIGyFlLoVyllWh8vmQYRgVAOI4OQmFciKSFZFsMpmck1UC/Il5VNViEgHu9StkQYyb7bNNH1wrmDm3PgqWUHLBhl+SyeRV/6czLepJDAbw8fos4HTNb+/9PFv9u3YMU/X6f38/L98B7/gJ8U2uasiPEADTcRqDOozoBn7WcbzqmFOvpnYM+uTPpvP5SDBiimvP8xRPKV3DFpV7fX7HyYyD44M96xicmpqaSgd3TDQsv6J4zYvLx5nqsz/kK29qcyq5kFpafD+RSMSKf4P+CvCY+hJFRzmzmB2KPTvb+JnX8CsdzDGM8/F4/PrqseC/AggvZlGXtyipXc8kLcbCy6mdrg/6lBIbR41DYXR8cjIqIoW17IIXc17+nHnEOnS3VfhiHQt5d7HmVMK2Nn6+DHLiOGMmRLdMVI+NymjZ9Sf4abaMqZbQp01G/rnS60P5rT8duNXw1TpuGaXksmMYlxKJxLiIt23NponhKVV5a874rdZwmlYuTTvmjWdmGj9Mifl3kkpJ2hGJGY4THb9yJS4i2p0t+Gm2ggHJxMNb94eNzIAJZgEKbyxsP5kS00ZJSkG0oFQ0mZyYkKDuqIhs6u/7hyt75luM2RMPVfft3rW7bU9T0z2bxbV50+w/wF8f81R5OpwBhwAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",defaultOffset:[-25.5,-38]}}(),P=function(t,e){return{check:function(t){if(t){var o=t.key,i=t.resources||[],n=t.services||[];if(i&&0!==i.length&&n&&0!==n.length){var r={};if(!o){if(!e.isConfigLoaded())return void console.log("WARNING : The 'apiKey' parameter is missing, and the contract key configuration has not been loaded, so impossible to check yours rights !");o=Object.keys(e.configuration.generalOptions.apiKeys)[0]}if(o){if(e.isConfigLoaded()){for(var s=0;s<i.length;s++)for(var a=i[s],l=0;l<n.length;l++){var p=n[l],h=e.getServiceParams(a,p,o);h&&0!==Object.keys(h).length?(r[p]||(r[p]=[]),r[p].push(a)):console.log("WARNING : The contract key configuration has no rights to load this geoportal resource ("+a+") for this service ("+p+") ")}return r&&0!==Object.keys(r).length?(r.key=o,r):void console.log("WARNING : The contract key configuration has been loaded, and the 'apiKey' parameter has been set, but, there is a problem on the mapping between the contract and the key !")}console.log("WARNING : the contract key configuration has not been loaded, so be carefull !");for(var c={},u=0;u<n.length;u++){var d=n[u];c[d]=[];for(var f=0;f<i.length;f++){var y=i[f];c[d].push(y)}}return c.key=o,c}}}}}}(0,c),w=function(t){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPsearchEngine"),t.className="GPwidget",t},_createShowSearchEngineElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowSearchEngine"),t.type="checkbox",t},_createShowSearchEnginePictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowSearchEnginePicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowSearchEngine"),e.title="Afficher/masquer la recherche par lieux",e.addEventListener("click",function(){document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none";var e=document.getElementById(t._addUID("GPshowAdvancedSearch"));e&&(e.style.display=null,document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none");var o="#GPsearchInput-"+t._uid;document.querySelector(o+" input").disabled=!1,t.onShowSearchEngineClick()});var o=document.createElement("span");return o.id=this._addUID("GPshowSearchEngineOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createSearchInputElement:function(){var t=this,e=document.createElement("form");e.id=this._addUID("GPsearchInput"),e.addEventListener("submit",function(e){return e.preventDefault(),document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="block",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",t.onGeocodingSearchSubmit(e),!1});var o=document.createElement("input");o.id=this._addUID("GPsearchInputText"),o.type="text",o.placeholder="Rechercher un lieu, une adresse",o.autocomplete="off",o.addEventListener("keyup",function(e){var i=e.which||e.keyCode;13!==i&&10!==i&&38!==i&&40!==i&&(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",o.value.length>2?document.getElementById(t._addUID("GPautoCompleteList")).style.display="block":document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",t.onAutoCompleteSearchText(e))}),o.addEventListener("keydown",function(t){return}),e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GPsearchInputReset"),i.addEventListener("click",function(){document.getElementById(t._addUID("GPsearchInputText")).value="",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",t.onSearchResetClick()}),e.appendChild(i),e},_createShowAdvancedSearchElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowAdvancedToolPicto",e.title="Ouvrir la recherche avancée",e.addEventListener("click",function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!0,document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="none",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="inline-block"});var o=document.createElement("span");return o.id=this._addUID("GPshowAdvancedSearchOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createAdvancedSearchPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPadvancedSearchPanel"),t.className="GPpanel",t.style.display="none",t},_createGeocodeResultsElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPgeocodeResultsList"),t.className="GPpanel",t.style.display="none",t.appendChild(this._createGeocodeResultsHeaderElement()),t},_createAutoCompleteElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPautoCompleteList"),t.className="GPautoCompleteList",t.style.display="none",t},_createAutoCompleteListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.addEventListener?e.addEventListener("click",function(e){t.onAutoCompletedResultsItemClick(e),document.getElementById(t._addUID("GPautoCompleteList")).style.display="none"},!1):e.attachEvent&&e.attachEvent("onclick",function(e){t.onAutoCompletedResultsItemClick(e),document.getElementById(t._addUID("GPautoCompleteList")).style.display="none"}),e},_createAutoCompletedLocationElement:function(t,e){var o=document.getElementById(this._addUID("GPautocompleteResults")),i=document.createElement("div");i.id=this._addUID("AutoCompletedLocation_"+e),i.className="GPautoCompleteProposal",i.innerHTML=t.fullText,i.addEventListener?i.addEventListener("click",function(t){o.click(t)},!1):i.attachEvent&&i.attachEvent("onclick",function(t){o.click(t)}),o.appendChild(i)},_createAdvancedSearchPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Recherche avancée",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GPadvancedSearchClose"),i.className="GPpanelClose",i.title="Fermer la recherche avancée",i.addEventListener?i.addEventListener("click",function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none"},!1):i.attachEvent&&i.attachEvent("onclick",function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none"}),e.appendChild(i),e},_createAdvancedSearchPanelFormElement:function(t){var e=this,o=document.createElement("form");o.id=this._addUID("GPadvancedSearchForm"),o.addEventListener("submit",function(t){t.preventDefault();for(var o=[],i="#GPadvancedSearchFilters-"+e._uid,n=document.querySelectorAll(i+" > div > div > input"),r=0;r<n.length;r++){var s=n[r];o.push({key:s.name,value:s.value})}return e.onGeocodingAdvancedSearchSubmit(t,o),document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="block",!1});var i=document.createElement("div");i.className="GPflexInput";var n=document.createElement("label");n.className="GPadvancedSearchCodeLabel",n.innerHTML="Recherche par",i.appendChild(n);var r=this._createAdvancedSearchFormCodeElement(t);return i.appendChild(r),o.appendChild(i),o},_createAdvancedSearchFormCodeElement:function(t){var e=this,o=document.createElement("select");o.id=this._addUID("GPadvancedSearchCode"),o.className="GPadvancedSearchCode",o.addEventListener("change",function(t){e.onGeocodingAdvancedSearchCodeChange(t)},!1),t||(t=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"},{id:"Administratif",title:"Administratif"}]);for(var i=0;i<t.length;i++){var n=document.createElement("option");n.value=t[i].id,n.text=t[i].title,o.appendChild(n)}return o},_createAdvancedSearchFormInputElement:function(){var t=document.createElement("input");return t.type="submit",t.id=this._addUID("GPadvancedSearchSubmit"),t.className="GPinputSubmit",t.value="Chercher",t},_createAdvancedSearchFormFiltersElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPadvancedSearchFilters"),t},_createAdvancedSearchFiltersTableElement:function(t,e){var o=document.createElement("div");return o.id=this._addUID(t),e||(o.style.display="none"),o},_createAdvancedSearchFiltersAttributElement:function(t){var e=null,o=t.name,i=t.title,n=t.description,r=t.code,s=t.value,a=document.createElement("div");a.className="GPflexInput";var l=document.createElement("label");l.className="GPadvancedSearchFilterLabel",l.htmlFor=o,l.title=n||i,l.innerHTML=i,a.appendChild(l);var p=document.createElement("input");return p.id=o,p.className="GPadvancedSearchFilterInput",p.type="text",p.name=o,s&&(p.value=s),
a.appendChild(p),e=document.getElementById(this._addUID(r)),e?e.appendChild(a):e=a,e},_createGeocodeResultsHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Résultats de la recherche",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GPgeocodeResultsClose"),i.className="GPpanelClose",i.title="Fermer la fenêtre de résultats",i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"}),e.appendChild(i),e},_createGeocodeResultsListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.addEventListener?e.addEventListener("click",function(e){e.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"),t.onGeocodedResultsItemClick(e)},!1):e.attachEvent&&e.attachEvent("onclick",function(e){e.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"),t.onGeocodedResultsItemClick(e)}),e},_createGeocodedLocationElement:function(t,e){var o=document.getElementById(this._addUID("GPgeocodeResults")),i=document.createElement("div");if(i.id=this._addUID("GeocodedLocation_"+e),i.className="GPautoCompleteProposal","string"==typeof t)i.innerHTML=t;else{var n=t.placeAttributes;n.freeform?i.innerHTML=n.freeform:n.postalCode?i.innerHTML=n.postalCode+" "+n.commune:n.cadastralParcel?i.innerHTML=n.cadastralParcel:i.innerHTML="..."}o.appendChild(i)}}}(),A=function(){return{advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"importance",title:"Importance"},{name:"nature",title:"Nature"},{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"Département"}],StreetAddress:[{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"Département"}],CadastralParcel:[{name:"department",title:"Département",description:"Numéro du département (ex: 01, 94)"},{name:"commune",title:"Code commune (INSEE)",description:"Code commune (INSEE) : 3 chiffres (ex: 067)"},{name:"absorbedCity",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"section",title:"Section",description:"Section : 2 caractères (ex: AA, 0D)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"}],Administratif:[{name:"prefecture",title:"Préfecture"},{name:"inseeRegion",title:"Code région (INSEE)"},{name:"inseeDepartment",title:"Code département (INSEE)"},{name:"municipality",title:"Ville"}]},zoomToResultsByDefault:function(t){var e=15,o=t.service,i=t.fields,n=t.type,r={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return"SuggestedLocation"===o&&"PositionOfInterest"===n&&(e=r[i.classification]),"DirectGeocodedLocation"===o&&"PositionOfInterest"===n&&(e=r[i.importance]||14),"StreetAddress"===n&&(e=17),"CadastralParcel"===n&&(e=17),"Administratif"===n&&(e=12),e}}}(),C=function(t,e,o,i,n,r,s,a,l){function p(e){if(e=e||{},!(this instanceof p))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),t.control.Control.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return t.inherits(p,t.control.Control),p.prototype=Object.create(t.control.Control.prototype,{}),i.assign(p.prototype,a),p.prototype.constructor=p,p.prototype.setMap=function(e){e||this._clearResults(),t.control.Control.prototype.setMap.call(this,e)},p.prototype.getCollapsed=function(){return this.collapsed},p.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(this._showSearchEngineInput.click(),this.collapsed=t)},p.prototype.initialize=function(t){this._checkInputOptions(t),this.options={collapsed:!0,zoomTo:"",resources:{geocode:[],autocomplete:[]},displayAdvancedSearch:!0,advancedSearch:{},geocodeOptions:{},autocompleteOptions:{}},i.mergeParams(this.options,t),0===this.options.resources.geocode.length&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),0===this.options.resources.autocomplete.length&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.collapsed=this.options.collapsed,this._uid=s.generate(),this._showSearchEngineInput=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._suggestedContainer=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._marker=null,this._markerUrl=n.lightOrange,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement()},p.prototype._checkInputOptions=function(t){var e;if(t.resources)if("object"==typeof t.resources){var o=t.resources.geocode;if(o){Array.isArray(o)||(console.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),o=null);var i=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(e=0;e<o.length;e++)-1===i.indexOf(o[e])&&console.log("[SearchEngine] options.resources.geocode : "+o[e]+" is not a resource for geocode")}var n=t.resources.autocomplete;if(n){Array.isArray(n)||(console.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),n=null);var r=["StreetAddress","PositionOfInterest"];for(e=0;e<n.length;e++)-1===r.indexOf(n[e])&&console.log("[SearchEngine] options.resources.autocomplete : "+n[e]+" is not a resource for autocomplete")}}else console.log("[SearchEngine] 'resources' parameter should be an object"),t.resources=null},p.prototype._initAdvancedSearchCodes=function(){for(var t=this.options.resources.geocode,e=0;e<t.length;e++)switch(t[e]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break;case"Administratif":this._advancedSearchCodes.push({id:"Administratif",title:"Administratif"})}0===this._advancedSearchCodes.length&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"}])},p.prototype._initAdvancedSearchFilters=function(){this._advancedSearchFilters=l.advancedSearchFiltersByDefault;var t=this.options.advancedSearch;i.assign(this._advancedSearchFilters,t)},p.prototype._initPopupDiv=function(){var t=this,e=document.createElement("div");e.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=t._popupOverlay&&t._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",e.appendChild(this._popupContent),e.appendChild(o),e},p.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showSearchEngineInput=this._createShowSearchEngineElement();t.appendChild(e),this.options.collapsed||(e.checked=!0);var o=this._createShowSearchEnginePictoElement();t.appendChild(o);var i=this._inputSearchContainer=this._createSearchInputElement(),n=this;if(i.addEventListener?i.addEventListener("click",function(){n.onAutoCompleteInputClick()}):i.attachEvent&&i.attachEvent("onclick",function(){n.onAutoCompleteInputClick()}),t.appendChild(i),this.options.displayAdvancedSearch){var r=this._createShowAdvancedSearchElement();t.appendChild(r);var s=this._createAdvancedSearchPanelElement(),a=this._createAdvancedSearchPanelHeaderElement(),l=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),p=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var h=this._createAdvancedSearchFormInputElement();l.appendChild(p),l.appendChild(h),s.appendChild(a),s.appendChild(l),t.appendChild(s)}var c=this._autocompleteContainer=this._createAutoCompleteElement(),u=this._suggestedContainer=this._createAutoCompleteListElement();c.appendChild(u),t.appendChild(c);var d=this._createGeocodeResultsElement(),f=this._geocodedContainer=this._createGeocodeResultsListElement();return d.appendChild(f),t.appendChild(d),t},p.prototype._setFilter=function(t){for(var e=this._filterContainer,o=!1,i=0;i<this._advancedSearchCodes.length;i++)if(this._advancedSearchCodes[i].id===t){o=!0;break}if(o){for(this._currentGeocodingCode=t;e.firstChild;)e.removeChild(e.firstChild);var n=this._advancedSearchFilters[t];if(n&&0!==n.length){for(var r=this._createAdvancedSearchFiltersTableElement(t,!0),s=0;s<n.length;s++){var a=this._createAdvancedSearchFiltersAttributElement(n[s]);r.appendChild(a)}return e.appendChild(r),e}}else for(;e.firstChild;)e.removeChild(e.firstChild)},p.prototype._checkRightsManagement=function(){var t,e=[],o=null;t=this.options.autocompleteOptions.apiKey,o=this.options.autocompleteOptions.filterOptions,e=o?o.type:[],e&&0!==e.length||(e=this.options.resources.autocomplete),e&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var i=r.check({key:t||this.options.apiKey,resources:e,services:["AutoCompletion"]});t=this.options.geocodeOptions.apiKey,o=this.options.geocodeOptions.filterOptions,e=o?o.type:[],e&&0!==e.length||(e=this.options.resources.geocode),e&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var n=r.check({key:t||this.options.apiKey,resources:e,services:["Geocode"]});if(!i&&!n)return void(this._noRightManagement=!0);this.options.apiKey||(this.options.apiKey=n?n.key:i.key),i&&(this._servicesRightManagement.AutoCompletion=i.AutoCompletion),n&&(this._servicesRightManagement.Geocode=n.Geocode)},p.prototype._requestAutoComplete=function(t){if(t&&("object"!=typeof t||0!==Object.keys(t).length)&&t.text){var o={};i.assign(o,this.options.autocompleteOptions),i.assign(o,t);var n=this.options.resources.autocomplete;n&&Array.isArray(n)&&(o.filterOptions||(o.filterOptions={}),o.filterOptions.type||(o.filterOptions.type=n)),o.apiKey=o.apiKey||this.options.apiKey,e.Services.autoComplete(o)}},p.prototype._fillAutoCompletedLocationListContainer=function(t){if(t&&0!==t.length){var e=this._suggestedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);this._displaySuggestedLocation();for(var o=0;o<t.length;o++)this._createAutoCompletedLocationElement(t[o],o)}},p.prototype._requestGeocoding=function(t){if(t&&("object"!=typeof t||0!==Object.keys(t).length)&&t.location){var o={};o.returnFreeForm=!0,i.assign(o,this.options.geocodeOptions),i.assign(o,t);var n=this.options.resources.geocode;n&&Array.isArray(n)&&(o.filterOptions||(o.filterOptions={}),o.filterOptions.type||(o.filterOptions.type=n)),o.apiKey=o.apiKey||this.options.apiKey,e.Services.geocode(o)}},p.prototype._fillGeocodedLocationListContainer=function(t){if(!t||0===t.length)return void this._clearGeocodedLocation();var e=this._geocodedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);for(var o=0;o<t.length;o++)this._createGeocodedLocationElement(t[o],o);this._geocodedLocations=t},p.prototype._setLabel=function(t){document.getElementById("GPsearchInputText-"+this._uid).value=t},p.prototype._setPosition=function(t,e){var o=this.getMap().getView();console.log(t),o.setCenter(t),o.setZoom(e)},p.prototype._setMarker=function(e,o){var i=this.getMap(),n=this;if(null!=this._marker&&(i.removeOverlay(this._marker),this._marker=null),e){var r=document.createElement("img");r.src=this._markerUrl,r.addEventListener?r.addEventListener("click",function(){n._onResultMarkerSelect(o)}):r.attachEvent&&r.attachEvent("onclick",function(){n._onResultMarkerSelect(o)}),this._marker=new t.Overlay({position:e,offset:[-25.5,-38],element:r,stopEvent:!1}),i.addOverlay(this._marker)}},p.prototype._getZoom=function(t){var e=this.getMap(),o=this.options.zoomTo,i=null;if("function"==typeof o&&(i=o.call(this,t)),"number"==typeof o&&(i=o),"string"==typeof o)if("auto"===o)i=l.zoomToResultsByDefault(t);else{var n=parseInt(o,10);isNaN(n)||(i=n)}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},i&&""!==i&&Number.isInteger(i)||(i=e.getView().getZoom());var r=e.minZoom,s=e.maxZoom;return i<r&&(i=r),i>s&&(i=s),i},p.prototype._onResultMarkerSelect=function(e){var o=this.getMap(),i="";if(e.attributes){i="<ul>";var n=e.attributes;for(var r in n)n.hasOwnProperty(r)&&"bbox"!==r&&(i+="<li>",i+='<span class="gp-attname-others-span">'+r.toUpperCase()+" : </span>",i+=n[r],i+=" </li>");i+=" </ul>"}else i=e.label;this._popupContent.innerHTML=i,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new t.Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),o.addOverlay(this._popupOverlay))},p.prototype.onShowSearchEngineClick=function(){this.collapsed=this._showSearchEngineInput.checked,this.dispatchEvent("change:collapsed")},p.prototype.onSearchResetClick=function(){this._clearResults()},p.prototype.onAutoCompleteInputClick=function(){var t=document.getElementById("GPsearchInputText-"+this._uid);t&&!t.disabled&&t.value.length>2&&this._displaySuggestedLocation()},p.prototype.onAutoCompleteSearchText=function(t){var e=t.target.value;if(e){if(this._noRightManagement)return void console.log("no rights for this service !");if(this._currentGeocodingLocation=e,e.length<3)return void this._clearSuggestedLocation();var o=this;this._requestAutoComplete({text:e,onSuccess:function(t){if(t){o._suggestedLocations=t.suggestedLocations,o._locationsToBeDisplayed=[];for(var e=0;e<o._suggestedLocations.length;e++){var i=o._suggestedLocations[e];i.position&&0===i.position.x&&0===i.position.y&&i.fullText?o._getGeocodeCoordinatesFromFullText(i,e):o._locationsToBeDisplayed.push(i)}o._fillAutoCompletedLocationListContainer(o._locationsToBeDisplayed)}},onFailure:function(t){o._clearSuggestedLocation()}});var i=this.getMap();i.on("click",this._hideSuggestedLocation,this),i.on("pointerdrag",this._hideSuggestedLocation,this)}},p.prototype._getGeocodeCoordinatesFromFullText=function(t,o){var i=this;e.Services.geocode({apiKey:this.options.apiKey,location:t.fullText,filterOptions:{type:t.type},onSuccess:function(t){t.locations&&0!==t.locations.length&&t.locations[0].position&&i._suggestedLocations&&i._suggestedLocations[o]&&(i._suggestedLocations[o].position={x:t.locations[0].position.y,y:t.locations[0].position.x},i._locationsToBeDisplayed.unshift(i._suggestedLocations[o]),i._fillAutoCompletedLocationListContainer(i._locationsToBeDisplayed))},onFailure:function(){i._suggestedLocations&&i._suggestedLocations[o]&&i._createAutoCompletedLocationElement(i._suggestedLocations[o],o)}})},p.prototype.onAutoCompletedResultsItemClick=function(e){var o=s.index(e.target.id);if(o){var i=[this._locationsToBeDisplayed[o].position.x,this._locationsToBeDisplayed[o].position.y],n={service:"SuggestedLocation",type:this._locationsToBeDisplayed[o].type,fields:this._locationsToBeDisplayed[o]},r=this._locationsToBeDisplayed[o].fullText;this._setLabel(r),n.label=r;var a=this.getMap().getView(),l=a.getProjection().getCode();"EPSG:4326"!==l&&(i=t.proj.transform(i,"EPSG:4326",l));var p=this._getZoom(n);this._setPosition(i,p),this._setMarker(i,n)}},p.prototype.onGeocodingSearchSubmit=function(t){var e=t.target[0].value;if(e){if(this._noRightManagement)return void console.log("no rights for this service !");this._currentGeocodingLocation=e;var o=this;this._requestGeocoding({location:e,onSuccess:function(t){if(t){var e=t.locations;o._fillGeocodedLocationListContainer(e)}},onFailure:function(t){o._clearGeocodedLocation()}})}},p.prototype.onGeocodedResultsItemClick=function(e){var o=s.index(e.target.id);if(o){var i,n=[this._geocodedLocations[o].position.y,this._geocodedLocations[o].position.x],r=this._geocodedLocations[o].placeAttributes,a={service:"DirectGeocodedLocation",type:this._geocodedLocations[o].type,fields:this._geocodedLocations[o]};r.freeform?i=r.freeform:r.postalCode?(i=r.postalCode+" "+r.commune,a.attributes=r):r.cadastralParcel?(i=r.cadastralParcel,a.attributes=r):i="...",this._setLabel(i),a.label=i;var l=this.getMap().getView(),p=l.getProjection().getCode();"EPSG:4326"!==p&&(n=t.proj.transform(n,"EPSG:4326",p));var h=this._getZoom(a);this._setPosition(n,h),this._setMarker(n,a)}},p.prototype.onGeocodingAdvancedSearchCodeChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;o&&this._setFilter(o)},p.prototype.onGeocodingAdvancedSearchSubmit=function(t,e){if(e&&0!==e.length){var o,i,n={};n.type=[this._currentGeocodingCode];for(var r=0;r<e.length;r++)i=e[r],n[i.key]=i.value;"CadastralParcel"===this._currentGeocodingCode?(o=this._getCadastralParcelRequestParams(n),n={type:[this._currentGeocodingCode]}):o=this._currentGeocodingLocation;var s=this;this._requestGeocoding({location:o,filterOptions:n,onSuccess:function(t){if(t){var e=t.locations;s._fillGeocodedLocationListContainer(e)}},onFailure:function(t){s._clearGeocodedLocation()}})}},p.prototype._getCadastralParcelRequestParams=function(t){var e,o="",i=t.department;i?(e=i.length,o=2===e?i:1===e?"0"+i:i.substring(0,2)):o="__";var n=t.commune;n?(e=n.length,o+=3===e?n:2==e?"_"+n:1==e?"__"+n:n.substring(0,3)):o+="___";var r=t.insee;r&&5===r.length&&(o=r);var s=t.absorbedCity;s?(e=s.length,3===e?o+=s:e<3?2===e?o+="_"+s:1===e&&(o+="__"+s):o+=s.substring(0,3)):o+="___";var a=t.section;a?(e=a.length,o+=2===e?a:1===e?"_"+a:a.substring(0,2)):o+="__";var l=t.number;return l?(e=l.length,o+=4===e?l:3===e?"_"+l:2===e?"__"+l:1===e?"___"+l:l.substring(0,4)):o+="___",o},p.prototype._clearResults=function(){var t=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),null!=this._popupOverlay&&(t.removeOverlay(this._popupOverlay),this._popupOverlay=null)},p.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},p.prototype._hideSuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="none")},p.prototype._displaySuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="block")},p.prototype._clearGeocodedLocation=function(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)},p}(t,o,0,a,S,P,g,w,A),M=function(){return{modulo:function(t,e){var o=t%e;return o*e<0?o+e:o},decimalToDMS:function(t,e,o){var i=this.modulo(t+180,360)-180,n=Math.abs(3600*i),r=o||0,s=Math.pow(10,r),a=Math.floor(n/3600),l=Math.floor((n-3600*a)/60),p=n-3600*a-60*l;return p=Math.ceil(p*s)/s,p>=60&&(p=0,l+=1),l>=60&&(l=0,a+=1),{d:a,m:l,s:p,direction:e.charAt(i<0?1:0)}},toInteger:function(t,e){var o=e||10,i=parseInt(t,o);return!isNaN(i)&&isFinite(i)?i:null},isInteger:function(t){if(isNaN(t))return!1;var e=parseFloat(t);return(0|e)===e},toFloat:function(t){var e=parseFloat(t);return!isNaN(e)&&isFinite(e)?e:null}}}(),x=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmousePosition"),t.className="GPwidget",t},_createShowMousePositionElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMousePosition"),t.type="checkbox",t},_createShowMousePositionPictoElement:function(t){var e=this,o=document.createElement("label");o.id=this._addUID("GPshowMousePositionPicto"),o.className="GPshowAdvancedToolPicto",o.htmlFor=this._addUID("GPshowMousePosition"),o.title="Afficher les coordonnées du curseur",o.addEventListener("click",function(o){var i="";document.getElementById(e._addUID("GPshowMousePosition")).checked||t||(i="GPmapCenterVisible"),document.getElementById("GPmapCenter").className=i,e.onShowMousePositionClick(o)});var i=document.createElement("span");return i.id=this._addUID("GPshowMousePositionOpen"),i.className="GPshowAdvancedToolOpen",o.appendChild(i),o},_createMousePositionPanelElement:function(t,e,o,i){t=void 0===t||t,e=void 0===e||e,o=void 0!==o&&o;var n=document.createElement("div");n.id=this._addUID("GPmousePositionPanel"),n.className="GPpanel",n.appendChild(this._createMousePositionPanelHeaderElement()),n.appendChild(this._createMousePositionPanelBasicElement(t,e,o,i));for(var r=this._createShowMousePositionSettingsElement(e),s=0;s<r.length;s++)n.appendChild(r[s]);return n},_createMapCenter:function(){var t=document.createElement("div");return t.id="GPmapCenter",t.className="",t},_createMousePositionPanelHeaderElement:function(){var t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Coordonnées",t.appendChild(e);var o=document.createElement("div");o.id="GPmousePositionPanelClose",o.className="GPpanelClose",o.title="Fermer le panneau";var i=this;return o.addEventListener?o.addEventListener("click",function(){document.getElementById(i._addUID("GPshowMousePositionPicto")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowMousePositionPicto")).click()}),t.appendChild(o),t},_createMousePositionPanelBasicElement:function(t,e,o,i){var n=document.createElement("div");return n.id=this._addUID("GPmousePositionBasicPanel"),n.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,o,i)),n.appendChild(this._createMousePositionPanelEditToolsElement(o)),n.appendChild(this._createMousePositionPanelBasicAltitudeElement(t)),n},_createCoordinateElement:function(t,e){var o=this;if(-1===["Lon","Lat"].indexOf(t))return[];var i=[],n=document.createElement("input");n.id=this._addUID("GPmousePosition"+t),n.title=!0===e?"Cliquer pour saisir des coordonnées":"",n.readOnly=!0,e&&(n.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),n.addEventListener("change",function(e){this.classList.remove("error"),o.validateExtentCoordinate(t,this.value,e)?this.classList.remove("error"):this.classList.add("error")})),i.push(n);var r=document.createElement("span");return r.className="GPmousePositionUnits",i.push(r),i},_createDMSCoordinateElement:function(t,e){if(-1===["Lon","Lat"].indexOf(t))return[];var o=this,i=[],n=document.createElement("input");n.id=this._addUID("GPmousePosition"+t+"Degrees"),n.className="GPSexagesimal",n.setAttribute("name","degrees"),n.title=!0===e?"Cliquer pour saisir des coordonnées":"",n.readOnly=!0,n.dataset.min=0,n.dataset.max="Lon"===t?180:90,e&&(n.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),n.addEventListener("change",function(){this.classList.remove("error"),o._checkDMSDegrees(t,this)?this.classList.remove("error"):this.classList.add("error")})),i.push(n);var r=document.createElement("span");r.className="GPmousePositionSexagesimalLabel",r.innerHTML="°",i.push(r);var s=document.createElement("input");s.id=this._addUID("GPmousePosition"+t+"Minutes"),s.className="GPSexagesimal",s.setAttribute("name","minutes"),s.title=!0===e?"Cliquer pour saisir des coordonnées":"",s.readOnly=!0,s.dataset.min=0,s.dataset.max=59,e&&(s.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),s.addEventListener("change",function(){this.classList.remove("error"),o._checkDMSElement(this)?this.classList.remove("error"):this.classList.add("error")})),i.push(s);var a=document.createElement("span");a.className="GPmousePositionSexagesimalLabel",a.innerHTML="'",i.push(a);var l=document.createElement("input");l.id=this._addUID("GPmousePosition"+t+"Seconds"),l.className="GPSexagesimalsec",l.setAttribute("name","seconds"),l.title=!0===e?"Cliquer pour saisir des coordonnées":"",l.readOnly=!0,l.dataset.min=0,l.dataset.max=59,e&&(l.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),l.addEventListener("change",function(){this.classList.remove("error"),o._checkDMSElement(this,!0)?this.classList.remove("error"):this.classList.add("error")})),i.push(l);var p=document.createElement("span");p.className="GPmousePositionSexagesimalLabel",p.innerHTML="''",i.push(p);var h=document.createElement("select");h.id=this._addUID("GPmousePosition"+t+"Direction"),h.className="GPmousePositionDirection",h.setAttribute("name","direction"),h.disabled=!0;var c=document.createElement("option");c.value="Lon"===t?"E":"N",c.innerHTML="Lon"===t?"E":"N",h.appendChild(c);var u=document.createElement("option");return u.value="Lon"===t?"O":"S",u.innerHTML="Lon"===t?"O":"S",h.appendChild(u),i.push(h),i},_createMousePositionPanelBasicCoordinateElement:function(t,e,o){var i=document.createElement("div");i.id=this._addUID("GPmousePositionCoordinate"),i.style.display=t?"block":"none";var n=document.createElement("div"),r=document.createElement("span");r.className="GPmousePositionLabel",r.id=this._addUID("GPmousePositionLatLabel"),r.innerHTML="Latitude : ",n.appendChild(r);var s=document.createElement("span");s.id=this._addUID("GPmousePositionLatCoordinate");var a;a="DMS"===o?this._createDMSCoordinateElement("Lat",e):this._createCoordinateElement("Lat",e);for(var l=0;l<a.length;l++)s.appendChild(a[l]);n.appendChild(s),i.appendChild(n);var p=document.createElement("div"),h=document.createElement("span");h.className="GPmousePositionLabel",h.id=this._addUID("GPmousePositionLonLabel"),h.innerHTML="Longitude : ",p.appendChild(h);var c=document.createElement("span");c.id=this._addUID("GPmousePositionLonCoordinate");var u;u="DMS"===o?this._createDMSCoordinateElement("Lon",e):this._createCoordinateElement("Lon",e);for(var d=0;d<u.length;d++)c.appendChild(u[d]);return p.appendChild(c),i.appendChild(p),i},_createMousePositionPanelBasicAltitudeElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.style.display=t?"block":"none";var o=document.createElement("span");o.className="GPmousePositionLabel",o.innerHTML="Altitude : ",e.appendChild(o);var i=document.createElement("span");i.className="GPmousePositionCoords",i.id=this._addUID("GPmousePositionAlt"),i.innerHTML="...",e.appendChild(i);var n=document.createElement("span");return n.className="GPmousePositionAltitudeUnits",n.innerHTML="m",e.appendChild(n),e},_createMousePositionPanelEditToolsElement:function(t){var e=this,o=document.createElement("div");o.className="GPmousePositionPanelEditTools",o.id=this._addUID("GPmousePositionPanelEditTools"),t||(o.style.display="none");var i=document.createElement("span");i.className="GPmousePositionEditTool",i.id=this._addUID("GPmousePositionLocate"),i.title=!0===t?"Cliquer pour saisir des coordonnées":"",t&&i.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),o.appendChild(i);var n=document.createElement("span");return n.className="GPmousePositionEditTool",n.id=this._addUID("GPmousePositionCloseEdit"),n.title="Quitter la saisie des coordonnées",n.style.display="none",t&&n.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),o.appendChild(n),o},_createShowMousePositionSettingsElement:function(t){var e=[],o=document.createElement("input");o.type="checkbox",o.id=this._addUID("GPshowMousePositionSettings");var i=document.createElement("label");return i.id=this._addUID("GPshowMousePositionSettingsPicto"),i.htmlFor=this._addUID("GPshowMousePositionSettings"),i.title="Réglages",i.className="GPshowMoreOptions GPshowMousePositionSettingsPicto",i.style.display=t?"block":"none",e.push(o),e.push(i),e},_createMousePositionSettingsElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=void 0===t||t?"block":"none";var o=document.createElement("span");return o.className="GPmousePositionSettingsLabel",o.innerHTML="Système de référence",e.appendChild(o),e},_createMousePositionSettingsSystemsElement:function(t){var e=this,o=document.createElement("select");o.id=this._addUID("GPmousePositionProjectionSystem"),o.className="GPinputSelect GPmousePositionSettingsSelect",o.addEventListener("change",function(t){e.onMousePositionProjectionSystemChange(t)}),o.addEventListener("mouseover",function(t){e.onMousePositionProjectionSystemMouseOver(t)});for(var i=0;i<t.length;i++){var n=t[i],r=document.createElement("option");r.value=n.code,r.text=n.label||i,o.appendChild(r)}return o},_createMousePositionSettingsUnitsElement:function(t){var e=this,o=document.createElement("select");o.id=this._addUID("GPmousePositionProjectionUnits"),o.className="GPinputSelect GPmousePositionSettingsSelect",o.addEventListener("change",function(t){e.onMousePositionProjectionUnitsChange(t)});for(var i=0;i<t.length;i++){var n=t[i],r=document.createElement("option");r.value=n.code?n.code:i,r.text=n.label||i,o.appendChild(r)}return o},_resetLabelElements:function(t){document.getElementById(this._addUID("GPmousePositionLatLabel")).innerHTML="Geographical"===t?"Latitude :":"X :",document.getElementById(this._addUID("GPmousePositionLonLabel")).innerHTML="Geographical"===t?"Longitude :":"Y :"},_resetUnitElements:function(t){var e="";"M"!==t&&"KM"!==t||(e=t.toLowerCase());for(var o=document.getElementsByClassName("GPmousePositionUnits"),i=0;i<o.length;i++)o[i].innerHTML=e},_resetCoordinateElements:function(t,e,o){for(var i=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));i.firstChild;)i.removeChild(i.firstChild);var n;n="DMS"===o?this._createDMSCoordinateElement("Lat",t):this._createCoordinateElement("Lat",t);for(var r=0;r<n.length;r++)i.appendChild(n[r]);for(var s=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));s.firstChild;)s.removeChild(s.firstChild);var a;a="DMS"===o?this._createDMSCoordinateElement("Lon",t):this._createCoordinateElement("Lon",t);for(var l=0;l<a.length;l++)s.appendChild(a[l]);this.onMapMove()},_setEditMode:function(t){document.getElementById(this._addUID("GPmousePositionLocate")).title=t?"Aller à la position ...":"Cliquer pour saisir des coordonnées",document.getElementById(this._addUID("GPmousePositionCloseEdit")).style.display=t?"inline-block":"none";for(var e="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",o=document.querySelectorAll(e+" input"),i=0;i<o.length;i++)o[i].readOnly=!t,t&&(o[i].value="",o[i].classList.remove("error"));for(var n=document.querySelectorAll(e+" select"),r=0;r<n.length;r++)n[r].disabled=!t},_checkDMSElement:function(t,e){var o=void 0!==e,i=t.value;if(o&&(i=i.replace(",",".")),isNaN(i))return!1;var n=parseFloat(i);if(!o&&(0|n)!==n)return!1;var r=Number(t.dataset.min),s=Number(t.dataset.max);return n>=r&&n<=s},_checkDMSDegrees:function(t,e){if(isNaN(e.value))return!1;var o=parseFloat(e.value);if((0|o)!==o)return!1;var i=Number(e.dataset.min),n=Number(e.dataset.max);if(o<i||o>n)return!1;var r=document.getElementById(this._addUID("GPmousePosition"+t+"Minutes")),s=document.getElementById(this._addUID("GPmousePosition"+t+"Seconds"));return o>=n?(r.dataset.max=0,s.dataset.max=0):(r.dataset.max=59,s.dataset.max=59.9999),!0},GPdisplayCoords:function(t){if(t&&null!=t){
var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),o=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(t.x||t.y?(o.innerHTML="X : ",e.innerHTML="Y : "):t.e||t.n?(o.innerHTML="E : ",e.innerHTML="N : "):(o.innerHTML="Latitude : ",e.innerHTML="Longitude : "),"object"==typeof t.lat&&"object"==typeof t.lng){var i={lng:"Lon",lat:"Lat"},n=["Degrees","Minutes","Seconds"];for(var r in i)for(var s=0;s<n.length;++s){var a="GPmousePosition"+i[r]+n[s],l=document.getElementById(this._addUID(a)),p=n[s].charAt(0).toLowerCase();l.value=t[r][p]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=t.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=t.lat.direction}else{var h=document.getElementById(this._addUID("GPmousePositionLat")),c=document.getElementById(this._addUID("GPmousePositionLon"));h.value=t.x||t.lat||t.e||"0",c.value=t.y||t.lng||t.lon||t.n||"0";for(var u=void 0===t.unit?"":t.unit,d=document.getElementsByClassName("GPmousePositionUnits"),f=0;f<d.length;++f)d[f].innerHTML=u}}},GPdisplayElevation:function(t,e,o,i){var n,r=this;e||(e=500),clearTimeout(n),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",null==o&&(o=-99999),null==i&&(i=99980);var s=o+i,a=o-i;t&&null!=t&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(n=setTimeout(function(){r.onRequestAltitude(t,function(t){a<t&&t<s?r.GPresetElevation():document.getElementById(r._addUID("GPmousePositionAlt")).innerHTML=t})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}}}(),I=function(t,e,o,i,n,r,s,a,l,p){function h(e){if(e=e||{},!(this instanceof h))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var o=this._initContainer(e);t.control.Control.call(this,{element:o,target:e.target,render:e.render})}return t.inherits(h,t.control.Control),h.prototype=Object.create(t.control.Control.prototype,{}),n.assign(h.prototype,p),h.prototype.constructor=h,h.prototype.setMap=function(e){var o=this;if(e){var i=this._createMapCenter();if(e.getViewport().appendChild(i),this.collapsed||this._isDesktop||(i.className="GPmapCenterVisible"),this.collapsed||(this._isDesktop?e.on("pointermove",this.onMouseMove,this):e.on("moveend",this.onMapMove,this)),this.options.editCoordinates){var n=document.createElement("img");n.id=this._addUID("GPmousePositionMarker"),n.src=this._markerUrl,n.title="Cliquer pour supprimer",n.addEventListener("click",function(){o._markerOverlay.setPosition(void 0)}),this._markerOverlay=new t.Overlay({offset:this._markerOffset,element:n,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}if(t.control.Control.prototype.setMap.call(this,e),null!=e&&!this.collapsed){document.getElementById("GPshowMousePosition-"+this._uid).checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}},h.prototype.addSystem=function(t){if("object"!=typeof t)return void console.log("[ERROR] MousePosition:addSystem - system parameter should be an object");if(t.crs){t.label||(t.label=t.crs),t.type||(t.type="Metric");for(var e=0;e<this._projectionSystems.length;e++){var o=this._projectionSystems[e];t.crs===o.crs&&!0}t.code=this._projectionSystems.length,this._projectionSystems.push(t);var i=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(i){var n=document.createElement("option");n.value=t.code,n.text=t.label,i.appendChild(n)}}},h.prototype.addSystems=function(t){if(t){if(!Array.isArray(t))return void console.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");for(var e=0;e<t.length;e++)this.addSystem(t[e])}},h.prototype.removeSystem=function(t){if(!t||"string"!=typeof t)return void console.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");for(var e=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),o=null,i=0;i<this._projectionSystems.length;i++){var n=this._projectionSystems[i];if(t===n.crs){o=n.code,this._projectionSystems.splice(i,1);break}}if(null==o)return void console.log("[WARN] MousePosition:removeSystem - system not found");for(var r=[],s=0;s<this._projectionSystems.length;s++)r[Number(this._projectionSystems[s].code)]=s,this._projectionSystems[s].code=s;for(var a=null,l=0;l<e.childNodes.length;l++)o!=e.childNodes[s].value?e.childNodes[s].value=r[Number(e.childNodes[s].value)]:a=l;null!=a&&e.removeChild(e.childNodes[a]),this._currentProjectionSystems.code==o&&(e.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(e.childNodes[0].value))},h.prototype.setUnits=function(t){t&&Array.isArray(t)&&(this.options.units=t,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))},h.prototype.setAltitudeOptions=function(t){if(t&&"object"==typeof t&&(this.options.altitude.triggerDelay=t.triggerDelay,this.options.altitude.responseDelay=t.responseDelay,t.serviceOptions))for(var e in t.serviceOptions)t.serviceOptions.hasOwnProperty(e)&&(this.options.altitude.serviceOptions[e]=t.serviceOptions[e])},h.prototype.displayAltitude=function(t){void 0!==t&&(void 0===this._noRightManagement&&this._checkRightsManagement(),this.options.displayAltitude=t,this._setElevationPanel(t))},h.prototype.displayCoordinates=function(t){void 0!==t&&(this.options.displayCoordinates=t,this._setCoordinatesPanel(t),this._setSettingsPanel(t))},h.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=t?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!t)},h.prototype._initialize=function(t){if(this.options=t||{},this.options.collapsed=void 0===t.collapsed||t.collapsed,this.collapsed=this.options.collapsed,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(t.positionMarker),this.options.units=t.units||[],this.options.displayAltitude=void 0===t.displayAltitude||t.displayAltitude,this.options.displayCoordinates=void 0===t.displayCoordinates||t.displayCoordinates,this.options.displayCoordinates?this.options.editCoordinates=void 0!==t.editCoordinates&&t.editCoordinates:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=t.systems||[],t.altitude){var e=t.altitude;this.options.altitude={triggerDelay:void 0!==e.triggerDelay?e.triggerDelay:200,responseDelay:void 0!==e.responseDelay?e.responseDelay:500,serviceOptions:e.serviceOptions||{},noDataValue:void 0!==e.noDataValue?e.noDataValue:-99999,noDataValueTolerance:void 0!==e.noDataValueTolerance?e.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=a.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=n.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this.options.displayAltitude||this.options.displayCoordinates||(this.options.displayCoordinates=!0),this.options.displayAltitude&&this._checkRightsManagement()},h.prototype._initMarker=function(t){if(this.options.editCoordinates){if(!t)return this._markerUrl=r.lightOrange,void(this._markerOffset=r.defaultOffset);this._hideMarker=void 0!==t.hide&&t.hide,t.offset?Array.isArray(t.offset)&&2===t.offset.length?this._markerOffset=t.offset:(console.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=r.defaultOffset):this._markerOffset=r.defaultOffset;var e=t.url;e?e.match(/^[a-zA-Z]+$/)?this._markerUrl=void 0!==r[e]?r[e]:r.lightOrange:this._markerUrl=e:this._markerUrl=r.lightOrange}},h.prototype._initProjectionSystems=function(){for(var e=[{label:"Géographique",crs:t.proj.get("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:t.proj.get("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:t.proj.get("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:t.proj.get("EPSG:27572"),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],o=this.options.systems,i=0;i<o.length;i++){var n=o[i];this.addSystem(n)}if(0===this._projectionSystems.length)for(var r=0;r<e.length;r++)this.addSystem(e[r])},h.prototype._initProjectionUnits=function(){var t={Geographical:[{code:"DEC",label:"degrés décimaux",format:this._displayDEC},{code:"DMS",label:"degrés sexagésimaux",format:this._displayDMS},{code:"RAD",label:"radians",format:this._displayRAD},{code:"GON",label:"grades",format:this._displayGON}],Metric:[{code:"M",label:"mètres",format:this._displayMeter},{code:"KM",label:"kilomètres",format:this._displayKMeter}]},e=this.options.units;for(var o in t)if(t.hasOwnProperty(o)){for(var i=!1,n=0;n<t[o].length;n++)for(var r=t[o][n],s=0;s<e.length;s++){var a=e[s];r.code===a&&(i=!0,this._projectionUnits[o]||(this._projectionUnits[o]=[]),this._projectionUnits[o].push(r))}i||(this._projectionUnits[o]=t[o])}"object"==typeof this._projectionUnits&&0===Object.keys(this._projectionUnits).length&&(this._projectionUnits=t)},h.prototype._getCurrentProjectionInformation=function(){for(var t=[this._currentProjectionSystems.label,"en"],e=this._projectionUnits[this._currentProjectionType],o=0;o<e.length;++o)if(e[o].code===this._currentProjectionUnits){t.push(e[o].label);break}return t.join(" ")},h.prototype._checkRightsManagement=function(){var t=s.check({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});this._noRightManagement=!t,this.options.apiKey||(this.options.apiKey=t.key)},h.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showMousePositionContainer=this._createShowMousePositionElement();t.appendChild(e);var o=this._createShowMousePositionPictoElement(this._isDesktop);t.appendChild(o);var i=this._createMousePositionPanelElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits),n=this._createMousePositionSettingsElement(),r=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),s=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return n.appendChild(r),n.appendChild(s),i.appendChild(n),t.appendChild(i),t},h.prototype._setElevationPanel=function(t){var e=null;t?this._noRightManagement?(e=document.getElementById("GPmousePositionAlt-"+this._uid),e.innerHTML="No rights!"):(e=document.getElementById("GPmousePositionAltitude-"+this._uid),e.style.display=""):(e=document.getElementById("GPmousePositionAltitude-"+this._uid),e.style.display="none")},h.prototype._setCoordinatesPanel=function(t){var e=document.getElementById("GPmousePositionCoordinate-"+this._uid);e.style.display=t?"":"none"},h.prototype._setSettingsPanel=function(t){var e=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),o=document.getElementById("GPmousePositionSettings-"+this._uid);t?(e.style.display="",o.style.display=""):(e.style.display="none",o.style.display="none")},h.prototype._setTypeUnitsPanel=function(t){for(var e=this._projectionUnitsContainer;e.firstChild;)e.removeChild(e.firstChild);for(var o=this._projectionUnits[t],i=0;i<o.length;i++){var n=o[i],r=document.createElement("option");r.value=n.code?n.code:i,r.text=n.label||i,e.appendChild(r)}var s=this._projectionUnits[t][0].code;"DMS"!==this._currentProjectionUnits&&"DMS"!==s||(this._resetCoordinateElements(this.options.editCoordinates,t,s),this._setEditMode(this.editing)),this._currentProjectionType=t,this._resetLabelElements(t),this._resetUnitElements(s),this._currentProjectionUnits=s},h.prototype._displayDEC=function(t){var e={};return e.lat=t[1].toFixed(6),e.lng=t[0].toFixed(6),e.unit="°",e},h.prototype._displayDMS=function(t){return{lng:l.decimalToDMS(t[0],"EO",2),lat:l.decimalToDMS(t[1],"NS",2),unit:"DMS"}},h.prototype._displayRAD=function(t){var e={},o=.017453292519943295;return e.lng=t[0]*o,e.lng=e.lng.toFixed(8),e.lat=t[1]*o,e.lat=e.lat.toFixed(8),e.unit="rad",e},h.prototype._displayGON=function(t){var e={},o=1.1111111111111112;return e.lng=t[0]*o,e.lng=e.lng.toFixed(8),e.lat=t[1]*o,e.lat=e.lat.toFixed(8),e.unit="gon",e},h.prototype._displayMeter=function(t){var e={};return e.x=t[0].toFixed(2),e.y=t[1].toFixed(2),e.unit="m",e},h.prototype._displayKMeter=function(t){var e={};return e.x=(t[0]/1e3).toFixed(2),e.y=(t[1]/1e3).toFixed(2),e.unit="km",e},h.prototype._setCoordinate=function(e,o){var i={},n=this._currentProjectionSystems.crs;if(!n)return void console.log("ERROR : system crs not found");e=t.proj.transform(e,o,n);for(var r=this._currentProjectionSystems.type,s=null,a=this._projectionUnits[r],l=0;l<a.length;l++)if(a[l].code===this._currentProjectionUnits){s=a[l].format;break}if(!s||"function"!=typeof s)return void console.log("WARNING : coordinates format function not found");(i=s(e))&&0!==Object.keys(i).length&&this.GPdisplayCoords(i)},h.prototype._setElevation=function(t){var e=this.options.altitude.responseDelay,o=this.options.altitude.noDataValue,i=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(t,e,o,i)},h.prototype.onMoveStopped=function(e,o){var i=t.proj.transform(e,o,"EPSG:4326");this._setElevation(i)},h.prototype.onMouseMove=function(t){var e=this,o=t.coordinate;if(t.map&&t.map.getView()){var i=t.map.getView().getProjection();this._setCoordinate(o,i),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(o,i)},this.options.altitude.triggerDelay)}},h.prototype.onMapMove=function(){var t=this,e=this.getMap();if(e&&e.getView()){var o=e.getView(),i=o.getCenter(),n=o.getProjection();this._setCoordinate(i,n),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(i,n)},this.options.altitude.triggerDelay)}},h.prototype.onRequestAltitude=function(t,e){if(t&&0!==Object.keys(t).length&&this.options.displayAltitude){if(this._noRightManagement)return console.log("[WARNING] contract key configuration has no rights to load geoportal elevation "),void(document.getElementById("GPmousePositionAlt-"+this._uid).innerHTML="No rights!");var o=this.options.altitude.serviceOptions||{},n=o.protocol||"XHR",r=o.timeOut||0;"JSONP"===n&&0===r&&(r=15e3);var s=[{lon:t[0],lat:t[1]}],a=this,l=o.rawResponse||!1,p=null,h=null;p=l?function(t){console.log("alti service raw response : ",t)}:function(t){t&&Object.keys(t)&&e.call(this,t.elevations[0].z)},h=function(t){console.log("[getAltitude] ERROR : "+t.message)};var c=o.apiKey||this.options.apiKey;i.Services.getAltitude({apiKey:c,protocol:n,timeOut:r,scope:a,rawResponse:l,onSuccess:p,onFailure:h,zonly:!0,positions:s})}},h.prototype.onShowMousePositionClick=function(){var t=this.getMap();this.collapsed=this._showMousePositionContainer.checked,this.dispatchEvent("change:collapsed"),this._showMousePositionContainer.checked?this._isDesktop?t.un("pointermove",this.onMouseMove,this):t.un("moveend",this.onMapMove,this):this.editing||(this._isDesktop?t.on("pointermove",this.onMouseMove,this):(t.on("moveend",this.onMapMove,this),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)},h.prototype.onMousePositionEditModeClick=function(t){if(this.options.editCoordinates&&this.editing!==t){this.editing=t,this._setEditMode(this.editing);var e=this.getMap();this._isDesktop?this.editing?e.un("pointermove",this.onMouseMove,this):(e.on("pointermove",this.onMouseMove,this),this.onMapMove()):this.editing?e.un("moveend",this.onMapMove,this):(e.on("moveend",this.onMapMove,this),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}},h.prototype.getCoordinate=function(t){var e=document.getElementById(this._addUID("GPmousePosition"+t+"Degrees")),o=e.value;if(!o)return null;if(o=o.replace(",","."),!l.isInteger(o))return null;var i=l.toInteger(o);if(i<Number(e.dataset.min)||i>Number(e.dataset.max))return null;var n=document.getElementById(this._addUID("GPmousePosition"+t+"Direction")).value,r=document.getElementById(this._addUID("GPmousePosition"+t+"Minutes")),s=r.value;if(s&&(s=s.replace(",","."),l.isInteger(s))){var a=l.toInteger(s);a>=Number(r.dataset.min)&&a<=Number(r.dataset.max)&&(i+=a/60)}var p=document.getElementById(this._addUID("GPmousePosition"+t+"Seconds")),h=p.value;if(h){h=h.replace(",",".");var c=l.toFloat(h);c&&c>=Number(p.dataset.min)&&c<=Number(p.dataset.max)&&(i+=c/3600)}return"O"!==n&&"S"!==n||(i=-i),i},h.prototype.locateDMSCoordinates=function(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(null!==e[0]&&null!==e[1]){var o=this._currentProjectionSystems.crs;if(!o)return void console.log("ERROR : system crs not found");var i=this.getMap().getView(),n=t.proj.transform(e,o,i.getProjection());i.setCenter(n),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(n)}},h.prototype.locateCoordinates=function(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),null!==(e=l.toFloat(e))){var o=document.getElementById(this._addUID("GPmousePositionLat")).value;if(o=o.replace(",","."),null!==(o=l.toFloat(o))){var i=this._currentProjectionSystems.crs;if(!i)return void console.log("ERROR : system crs not found");var n;n="Geographical"===this._currentProjectionSystems.type?[this.convert(e),this.convert(o)]:[this.convert(o),this.convert(e)];var r=t.proj.transform(n,this._currentProjectionSystems.crs,"EPSG:4326"),s=this._currentProjectionSystems.geoBBox;if(s){var a=[s.left,s.bottom,s.right,s.top];if(r[0]<a[0]||r[0]>a[2])return;if(r[1]<a[1]||r[1]>a[3])return}var p=this.getMap().getView(),h=t.proj.transform(n,i,p.getProjection());p.setCenter(h),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(h)}}},h.prototype.onMousePositionEditModeLocateClick=function(){if(this.options.editCoordinates)return this.editing?void("DMS"===this._currentProjectionUnits?this.locateDMSCoordinates():this.locateCoordinates()):void this.onMousePositionEditModeClick(!0)},h.prototype.onMousePositionProjectionSystemChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;this._setCurrentSystem(o)},h.prototype._setCurrentSystem=function(t){for(var e=null,o=0;o<this._projectionSystems.length;++o)if(this._projectionSystems[o].code==t){e=this._projectionSystems[o].type;break}e&&(this._currentProjectionSystems=this._projectionSystems[Number(t)],e!==this._currentProjectionType&&this._setTypeUnitsPanel(e),this._isDesktop||this.onMapMove())},h.prototype.onMousePositionProjectionSystemMouseOver=function(e){var o=this.getMap();if(o&&o.getView()){var i=o.getView(),n=i.getProjection(),r=i.calculateExtent(o.getSize());r=t.proj.transformExtent(r,n,"EPSG:4326");var s=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));s.innerHTML="";for(var a=0;a<this._projectionSystems.length;a++){var l=this._projectionSystems[a],p=null;if(l.geoBBox&&(r[0]>l.geoBBox.right||r[1]>l.geoBBox.top||r[2]<l.geoBBox.left||r[3]<l.geoBBox.bottom))l===this._currentProjectionSystems&&(p=document.createElement("option"),p.value=l.code,p.text=l.label||a,p.setAttribute("selected","selected"),p.setAttribute("disabled","disabled"),s.appendChild(p));else{var h=document.createElement("option");h.value=l.code,h.text=l.label||a,l===this._currentProjectionSystems&&h.setAttribute("selected","selected"),s.appendChild(h)}}}},h.prototype.onMousePositionProjectionUnitsChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value,i=this._currentProjectionUnits;this._currentProjectionUnits=o,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),"DMS"!==i&&"DMS"!==this._currentProjectionUnits||(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()},h.prototype.convert=function(t){var e;if("M"===this._currentProjectionUnits||"DEC"===this._currentProjectionUnits)e=t;else if("KM"===this._currentProjectionUnits)e=1e3*t;else if("RAD"===this._currentProjectionUnits){var o=(180/Math.PI).toFixed(20);e=(t*o).toFixed(20)}else if("GON"===this._currentProjectionUnits){var i=.9.toFixed(20);e=(t*i).toFixed(20)}return e},h.prototype.validateExtentCoordinate=function(e,o){if(-1===["Lon","Lat"].indexOf(e))return!1;var i=o.replace(",",".");if(null===(i=l.toFloat(i)))return!1;i=this.convert(i);var n=this._currentProjectionSystems.geoBBox;if(void 0===n)return!0;var r=[n.left,n.bottom,n.right,n.top];return r=t.proj.transformExtent(r,"EPSG:4326",this._currentProjectionSystems.crs),("Lat"!==e||!(i<r[0]||i>r[2]))&&("Lon"!==e||!(i<r[1]||i>r[3]))},h}(t,proj4,0,o,a,S,P,g,M,x),R=function(t,e,o){return{_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(e,i){var n={};o.mergeParams(n,this._options),o.mergeParams(n,i);for(var r=e.getInteractions().getArray(),s=0;s<r.length;s++)if(r[s].getActive()&&r[s]instanceof t.interaction.Draw){var a=r[s].getProperties(),l=a.name;if(void 0!==l&&this._extensions.indexOf(l)>-1){if(n.current&&n.current===l)continue;r[s].setActive(!1);var p=a.source;if(void 0!==p&&p instanceof t.control.Control)for(var h in n)if(n.hasOwnProperty(h)){if("current"===h)continue;if("function"==typeof p[h]){var c=Array.isArray(n[h])?n[h]:[n[h]];p[h].apply(p,c)}}}}}}}(t,0,a),T=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPdrawing"),t.className="GPwidget",t},_createShowDrawingElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowDrawing"),t.className="GPshowDrawing",t.type="checkbox",t},_createShowDrawingPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowDrawing"),e.title=this.options.labels.control,e.addEventListener?e.addEventListener("click",function(e){t.onShowDrawingClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowDrawingClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowDrawingOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createDrawingPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPdrawingPanel"),t.className="GPpanel",t.appendChild(this._createDrawingPanelHeaderElement()),this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&t.appendChild(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&t.appendChild(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&t.appendChild(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),t},_createDrawingPanelHeaderElement:function(){var t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML=this.options.controlLabel||"Annoter la carte",t.appendChild(e);var o=document.createElement("div");o.id=this._addUID("GPdrawingPanelClose"),o.className="GPpanelClose",o.title="Fermer le panneau";var i=this;return o.addEventListener?o.addEventListener("click",function(){document.getElementById(i._addUID("GPshowDrawingPicto")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowDrawingPicto")).click()}),t.appendChild(o),t},_createDrawingToolSection:function(t,e){function o(t){s._handleDOMToolClick(t,this.id,s),s._handleToolClick(t,this.id,s)}var i=document.createElement("div");i.className="drawing-tool-section";var n=document.createElement("p");n.className="drawing-tool-section-title",n.innerHTML=t,i.appendChild(n);var r=document.createElement("ul");r.className="drawing-tools-flex-display";var s=this;for(var a in this.dtOptions)if(this.dtOptions[a].panel==e){var l=document.createElement("li");l.className="drawing-tool",l.id=this._addUID("drawing-tool-"+this.dtOptions[a].id),l.title=this.dtOptions[a].label,l.addEventListener("click",o),r.appendChild(l)}return i.appendChild(r),i},_createSavingSection:function(t,e){var o=document.createElement("div");o.className="drawing-tool-section drawing-tools-flex-display";var i=document.createElement("button");i.title=e,i.className="tool-form-submit drawing-button",i.id=this._addUID("drawing-export"),i.type="button",i.textContent=t;var n=this;return i.onclick=function(){n.onExportFeatureClick()},o.appendChild(i),o},rgbaToHex:function(t){function e(t){if(t>255)throw"'"+t+"'' is greater than 255(0xff);";return("0"+Number(t).toString(16)).slice(-2)}var o=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,i=o.exec(t);if(!i)throw"Invalid format: "+t;var n=i[1],r=i[2],s=i[3],a=i[4],l=[e(n),e(r),e(s)],p={};return p.hex="#"+l.join(""),a&&(p.opacity=parseFloat(a)),p},hexToRgba:function(t,e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(o,function(t,e,o,i){return e+e+o+o+i+i});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null,i?"rgba("+i.r+", "+i.g+", "+i.b+", "+e+")":null},_createMarkersChooser:function(t){var e=document.createElement("li");e.className=t.className;for(var o=0;o<this.options.markersList.length;o++){var i=document.createElement("input");i.type="radio",i.name="marker",i.id=this._addUID("marker-"+o),i.value=this.options.markersList[o].src,i.className="marker-input-radio",t.defaultValue==i.value&&(i.checked=!0),e.appendChild(i);var n=document.createElement("label");n.className="marker-label",n.setAttribute("for",i.id);var r=document.createElement("img");r.src=i.value,n.appendChild(r),e.appendChild(n)}return e},_createStylingElement:function(t){var e=document.createElement("li");e.className=t.className;var o=document.createTextNode(t.label);e.appendChild(o);var i=document.createElement("input");try{i.type=t.type}catch(t){i.type="text"}return i.id=t.id,i.value=t.defaultValue,t.title&&(i.title=t.title),void 0!==t.min&&(i.min=t.min),void 0!==t.max&&(i.max=t.max),void 0!==t.step&&(i.step=t.step),e.appendChild(i),e},_createStylingDiv:function(t){var e=document.createElement("div");e.className="gp-styling-div";var o=document.createElement("ul"),i=null;switch(t.geomType.toLowerCase()){case"point":i=this._createMarkersChooser({className:"gp-styling-option",defaultValue:t.initValues.markerSrc}),o.appendChild(i);break;case"text":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:t.initValues.fillColor}),o.appendChild(i),i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:t.initValues.strokeColor}),o.appendChild(i);break;case"line":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:t.initValues.strokeColor}),o.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:t.initValues.strokeWidth}),o.appendChild(i);break;case"polygon":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:t.initValues.strokeColor}),o.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:t.initValues.strokeWidth}),o.appendChild(i),i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:t.initValues.fillColor}),o.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:10*t.initValues.fillOpacity}),o.appendChild(i);break;default:console.log("Unhandled geometry type for styling.")}e.appendChild(o);var n=document.createElement("input");n.type="button",n.className="gp-styling-button",n.value=this.options.labels.applyToObject,n.onclick=function(){t.applyFunc.call(this,"apply")},e.appendChild(n);var r=document.createElement("input");r.type="button",r.value=this.options.labels.setAsDefault,r.className="gp-styling-button",r.onclick=function(){t.applyFunc.call(this,"default")},e.appendChild(r);var s=document.createElement("input");return s.type="button",s.className="gp-styling-button closer",s.onclick=function(){t.applyFunc.call(this,"cancel")},e.appendChild(s),e},_createLabelDiv:function(t){var e=document.createElement("div");e.className="gp-label-div";var o=null;if("Text"==t.geomType?(o=document.createElement("input"),o.type="text",o.className="gp-input-label-style"):(o=document.createElement("textArea"),o.rows=2,o.cols=40,o.className="gp-textarea-att-label-style"),t.text&&(o.value=t.text),o.autocomplete="off",o.placeholder=t.placeholder,o.id=t.inputId,e.appendChild(o),o.onblur=function(){t.applyFunc.call(this,o.value,!0)},o.onkeyup=function(e){"Text"==t.geomType&&13==e.keyCode&&t.applyFunc.call(this,o.value,!0),27==e.keyCode&&t.applyFunc.call(this,o.value,!1)},"Text"!=t.geomType){var i=document.createElement("input");i.type="button",i.className="gp-styling-button",i.value=this.options.labels.saveDescription,i.onclick=function(){t.applyFunc.call(this,o.value,!0)},e.appendChild(i);var n=document.createElement("input");n.type="button",n.className="gp-styling-button closer",n.onclick=function(){t.applyFunc.call(this,o.value,!1)},e.appendChild(n)}return e},_handleDOMToolClick:function(t,e,o){for(var i in o.dtOptions){
var n=o._addUID("drawing-tool-"+o.dtOptions[i].id),r=document.getElementById(n);n==e?(o.dtOptions[i].active?r.className="drawing-tool":r.className="drawing-tool drawing-tool-active",o.dtOptions[i].active=!o.dtOptions[i].active):(r.className="drawing-tool",o.dtOptions[i].active=!1)}}}}(),L=function(t,e,o,i,n,r,s,a){function l(t){if(t=t||{},!(this instanceof l))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(t);var o=this._initContainer();e.control.Control.call(this,{element:o,target:t.target,render:t.render})}return e.inherits(l,e.control.Control),l.DefaultTools={points:!0,lines:!0,polygons:!0,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0},l.DefaultLabels={control:"Annoter la carte",creatingTools:"Outils de création",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",text:"Ecrire sur la carte",editingTools:"Outils d'édition",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : "},l.DefaultStyles={textFillColor:"#000000",textStrokeColor:"#FFFFFF",textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4},l.DefaultCursorStyle={radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"},l.prototype=Object.create(e.control.Control.prototype,{}),l.prototype.assign=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},l.prototype.assign(r),l.prototype.constructor=l,l.prototype.setMap=function(t){if(e.control.Control.prototype.setMap.call(this,t),this.getMap()&&this.eventKey&&e.Observable.unByKey(this.eventKey),null!=t){if(!this.collapsed){document.getElementById(this._addUID("GPshowDrawing")).checked="checked"}this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",function(t){t.element==this.layer&&(this.layer=null,this.interaction&&(this.getMap().removeInteraction(this.interaction),this.interaction=null))},this)}},l.prototype.exportFeatures=function(){var t=null;if(null==e.control.Control.prototype.getMap.call(this))return console.log("Impossible to export : control isn't attached to any map."),t;if(!this.layer)return console.log("Impossible to export : no layer is hosting features."),t;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return console.log("Impossible to export : no features found."),t;var o=this.layer.getSource().getProjection();return o=o||this.getMap().getView().getProjection(),t=new a({writeStyles:!0}).writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:o})},l.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] Drawing:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingContainer.checked=!t)},l.prototype.setExportName=function(t){this._exportName=t},l.prototype.getExportName=function(){return this._exportName},l.prototype._getsMarkersOptionsFromSrc=function(t){for(var e=null,o=0;o<this.options.markersList.length;o++)if(this.options.markersList[o].src==t)return e=this.options.markersList[o];return e},l.prototype._getIconStyleOptions=function(t){var e={};return Object.keys(t).forEach(function(o){switch(o){case"src":case"size":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":e[o]=t[o]}},this),e},l.prototype._initialize=function(t){this._uid=i.generate(),this._exportName="Croquis",this._exportFormat=".kml",this.options=t||{},this.options.tools||(this.options.tools={}),Object.keys(l.DefaultTools).forEach(function(t){this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=l.DefaultTools[t])},this),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(l.DefaultCursorStyle).forEach(function(t){this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=l.DefaultCursorStyle[t])},this),this.options.collapsed=void 0===t.collapsed||t.collapsed,this.collapsed=this.options.collapsed,this.options.markersList=t.markersList||[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARfSURBVFiF3ZhfbBRVGMV/d2Z3212tbSkCbuNaqzaRiL6QyAMPjSFoYqgx4oOiRmMFUzQG479o2lQ0QXk1EhYFgmlD2mIRkYhRwqLEaA2GiKWV7rZLQ0sLwbZId7t/Zq4PFK1125m5s/vCedz7nXO+M9/N3jsD1xFEvgXlTkrI8hBQBywFbgEqgEvAMHAayZcYHBYbuZJP77yFkdsoR+ct4GXAb4OSQPARXj4QzzGejx7yEkZuZy2CMLBAgf4nkhfEi3S67UNzQ5YSIXfQhKAdtSAACxDsk2EapXT3cF2FYQdNSN7F/YQFsJkw77gVUcL01mp3o5EDJoK1Yj37VchKjcjdlJEmhvrWmg9jGNwhGhhzSlTbZmnepjBBAMrReF2F6Hgy0+fIKPb+flWRIMtip+eQ88lcPRCtg3gCCVZ3RqhPDbJepqlPDbJ6XwSvP2nDJYCXB522prLN6iwrPIEETw33U/VoLZovBPjQfCGqHqtl3XDUZiBrn1lQCXO3ZcUDLV34Su/JueYrW0btnp8tNSRLnTamEiZoWRF6uHre9dseuT0vPrOgEqbCWtW3xNX6VSy02c+/sk4JwF+WFWZ6xGL9vA2fyzb7+QcqYUYtKwYP9s+7PrA/bsNn/geSA87DSLosa44+fT/p8VM511Jjp4g8u8KGk7XPLKhM5qhlRSbppzV4JwMdEcz0WSCNmT5LrC1CS/AujKliSw1BxGljzm8AH3MjHs4BpU65DjCBn0rxDJNOSI4nM33F2O2U58yEnU6DgOpF02AzcEGJa40LZHlfhagUZvp6vkmFawObVK7/4PLFSoZpBZ50ozEThsne6i2hjZqmFRVJ6U8JUeSVUmQNzQvg0c1MVtNMIUTSl0pNLhsaGu8A4xrfbZhS4CRQ5SoFcCWtja/5NBg+N+GZsu0vhSEkcY8mf+iNx+OuX3llmJVABNCVNUA2fl3xWdvJkriqRBb2uPugAYgNHEey1Y3Gt3/ccNxFEAChm2al6zAAjNAEWF/rc1Ev6+ffOLTwmBt7E0xD02J5CSOayQLrsHMJnYGMITJvHrr588mUMKyr54CUaaHrnfF4fCQ/kwHEBmLAa044rb+WHP4xXnxJ0VJK6CkyjO2xWOx3KMSH8zDtwONWdb2jvt41u4JtChZJKeVveDwnYrHYfw5uj4KYFRpSWbGqyCPL5ypIpMTkKwcWfWVXUEqRRcio1LTuUCjUE4lEsrnq8j4ZgKEP9bpgmfHFHPpyy3fle3f9Uto3n4aUIqNhDghN6zZ1vTcajaasfAsSBmBwq7f11tLM/24Hx2L+n+rbF38zBy2JEP0anPEGAj3d3d1pJ56F2GYAGInM82M+bWW53wxd++3ipH7x1QMLj8ysk5BAyj6Ppp2+d/nyaEdHh/I/W8EmA3Ci2b/iviVT3+tCerMmxkudiz450hcYBSYQIqrDmScGBvqawSxkH3lDV2Pxe6ltItnWcFNLTXX1qpqamkoK/BCvC/wNB+l5MdQKNHsAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS7SURBVFiF3VhNTFxVFP7OfTNvOjMtM9AoJSSYEEVMCv6kJi5NoCa1TRqNxDTaFhcWNSmxaaxNQ0w3mqgLdGeRhKFYXVC7qDU2BhVt/YdqEQRhRgYTKD8VZqAMzM+7xwVCcIR58+6b2fRb3nO+853v3fvuu+8CtxEo1wX5pTu2IpasBfEeSFSCUAygCMAsgEkAQyD6DClXF3VMLeZSO2dmuN7vB+MYiBsAbDEn8BIIZ6BrzdQyF81FDzkxw8/594P5HQCFCvQ5QDRSYO4Tu30IO2QGiA/5XgVzAGpGsMKTZ/mw7wTbfLi2yFzvOwngpJ0aaXidAtG3VcnKZv5dWgE7Nf5fFBJCHqK2hUsqdKVG+EihDwn5K9SXViZEAHqAApGIVaLaO5Pg48iPEQDwg2WjCtHyzKx8RxJBZLP9qoJ5CdJ9t9XvkPWZiSVrkY0R3b2MxnM9aJ2Ooi3iRut0FEc/6IHuiZtyidwQ8RqrrVk3Q7zHNEd3L6N5eAYP7q2BppcB0KHpZXhoXw2aB6eyM8SPW23NuhnGvaY5L7T2w7Nt54Yxj68KDS19WSiZ66RBZQPYYZpRvfuejPH7H8scX0FJlv2sQcVMkWmGpmc2bBbPVicNKsvslmmOkZg0id/IQmkhy47WoLABYNo05/rnIxnjv1wOmtbgLHTSoDIz10xzzhypQiz624axWLQPLQ3V5kLUa7U1la35G9OcRMyFY/cV49qlLhiJMQAJGIkx9FzswsuVO5BccpnryKuWW7NK4IPFXmjLgwAKrHItYB66t5JaJmJWSJZnhjqmFiFxzirPIjqsGgFUD5qC3gRjRolrBsYMQEr/NEpmKBCJgHBKhWteHKdUjv8rVBvgw773QaizU2M9DMb58q98rwghXC5md5zI5WSmlCGcAODQZDIlhCSiJT0eX6waH490AsYq356ZZ4oK4DSuAihT4UuGYIaQILGQ4vknen2BibhYzlqfySBG2CH4ylA4HLb9y8v1BY8A9CkAzVwcZDA0BgkG0+oFBjP49Ij3o48n9b9U20gB7bZuZwCAAvM/gPndTDmSIZKS9CRDNwCHBIv1NzFdfzu/t2EEAEiTstS2GQDA2PwbAHrSh9ebSDewihtxMdn0h/dbO/ISkIYQoZyYoW6kYOD59YdQg8mRYjgleFONpKRk07D34qJBxmY5pmBOkKZdCIfDk7mZGQDUER0FUROwaoQdZpd6H07oXT/OOWYVJZmBQZdhvBcKhfqBfFyc1xcEEpKeNjMytOgYfqp32wUFiSVm7oPD0RsKhf5zsnYoFMsMyccTUtvtFHL7ZimxFC2eGPJezrYkM6VAHGQhBsrKyga7u7tTG+XlfGYAIFxXuLfEzZ288fvCb4U858+Ou0KZajBTUkCOkhADUtOGgsGg6SVIXswAQKiuqK3UbRxIH78yq//8Yr/3i01oSyD6UwDDTo9ncGBgIGFFM29mRh/FFm+J/3qBk+9aHbsZFzf39WwN3DK0tWXCQAzMIw4hfq/etSvY2dmpvLPlzQwA/PTk9od3eowvhWCnZEodHfC2fz3rnAEQBVFQA4YPjI6OnAZkPvvIGb7bX/Ta/LP+SEftne0V5eW1FRUVpcjzQ7wt8A+9at5zXMB2DQAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAP0SURBVFiF3ZnLbxtVFIe/e8eOPU5DapI2whEWyiILJGDTBQuWSGTTSkVlQRGs2MGSh4RoQWLB4x/gpVIViNokJUV0U4RQXKgQr0ookCYkdjONSJtQJTGltjO2Zw6LJlEbkszLTgQ/6Ww859xzPt97556Zgf+RVKMHFGgD+oADwP3APUAHsABcBS4BXwDnFNxsdP6GSCAt8LZAWUB8WEngLYHdO137HRI4JLDgE2K9LQg8vtMMCCiBowJuSJBVcwWOSBOWfRCY1yJCrLdXdwrkUANmZL05Age3G2R3hD3iZYsC6TB16ZA8rwB3h4z1Uhp4MUxg4A23co7MA2aYhD5VBrqCnkNhZqYPPyCpVJnh4Ry2PYNIFdue4fTpHKZZ8ZEjBTwWorZgEvjEc92nUiUpFn+VjbS0NCqm6edgPbEdMD97FjI8PLIhyKoGB0d8wPy0HTBXPQux7Stbwti25QNmNmhtYW4ANtCytZNUPXxslEp4pKoq8PK5Q2FuAH97elSrcx7Xr/nIc8NnPWsKAzPv6XH27OUtr585Y/nIs/Uf0ggJHPdc76ZZlqWl0Q33y+LiqCSTFR975th2wDzjqy0xzbIMDo6IbVsiYottW3Lq1IhPEBF4ejtgdgkUm9SXrVpRoDVobYH3zEqLcTxoXEAdU1Bqco5bkluPyPNNmpV5Cdk1RwE63CSYw2FrivSYKtBPhOTr5cDJnmz2Oa11IiFi2kol4iKq7ug4QMxwa3WtXaVUpcW2Sw/MzhaHwFmNjwrTDvwC3BeJAripdXF/JvP+H7HYsu/8ohwlWDEt305YlhX5BYLAI0AOMCKMIUc6Oj4eaGuzwg5RhxNhnzTXpOAC8E6UMb5qbb0QAQRAGa7bHRlmRUeBH8IEzhnGtZc6O89HSe6C62hdaAiMgjrwFH6a0NtUU6r28p49n5WUcry9N5FIVRnGsGVZc42aGRQUgBeCxPS3tZ37LplcCJlSBMYTjvNeoVD4baWGxkpgEHjCy2+ipWVifyYzECJFRURGicUuFgqFP2+/0AyYTlupyYTIpqd4WanSwe7udy/HYr5aFhFVR0letB7LZrPjuVyuvpFfU97tzhrGgYzjfL7J+PJmOn3yo/b2qa3GEFE1jTuttB5zDWMin8/bXnmb9qJ6Jh7vv7dW+1d3cN40v3+2q+vLTcIqKHVZw2Q8lRofGxurBsnZNJhpSLZr/XvadbOrv103jOt9mcwHNwxjbZkIlBGZiml96cF9+/JDQ0Oh72xN/YRw0TQffmh5+RtDJF4H5/m9ez/8OpWaB/5CqbwBk09OT0+9Dm4z62iYfkwm37CVqgzsuuvT3p6eR3t7e7vZye8w/xX9A0ynxee2hlfFAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASKSURBVFiF3ZhdbBRVHMV/9+5uPwikFExEiCtWbSKCCEsCiU1EJIEXeMIHxZgYPzBUYzB+RUPlwwTl1UhYFIiGhrQVFCMRAoQFidGaEgIuVLrbLgSkhWBb2N3uzs7M3weBILadnZndF87j3P8553/m3ty5c+Eugiq1oDy5dRw5czGKpQjTgPuAicBV4C+E02j5gSFrn4o3pkvpXbIwMmNTLaHAByjeBKqLoGRBfY4V+lSdeGmgFD2UJIzM2bwMUVFgggf634i8qo6/vttvH9oPWRAlkS1NiGrFWxCACSj1rUSiqwXx9XJ9hWH2liaQtfifYQWsIxL9yK+IJ9xYWq1+NIaBjahl6vhr33khe2pEntg+noCRxPvSGg39GNZD6tTKfrdEb8ssaHxIeYIA1FKh3/VCdD0zN74jfRS3/XpFlpx5r9vvUNC1Tc5cTDFBqoJZ1i9opyFcR0hPomD3cvR8N02H55IvOPHHUB1aBOxy05r7ZaZY6lhTFcyy74Vunp46n5AOAxWEdJhnps5n//IElaEhRw0pwucOuA8jPOpYs35BO2Mrpg87NrZiBmvn/+aooWSa29a8bACTHSsawnWjjj/1wIOOGlKEzx3wEmaiY0VIT/I1/i/uKbKfW/AS5rpjRcHudRi/VITPtSL7uQUvYfocK46e7x51PNaTKsJn9BcyDDyEkXbHkqbDc0kbp4Ydu54/xcexec42OPvcAS9b82HHmnyhmkXND3OwJ0bBPgcYFOxzHEjGWLTjEQyryrkzFXPfmkvIY1+MpSp4Aahxy3WBQQrVU9TJFzNuSK5nRsUb0yi2u+W5dNnqNgh4PWjmrXXAZU9cZ1zGMD/xQvQU5sbxfJUXbhFY5eX4Dz5/rCQSbQae96NxOyzsnXVXNjRqrSsrRarzSlWGRJRp6RBAMGAXTK1tpdRQRT6fmXHx4kAbWDf5fsPUACeAqb5SAGkxBpYMfBW9YA/mivYXZSkhFdTyc2cqlfL9yyuRaAMQAwKeNUBWZ376piV3IuVVwoSv/V1oAKpjxTGQjX40Dhh/HvMRBEAFbHuK7zAAjOttApyP9cOg17526b303iN+7G2wLa2TJQmjYmtMYDnFHEJvQwGr8H5m766M5C3n6hEgYqhAYHcqleotzcwAqmNFEuEdN5zm3PF9vxipqx4tReBMpWVtTiaTf0A5Ls4j0VbgWae6TrOvc8ngthYPFkMicpJgsCOZTP7nw+3+QsMZK/NiLqxUwdqRCrJ2PvNWes+PxQqKKBMlCdE6Hg6Hz8RiMXO4upLPDMDFWZ8tnazHfz+CvmzIHNy5Lfd712gaIqqgsXuU1nE7EOhMJBJ5J9+yhAE4P2tj8/265n+ngyNG8tdXrrfuH4E2hFLdGs6Gxow5E4/HDTee5VhmAFj92Zf7J1Q01Krq8M1nV+zMlbfTew7dXieQRaQrqPXpx+fMSbS1tXne2co2MwAds9fMm6kmHQ2gQia29ca13V8eKnT1AYMolQjA2ed6errWgF3OPkqG9pmr1+cjm4ZapjfuqK+rW1hfXz+FMr/EuwL/AGOdsbn1H7gQAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATNSURBVFiF3VhZTFxlFP7Of+8Mi12Eot2Sia36IIJCIWmT0lhSK30wfaoaNcampBhrfGhSl5hIW9HE5VFTpWilNpUI0hrTh1YwjJSkthFEcABhBoZ0YekCFGa72/FBSLAF7jY86Pc453znO9/9//nvuT/wPwIlu2DLns1Lo3J8hwDtZHA2gNUAVgC4SYRrzNxFJH6UpNjZ4iOBqWRqJ83MmVdzM7y6520CvQ4gzQIlSoxPJVX/sLi6fTwZPSTFTOMrhbuYuRJApgP6LRDv3V7ZdsptH8INmQH6aW9BOTPXwpkRAMgE0/eNZQXvssuHK7khF5VtOEhEh+F+hQlAcX/hGu1E61CzmyKOML21at3UmAMGM+96qqrttBOyo0aadufdq3mlEJxvrXlBwFhcUh58+vPOMbtcR/8ZzSu/g0UwAgAMZHgN7xtOuLZXpmXP5qUxOT4Ca8evU0RlOb7S7ntItq8S30EWjEje1GhOacWlrNyi9SR5VrGuDo92NPd3HSvfqCsJM366pqaVAKi305vtbSZAO81yJG9qdMsnZ/vvyyveSpLHB8BLkse3Mn/b1i0fnQtK3pSYuRKb6tzdm10QP2KWklNacUlOXZIzV0xOX5KbvfvwRXMdyrbbmm0zzFhjlpOVW7R+ofj9eU+ss6BkqnMnnJxmK8wSSPKschOfRpbljqbhxMykWQLr6rBJfMiCzm3LHU3DiZkRs4TRjub+BeO/+8MWdBZ8IHPBthkiXDLL6TpWvlGLTnXOFVOjk52B6oObzJXYVOdO2D8AQE1mObqSSDv/VslDI62NftbVQQAK6+rgyG8N/vNvljxsqEqqqQ4Lv93ebE8ATfseXaJpqVcALLfLtYEJI6auLTnREbFDsr0y/4wY9LVdnh0w4yu7RgCHg2ZCSrwHYNQJ1wJGFVl53wnRkZnp8Xy/E64F7Hcy/gMuP6waygpOAnjBTY3Z0Bk1ZeeuvyaESElhTksQpXiYSdOFBwBkyVA1IQwiinkTiUju1avjdYA+w3drZjkB7Qw84NIH4hqPV1wYr7wVM+JWOcykEyMsCz7fEw6HXX/yNpQVFAHww819AoNP9kS+abkcDzutoAHHXd3OAMD2o60tTPjYTY3260qLCyMAQJJhrHVtBgA8q5eWAzAf6+fAeNwYqu6c+sWNvgEYuhChpJgpPuTXBPAiLAyhs6Ez1ONdkfqEzrp59jxgVkiSToXD4eGkmAGAbUdbQ0R8wA7Hfzl+tueGctOhJDPQnaLrX4RCoT+BRbg4bywrqGXgGbO8K5NazwcXJr5zIBFj5g7IcmsoFPrXi9v2hYYZJGBfzOAnPYIy5stJaEbky86pM1ZrMpMG4iALEfD5fN1+v1+bKy/pKwMAtS/n78xIET/MU5/r/4rUNA7G+xaqwUyqgDFAQgQMSeoJBoMJM91FMQMANS/ln8xKE3dNB4Ebyq+ftU2em4cWA1G/AHo96endgUBAsaOZ9G02g7g0VhpRMovu8ZJv5rcJxbh+rHPq59l5DETB3CcL0fVYYWGwrq7O8cm2aCsDAFXPbdjkW0bNguDRDehV7ber/rihjgCYAFFQAnqfHxjoOwQYydBbVDMAcOTZxyvWLZMPXBxS6r/tjlRDlrt7e3uvAeDF1v5P42/pFun0pc2xBwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARrSURBVFiF3ZhNbFRVFMd/985H26m1VEoL0zj0Ayqi6IZElpiQ2MSgIeJCDZGFuEEXJH4bG9QN6spoImiMIaExbREEYoIxhgEb1CZNjFg6lHnTacNHW8QW7Mx0pjPvuKDVprR9X1MX/Jfvnv/5n/89N++d++AOgip2QolRQZAWhCeA9cAqYDlwHbiCcB7NcTKcVA8wUUztopmRQarI8wbwMlBmg5IGPkGzTzUwXowaimJGEmxHOADc44L+F7BLNXHEax3aC1kEJQatCB24M8I077DEeUfE2+Z6MkOCVuBdvHdYoXgPg7e9JXGJ6aPV4SXHPDARtqs1HHVDdlWIDLAMEwP3R2sxjOGnSa1mzCnR3TET3mJpjABUkedVN0THnZEYFQQYwd7r1y3STFLr9DvkvDNBWrBjRIfS1B6J0pAdolFyNGSHqD0cRZVlbKiEKOUxp6U5N3Pry26RNZRm9ZUE5ds2o4IRIIgKRih/ajOrr8RtGVI2dObKOiUA91tGrDjUjap8cH7FZRuoOfirZQ5hvdPC3JgJW0aEHm9cfP3JBsscYkNnDtyYWW4ZoYIrPa0DKKptVzQN52YUf1vGSG548YDcVRtKN+0V9B/cvABGLGPSJxKLrqeOJm0oWWzI7XBzzLotI0Z3PII5fm7eNXPsHKM7NxVFZw7cdOaUdUymjMHwGlKdUSQ3COSQ3CCp9iiD4bXIZKllDkXUaWnOJ4Be7qKUS0ClU64D3KCcOrWSlBOS485MjxhfOeU5xJdOjYDbqfnWFTkG1LjhW2AUP+v+t6l5WmiPG64N7HFjBDxerMSgDXjWS47ZKBT4unFLZLfWuqREpCyrVElAROULOgDg95lTea1NpVQmmM2mNly+PN4JhRm+VzOVwG9AvScXwERaj2/dFT5wadg/aVtfVEEJSb+Wn2LJZNLTPwDVxA1gB7N2xw1EkH37q445MQKglPjQ0pSH5+vr6+u9/dAAVBNdwIdecvzQVd7V/l1F0ksZPtOs82wGgCFaAeuxfh4MX/Ndfe2D6tNe5E0wC1obRTGjHiWPyXNgYwidhakpNfX6Ryu+SWWU+2MqklM+35FkMjlcnM4Aai0GwitOOG0nKk6e7Sm97lJSBPpKCoX9hmH8AUvx49ygA3jaKi5mBGNbXwy3u5DIiMjv+P09hmGMzl4ovpkLVGcLqr+kRKoWikmnVWrb7rrPEkN+WyOLiMqjJC5a90Yikb5oNJqfL87vtuiFoO7jz8s/653hmsK3zL9Z8vHBZcesjIioKY05oLTuNf2+WDwezwIkEgtflYremRkMdQXa7l01ddt0cLq77JcX3qz9fgFaBqUSGvoDoVBfb29vzonmkpkZOEVpZaW+UFVpRmaeXRvzXWvZGf785oTv32MikEbkol/r8w9t3Bjv7Ox0/WZbMjMAPcfLNj28bvKMzyeBfIHCS3trvvjxbGgEuIFScR/0PzMwcHEvmEtZR9HQfaz0/WxMZdo/vftQc2Pjlubm5jqWeBPvCPwD/KOH+jnO5aMAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS8SURBVFiF3VhdTBxVGD3f3Rl2oRAstZXaBGxpoxaxhSVpE0ha0ib0qU/1QX009UHjQ5Oa+BO3pdTEn0QffNDGGH+SprGUqlUTSGtcKfGHBELALYTuwGJsSyEVKLuz87Mzny80sQjMzp3lQc/j3O+c8525N3fuXOB/BCq0YNNoU5lRZBwipsMM3glgM4ANAO4AuMnM14QQl7LZbFeiNpEupHfBwtRN1q1Xc+orBHoJQHEeFB3AB45w3hrcOjhXiB4KEqZxvPEIM58BUCFB/4vBRwdqBi4G7UMEYjMoqkVjzHweckEAoIJAF6LJ6BvgYC83UJiG8YYYgDYEn2EC4VRUi74eTEQSi0vrfBCNZeAy85GB7QNfyZClGtk9sfuBkBvSIL+0VsOspVg1w9XDs36JUstMYeU1rE0QAFhflCt6WYboe2aaRpvKDNW4jfy2X1nohmE85Pc7pPh1MYqMQ2DvIBER0ds3tvc1lzRvU0mttNme6tF7xmPTsT0mm178kuJIcSuATj+9+V5mxHTYqyYiInpXddd4y7qW/SqpVQCKVFKrDqw7sL+7ujsZpnDWS4OJPX2WwncYBj/uVdO+sb2vlEqfWG6sVJTWtW1q+81Lg5h2+u1NZgN42KuguaR522rj+0r2bfXSYGZPn6WQCbPBq0AltTLIOACA8KCPngDIhCEseJXYbE+tOg77Vh5Od/PuaRH+wzBue5X06D3jq43HM/FUHk6rvpDlILPM+rwKYtOxPWk3Pbzc2IK7MHxi+sReLw0Ge/oshczW/KNXjclmcetk6/YrmStxm+1JAJbN9uTlzOV462TrDoutiGdjJOK+e/NLqE3UlkYikT8BlPvl+sC8vc7eMlQ5lPFD8j0zidpEmkCf+uX5xCd+gwCSB01TMU8BmJbh5oFpS7FOyxClwiwez4/JcPPAMZnjPxDwxyqqRc8CeCaIxn1wcG7m4MyLQohwmLnYJAqrzJRzhAoASsi1c0K4RJQtMs1M3Y0bcx2Ac48eNEw5gEEAjwQKAYB1nksfnTvjTrlG3hwmhxgpRfDV0VQqFfiXN6pFmwHEAYSkRRisv5/5wv7eSMkq5IDPg93OAOiv6e8F8E4QDbvX6g0QBAAo5LpbAocBgLI/ymIAPI/1y4Fn3FvZt9M/BfF3AdcRQitImHhLPAcXzwLeh9D7YMPW3810cpYd7+IVwGxRKHQxlUpNFSQMAPTv6NeY+bgfjvmt0ZXrt+5IWjIDI2HH+UjTtN+BNbg4j2rR8wCe8qpztdzowvPzX0pYZJl5CIrSr2nafR9u3xcansjhBXb4IIVp/UolrLuZ9On0d/lKMlMOxEkWIlFVVTUSj8dzy9UVfGYAoP6X+sNik/h6BX02PsycMy8Y11fTYCZbwJ0gIRJuKDSaTCZNL981CQMA9b31Z8Vm8a/Tgd1n/aq/utC9Ai0LonEBjKklJSOJRMLy41n4ZbaIWXv2uYr5imYqp6p7z9xZdyb7ZvqHf9YxoIP5uiLEtScbG5MdHR3SO9uazQwANFxq2EuPUQ9CUOHA0U/e/dj+2b4NYB5EyRAw9vTExPWTgFsIvzUNAwC7vtnVrjyqHLeuWJ3me5nPoCgjY2NjNwHwWnv/p/E3iQfm3w9KV7kAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhbbBRVGP7+M9NddtmyvcYKSbGoAYn4REJNIGmRpMREfMEH5YEYY6ptfCCBxEgEvMR4eeCBtBYa1EIIsbVAFAIIsis0og1GpJbWdrdsiUBLuXQp3e3MzpzfB23Cpe3pzGwf9Huc83/f939z5nLOAf5HoGwL7m4ryjWssdVgWkPEi5npURAKwbgJ4CoYF5n4WyBwrLZy6G42vbMWpv5MOJ9s+TYz3gIQUDtzCkw7DGgfb6gcHs5GD1kJUxcJrSWinWAUuOjgFkt+vXbl3QNe+xBeyMyg+lOhLQRqdhUEABgFRPTN59HQu8zebq7mhVxSEdoKovfgfYYJoMpzCZ91pMk87UHEHeoiobUEavai8RAYkgTWvlkxctAN3VUj2yN5eX6y464fralxG7p4vGZF8rZToqt3xs/2OzMUBADykZGb3BAdz8zutqJcI2MMYjqfX7cgTjEHHnH6H9Kd+hjW2GqAlEF0PZhataixfX5h1QJBvhLJ5kD/jaN9J7url1l2amo+U1BwugpAq5PenD9mTGtUJboeTK0v7+0rK3qhQpCvFIBPkK+0rPjFivXP/hnTtWBaaSPUPg/CzTvzlKpg1aLGdp+e+/REYz49vGTlooZfVBrMWOy0MTdh5qoK5hdWLZhqvKzo+TKVBpHa50E4D0MoVIqSr8TL+L8omnZP47pOCWCMqEokmwOK8WvT8LnjoCsA7mZmUFXSf+No31TjfTeOJKbhNOUNmQiOwxCjXVVzsrt6mWklOyYaMzLDHae63ihXaTCpfR6E4zCSKaKqsexUoOnswifiQ4eiks1+AKZksz82dDDadHbhk7ZMz1I3RlGnvTleAdRFikOEsb8AhJ1yHSA5agbnbaoaHHVCcjwz/ywx+EunPEcg7HYaBHC7OdO190G47oqrAuE6NPGhG6qrMDUrkrchaYMbrhKSNrhZ/gMeN1b10dA+ML3iReNe2JL3f/ZqQa0Qwu9nDhhE/hxmsmyRAwC6JjOWEJKI0j7DGF1y5cpwC2CP8z2F2XkiP2zr1nkAj3mLAZhpMbx3a3hnckiMTZfDTDYxErrgM92JRMLzlrcukrucgCi8nCcw+MSe2Xs6orMSbhUsoMnT6QwA1FaOtIHxqReN2G/+Ng9BAIA0Ked5DgMA12lkCwDlsn4ijNyia8d3zf7Ri78EpC1EPCthtlXC0qRYB6gXofc1YSNz/Is5rYZBtrp6EjCbpGkHEonEQFbCAED1c8k4GBudcM6fmnXscqd+06UlM9Dlt+2GeDz+BzADB+f1kTnNAL+kqhu6rHfv3Rr+2oVFmpkvQNd/jcfj9/24HR9oqKCBawyTVuk+zp+sxhyj0cMNocPT1WQmC8QxFqKztLS0KxqNWhPVZX1mAOCT1rw1uQX2oUn0+fT+4P5z3wd6p9JgpoyAvERCdEpN647FYobKd0bCAMBHzeF9ecXyodVB4kLOzwe2zzk+CS0Noj4B9OQEg12dnZ2mE8+sP2bjMEeTr6UD4eWBkCwdvzZ6Rwwd2TX7h3vrGEiBuVcX4uIzS5fGWlpaXH/ZZmxmAGBzY0H53AXWaRKcI23Y3+0INcZ/9w8CSIIopgE9L1+61LsNkNnwm9EwALB5V8EHJWWZjV0/BVpPNoW+gq539fT0XAXAM+39n8bfE7XcWzV66JYAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAR4SURBVFiF3ZhbbBRVGMd/58x2u7vQbmtvssSNAjaRiE8k8oAPBowkVTAGTVAJJMYXiTGYNFxisHiJ7ZMPQiIxxhRLCG1tjSBRubiAJEhiNDaFSlu6baRQELsI7e7sZY4PlKT2sjNzZvvC/3HO9//+33++M2e+GbiPIAqesYkSLNYgWAssBRYAFcBNYBjFBSTfkuR7GrhTSOnCmfmYcgTbgbeAoAPGOIJP8dPIVhKFKKEwZppYj2If8IAG+x8Eb7CNDq9lGJ7YCkGQXcBeIKSZJQi8zDNYHOMMu/XL8WYmxHvAbrx3WABPc5YsxzntJYke7m6tVk85psNCsZ4ddOqQ9Qr5hDJM+tF7RuwwimIxOxh1S5Racml2MjdGAMqBeh2i+840UYJiBGfHry7GSVHj9j3kvjMWa3BgJOQPjXe82BEz680htU2lzXpzqP2F9ljQF0w6UAlRzLNuS3PfmUa+Al7LW4k/ND68Zfhy2B9+fOpawkx0RfZEliSzSbsbsp/tbHJTms4z85hdQMtzLednMgJQVly2rLmu+RcHOkvdFqZjJmIXULe4blG+9XW16x4phM5U6JipsAvwS/+DXtYnUOm4ognomLltF5C20tds1q860PnXcUUT0DEzYhdwuPfw5XzrnZc647Yqgrw3ZCbomDlvF7DxyMYnE2aia6a10dRo1+bvNq+wVVH2OlOhY+Ynu4BkNhmM7Iksaetpi6Wt9CCQTlvpwUM9h2KRvZFHU9lUwFZFEHNbmPv3TAPzCfAXEHbNdY5bGCyknjE3JPeduTtifOma5w5fuDUCuoOm4n3guhbXHtdRfKhD1DNzdzzfqsW1x1ad8R+8flg1cgB4xVOOybA4GP0sukVKWVysVNAUorhIKZHNySIAn2FlslJaQoik3zTHll25kmiD3D26VzNh4HfgYU95AJmRiWhrZJ/vti/llKOUyAlF3CfVmZ54PO79k7eRlUAMb/8TVNWpiv3hiyVxXX4Wmr390AA4zhCrCCB4SjfF/IF5P1eeK//NQxVCWNYNvQNgKkx2AU7G+mnw3TGu1pysPOVF3gIrJ2V/Ycw0kEXyKg6G0MkQlshUn6r6WmREzj56FiiVFobREY/Hr3nfZvdwjFFWcRPB804pZV2lR8PdJXmH0jxQCnoCuVzrn4ODgzA3P85bUbxkF1b8t7/nofbIIQ2FpFLqD3y+X/v7+//34vZpJMsPgzeFKVYrQ5XPFiIzYqz6ZPURpymVElmE6lNSdkej0YuxWCw7U1zhOwMY7xprc/Nz38ySX1WeLT9Y1hXuzZdDKZGRWANCym7LMHr6+vpMO905MQNQtLPoQKY0M206CA0Fz0WO1vwwCy2JEJclXCoKhS52d3en3WgWfptNIOPPvC5TcqUVsKL3rhnjxo2aE5UnJscpGEepXp+UF55Yvryvra1N+2Sbs84ABN8JrkhVpU4roYqwyC34sfrzefHQCHALIfoMuLRhYKC3Aay5rKNgCLwd+EB8JJKlm0pbahctWl1bW7uQOb6J9wX+A8zucxGCTS9IAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARZSURBVFiF3ZhbbFRVFIa/vedSZkTbClJow1irNpGIvpDIAw+NIYghqTHig6JGIoLSGEK8xEhoKpKovBoJg1aCaVNpsYhIRINh1D5oDYaIvUhn2qGhNwi2RabtXM7ZPrQk0Ns5Z5+ZF/7Hs9e//vXvtXP2OgduI4isZ1S1d0JmPVAJrACWAYuAq0A/0A7qWzBOIaquZ1M6e2bU/kLwvAu8AQRsMMZAfAK+jxCbR7JRQnbMqAMbQYSBuzXY/4J6FfFas9sypCu2UgJ1sBpEI3pGmOSJo6jwbpRytbnuzHCwGtT7uO+wAPZAeJfbJHqYPFqNrnLMhAliI2LrMR2yXiHqUAGkYugfrfkwDMb9iO3DTomaxyz1HrkxAlAI8m0dovPOTN4jQ9h7/epiDDJFTu8hjc5k1mPDSBDvWDPrIkm29Cq2ppJs6T3KukgA37gNkSD4nnBamc4xq7SuxDvWzwvdT1Na4UeGAL8fGXqG0op+NkVtGrLUmQ4dMw9ZBdTxeGs+/odnWyvAv/IwFb9by6gVTgvTMVNsFbCBUNl8609x733Z0JkOHTOLrAL8yKVu1qew2HZFU9Ax859VQApz0GJ9wIbONdsVTUHHzJBVwAl6u+dbP0ZP3IbOvBsyGzTMqFariBc589gIqfOzrQ2TPP8ykdU2hCx1pkOnM2esAsZJB4qpf6CJnkgK8yKQSmFePEIsUkzdgxMYC6xlRMRpYRoTwKcLwXsJyHfMtY9RCJQgXko4ITnvzOSIccgxz5lIrVMjoD1oGnuAy3pcS1yGzF4dop6ZyfF8pxbXGjt1xn9w+2GlwvXA865y3AzDbAiVfVglpczLUyqQFCLPp5TIGNIH4PWY6YyUphBi3J9MJlb29Y00gXGD7tZMPnAOKHWVB5DXUyOhJz8Pey+NTtiWV8IQirhXql874/G4+09eFV4DRACPfg7UPbu+/zK/4VxcN0MGDrv8oQGIbS2g9rlJsfDHf1pcGAEQHtMscW8GgMFqwMZYPxPegWsDRW+e/NmNugmmIWUsO2ZETQbYhI0h9BZa2kgveefk1yKRNKyj54BSKeHxNMfj8cEsdQYQ22LAW04o+XV/ngq2xK9qKioFHXmGcSAWi/0NOflxHm4EnrUKy2sf6ly+4YsjGgrjSqm/8HrPxmKxWy5ur0YyK2wXycxalectnCtAJpKJJTuOf2c3oVIig1BRJWVbKBTqiEQimdnist8ZwNP3caVRXPDNHPnV4r2nGwpq/+iaL4dSIi0xe4SUbabH0xmNRpNWujkxA+Dr3VefXp4/YzoIRmK/FW9u/GEO2jhCdEu44AsGO9ra2lJONHNxzABIG2OvyGH/GrMwELrxzHMlcaVox/Gfbo5TMIZSXV4p2x9ZtSra1NSk/WbLWWcAAmdrVk88uvQX5RE+Mqax7PXmz+443TUEjCJE1AMXnuvp6aoBM5d1ZA0LWnd/IJL7x+/6qqquvKxsbXl5eQk53sTbAv8DzFJ5Mvw8/r8AAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQLSURBVFiF3ZnPT1xVHMU/983QYcbqlNZoCmEkqCxMtJsm+gfQ2KaJqaYurDHaZeO2dmH8lZg06qZLtYY0RhqkKFrd1KYJE2VhqiQG5YftDAwEShFpARmGN8y84wIxhQLvx8xA0pPczbzv955z7u97B+4hmLLXKN0PHASeA54A9gJ7gGngBtAPfAdcwpj5svOXBVIN0odIC0jyULJIHyDt2m7pqyEdRZr2aGJtmUZ6YbstgGSQ3kFyAhpZKQ7S20jlH/Y+zLxboom15a3tMnK0DD2ythSRnt9qI7tKmCNu5RZSTRBZVkA7bwK7A+a6oQZ4I0ii/wm3vI9MAtEghB6xADzsdx8K0jMH8WAkBgudkLRhVJC3YfQrSEYh54EjBjwbQJtPSF+4jfuYlJ2Rftc6uC31Rr1trJ9vhZlf3YR0Sl3rGVnBBanLg5lftsLMDTchtjSymRlbyngwM+5XWpAFwAZ2bBoCeZcY20DEhSmPMW4xqxBkAfjHLSAPN12+T3jgmfOs6D8EMTPpFvA9DG32/RvIeODZtEHKA+mc23iPSgu3pd715sstqbdaynmYMy1+pQXpmS63gBxEa+GxDkjmYQTI52GkHZK18PgiVHvgSfoVFmQB2AmMAXHfud4xC9RhTNZPkv+eWT5inPOd5w8tfo0Ex/IVebJCp+bJoKfmUgwdq5CZY0EllXZNlc4DgcnvQrHYlmhsfN2yrEhEitrGRKokUyhaVQDhkLNUsCzHGJPbYdvZJ8fHZzqguJJeqpk48BvQUFI9gDU/P5M4dOjT8NjYond6UzQiE7b002Amkwl6OVuGMbPAK9zROoEgac/p0xf9GFmmVwhLjxbg1YaGhobSzCzX2A18VEoVOy9f7o63tWVKURFynLryPO1IYaAbeNpvanhiYuKRAwdaTDYbuHcdcBw4W3rPABhTAF7GwyF0VdrS0tJDp059XYoRpLwJhTozmczN8pgBMCYNnPSTEm9tvRTr7p4OyCjBQKRY/CSdTv8BlXk4vwC86BYW6e8frD98uD0AQ05SL+FwTzqd/uvOD5Uw86Cx7WuKRDbcxa1sNlt35MjHkVTK05FFMgWMUrKsvkQiMZBMJgvrxYWDat4QxvxtjY+/Vqyt/Zb1G0u7z5y56GZEMksWzrCxrD4nHBpMpVI2wNDQxlelij1UV42Onl+qr7/rdBBLJn+uPX78hw3SchgzZMG1qlhsoK+vL++Hs3Kv7sPD1VY8/qdTU5NY+Sk0NTWVaG4+G5qb+3+YCBaQroctq/+p/ftTHR0dgVe2iv6FEO3peWZx374fFQpVUSgU95448dl9V65MArMYkwrBtZeGh6+/B04ldZQN1Vevvm9sO/fAl+2tTY2NzU1NTXVUuBHvCfwLna16k1MlopgAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhdbBRVFP7Ondlddvqz/aERARtFMUos4YFIH3iAxESICfCABtqkCRiJtjGRBBODivhH1PigEovFGKhJXWktpdgQfDCugEFrCEhbitvdditSKIhtge52d3bu8YE2AWx7d2a2D/o97jnf+c43996Zsxf4H4GyXXD25ta8MSOxiiWvAWERCPeCUQzCNYAGwHyOGIf90I5erX3mZja1s2Ym8EJDYZq0V0D8IgB/BpQ4gN0ez9h7wx9tGs5GD1kxk1sdXM+EOgBFDuh/E9NzN2s3HHTbh3BHZzJqvt7BhEY4MwIARUz8jVEdfB1gVw9Xc0M2qh95gwhvwv0KExFWeh7vTJu/Nh9zXMQpcXxrNbqpMQmkBNYnPt3Y4oTsqJGCl/YVmOasKJxvrekwpEv54MieyiG7REdnxjR92zEzRgCgMC3Ey06Itldm9ubWvIQ/PojMXr9OETdYu8fud0i3qzJmJFaB1UZyvHp8b1V5++qyuQu8mpiTsuTlIx0DvVvqTy6Lm5aKbyRE+kkAzXZ6s73NWPIaVU6OV4+Hd63tXbtk/gqvJkoBeL2aKF23ZP6K8LvrIoZHSyh1AKXO3bB/ZgQ9qkrZW1XeHpjleWyyWIHhKaurKv9FqcO0yHZrdgkAz1VlrC6bu2C6+FOL5z2QgZBS527YN8MoVqV4NTHHTXwcszPuaRxOXs03VAkpS15WxC9loHM9447G4WSbDaoyjnQM9E4X//bMhZhShjDtA5kMDsxQuypjS/3JZcNxs2Oy2HA81fF8Q3u5Uoah1LkbDs4M/aBKiZuW/+FXDz3UcvpCKGXJfgCplCX7m0/1hxa+1rowkbJmZaAUstua7QmgpLoxN07WnwACdrk2MDLqN+fhw6pROyTbK3NrxKB9dnn2wF/YNQI4HDR1ab0F4IoTbga4okt+xwnRkZmRPZVDIGx1wlWCsNXJ+H+L6gI5NcEGABVuatwBtoLFbdtrhBA+H7M/SeTzMFPaEh4A0DVppoWQRJTwJpOjZRcvDjcB1gTdlZnCLY2BlMc6A+B+dy4AkU4Olxz7uE4khsYy5TCTRYyYLvj4+Vgs5vovb171V8slUQhu7hMYHOhs+dL4oz3mtEIaqHd5OwPcqK04AeADNzX8g10nXBgBANKknOfaDACMlszZAUA91k8CbWzkUuBs049u9CUgLSGiWTGDnSvTuqBKgJVD6O0gaZmB35qbyUxa6uwpwJwiTTsYi8UuZ8cMgJHdG6JMYpsdjr//5FHfXz3XHEoyA90+y/osGo12AjNwcZ5TE2wE8LQqz3v90vni458ccCCRYOaz0PVT0Wj0jg+37QsNFYTJ1axZT7DQC6fOSY7mnw62ZVqTmdIgjrAQXaWlpd2hUCg9WV7WVwYA8jbXrpH+wkNT1Of8c23BnL6feqarwUymgOwjIbqkpp2PRCJJle6MmAGA/E21DZZR+K/pwHf195+L2vd/NwUtAaJeAYQ9htHd1dWVsqOZ9W02gevsfzY3NbqcvTmlE7+J5M2rgdMHvr89j4E4mHt0Ic4tXro00tTU5PjNNmMrAwBFle+XpwLzjzEJD6RlFZ1q+Nx3pXsQwAiIIhoQ3tjX17MTkNnQm1EzAFBQsettM3DfNv/FM81FnS37oevd4XB4AADPtPZ/Gv8AkvXQkIP4nXQAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASpSURBVFiF3ZhbbBRlFMd/3ze7bXdp0yKlQI2NIqZlK8YHjDxgFEIikVhKAibeooH4otFIosFLgvdEn9QQHojxAkoIFChRMWBCXC5GxRgb6sJSWrrlDgXbUrrbndmZ44Mlwdru7MxsH/T/ON/5n//5z5n55swH/yOoomesb6rAMBaDNAExYAYwBbiC4hxwFORrKNlDouVaMaWLZ2bOksk44VeA5xEiBTDSiFpHqbxP267+YpRQHDONS5cjagNwkw/2n2j1DH+07gxahhGQr2hcthZhPRD1mSOC8Ag1DQ69yYNBiglmJtb8BvAWwTusgAVUN+S4nDzgN4l/M41Ll4NaTzHfO8UDVNe3c/l40h/dD+5ursKkC3/viBv6MKzbad/d55WofclZ8hoTYwRgMnb4ZT9E752pb6ogpC8WuP36RRoVnub1O+S9M4axuBAj0bLS9M6P18SzbdtPSaLVzLZtP7X9ozXxSKQkU4BKFKwHvZbmvTOx5i+BJ/JWUlaaPrf/s5OV5dE7R6/1Dw611y5YOSuTMfPfEKU2kWh9yktp3jujmO0W8tUHLx4eywhAVcWkORvfe+EXVx1HYl5L825GqHULWXL/PTPzrS9dOO82Vx3lrjMafnazKW4BJWFjepD1EVQXXNEI/JgZdAswLfuCy/r5AnSuFlzRCPyYuegW8E3815P51lv3/ZQqQCfvDRkLfswcdgt48tUP7+0fHGofa61v4Fr706+vm1cMndHwsQHID24hmYwZqV2wclbL3h/jpmX3AKZp2T1b9xyK1y5cdcfwsFnmrkPca2nevzONK8rBOoNQ6ZlbKBQDGOmbOfL9kBea9878PWJ87pnnBcKnXo2A30FTW28Dl3xx3XEJw3rXD9GfmfbdfShZ7YvrBiWr/Yz/EPTHKta8GXgsUI4bIc6WuqG257TWpaUikaxSpWERlbN1GCBkOFZOa0cplSnJZofmnD3b3wL2dXowMzNXVFJmtQG3BsoDaJz+uuHkhpBjDhfKEVG2ElIhLQeTqVQq+C9v47L5IHEkyHmCyFTrzKZK60rKb4IcbAx6OgO9yVNMbSgD7vObotweOFRtnv89QBVKOU6vvw1gNGr61wLuY/0YCIl5fpp5en8QeQccW+uu4piJx3NoHqeAIfRGKLBqzNM7lNi2e/Q4EDGVYexMpVIXgj9m13Ep2UdNwxXg4UIpVVbvd5W5y3mH0jwQgWSZbW873tPTAxNxcB5r3gascAsrdTLJW4aPb/WhkBGRI4RCv3V1df3jwx3ykSw/cvazKqQWCXryeCFa7KEaq+fbQlOKqBxKOkXrRF1d3bF4PJ4bK674nQGM+iVNthHeNU5+qTbPbqnK9Z7Il0NEWRqnW2mdcAwj2dnZmXXTnRAzAOHYQ5stSv41HURzgz/Xml17x6FlUOqkho5wNHoskUiYXjSL/5iNwEqnV+mInu+oUN31a4bkeqdlU/tuvIUCaUROhLQ+etfcuZ0tLS2+d7YJ6wxAZPaiecO6/IAIYUTsGWb3J5PsqxeBAZTqNKDj0e7uE2+CUwy9CTUDUFa/6J2sEX2pwurfMd0+8wWh0LGOjo5zgEy09n8afwEcs7T5cvn0GwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS2SURBVFiF3VhbTBxVGP7+szPscmkq1FZqE2pvUYvYwpK0SUla0ib0iaf6oD6a+qDxoUlNvMTthZp4ifHBB22M8ZI0jVCqVk0gbeOKxAsJpAG3ENiBxdiWSypQdmd3Znbm9wGaCAKzc2b3Qb/HOf/3ff835+TMmQP8j0D5FjxwYGhdJlN0lIibmbEbwGYAGwDcBXCbmW8KIa6k0+mOWKw6mU/vvIWpqRkvV9XsK0R4CUBxDhQdwAe2Ld66cWPbbD56yEuY+vrRY8x8HkCFBP0vZhzv69tx2W8fwh+dKRzWIszcCrkgAFBBhEvhcPwNgH29XF9h6upGIwDOwP8ME0Bnw2HtdZ8iclhcWq1+NFaAw8zH+vp2fiVDlmpk796xBwIBR4P80loLM6ap7BgY2DrjlSi1zBSFX0NhggBAeVFR9mUZoueZWfiOqJPIbfuVhZ7JZB7y+h1SvLpkMkVHAXYNEgoJvaVlY09DQ8l2VaVKy+KJri59NBKZ2mcYrvyS4uJQE4B2L715XmZE3OxWEwoJvaNj62hjY+khVaUqAEWqSlWHD5ce6uzcGg8GKe2mwUyuPsvhOQwzHneraWnZ2FNWRk+sNFZWJmrOnNn0m5sGEe/22pvMBvCwW0FDQ8n2tcYPHizZ5qbBzK4+yyETZoNbgapSpZ/xBdCDube0AIkwNO9WYVk8sfY47uRgdC/nlhYhEYYn3Sq6uvTRtcaj0VQiB6M1X8hKkFlmPW4FkcjUvmTSGVhpbH7eGTh1amq/mwazu89yyGzNP7jVGAYXNzWN77x2LRW1LB4HYFoWj1+9moo2NY3vMk0OuTYmKOq5N6+E6upYWSgU+hPAeq9cD5izrNIt/f2VKS8kzzMTi1UnifCpV55HfOI1CCB50DQM5SyAKRluDpgyTeWcDFEqzOLx/IQMNweckDn+Az5/rMJh7QKAZ/xoLIV9cXr6yItCiGCQudggCqrMlLWFCgBKwLGyQjhElC4yjFTNrVuzbYB9n+03zHoANwA84isDAGZ9Njl7/LzjTGRy55BNjIQi+KehRCLh+5c3HNYaAEQBBORVmPXU+19Yme8TsgJZ4HOftzNAb++ObgDv+NGwzO5uH0EAgAKOs8V3GABYt+6PCADXY/1KYGf6Tjr59o9+/B3AsYXQ8hImGm3MAs6zAFwPoUthWXrq3XbmtO1euwqYTQoELicSiYm8hAGA3t5dGjOf9MIxMt92ZM3eu5KWzMBg0LY/0jTtd6AAF+fhsNYK4Cm3OierDc3PPf+lhEWamfuhKL2api35cHu+0HBH9gVm+whRsHy1Cnb0VDJ57rtcFZkpC+I4CxGrqqoajEaj2ZXq8j4zAFBb+0uzEJu+XkWfM6kPLxqZSyNraTCTJeCMkRAxJxAYisfjhptvQcIAQG1t9wUhNv/rdGCZPb/q8692rkJLg2hUAMNqSclgLBYzvXgWYJktYGbGeq6iYq6BaH3V/WeOMzOdTr55/Z91DOhgHlGEuPlkfX28ra1Nemcr2MwAQF3dlf1Ej3UBARWwbf3e6Y8t6+dJAHMgigeA4afHxkZOA04+/AoaBgD27PmmRVEePWka19sN/b3PoCiDw8PDtwFwob3/0/gbh/Lm30zcQi4AAAAASUVORK5CYII=",anchor:[.5,1]},{
src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASdSURBVFiF3ZhbbBRVHMZ/58xeSgNCqRegsamt1EhEXwjw4AMmJGpAEhNoVOItxgdFQ1C5qqQiKiVRHtQIGuKDXNItFJGSoFFYpIltExIj9EK7WxbTUi7BFqHbTndm/r60CWDp7MxsX/ge9/y/7/t/55ydOXPgDoLKtWDVQZnkDPGUgiUIs4DpQCFwBTgv0KLhpwE4UlmhrufSO2dhPtstBSrEOhRvAxOyoKSV4stIiC2rnlV9ueghJ2GqYrJUYAcw1Qf9H6V4fe0yVRu0Dx2ELCJqS0w2CsTwFwRgqgj7qqrlQxEJNLmBwmzdx0bgI4KvsBLFpqp9vB9IxC9xeGvFgmiMAkdg6foKdcAP2Vcj2w7IFDNDEv9bayz0Soay9ctVr1eir202lGED4xMEoIAQq/0QPa9M1UGZJCYXye7x6xfpQbjP63so5NVl+IXoGiQSIr14Lk1l0ynVmmmOw4WOHjrrGpln2a78/KjwJLDfS2+et5mCJW41kRDpFYvpnFnEAq0pBiJaU/xQEQveeoZEyGAgFz63wvt/RnjYrWTxXJoiYR4ZbSwaZvaiuTS6+ihmeW3NzwNghltB2XRKxxovn8EDufC5FX7CFLqKaqYFGR/G3Vl3NKLrlQBccytwHC6MOS70ZOHzb9YdDcNPmItuBR09dI413t5Nyk1DMfaEjAY/YZrcCuoamWdmODXa2OAQpw43Md9NQ5S7z63wHkZxzK3Espnw1SEebOsi7jicA4Ych3NtXcS/rmOmZZPnaiPEvbfmEZUxmZgHXcBkr1wPuGoMUrT6JdXvheR5ZSor1HWE773yPGKn1yDg86ApFpuAS364WeCSZNjsh+grzPDxfJUfbhZY5ef4DwE/rLbEZDfwQhCNG+HY9t7ta0tXaK2jUZEJplLRsIiybB0GCBlOxtLaUUoNREyzf3Z3d18N2CP8oGEmA38CJYFSABnzel/tF0/vuNbbNZgtR0TZSkiFtJxoS6VSge4A1lWoq8CL3DA7/iDScPjTg16CACglBlrKLHi5pKSkJFAYgHUVql6ErUE0Uqd/qT/TsDcVQEIZjlMUOAyAeS8bIYtj/Sjo7+vpOV797vEg/g44ttbJnISpfEJZ2mE5WRxCb2rCzmSO16zZnzH7/W9TkSFlGLWpVOpCTsIArHlOJQXe88Jp+WPXkfMd9Vd8WopAa9S2tyeTydMwHhfnMYkJLHOru9LT0nZg26JqHxYDIvIXodDJZDJ504vb84WGGwyLN00xFxrhaMHtaiyzv//onpV12WqKKAslCdG6ubi4uDUej1uj1eV8ZQA++LZ7ycQpM368jb40HNq89/SJnR1jaYiojMY5q7RudgyjLZFImG6+4xIGYMM3f+++q/D+/50Ous7EG47sfPXn29AGUKpTQ3s4P7+1ubl5yItnzrfZCCJ59muD6d7H8/ILikd+S1+7fPnYnpW/3VgnkEakI6R1y6Nz5iRqamp8P9nGbWUA3vn85Px7ih77XWkj7NiWffSHN75Ltfx6EbiKUgkD2p8/e7ajEpzx7CNnWLm16eNP9pgDr6yu3lVeWrqwvLy8iHGexDsC/wHqq7fSQTg4DwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARmSURBVFiF3ZhfbBRVFMZ/d2Z3y1aatoCAbVyxahON6AuJPPDQGIIakhojPihqJCIoxBDinxgJTUUSlVcjYTENYNo0UCiKRKrRdFUetJGEWAuE7rZLA+VPg22Fbdk/M8cHtkmtbWfmzu4L3+Pc833nfPfczD0zcAdBFVqwCSnLwdNAPfAIcA8wH7gODAJnBI5Z0LEZdbOQuQtmZjdSacIHwNtA2AVlTMHnQfh0HWqkEDUUxMweZI2CKDBPg/63wBtvotr91mH4IQui9iINCg6hZwRgnoLDUWS7IL4215eZvdAg8BH+O6yAHVHY5ldEC/mjdciPxjSwFazZgDqqQ9YqZB9SkYEE+kdrNgxb8MAm1LBXotYxy8CHFMcIQKUB7+kQPXcmf49cxd3rVxdjOVjk9R7y3Jn8hehoJFDK2Kp2YuvTDGwQMuvTDKw6TCwYZtxFmtIgPOW1Np1jVu8UEChl7OVB+pY8R50RIgKEjBCRJc9Tt3aQuEtDjnmmQsfMw04BTzbTFSrn0enWQhUsrTvA704acnsU8gQdM1VOAZHV1My2ft+z3F+IPFOhY2a+o2iIxX7W81jguqIJXa8E4IZTgJ3hisP6ZRd5/nFdUR46Zq46BQx8S99s6/1HSbrIM+uGTAfPZgS6nGI6X+GJzAjd062lh+mOvcZyF6kc80yFTmc6nQKy44Rbqniwv42YneECkLEzXEgcJNZcxUPWLeY4aSiIeS3M8wTwBTI3ABeBcq9cDxgNQ/WrqJQXkufO5EeMfV55XqCgyasR0Bw0LdgBXNPhusC1HOzUIWqZyY/nW3W4LrBVZ/wHnx9WUaQFeMmPxmTYWK2fRGo2G4ZRUiISTitVEhRROcsIAgRMO5szDFspNR5Kp1NLL10aaQNrgu/XTDlwGljiywWQMW6O7K96JjoauHjLLUdEWUpIBgz59VwymfT9yRtFVnD7NWrqq4h0zN/2VXdZa1JXIAcHfP3QANiIOimwy49G710/nPRhBECZtl3t2wzAFWgA57F+OtwwL18+seCdn/3kt8G2DCNREDONqBywFhdD6GRYKpv97u73j6RVynKOngEiGWWa7clk8kpBzABsRCWAd71wTpc1dwzMOXldM6UInC2xrD2JROIvKMKP8yhyCHjBKW4odObc/qrVBzVSjIvInwQCpxKJxH8u7oCGmBM25VR6ZUBKKmcKyKhU6puFW467FRRROZTExTB6IpHI2VgslpsuruCdAfjMvFRfYVV9PYO+dFbubP2jvKl3Ng0RlTWw+5Vh9NimeS4ej6ed8hbFDMCu4EBLefbe/00HfeHYb0cWrft+Bto4SvUZcD5YWnq2p6cn4yVnMY4ZAGNZ6/WQMbwibFdGJp6lzKGh4wu2/DQ5TmAMkd6AYZx5bNmyeFtbm/abrWidAWgMn1q++NbjvygxgzY569jCt77sLf3xKjCKUnETzr/Y39/bCHYx6ygYts/p+ni3So9vnnuwubamZmVtbW01Rd7EOwL/Ai1BeTIkgAbWAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQMSURBVFiF3ZnLT1xlGIef78zAMFgCeGscLCGoLEy0myb6B9SIMTXW1IU1Rk3cGF16SYy3xMRUN8aVWkMaY0lDUbS6qbcwKjGmSmKwXKQzMBAoINICMgxnLufnoqWhCJzLzEDSX/Ju5rzved/nu39n4BqSKfULhWqAVuAh4E7gFuAGYA44DwwAXwGnDWap1PlLIqF6oXeEloXkwdJCR4Tqdrr2qyR0SGjOI8R6mxN6ZKcZEDJCrws5AUFWzRF6Tajkw94PzBtFQqy3V3cK5FAJemS9FYQObjdIXRFzxM0uCNUHqcsKyPMKcH3AWDfVAy8GCfQ94S7vIzNANEhCj1oGdvvdh4L0TCteQKpZpos4NuOILDbjfEacKBkPOaqB+wPU5k9Cn7qO+2qlNa8/tZEuqk9RTxvrJ9sB87trIV3q3hBkVSfV7QHmt+2AOe9aiK2xLWFspTzATPqtLcgCYAOVLk5ZFx8bQ8QlVdZg3HyuUpAF4F9XjyzTLs+nPORZ9FjPFQWBmXH1+JqRLZ9/QcpDnq0bpBQSOuY63qNa1kX1bThfLqhPVcp4mDNtfmsL0jPdrh4ZosS4nU7iZBkDsmQZo4M4Me5ghSoPeeJ+CwuyAOwCJoBav7E+tAA0GEzaT5Dvnrl8xDjmN86n2vyCBJYuXZFnynRqngl6ai4G6HCZYA4Hramoa6pQOxA4+XoVKJxobmx+zrKsSESK2sZEKiSTL1gVAOGQk8tblmOMyVTadvquycn5TiisxhcLUwv8ATQVRQEsWUvzB2IPfDQRnljxnF+mYEQqbOnnoVQqFfRyBoDBLABPsKZ1gkhIR+rfPuUHBMAYhbB0Wx6ebGpqaioKBsBgeoB3i3nHd9d929NRcyJVTBkhx2koyacdoTDQA9zjN3Y6NDXVeut9bWmTDty7DjgOHC26ZwAMJg88jpdD6BrlTC738k0vfV4MCFLWhEJdqVRquiQwAAaTBF7wE9Nec/z0L1U9cwFTSjAYKRQ+TCaTZy/VUGIJnQQedfMbqhwYOhB7sCNAioykPsLh3mQy+ffaB+WAudE29nBEkU138WWTTh9sePiDkXDC05FFMnmMErKs/sbGxsF4PJ7fyC8ctOjNZDD/TFqTT8UKsS/ZuLH0ft17p9xAJJOzcEaNZfU74dBQIpGwAUZGNr8qle1D9XjFePue3J7/nQ5+jMZ/fWb3099sEpbBmBELhiuqqwf7+/uzfnKWDWaU0apaq/aveqe+cfW32dDsbGts/9HF0OKVYSJYRjoXtqyBu/ftS3R2dgZe2cr6F0JvtPfevSt7fwopVJEnX3j+5mc//qH6+xlgAWMSIRh+bHT03JvglLOOkulM1Zm3bGNnOnZ1HG9pbt7f0tLSQJkb8ZrQf5kyepAtajIBAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASoSURBVFiF3VhNbFRVFP7OffMY6EjnvYGMrW2atmijRNyUBJcsTGRFQkJTKwpuXBliSDQxGolVEo0rjAuBhLCRGFuL4AoXTauWaBtNTHHoD/NHImXoOH2vY9+Uzvs5blpSoO37m7rgW777feec794zb867wGMEqnXAYrG4XQhxgIgOAtgNoBHADgAlADMAbjDzD7ZtX00mkwu1zF0zM7quq47jvAfgOIBtHiQVAF8S0Weqquq1qKEmZkql0mEiOgsgEUA+R0Rvqqp6KWwdIoyYmUnTtJNE1IdgRgAgwczfaZr2ITOH2txQZnRdP8nMvQh/wsTMH+u6/kGoIEGFy63VFybGGnCI6LCqqt8HEQcqRNM0hZkzCN5aG4YXQuxSFEXzKwzUZsz8PjbHCACojuO8G0To+2SKxeJ2SZLuwtvrNygqlmU96fd/KOI3ixDiADwYIaJKLBYbk2W5HUADgIJpmlnDMPYxs5u+TpKklwEM+KrND3m5yIMeOJV4PJ6VZXk/gBYAWwC0yLK8Px6Pp4losRZ5HkaQ38xzboRYLDZGRM+vtUZEe2Kx2KhbDGbe7bewIGaeciMst9ZG621uMYjINc/DCGJmhwdOQ8h1ANjpgfMAgpj51wOn4LJ+x0OMsgfOAwhi5q4bwTTNrMt63kMetw15BL7NMPOYG2f59Xt9Hf31SqXyolsMInLN8zB8mxFCDLlxmHnb/Pz806ZpDgO4BaAK4JZpmsPlcvkZx3G2ekg17Lc23xPA7OzsE5FI5G8Acb9aH5ivVqtNDQ0Nhh+R75NJJpMLzHzBr84PiOi8XyNAwKlZ13XVtu1JIkoG0W8EZp6VJOnZ/21qVhRFI6ITQbRuIKITQYwAIT+s5ubmLgJ4NUyM1bBt+5vOzs63hBDRKPO2JaKozEyWLWQAiEiOaQnhENHilqUlY8/t23o/YK/ow5qJA/gTQGsoFwAMw9CPdHefnZmZuedVw0w2MfIRwb9M5vP5UHcAiURiHsDrWLU7QcDM/MXp01f8GAEAIpYgeJcFHGttbW0NZQYAEonECIDPw8T4aWho5PLAQD5ECJIcp6kmlxHMHNE0bQTAPr/au4XCnVe6us4bhhH4dB3AcYBzoU8GAIjIEkIcgbch9D4syzJ7e3sHwhgBc5Uk6VI+ny/UxAwAKIqSAfCOH01/X9/V30dHSwFTMgMTUds+k8lk/gI24eJc07Q+Zu5y401PTU2+1tPzbYAUi8w8jkjkj0wmM7t6oeZmyuXyTsMwpqPRqLpuNZWKcezo0a/y2aynkYWZLBCnWYhUS0vLxPDwsLUWz/ftjBvq6+v/SaVSbzQ2Nl7G2pvF586cueJmhJlMASdHQqSciDSZTqeXACCbXf9TqeYns4Lx8fGLzc3Nj0wHv1679tvbx4//uI5sEURZAUzLdXUTqVSq6ifnppnJ5XJbmXlKUZSWlWelUqnYdejQuYWFhfttwkAFzDcjQtx4Ye/edH9/f+A3W83bbAVtbW33hoaGuuvr638WQsiWZdmfnjo1sGxkHkRpCZjuyeVufgQ4ADCVy21WObXB4ODgJ4VCYfHC+Qtfd7S3v9TR0dGETeyIxwb/Abxf6DIUZxAeAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS9SURBVFiF3VhNbFRVFP7Ond9OlBnApihJM1N0EqltQzoJLFxAQiKrruhCjXFh3GhcEGowGomiJEhYUJtUiTFCGEJsBX9CU2pQqzZB6WtLOgw0MNN5TUSggtNp6Tw6fe8dNyWp0Pa9d9/Mhm8593zfOd+9J/educAjBCq34MDAwOPBYHAHM7cQ0UYATwJYC+AOgL+J6LJpmj+EQqGz9fX1d8uZu2xmRkdHV8/Pz7/DzG8BqLJBKQLo8Hg8BzZt2jRVjhrKYmZwcHAnER0BsEaC/i8Rvd7c3HzabR3CDZmZSVGUvUTUBTkjALCGmb9RFOV9Zna1ua7MDA8P7wXwIdyfMAHYNzQ09J5bESkstFaXG40lYBLRzubm5m9lyFKFjIyMRAzDyEK+tVZC3u/3b2hsbMw7JUq1ma7r76IyRgBgdalUeluG6PhkFr4jt2Dv+pVFsaqqqsbpd8jrNEswGNwBG0aEEMVYLHYhHA7XEdE6Zr5ZKBTGc7ncZtM0rfihYrH4AoBTTmpz3GbM3GIpKkSxqalpPBKJbCWiWgB+IqqNRCJbGxoaMkIIzUqDiCzzPJTXKYGInrWKicViF4QQzy215vV6G6LR6J9WGsy80WltMhfAU1YB4XC4bqX1SCQSs9IgIss8D0LGzFobhaxzs76AJ2xXtAAZMzNWAcx802L9ho0807YrWoCMmVtWAYVCYXyl9ampKdVGnhU3ZCnImLlgFZDL5Tbrup5aak3X9ZSqqlusNIjIMs+DkLmaf7GKMU2zKpVKPZ3P5/uZeQJAiZkn8vl8fyqVesY0zaANjX6ntTmeANLp9GOapv0FIOyU6wAFn8+3vqmpadYJyfHJ1NfX32Xmr5zyHOJLp0YAyUEzEAjsAzApw7WBSb/f/7EMUcrMwni+S4ZrA7tkxn/A5R8rRVFOAHjJjcZiGIZxsrW19U0hRCDAXDVHFPAxk24IHwB4Pea8LoRJRJp/bm624fr1qW7AuM93ayYM4CKAqCsXADRNm9qze/eRycnJe3Y5zGQQQ/UK/n1MVVVXbwCJRKIA4BUs2h0ZMDMfP3bseydGAICIPRC8QQdejUajUVdmACCRSAwAOOhGQxkcHPj53DnVhQR5THO9azMAMDMzsxeA5Vi/FO7cvn2js6PjVzf5TcA0hMiWxcy2bdt0AC/DxhC6GLquz3/W2XlK0zT5NmUukcdzWlXVm2UxAwCJRCJLRG1OOD/29Z29NDp6RzIlM3AlYBifZ7PZS0AFHs4VRekC0GoVN6GqY3va2r6WSKEx8yi83qFsNvu/D7fjBw0beKNUKm33+/2rlwu4p2mz7e3tZ+wKMpMO4gwLka6trb3S39+vLxVX9pMBgN7e3pbq6urvltHn40ePnuw5c+baShrMNC9g5kiItOnxjGUymTmrvBUxAwA9PT0nampqHpoOLo6M/HFg//6+ZWgaiMYFcNUXCl1Jp9MlJzkr0WYAgFAo9Nr09PTzq1atqr3/W6FQ+OfTw4d/WhzHQBHM17xCXG5MJDLd3d3SN1vFTgYAksnklng8/psQwqfrunH40KEvFEW5BaAAoowHuPpiLnftA8CsZB1lQzKZ/Oj8+fPawU8OJuN1ddvj8fh6VHgTHwn8B/S71Ufd4vUbAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATTSURBVFiF3VhPTBRXHP7e2xmBTYwgDXVdQ6m2hxrsyaweeoCkSXtQExOZ0JLSQ9NLmx5MbGya1P49NCRoQg9UG1MTA5RZEbegsYemVE1gMU1JBRZhF9dkccHGAkUXZmfe/HooJJTCzs6b5dB+yV7m/b7v9/veezvvNw/4H4EVWjASiWzNZrOvAjhCRHsBBACUA3gE4AGAUQDfA7iuadrjQuYumJm2trYyRVE+YIy9B6AkD0qGMfaVoihfHj16dK4QNRTEjK7rxwCcBbBdgv4HY+zturq6y17r4F7IRMR0XT8FQIecEQDYTkSXOjs7PyIiT5Pr80Kurq7+GMCn8L7CjDFWG4vFrHA4fENaRJa4vLV0LxrrwAZwTNO0bhmyVCHd3d2lpmkmIL+1cmHWNM09DQ0Ns26JUv8Z0zQ/xOYYAYAyRVHelyG6XplIJLLVMIwZ5Pf6lUUGwNNuzyHFbZblA9HRiKIomVAoNBgIBHZzznfYtj2dTqcno9HoASGEE99PRK8A6HJTm8w2O+IUoChK5tChQ5PBYLCGc14JYAvnvDIYDNYcPnw47vP5FguRZy1cmyGiF5xiQqHQoKqq1euNqaq6LxQKRZ00GGN73dYmszI7nQICgcDunAI7dz5biDxrIWOm3FGU8x1expfxVN4Vrei6JQBYcAqwbXs61zgRpfPI82feFS1DxsyMU0A6nZ7MNT41NZXMI0/OCVkPMmYGnQKi0egB0zTvrDeWzWbvDA4OHnTSYIw55lkL12YYYz85xQghSnp6ep5LpVJ9tm3fB5C1bft+KpXq6+3tfV4IUeykQUR9bmtzfWgS0WUALQC25YoTQpT09/fXrHr0zPIvH8wvLS25/r5xvTKapj0mom/d8lzifGNj4xO3JKlG07KszwA8lOHmgYemaX4hQ5Qys9yeH5fh5oHjMu0/4PHDStf1NgCve9FYDSFEx8mTJ9/lnBcVEZUYjBWpRMwSXAUAxWebFuc2Y2xxi2E82Tc1NRcGxArfq5ltAIYAVHlyAcAwjLmW06fPzs7OLuXLIWKCEZIKp5tjyWTS04WGpmnzAN7AqtmRBF27ejXixggAMEY+cNpjAW9WVVVVeTIDAJqm3SKiJi8ao8PDt24PDCQ9SDCfbQc9mwGAioqKUwAc2/r1MD83lw53dv7sJb8N2ILzREHM1NbWWrZtNyCPJnQ1hBDmpXC4yzAM+W1KlGU+3+VkMjldEDMAUF9fnwBwwg0n2t9/PTEx8UgyJREQKxLi60QiMQxswsW5rus6gDqnuOl0eqzlzJlOiRSLRPQbFOWXRCLxj4PbdW/mBMuy3iGil1VVLdsoJmsYTzra23vz1SRiFhjFifORysrKWF9fn7VeXMFXBgDOnTt3pLS09MoG+nStp6fj1s2bE7k0iJjJYd9jnI/YPt9YPB43nPJuihkAaG1tbSsvL/9XdzB+9+7AhfPnf9iAtgjGJjkwrvr9sZGRkaybnAXfZisoLi5+K5PJvOT3+ytXni0sLPz+XXv7j6vjCMiAaELhfPTF/fvj4XBY+s22aSsDAM3NzQeDweANzrkqhBAdFy9+Mzo6OgNgHozFfcD4a/fuTXzy94W5Z2yqGQBoamr6fNeuXSeGfh3qutJ16QIUJTY+Pv4AAG127v80/gIGr+iWe+FGsAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAToSURBVFiF3VhdbFNlGH7ec05/F6IUE9GLIYgXXYpXJBBZE0xM9EausIl6ObzBGSHRdnEJ1p+RhnBBNF4YY/xJFigNaIwxLpFYB2WwMWCW0bG1W7eEdUBwQ0fb7fy83nQJjK3nnO90F/okvTnf+7zP+/Q75/ve7wP+R6BGJ4xGo+skSXqFmfcAaAHwFIANAO4CmCai64Zh/OT3+3+Nx+PzjdRumJmOjo71zNwB4B0APguUMjN/vri4mDh27NhcI2poiJloNLqXiL4EEBCg/8XMbx05cuS00zpkh3yKxWKHiOgLAH7BHD4iiuzatcvIZDJnnRTjyEw0Gv2QiD6C8xkmInqxtbVVy2QyvcJJRIm1V+ukkxwrwCCivYlE4gcRslAhBw4ceNzj8RQg9o2YYZaInk0kErN2iZKImtvt/gBrYwQA1gN4X4Roe2ai0eg6IroFa8uvKMo+n+9Ju/uQYleltiGaGnG73eVIJNIfDAa3yLK8Udf1mVwuN55MJneoqmrG91er1ZcBnLJVm51gAKjt7HXhdrvLnZ2d46FQaLcsy80A3LIsN4dCod2dnZ15l8tVaYTOcoh8M0GzgEgk0u/xeEIrjXm93m2RSOSiBZ0Wu4WJmHnaLCAYDG6pN97S0rK5ETrLIWJmg1mALMsbnYzX8ITlimoQMfOPWYCu6zMm4yULOn9brqgGETO3zAJyudx4vfFr164VzXIwc90/ZCWImOk3C0gmkzuq1Wp2pbFyuZxNpVI7zXIQkanOcoiY+d0sQFVVX1dX19ZsNpvWdX0SwKKu65NDQ0Ppw4cPP6dpmtcsBzOn7RZme9P0+XynK5XKZwAeqxenqqqvu7t79wOPNtV+VnDPMAzb5xvbM1NrMb6xy7OJr48ePXrfLkmo0SSijwHcFuFawG0i+lSEKGSm1p4fFOFawEGR9h9weLCKxWLdAN5wkuNBMPPxEydOvC1JksfD7Fsg8riYSdMlFwAosqFqkmQQUcW9sHB/282bcylAX+LbXgCWYT+AFwA84zAPVFWdO9PTM+WWpHcBQCeCAoCJICsMAGAQZGaAGZrLhcubNutbGUVF4rMjxWLR8ZE3Fou1AkjDwX0CM/OVwcHvJwqFomgKDfjO6e0MMpnMVDgc9gIIi+YoTU+fyw4NXXFQBpFh3BFaAJbD6/UeAmClrX8ElXK5dOnixT+c6BuAoUtSoSFm4vG4ZhjGm7DQhD5UhGGoAwMDp1RV1c2jVwHzIsny6WKxOOP4NVvC+fPnZ8Ph8F0Ar1rlFPL5X8bHxuo2pXXADIx4df3kjcnJSWANLs5jsdhJAK+Zxd2bmxv5racnKSBRYeY/oSiDhULhoY3b6dL8CDRN209EL8myvH7VGFW9f6Gv72erOZlJA3GeJWm4ubk5l06ntZXiGj4zANDe3r6nqanpx1Xyc/bq1eOjN26M1cvBTKoEY4IkadiQ5ZF8Pr9gprsmZgCgvb29u6mp6ZHuYKZUupDp7e1ZhVYB0bgEjLr8/tzw8PCiHc2Gv2ZLmJ+fb1MUpdXj8TQvPatWq3f6+/rOPBjHQBnMY4okXX9++/Z8KpUSXtnWbGYAYN++fTsDgUAvEbkMw9AvnDv3ValUugXgHojyMjD6+sTEWBwwGqG3pmYAoK2t7ZNAIPDe1OTUqSuXBr6FouRGR0enAfBaa/+n8S8PPeWMetb8+wAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATISURBVFiF3VhNbBtFGH0z3vXGbqpSikQBKSIOHKgop0quYtMadSsqVfRCoQo9IjiAuAXJ4lB+D0Q5Ig4VQvxIVZREKQhRRNoiNi2VcBECUaUNjmM7VRPHcdP81HGc/ZmPSyKVNMnuzjoHeEfPe9/73s54dnaA/xFYowsmEont0Wj0iBDiGGNsD4BHAOwCMANgEsB1IvrOcZwfDcOoNtK7YWGOHj260zTNNBG9BSDiQVID8Ilt2x8bhjHXiB4aEubQoUPHGWOnATwoIb8D4LWLFy+eDdpHKKCeHT58+BSATwFEJWtEALzc2toqCoXC5SDNBAqj6/q7AN5H8BlmjLHnYrGYnc/nL0kXkRWuLK2+IDXWgWCMHb9w4cI3MmKpRlKp1AOKooxB7j/ihllN09rOnTs361fIZdwURXkHWxMEAHaapvm2jND3zCQSie2RSKQMb9uvLGq2bT/s9z2k+HWJRqNHiMg1iKZptXQ6fTUej8dUVd1tWdZUJpPJd3V1xev1ups+qijK8wAG/PTme5kJIY65cTRNq/X29uaTyWRKVdUWAGFVVVuSyWSqp6cn19TUtOTBytVnLXyHYYw95cZJp9NXt23b9vR6Y83NzXs7OzszHqz2+O1NZgN41I0Qj8djm423t7e3NsJnLWTC7HIjqKq6O8j4Ch7y3NEKZMLcdSNYljXlMl7y4LPguaMVyIQpuxEymUx+s/ErV64UPfhs+kDWg+8wRHTVjdPV1RWvVqvX1hurVqvXuru793uwcvVZC5nd7Gc3Tr1ej3R0dDwxNDRkWJY1DsC0LGvcMAzjxIkTT5qm2eTBx/Ddm19BKpVqVhTlFoAdfrU+MM85f+z8+fOLfkS+Z2bliPGFX50fMMY+9xsEkDxoapr2AYBpGa0HTIfD4Y9khFIfZ6Ojo/VYLDYJ4EUZvQteHxwc/E1GGOjDStf1MwBeCVJjDXqy2eybnHNNI4osM6apRMx2uAoASkhYNueCMbYUXl5e3DsxMdcPOKvioGF2ENGfjLHHg2UAhBBzpVu3TlumWfeqIWIOIxQVTpdHisVi4E9eXdeTAAwEuE8gIpqpVL6uLiwUZUvYwFdBb2eQz+dvtrW1NQF4VrbGUq32y+zMzB8B2mBMiIrUbrYWlmWdAuDlWH8fbMsqzUxPDwXxF4BwOB9rSBjDMGwhxEl4OITeCyKyKpXKgOM4jjt7wyImC4XOFovFqcDLbBWFQmE2FovNAHjBq+buwsIP1fn5TQ+lm4AIGGlynL6/x8fHgS24ONd1vQ/AS248yzRHJm7e7JWwWCKiv6Aov4+Njf3rxe37QsMNtm2/wTnXOec7N+KQEIvlcvl7rzWJmA1GOeJ8uKWl5YZhGPZ6vIbPDAAcOHDgWDgc/naD+jR7+3bP/Nzc6GY1iJjFIQqM82ERCo3kcrllN98tCQMABw8ePKOq6n2ng6Va7dfy5OTgBrIlMJbnQFaNRm8MDw+bfjwbvsxWwRh71XGcZCgUaln9zXGcynSp9NO9PAJqIBpVOL/+zL59uf7+fumdbctmBgASicT+SCRyCYBKRE6lVPqsVquVAcyDsVwIyHYUCqPvAaIRflsaBgCSyeSHmqZ1Lt5dHLhze/pLKMqNbDY7CYC22vs/jX8A/Nff8x41WYEAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPjSURBVFiF3ZlNbxtVFIafe2cceyZxEitfqiMs1EUWSLDqggXskOiGSqCyoAj+AH8BChISAv5ABahCBaoGJziISAhWMR8LECBQUNo0cZpJpLQNVWMDTZxre+ayMIGQOp7J2DMFXuls5p57zvver7lzBv5HEBHETAMngVPAA8AxYAi4DVwHLgOfAJ8BdyLI3xVkgDeAHUAHsG3gdWDwXpBth9M0Rz6IiIN2G3gqfsp3QwBnAY9wQvbMA14immUfGC/TmYiD9mK89P/GaTqfkYPmAk/GKQKamzbsHvGzLZqHSWx4MwIR++21uISkCX78hrVtoO+oxGQIMScBy8/Jtu2dQqFQVEqta61rSqn16enpomVZ1QA5bODxENyOjPfxGVnbtrcrlcrPugXK5fK8ZVlBZvZCHGK+9yNSKBTmWgnZQz6fnwsg5rs4xFz3I6KUWmsnRinlBBCzcVRiYd64Cuhp56C1rvn4KCFE0idPDfDz+QfCHAC/+znUarWbPu03AuT5LTCjPxFGzKafw+zs7LV27TMzM06APG0HpFt4F5/1blnWTrlcnm+1X7a2tuZTqVTVLwZwPg4xzwcgoi3L2snn83NKKae555UzOTk5F1CIBp6LQ0wfUAlIKKxVgN6jEguzZ+7QXGpR4jzNK00syNA8CKKYlU1ivjUDnOkC8VZ2JiyhTj9TL3aSvAUu5XK5F6SUyaTWlhIimdBaNFyZADANr96Q0hNCVHuU2n5wY6My1fygAzoXMwD8BNzfYRyklJVcNvuWaZq7QftoLVyhcUypv1p0HKcbBYRHgCJgdBBDjwwNvTeQTjth+zfgQicE9rAOpIBHwwbo6+39ejiT+bEDDkJ43q0wR3MrnAW+DdPRNIwbY8PDX3SS3APPlXKlW2IawLMEuITuhxCiPjoy8pEQwvX3PgRa14RhFBzHudmNZbaHMs2KzRNBOwz29386kE63vZS2gdawmHLd/NW1tTWIpoKYB572c0r29Czel81+GCJ+VWs9j2n+sLKy8sv+hijEDAshlrTWh77FpRDb4+Pj55KmGejKorVoIHRJS7mQy+WuFIvFRiu/SGq7hmGccl3340Pi6+FM5tLgwMByuxhai7rEWxVSLniGsVgqlZRf3sgK1YlE4mK9Xr/rdmBb1jfZsbHPD+lWRYhrEpYStn1lYWGhdpScUVbdU1LKq57n5fYeGIZxK5fNvm0Yxl/LRMMOWi+bUl5+6MSJ0tTUVOiTLdJfCJZlPby7u/ul1joBuMdGR9/pte1N4FeEKBmw9Mzq6vIrzQL8vx+pVOpVIUS1v6//g4njxx+bmJgY5x7/h/lP4A+AJ7grnrOyCgAAAABJRU5ErkJggg==",anchor:[.5,1]}],this.options.labels||(this.options.labels={}),Object.keys(l.DefaultLabels).forEach(function(t){this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=l.DefaultLabels[t])},this),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(l.DefaultStyles).forEach(function(e){if(!t.defaultStyles.hasOwnProperty(e))return void(this.options.defaultStyles[e]=l.DefaultStyles[e]);if("polyFillOpacity"==e&&(t.defaultStyles[e]<0||t.defaultStyles[e]>1))return console.log("Wrong value ("+t.defaultStyles[e]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),void(this.options.defaultStyles[e]=l.DefaultStyles[e]);if("strokeWidth"==e||"polyStrokeWidth"==e){var o=parseInt(t.defaultStyles[e],10);if(isNaN(o)||o<0)return console.log("Wrong value ("+t.defaultStyles[e]+") for defaultStyles.strokeWidth. Must be a positive interger value."),void(this.options.defaultStyles[e]=l.DefaultStyles[e]);this.options.defaultStyles[e]=o}},this),this.interaction=null,this.stylingOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof e.layer.Vector&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport()},l.prototype._createEmptyLayer=function(){var t=new e.Collection,o=new e.layer.Vector({source:new e.source.Vector({features:t})});o.gpResultLayerId="drawing",this.setLayer(o)},l.prototype.setLayer=function(t){if(!t)return void(this.layer=null);if(!(t instanceof e.layer.Vector))return void console.log("no valid layer given for hosting drawn features.");var o=this.getMap().getLayers();if(o){var i=!1;o.forEach(function(e){e==t&&(i=!0)},this),i||this.getMap().addLayer(t),t.getSource().getFeatures().forEach(function(t){var e=t.getStyleFunction();if(e){var o=e.call(t,0);o&&0!==o.length&&t.setStyle(o[0])}})}this.layer=t},l.prototype._detectSupport=function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("iphone")&&-1===e.indexOf("ipod")&&-1===e.indexOf("ipad")&&-1===e.indexOf("android")&&-1===e.indexOf("mobile")&&-1===e.indexOf("blackberry")&&-1===e.indexOf("tablet")&&-1===e.indexOf("phone")&&-1===e.indexOf("touch")||(t=!1),-1===e.indexOf("msie")&&-1===e.indexOf("trident")||(t=!0),t},l.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showDrawingContainer=this._createShowDrawingElement();t.appendChild(e);var o=this._createShowDrawingPictoElement();t.appendChild(o);var i=this._createDrawingPanelElement();return t.appendChild(i),t},l.prototype._drawEndFeature=function(t,o){var i=null;switch(o){case"Point":i=new e.style.Style({image:new e.style.Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":i=new e.style.Style({stroke:new e.style.Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":i=new e.style.Style({fill:new e.style.Fill({color:this.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new e.style.Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})})}t.setStyle(i);var n=null,r=this,s=function(e,o){if(r.getMap().removeOverlay(n),o&&e&&e.trim().length>0){var i=e.replace(/\n/g,"<br>");t.setProperties({description:i})}},a=this._createLabelDiv({applyFunc:s,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",geomType:o});n=new e.Overlay({element:a,positioning:"top-center"}),this.getMap().addOverlay(n);var l=t.getGeometry().getExtent();n.setPosition([(l[0]+l[2])/2,(l[1]+l[3])/2]),document.getElementById(this._addUID("att-input")).focus()},l.prototype._createRemoveInteraction=function(){var t=new e.interaction.Select({layers:[this.layer]});return t.on("select",function(t){t&&t.selected&&0!=t.selected.length&&(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interaction),this.interaction=this._createRemoveInteraction(),this.getMap().addInteraction(this.interaction))},this),t},l.prototype._createStylingInteraction=function(){var t=new e.interaction.Select({layers:[this.layer]});return t.on("select",function(t){if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),t&&t.selected&&0!=t.selected.length){var o=null,i=null,n=null,r=null,s={};if(t.selected[0].getGeometry()instanceof e.geom.Point){var a=t.selected[0].getProperties().name;t.selected[0].getStyle().getText()&&a?(r="Text",t.selected[0].getStyle().getText().getStroke()&&t.selected[0].getStyle().getText().getStroke().getColor()&&(o=t.selected[0].getStyle().getText().getStroke().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",i=this.rgbaToHex(o),s.strokeColor=i.hex,s.strokeOpacity=i.opacity):s.strokeColor=o),t.selected[0].getStyle().getText().getFill()&&t.selected[0].getStyle().getText().getFill().getColor()&&(o=t.selected[0].getStyle().getText().getFill().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",i=this.rgbaToHex(o),s.fillColor=i.hex,s.fillOpacity=i.opacity):s.fillColor=o),s.strokeColor=s.hasOwnProperty("strokeColor")?s.strokeColor:this.options.defaultStyles.textStrokeColor,s.fillColor=s.hasOwnProperty("fillColor")?s.fillColor:this.options.defaultStyles.textFillColor):t.selected[0].getStyle()&&t.selected[0].getStyle().getImage()&&(r="Point",t.selected[0].getStyle().getImage().getSrc()?s.markerSrc=t.selected[0].getStyle().getImage().getSrc():s.markerSrc=this.options.markersList[0].src)}else t.selected[0].getGeometry()instanceof e.geom.LineString?(r="Line",t.selected[0].getStyle()&&t.selected[0].getStyle().getStroke()&&(t.selected[0].getStyle().getStroke().getWidth()&&(s.strokeWidth=t.selected[0].getStyle().getStroke().getWidth()),t.selected[0].getStyle().getStroke().getColor()&&(o=t.selected[0].getStyle().getStroke().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",i=this.rgbaToHex(o),s.strokeColor=i.hex,s.fillOpacity=i.opacity):s.strokeColor=o)),s.strokeWidth=s.hasOwnProperty("strokeWidth")?s.strokeWidth:this.options.defaultStyles.strokeWidth,s.strokeColor=s.hasOwnProperty("strokeColor")?s.strokeColor:this.options.defaultStyles.strokeColor):t.selected[0].getGeometry()instanceof e.geom.Polygon&&(r="Polygon",t.selected[0].getStyle()&&t.selected[0].getStyle().getStroke()&&(t.selected[0].getStyle().getStroke().getWidth()&&(s.strokeWidth=t.selected[0].getStyle().getStroke().getWidth()),t.selected[0].getStyle().getStroke().getColor()&&(o=t.selected[0].getStyle().getStroke().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",i=this.rgbaToHex(o),s.strokeColor=i.hex,s.strokeOpacity=i.opacity):s.strokeColor=o)),t.selected[0].getStyle()&&t.selected[0].getStyle().getFill()&&t.selected[0].getStyle().getFill().getColor()&&(o=t.selected[0].getStyle().getFill().getColor(),Array.isArray(o)&&(o="rgba("+o.join()+")"),i=this.rgbaToHex(o),s.fillColor=i.hex,s.fillOpacity=i.opacity),s.strokeWidth=s.hasOwnProperty("strokeWidth")?s.strokeWidth:this.options.defaultStyles.polyStrokeWidth,s.strokeColor=s.hasOwnProperty("strokeColor")?s.strokeColor:this.options.defaultStyles.polyStrokeColor,s.fillColor=s.hasOwnProperty("fillColor")?s.fillColor:this.options.defaultStyles.polyFillColor,s.fillOpacity=s.hasOwnProperty("fillOpacity")?s.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!r)return void console.log("Unhandled geometry type for styling.");var l=this,p=function(o){if("cancel"==o)return void l.getMap().removeOverlay(n);var i="apply"!=o,s=document.getElementById(l._addUID("fillColor")),a=document.getElementById(l._addUID("fillOpacity")),p=document.getElementById(l._addUID("strokeColor")),h=document.getElementById(l._addUID("strokeWidth"));switch(r.toLowerCase()){case"text":i?(l.options.defaultStyles.textStrokeColor=p.value,l.options.defaultStyles.textFillColor=s.value):t.selected[0].setStyle(new e.style.Style({text:new e.style.Text({font:"16px sans",textAlign:"left",text:t.selected[0].getStyle().getText().getText(),fill:new e.style.Fill({color:s.value}),stroke:new e.style.Stroke({color:p.value,width:3})})}));break;case"point":var c=l._getsMarkersOptionsFromSrc(document.querySelector("input[name='marker']:checked").value);if(i){if(l.options.markersList.length>1){var u=l.options.markersList.findIndex(function(t){return t==c});u>0&&(l.options.markersList.splice(u,1),l.options.markersList.splice(0,0,c))}}else t.selected[0].setStyle(new e.style.Style({image:new e.style.Icon(l._getIconStyleOptions(c))}));break;case"line":i?(l.options.defaultStyles.strokeColor=p.value,l.options.defaultStyles.strokeWidth=parseInt(h.value,10)):t.selected[0].setStyle(new e.style.Style({stroke:new e.style.Stroke({width:parseInt(h.value,10),color:p.value})}));break;case"polygon":var d=parseInt(a.value,10)/10;i?(l.options.defaultStyles.polyStrokeColor=p.value,l.options.defaultStyles.polyFillColor=s.value,l.options.defaultStyles.polyFillOpacity=d,l.options.defaultStyles.polyStrokeWidth=parseInt(h.value,10)):t.selected[0].setStyle(new e.style.Style({stroke:new e.style.Stroke({width:parseInt(h.value,10),color:p.value}),fill:new e.style.Fill({color:l.hexToRgba(s.value,d)})}))}i||l.getMap().removeOverlay(n)},h=this._createStylingDiv({geomType:r,initValues:s,applyFunc:p});n=new e.Overlay({element:h,positioning:"top-center"}),this.getMap().addOverlay(n),n.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=n,this.getMap().removeInteraction(this.interaction),this.interaction=this._createStylingInteraction(),this.getMap().addInteraction(this.interaction)}},this),t},l.prototype._createLabelInteraction=function(){var t=new e.interaction.Select({layers:[this.layer]});return t.on("select",function(t){if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),t&&t.selected&&0!=t.selected.length){var o=null,i=null,n=null;if(t.selected[0].getGeometry()instanceof e.geom.Point){var r=t.selected[0].getProperties().name;t.selected[0].getStyle()&&t.selected[0].getStyle().getText()&&r?i="Text":t.selected[0].getStyle()&&t.selected[0].getStyle().getImage()&&(i="Point")}else t.selected[0].getGeometry()instanceof e.geom.LineString?i="Line":t.selected[0].getGeometry()instanceof e.geom.Polygon&&(i="Polygon");if(!i)return void console.log("Unhandled geometry type for styling.");if("Text"==i)n=t.selected[0].getStyle().getText().getText();else{var s=t.selected[0].getProperties();s&&s.hasOwnProperty("description")&&(n=s.description)}var a=this,l=function(e,n){if(a.getMap().removeOverlay(o),n){var r=t.selected[0];if("Text"==i){var s=r.getStyle();return s.getText().setText(e),r.setProperties({name:e}),void r.setStyle(s)}var l=e.replace(/\n/g,"<br>");r.setProperties({description:l})}},p=this._createLabelDiv({applyFunc:l,inputId:this._addUID("label-input"),placeholder:"Text"==i?"Saisir un label...":"Saisir une description...",text:n,geomType:i});o=new e.Overlay({element:p,positioning:"top-center"}),this.getMap().addOverlay(o),o.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=o,this.getMap().removeInteraction(this.interaction),this.interaction=this._createLabelInteraction(),this.getMap().addInteraction(this.interaction)}},this),t},l.prototype._handleToolClick=function(t,o,i){var r=i.getMap();if(r){switch(n.unset(r,{current:"Drawing"}),i.interaction&&(r.removeInteraction(i.interaction),i.interaction=null),this.layer||this._createEmptyLayer(),o){case this._addUID("drawing-tool-point"):i.dtOptions.points.active&&(i.interaction=new e.interaction.Draw({features:i.layer.getSource().getFeaturesCollection(),style:new e.style.Style({image:new e.style.Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),i.interaction.on("drawend",function(t){i._drawEndFeature(t.feature,"Point")},i));break;case this._addUID("drawing-tool-line"):i.dtOptions.lines.active&&(i.interaction=new e.interaction.Draw({features:i.layer.getSource().getFeaturesCollection(),style:new e.style.Style({image:new e.style.Circle({radius:this.options.cursorStyle.radius,stroke:new e.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new e.style.Fill({color:this.options.cursorStyle.fillColor})}),stroke:new e.style.Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),i.interaction.on("drawend",function(t){i._drawEndFeature(t.feature,"LineString")},i));break;case this._addUID("drawing-tool-polygon"):i.dtOptions.polygons.active&&(i.interaction=new e.interaction.Draw({features:i.layer.getSource().getFeaturesCollection(),style:new e.style.Style({image:new e.style.Circle({radius:this.options.cursorStyle.radius,stroke:new e.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new e.style.Fill({color:this.options.cursorStyle.fillColor})}),stroke:new e.style.Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new e.style.Fill({color:this.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),i.interaction.on("drawend",function(t){i._drawEndFeature(t.feature,"Polygon")},i));break;case this._addUID("drawing-tool-text"):i.dtOptions.text.active&&(i.interaction=new e.interaction.Draw({features:i.layer.getSource().getFeaturesCollection(),style:new e.style.Style({image:new e.style.Circle({radius:this.options.cursorStyle.radius,stroke:new e.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new e.style.Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),i.interaction.on("drawend",function(t){var o=null,n=function(n,r){if(i.getMap().removeOverlay(o),!r)return void i.layer.getSource().removeFeature(t.feature);t.feature.setProperties({name:n}),t.feature.setStyle(new e.style.Style({image:new e.style.Icon(i._getIconStyleOptions(i.options.defaultStyles.textIcon1x1)),text:new e.style.Text({textAlign:"left",font:"16px sans",text:n,fill:new e.style.Fill({color:i.options.defaultStyles.textFillColor}),stroke:new e.style.Stroke({color:i.options.defaultStyles.textStrokeColor,width:3})})}))},r=this._createLabelDiv({applyFunc:n,inputId:i._addUID("label-input"),geomType:"Text",placeholder:"Saisir un label..."});o=new e.Overlay({element:r,positioning:"top-center"}),i.getMap().addOverlay(o),o.setPosition(t.feature.getGeometry().getCoordinates()),document.getElementById(this._addUID("label-input")).focus()},i));break;case this._addUID("drawing-tool-edit"):i.dtOptions.edit.active&&(i.interaction=new e.interaction.Modify({features:i.layer.getSource().getFeaturesCollection(),style:new e.style.Style({image:new e.style.Circle({radius:this.options.cursorStyle.radius,stroke:new e.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new e.style.Fill({color:this.options.cursorStyle.fillColor})})}),deleteCondition:function(){return!1}}));break;case this._addUID("drawing-tool-display"):i.dtOptions.display.active&&(i.interaction=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):i.dtOptions.tooltip.active&&(i.interaction=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):i.dtOptions.remove.active&&(i.interaction=i._createRemoveInteraction())}i.interaction&&(i.interaction.setProperties({name:"Drawing",source:this}),r.addInteraction(i.interaction))}},l.prototype.onShowDrawingClick=function(){var t=this.getMap();n.unset(t),this.collapsed=this._showDrawingContainer.checked,this.dispatchEvent("change:collapsed")},l.prototype.onExportFeatureClick=function(){var t=this.exportFeatures();if(t){var e=document.createElement("a");if(e.setAttribute("href","data:application/vnd.google-earth.kml+xml;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",this.getExportName()+".kml"),document.createEvent){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),e.dispatchEvent(o)}else e.click()}},l}(0,t,0,g,R,T,0,l),G=function(t){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},
_createMainContainerElement:function(){var t=document.createElement("div");return t.className=this._addUID("GPlocationPoint"),t.className+=" GPwidget",t},_createLocationPointElement:function(t,e){var o=document.createElement("div");return o.id=this._addUID("GPlocationPoint_"+t),o.className=e?"GPflexInput GPlocationStageFlexInput":"GPflexInput GPlocationStageFlexInputHidden",o.style.cssText="",o},_createLocationPointLabelElement:function(e,o){var i=this,n=document.createElement("label");return n.id=this._addUID("GPlocationOriginLabel_"+e),n.htmlFor="GPlocationOrigin_"+e,n.innerHTML=o,n.addEventListener("click",function(e){for(var o=t.index(this.id),n=document.getElementsByClassName(i._addUID("GPlocationPoint")),r=0;r<n.length;r++){var s=n[r].childNodes[0].id,a=t.index(s);document.getElementById(i._addUID("GPlocationPoint_"+a)).style.cssText=""}document.getElementById(i._addUID("GPlocationOriginCoords_"+o)).value="",document.getElementById(i._addUID("GPlocationOrigin_"+o)).value="",document.getElementById(i._addUID("GPlocationPoint_"+o)).style.cssText="",document.getElementById(i._addUID("GPlocationOriginPointer_"+o)).checked=!1,document.getElementById(i._addUID("GPlocationOrigin_"+o)).className="GPlocationOriginVisible",document.getElementById(i._addUID("GPlocationOriginCoords_"+o)).className="GPlocationOriginHidden",document.getElementById(i._addUID("GPlocationStageRemove_"+o))&&(document.getElementById(i._addUID("GPlocationStageRemove_"+o)).className="GPlocationStageRemove"),document.getElementById(i._addUID("GPlocationStageAdd"))&&(document.getElementById(i._addUID("GPlocationStageAdd")).className=""),i.onLocationClearPointClick(e)}),n},_createLocationAutoCompleteteInputElement:function(e){var o=this,i=document.createElement("input");return i.id=this._addUID("GPlocationOrigin_"+e),i.className="GPlocationOriginVisible",i.type="text",i.placeholder="Saisir une adresse",i.autocomplete="off",i.addEventListener("keyup",function(e){var i=e.which||e.keyCode;if(13!==i&&10!==i&&38!==i&&40!==i){var n=t.index(this.id);document.getElementById(o._addUID("GPlocationOrigin_"+n)).value.length>2?document.getElementById(o._addUID("GPlocationAutoCompleteList_"+n)).style.display="block":document.getElementById(o._addUID("GPlocationAutoCompleteList_"+n)).style.display="none",o.onAutoCompleteSearchText(e)}}),i.addEventListener("keydown",function(i){var n=i.which||i.keyCode,r=document.getElementById(o._addUID("GPlocationAutoCompleteList_"+e));if(r){var s=r.getElementsByClassName("GPautoCompleteProposal current"),a=r.getElementsByClassName("GPautoCompleteProposal"),l=a.length;if(l){var p=null;if(!s.length)return p=a[0],p.className="GPautoCompleteProposal current",p.style.color="#000000",void(p.style["background-color"]="#CEDBEF");p=s[0];var h=parseInt(t.index(p.id),10),c=h===l-1?a[0]:a[h+1],u=0===h?a[l-1]:a[h-1];switch(p.style["background-color"]="",p.style.color="",u.style["background-color"]="",u.style.color="",c.style["background-color"]="",c.style.color="",n){case 38:console.log("arrow up"),p.className="GPautoCompleteProposal",u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";break;case 40:console.log("arrow down"),p.className="GPautoCompleteProposal",c.className="GPautoCompleteProposal current",c.style.color="#000000",c.style["background-color"]="#CEDBEF";break;case 13:console.log("enter"),p.click(i)}p.focus()}}}),i},_createLocationCoordinateInputElement:function(e){var o=this,i=document.createElement("input");return i.id=this._addUID("GPlocationOriginCoords_"+e),i.className="GPlocationOriginHidden",i.type="text",i.disabled=!1,i.addEventListener("click",function(){var e=t.index(this.id);document.getElementById(o._addUID("GPlocationOriginLabel_"+e)).click()}),i},_createLocationPointerShowInputElement:function(t){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+t),e.type="checkbox",e},_createLocationPointerInputElement:function(e){var o=this,i=document.createElement("label");return i.id=this._addUID("GPlocationOriginPointerImg_"+e),i.htmlFor="GPlocationOriginPointer_"+e,i.className="GPlocationOriginPointerImg",i.title="Pointer un lieu sur la carte",i.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i,n,r,s=t.index(this.id),a=document.getElementsByClassName(o._addUID("GPlocationPoint"));for(i=0;i<a.length;i++)n=a[i].childNodes[0].id,r=t.index(n),s!=r&&(document.getElementById(o._addUID("GPlocationOriginPointer_"+r)).checked=!1,"Pointer un lieu sur la carte"==document.getElementById(o._addUID("GPlocationOriginCoords_"+r)).value&&(document.getElementById(o._addUID("GPlocationOriginCoords_"+r)).value="",document.getElementById(o._addUID("GPlocationOrigin_"+r)).className="GPlocationOriginVisible",document.getElementById(o._addUID("GPlocationOriginCoords_"+r)).className="GPlocationOriginHidden"));if(document.getElementById(o._addUID("GPlocationOriginPointer_"+s)).checked){for(document.getElementById(o._addUID("GPlocationOriginCoords_"+s)).value="",i=0;i<a.length;i++)n=a[i].childNodes[0].id,r=t.index(n),document.getElementById(o._addUID("GPlocationPoint_"+r)).style.cssText="";document.getElementById(o._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(o._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove"),document.getElementById(o._addUID("GPlocationStageAdd"))&&(document.getElementById(o._addUID("GPlocationStageAdd")).className=""),document.getElementById(o._addUID("GPlocationOriginPointer_"+s)).checked=!1,document.getElementById(o._addUID("GPlocationOrigin_"+s)).className="GPlocationOriginVisible",document.getElementById(o._addUID("GPlocationOriginCoords_"+s)).className="GPlocationOriginHidden"}else{for(document.getElementById(o._addUID("GPlocationOriginCoords_"+s)).value="Pointer un lieu sur la carte",i=0;i<a.length;i++)n=a[i].childNodes[0].id,r=t.index(n),s==r?document.getElementById(o._addUID("GPlocationPoint_"+r)).style.cssText="":document.getElementById(o._addUID("GPlocationPoint_"+r)).style.display="none";document.getElementById(o._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(o._addUID("GPlocationStageRemove_"+s)).className="GPlocationOriginHidden"),document.getElementById(o._addUID("GPlocationStageAdd"))&&(document.getElementById(o._addUID("GPlocationStageAdd")).className="GPlocationOriginHidden"),document.getElementById(o._addUID("GPlocationOriginPointer_"+s)).checked=!0,document.getElementById(o._addUID("GPlocationOrigin_"+s)).className="GPlocationOriginHidden",document.getElementById(o._addUID("GPlocationOriginCoords_"+s)).className="GPlocationOriginVisible",document.getElementById(o._addUID("GPlocationOriginCoords_"+s)).disabled=!0}o.onActivateMapPointClick(e)}),i},_createLocationRemovePointElement:function(e){var o=this,i=document.createElement("div");return i.id=this._addUID("GPlocationStageRemove_"+e),i.className="GPlocationStageRemove",i.title="Supprimer l'étape",i.addEventListener("click",function(i){var n=document.getElementsByClassName(o._addUID("GPlocationPoint")),r=n.length-1,s=n[0].childNodes[0].id,a=n[r].childNodes[0].id,l=t.index(s),p=t.index(a);if(e!=l&&e!=p){var h=t.index(this.id);document.getElementById(o._addUID("GPlocationPoint_"+h)).className="GPflexInput GPlocationStageFlexInputHidden",document.getElementById(o._addUID("GPlocationOrigin_"+h)).value="",document.getElementById(o._addUID("GPlocationOrigin_"+h)).className="GPlocationOriginVisible",document.getElementById(o._addUID("GPlocationOriginCoords_"+h)).value="",document.getElementById(o._addUID("GPlocationOriginCoords_"+h)).className="GPlocationOriginHidden",document.getElementById(o._addUID("GPlocationStageAdd")).style.display="",o.onLocationRemovePointClick(i)}}),i},_createLocationAddPointElement:function(){var e=this,o=document.createElement("div");return o.id=this._addUID("GPlocationStageAdd"),o.title="Ajouter une étape",o.addEventListener("click",function(o){for(var i=1,n=0,r=document.getElementsByClassName(e._addUID("GPlocationPoint")),s=1;s<r.length-1;s++){var a=r[s].childNodes[0].id,l=t.index(a);document.getElementById(e._addUID("GPlocationPoint_"+l))&&("GPflexInput GPlocationStageFlexInputHidden"==document.getElementById(e._addUID("GPlocationPoint_"+l)).className?1==i&&(i=l):n++)}i<r.length&&(document.getElementById(e._addUID("GPlocationPoint_"+i)).className="GPflexInput GPlocationStageFlexInput"),4==n&&(document.getElementById(e._addUID("GPlocationStageAdd")).style.display="none"),e.onLocationAddPointClick(o)}),o},_createLocationAutoCompleteResultElement:function(t){var e=this,o=document.createElement("div");return o.id=this._addUID("GPlocationAutoCompleteList_"+t),o.className="GPadvancedAutoCompleteList",o.addEventListener?o.addEventListener("click",function(o){e.onAutoCompletedResultsItemClick(o),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t)).style.display="none"},!1):o.attachEvent&&o.attachEvent("onclick",function(o){e.onAutoCompletedResultsItemClick(o),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t)).style.display="none"}),o},_createLocationAutoCompletedLocationElement:function(t,e,o){var i=document.getElementById(this._addUID("GPlocationAutoCompleteList_"+t)),n=document.createElement("div");n.id=this._addUID("AutoCompletedLocation_"+o),n.className="GPautoCompleteProposal",n.innerHTML=e.fullText,i.appendChild(n)},GPdisplayCoordinate:function(e){for(var o=document.getElementsByClassName(this._addUID("GPlocationPoint")),i=0;i<o.length;i++){var n=o[i].childNodes[0].id,r=t.index(n);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).value=e,document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).disabled=!1;for(var s=0;s<o.length;s++){n=o[s].childNodes[0].id;var a=t.index(n);document.getElementById(this._addUID("GPlocationPoint_"+a)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+a))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+a)).className="GPlocationStageRemove")}return document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked=!1,void(document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className=""))}}}}}(g),O=function(t,e,o,i,n,r,s,a){function l(e){if(e=e||{},!(this instanceof l))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._container=e.element),t.control.Control.call(this,{element:this._container,target:e.target,render:e.render})}return t.inherits(l,t.control.Control),l.prototype=Object.create(t.control.Control.prototype,{}),e.assign(l.prototype,s),l.prototype.constructor=l,l.prototype.initialize=function(t){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},e.mergeParams(this.options,t),this._uid=this.options.tag.groupId||r.generate(),this._map=null,this._inputsContainer=null,this._inputLabelContainer=null,this._inputAutoCompleteContainer=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},l.prototype._initMarker=function(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var t=this.options.tag.markerOpts.offset;t&&(Array.isArray(t)&&2===t.length?this._markerOffset=t:console.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=a.lightOrange,this._markerOffset=a.defaultOffset},l.prototype.getCoordinate=function(){return this._coordinate},l.prototype.clear=function(){this._clearResults(),this._inputLabelContainer.click()},l.prototype._checkRightsManagement=function(){var t=this.options.autocompleteOptions.filterOptions,o=t?t.type:[];o&&0!==o.length||(o=["PositionOfInterest","StreetAddress"]);var i=n.check({key:this.options.apiKey,resources:o,services:["AutoCompletion"]});i||(this._noRightManagement=!0),this.options.apiKey||(this.options.apiKey=i.key),e.assign(this._resources,i)},l.prototype._initContainer=function(){var t=this.options.tag.id,e=this._createMainContainerElement(),o=this._inputsContainer=this._createLocationPointElement(t,this.options.tag.display);e.appendChild(o);var i=this._inputLabelContainer=this._createLocationPointLabelElement(t,this.options.tag.label);o.appendChild(i);var n=this._inputAutoCompleteContainer=this._createLocationAutoCompleteteInputElement(t),r=this;n.addEventListener?n.addEventListener("click",function(){r.onAutoCompleteInputClick()}):n.attachEvent&&n.attachEvent("onclick",function(){r.onAutoCompleteInputClick()}),o.appendChild(n);var s=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(t);o.appendChild(s);var a=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(t);o.appendChild(a);var l=this._inputShowPointer=this._createLocationPointerInputElement(t);if(o.appendChild(l),this.options.tag.addOption){var p=this._addPointElement=this._createLocationAddPointElement();o.appendChild(p)}if(this.options.tag.removeOption){var h=this._removePointElement=this._createLocationRemovePointElement(t);o.appendChild(h)}var c=this._suggestedContainer=this._createLocationAutoCompleteResultElement(t);return e.appendChild(c),e},l.prototype.onAutoCompleteInputClick=function(){this._inputAutoCompleteContainer&&this._inputAutoCompleteContainer.value.length>2&&this._displaySuggestedLocation()},l.prototype.onAutoCompleteSearchText=function(t){var e=t.target.value;if(e){if(this._noRightManagement)return void console.log("no rights for this service !?");if(this._currentLocation=e,e.length<3)return void this._clearSuggestedLocation();var o=this;this._requestAutoComplete({text:e,maximumResponses:5,onSuccess:function(t){if(t){var e=t.suggestedLocations;o._fillAutoCompletedLocationListContainer(e)}},onFailure:function(t){o._clearSuggestedLocation()}});var i=this.getMap();i.on("click",this._hideSuggestedLocation,this),i.on("pointerdrag",this._hideSuggestedLocation,this)}},l.prototype.onAutoCompletedResultsItemClick=function(e){var o=r.index(e.target.id);if(o){var i=[this._suggestedLocations[o].position.x,this._suggestedLocations[o].position.y];this._coordinate=i;var n={type:this._suggestedLocations[o].type,fields:this._suggestedLocations[o]},s=this._suggestedLocations[o].fullText;this._setLabel(s);var a=this.getMap().getView(),l=a.getProjection().getCode();"EPSG:4326"!==l&&(i=t.proj.transform(i,"EPSG:4326",l)),this._setPosition(i),this._setMarker(i,n,this.options.displayInfo)}},l.prototype.onActivateMapPointClick=function(){var t=this.getMap();this._inputShowPointerContainer.checked?(this._clearResults(),t.on("click",this.onMouseMapClick,this),this._setCursor("crosshair")):(t.un("click",this.onMouseMapClick,this),this._setCursor())},l.prototype.onLocationClearPointClick=function(){this._setCursor(),this._clearResults()},l.prototype.onLocationRemovePointClick=function(){this._setCursor(),this._clearResults()},l.prototype.onLocationAddPointClick=function(t){},l.prototype.onMouseMapClick=function(t){var e=t.coordinate;if(t.map&&t.map.getView()){var o=t.map.getView().getProjection();this._setCoordinate(e,o),this._setMarker([e[0],e[1]],null,!1),this.onActivateMapPointClick(t)}},l.prototype._setLabel=function(t){this._inputAutoCompleteContainer.value=t},l.prototype._setCursor=function(t){var e=this.getMap(),o=e.getTargetElement();o.style.cursor=t||null},l.prototype._setCoordinate=function(e,o){this._coordinate=t.proj.transform(e,o,"EPSG:4326");var i=this._coordinate[0].toFixed(4),n=this._coordinate[1].toFixed(4),r=i+" / "+n;this.GPdisplayCoordinate(r)},l.prototype._setPosition=function(t){this.getMap().getView().setCenter(t)},l.prototype._setMarker=function(e,o,i){var n=this.getMap();if(null!=this._marker&&(n.removeOverlay(this._marker),this._marker=null),e){var r=document.createElement("img");r.src=this._markerUrl,this._marker=new t.Overlay({position:e,offset:this._markerOffset,element:r,stopEvent:!1}),n.addOverlay(this._marker)}},l.prototype._clearResults=function(){var t=this.getMap();this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),t.un("click",this.onMouseMapClick,this)},l.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},l.prototype._hideSuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="none")},l.prototype._displaySuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="block")},l.prototype._requestAutoComplete=function(t){if(t&&0!==Object.keys(t).length&&t.text){var o={};e.assign(o,this.options.autocompleteOptions),e.assign(o,t);var n=this._resources.AutoCompletion||null;n&&Array.isArray(n)&&(o.filterOptions||(o.filterOptions={}),o.filterOptions.type=n),o.apiKey=o.apiKey||this.options.apiKey,i.Services.autoComplete(o)}},l.prototype._fillAutoCompletedLocationListContainer=function(t){if(t&&0!==t.length){var e=this._suggestedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);for(var o=0;o<t.length;o++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,t[o],o);this._suggestedLocations=t}},l}(t,a,0,o,P,g,G,S),N=function(t){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProute"),t.className="GPwidget",t},_createShowRouteElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowRoute"),t.type="checkbox",t},_createShowRoutePictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowRoute"),e.title="Ouvrir le calcul d'itinéraire",e.addEventListener?e.addEventListener("click",function(e){t.onShowRoutePanelClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowRoutePanelClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowRouteOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createRoutePanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProutePanel"),t.className="GPpanel",t},_createRoutePanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Calcul d'itinéraire",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GProutePanelClose"),i.className="GPpanelClose",i.title="Masquer le panneau",i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPshowRoutePicto")).click()},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowRoutePicto")).click()}),e.appendChild(i),e},_createRoutePanelFormElement:function(){var e=this,o=document.createElement("form");return o.id=this._addUID("GProuteForm"),o.setAttribute("onkeypress","return event.keyCode != 13;"),o.addEventListener("submit",function(o){console.log(o),o.preventDefault();var i=document.getElementsByClassName(e._addUID("GPlocationPoint")),n=i[0].childNodes[0].id,r=i[i.length-1].childNodes[0].id,s=t.index(n),a=t.index(r);if(""==document.getElementById(e._addUID("GPlocationOrigin_"+s)).value&&""==document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).value||""==document.getElementById(e._addUID("GPlocationOrigin_"+a)).value&&""==document.getElementById(e._addUID("GPlocationOriginCoords_"+a)).value)return!1;var l;document.getElementById(e._addUID("GProuteResultsStages")).innerHTML="";for(var p=0;p<i.length;p++){var h=i[p].childNodes[0].id;if(l=t.index(h),"GPflexInput GPlocationStageFlexInput"==document.getElementById(e._addUID("GPlocationPoint_"+l)).className){var c=document.createElement("div");c.className="GProuteResultsStages";var u=document.createElement("div");u.className="GProuteResultStageLabel",u.innerHTML=document.getElementById(e._addUID("GPlocationOriginLabel_"+l)).innerHTML+" :",c.appendChild(u);var d=document.createElement("div");d.className="GProuteResultStageValue";var f=document.getElementById(e._addUID("GPlocationOriginCoords_"+l)),y=f.value,g="GPlocationOriginVisible"===f.className;d.innerHTML=null!=y&&""!=y&&g?y:document.getElementById(e._addUID("GPlocationOrigin_"+l)).value,c.appendChild(d),""!=d.innerHTML&&document.getElementById(e._addUID("GProuteResultsStages")).appendChild(c)}}var m=null;if(document.getElementById(e._addUID("GProuteComputationSelect"))){var v=document.getElementById(e._addUID("GProuteResultsComputationSelect"));v.selectedIndex=document.getElementById(e._addUID("GProuteComputationSelect")).selectedIndex,m=v.options[v.selectedIndex].value}var _=null;document.getElementById(e._addUID("GProuteTransportCar"))&&document.getElementById(e._addUID("GProuteTransportCar")).checked&&(_=document.getElementById(e._addUID("GProuteTransportCar")).value),document.getElementById(e._addUID("GProuteTransportPedestrian"))&&document.getElementById(e._addUID("GProuteTransportPedestrian")).checked&&(_=document.getElementById(e._addUID("GProuteTransportPedestrian")).value);for(var b=[],E=document.getElementsByClassName("GProuteExclusionsOption"),S=0;S<E.length;S++){l=E[S].htmlFor;var P=document.getElementById(l);P.checked||b.push(P.value)}return e.onRouteComputationSubmit({computation:m,transport:_,exclusions:b}),!1}),o},_createRoutePanelResultsElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteResultsPanel"),t.className="GProuteComponentHidden",t.appendChild(this._createRouteResultsStagesElement()),t.appendChild(this._createRouteResultsElement());var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",t.appendChild(e),t.appendChild(this._createRouteShowResultsDetailsElement());var o=document.createElement("label");o.htmlFor=this._addUID("GProuteResultsShowDetails"),o.innerHTML="Afficher le détail",t.appendChild(o);var i=document.createElement("label");i.htmlFor=this._addUID("GProuteResultsShowDetails"),i.innerHTML="Masquer le détail",t.appendChild(i);var n=document.createElement("div");return n.className="GPfakeBorder",t.appendChild(n),t.appendChild(this._createRouteResultsDetailsElement()),t},_createRouteWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteCalcWaitingContainer"),t.className="GProuteCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GProuteCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createRouteResultsStagesElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteResultsStages"),t},_createRouteResultsElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var o=document.createElement("div");o.id=this._addUID("GProuteResultsValues"),e.appendChild(o);var i=document.createElement("div");i.id=this._addUID("GProuteResultsMode");var n=document.createElement("select");n.id=this._addUID("GProuteResultsComputationSelect"),n.className="GPinputSelect",n.addEventListener("change",function(e){t.onRouteModeComputationChangeAndRun(e)});for(var r=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],s=0;s<r.length;s++){var a=document.createElement("option");a.value=r[s].code,a.text=r[s].label,n.appendChild(a)}i.appendChild(n),e.appendChild(i);var l=document.createElement("div");return l.id=this._addUID("GProuteResultsNew"),l.title="Modifier le calcul",l.addEventListener("click",function(e){document.getElementById(t._addUID("GProuteResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GProuteForm")).className="",t.onShowRouteResultsNewClick(e)}),e.appendChild(l),e},_addRouteResultsValuesElement:function(t,e,o){var i=document.getElementById(this._addUID("GProuteResultsValues"));if(i.childElementCount)for(;i.firstChild;)i.removeChild(i.firstChild);var n=document.createElement("div");n.className="GProuteResultsValue";var r=document.createElement("label");r.className="GProuteResultsValueLabel",r.innerHTML="Distance :",n.appendChild(r);var s=0;if(parseInt(t/1e3,10)){var a=Math.round(t);a/=1e3,s=a+" km"}else s=Math.round(t)+" m";var l=document.createElement("div");l.id=this._addUID("GProuteResultsValueDist"),l.innerHTML=s,n.appendChild(l),i.appendChild(n);var p=document.createElement("div");p.className="GProuteResultsValue";var h=document.createElement("label");h.className="GProuteResultsValueLabel",h.innerHTML="Durée :",p.appendChild(h);var c=document.createElement("div");return c.id=this._addUID("GProuteResultsValueDist"),c.innerHTML=o(e),p.appendChild(c),i.appendChild(p),i},_createRouteShowResultsDetailsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",t},_createRouteResultsDetailsElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteResultsDetails"),t},_addRouteResultsDetailsElement:function(t,e){var o=this,i=document.getElementById(this._addUID("GProuteResultsDetails"));if(i.childElementCount)for(;i.firstChild;)i.removeChild(i.firstChild);for(var n=0,r=0,s=0;s<t.length;s++){var a=s+1,l=t[s],p=document.createElement("div");p.className="GProuteResultsDetailsNumber",p.innerHTML=a+".",i.appendChild(p),r+=parseFloat(l.duration),n+=parseFloat(l.distance);var h=0;if(parseInt(n/1e3,10)){var c=Math.round(n);c/=1e3,h=c+" km"}else h=Math.round(n)+" m";var u=document.createElement("div");u.className="GProuteResultsDetailsInstruction",u.id=this._addUID("GProuteResultsDetailsInstruction_"+a),u.title="distance : "+h+" / temps : "+e(r),u.innerHTML=l.instruction,u.addEventListener("mouseover",function(t){o.onRouteResultsDetailsMouseOver(t)}),u.addEventListener("mouseout",function(t){o.onRouteResultsDetailsMouseOut(t)}),u.addEventListener("click",function(t){"function"==typeof o.onRouteResultsDetailsClick&&o.onRouteResultsDetailsClick(t)}),i.appendChild(u)}return i},_createRoutePanelFormPointElement:function(t,e,o){var i=this,n=document.createElement("div");n.id="GProutePoint"+t,n.className=o?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var r=document.createElement("label");r.id="GProuteOriginLabel"+t,r.htmlFor="GProuteOrigin"+t,r.innerHTML=e,r.addEventListener("click",function(){var t=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+t).value="";for(var e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+t).checked=!1,document.getElementById("GProuteOrigin"+t).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+t).className="GProuteOriginHidden"}),n.appendChild(r);var s=document.createElement("input");s.id="GProuteOrigin"+t,s.className="GProuteOriginVisible",s.type="text",s.placeholder="Saisir une adresse",s.addEventListener("keyup",function(t){var e=t.which||t.keyCode;if(13!==e&&10!==e){var o=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+o).value.length>2?document.getElementById("GProuteAutoCompleteList"+o).style.display="block":document.getElementById("GProuteAutoCompleteList"+o).style.display="none",i.onAutoCompleteSearchText(t)}}),s.addEventListener("blur",function(){var t=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+t).style.display="none"}),n.appendChild(s);var a=document.createElement("input");a.id="GProuteOriginCoords"+t,a.className="GProuteOriginHidden",a.type="text",a.disabled=!0,n.appendChild(a);var l=document.createElement("input");l.id="GProuteOriginPointer"+t,l.type="checkbox",n.appendChild(l);var p=document.createElement("label");return p.id="GProuteOriginPointerImg"+t,p.htmlFor="GProuteOriginPointer"+t,p.className="GProuteOriginPointerImg",p.title="Pointer un lieu sur la carte",p.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var e,o=this.id.charAt(this.id.length-1);for(e=1;e<8;e++)o!=e&&(document.getElementById("GProuteOriginPointer"+e).checked=!1,"Pointer un lieu sur la carte"==document.getElementById("GProuteOriginCoords"+e).value&&(document.getElementById("GProuteOriginCoords"+e).value="",document.getElementById("GProuteOrigin"+e).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+e).className="GProuteOriginHidden"));if(document.getElementById("GProuteOriginPointer"+o).checked){for(document.getElementById("GProuteOriginCoords"+o).value="",e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+o).checked=!1,document.getElementById("GProuteOrigin"+o).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginHidden"}else{for(document.getElementById("GProuteOriginCoords"+o).value="Pointer un lieu sur la carte",e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display=o==e?"flex":"none";document.getElementById("GProuteForm").className="GProuteFormMini",document.getElementById("GProuteOriginPointer"+o).checked=!0,document.getElementById("GProuteOrigin"+o).className="GProuteOriginHidden",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginVisible"}i.onRouteMapPointClick(t)}),n.appendChild(p),n},_createRoutePanelFormRemoveStageElement:function(t){var e=this,o=document.createElement("div");return o.id="GProuteStageRemove"+t,o.className="GProuteStageRemove",o.title="Supprimer l'étape",1!=t&&7!=t&&o.addEventListener("click",function(t){var o=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+o).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+o).value="",document.getElementById("GProuteOrigin"+o).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+o).value="",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginHidden",document.getElementById("GProuteStageAdd").style.display="";var i=document.getElementById("GPshowRouteExclusionsPicto").style.top;document.getElementById("GPshowRouteExclusionsPicto").style.top=(parseInt(i,10)-33).toString()+"px",e.onRouteRemovePointClick(t)}),o},_createRoutePanelFormAddStageElement:function(){var t=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(e){for(var o=1,i=0,n=2;n<7;n++)"GPflexInput GProuteStageFlexInputHidden"==document.getElementById("GProutePoint"+n).className?1==o&&(o=n):i++;if(o<7){document.getElementById("GProutePoint"+o).className="GPflexInput GProuteStageFlexInput";var r=document.getElementById("GPshowRouteExclusionsPicto").style.top;document.getElementById("GPshowRouteExclusionsPicto").style.top=(parseInt(r,10)+33).toString()+"px"}4==i&&(document.getElementById("GProuteStageAdd").style.display="none"),t.onRouteAddPointClick(e)}),e},_createRoutePanelFormAutoCompleteListElement:function(t){var e=this,o=document.createElement("div");return o.id="GProuteAutoCompleteList"+t,o.className="GPadvancedAutoCompleteList",o.addEventListener?o.addEventListener("click",function(o){e.onAutoCompletedResultsItemClick(o),
document.getElementById("GProuteAutoCompleteList"+t).style.display="none"},!1):o.attachEvent&&o.attachEvent("onclick",function(o){e.onAutoCompletedResultsItemClick(o),document.getElementById("GProuteAutoCompleteList"+t).style.display="none"}),o},_createRouteAutoCompletedLocationElement:function(t,e,o){var i=document.getElementById("GProuteAutoCompleteList"+e),n=document.createElement("div");n.id="AutoCompletedLocation"+o,n.className="GPautoCompleteProposal",n.innerHTML=t.fullText,i.appendChild(n)},_createRoutePanelFormModeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteModeChoice"),t},_createRoutePanelFormModeChoiceTransportElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GProuteTransportChoice");var i=document.createElement("span");i.className="GProuteModeLabel",i.innerHTML="Mode de transport",o.appendChild(i);for(var n=0;n<t.length;n++){var r=t[n];if("Voiture"===r){var s=document.createElement("input");s.id=this._addUID("GProuteTransportCar"),s.type="radio",s.name="GProuteTransport",s.value="Voiture",0===n&&(s.checked=!0),s.addEventListener?s.addEventListener("change",function(t){e.onRouteModeTransportChange(t)}):s.attachEvent&&s.attachEvent("onchange",function(t){e.onRouteModeTransportChange(t)}),o.appendChild(s);var a=document.createElement("label");a.className="GProuteTransportImg",a.htmlFor=this._addUID("GProuteTransportCar"),a.title="Voiture",o.appendChild(a)}if("Pieton"===r){var l=document.createElement("input");l.id=this._addUID("GProuteTransportPedestrian"),l.type="radio",l.name="GProuteTransport",l.value="Pieton",0===n&&(l.checked=!0),l.addEventListener?l.addEventListener("change",function(t){e.onRouteModeTransportChange(t)}):l.attachEvent&&l.attachEvent("onchange",function(t){e.onRouteModeTransportChange(t)}),o.appendChild(l);var p=document.createElement("label");p.className="GProuteTransportImg",p.htmlFor=this._addUID("GProuteTransportPedestrian"),p.title="Piéton",o.appendChild(p)}}return o},_createRoutePanelFormModeChoiceComputeElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice");var o=document.createElement("span");o.className="GProuteModeLabel",o.innerHTML="Mode de calcul",e.appendChild(o);var i=document.createElement("select");i.id=this._addUID("GProuteComputationSelect"),i.className="GPinputSelect",i.addEventListener("change",function(e){t.onRouteModeComputationChange(e)});for(var n=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],r=0;r<n.length;r++){var s=document.createElement("option");s.value=n[r].code,s.text=n[r].label,i.appendChild(s)}return e.appendChild(i),e},_createShowRouteExclusionsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowRouteExclusions"),t.type="checkbox",t},_createShowRouteExclusionsPictoElement:function(){var t=this,e=document.createElement("label");return e.id=this._addUID("GPshowRouteExclusionsPicto"),e.className="GPshowMoreOptions GPshowRouteExclusionsPicto",e.htmlFor=this._addUID("GPshowRouteExclusions"),e.title="Exclusions",e.style.top="185px",e.addEventListener?e.addEventListener("click",function(e){t.onShowRouteExclusionsClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowRouteExclusionsClick(e)}),e},_createRoutePanelFormExclusionsElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteExclusions");var e=document.createElement("span");return e.className="GProuteExclusionsLabel",e.innerHTML="Passages autorisés",t.appendChild(e),t},_createRoutePanelFormExclusionOptionsElement:function(t){var e=this,o=document.createElement("div");o.className="GProuteExclusionsOptions";for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"toll":var r=document.createElement("input");r.id=this._addUID("GProuteExclusionsToll"),r.type="checkbox",r.value="Toll",r.checked=!n,r.addEventListener?r.addEventListener("change",function(t){e.onRouteExclusionsChange(t)}):r.attachEvent&&r.attachEvent("onchange",function(t){e.onRouteExclusionsChange(t)}),o.appendChild(r);var s=document.createElement("label");s.className="GProuteExclusionsOption",s.htmlFor=this._addUID("GProuteExclusionsToll"),s.innerHTML="Péages",o.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GProuteExclusionsTunnel"),a.type="checkbox",a.value="Tunnel",a.checked=!n,a.addEventListener?a.addEventListener("change",function(t){e.onRouteExclusionsChange(t)}):a.attachEvent&&a.attachEvent("onchange",function(t){e.onRouteExclusionsChange(t)}),o.appendChild(a);var l=document.createElement("label");l.className="GProuteExclusionsOption",l.htmlFor=this._addUID("GProuteExclusionsTunnel"),l.innerHTML="Tunnels",o.appendChild(l);break;case"bridge":var p=document.createElement("input");p.id=this._addUID("GProuteExclusionsBridge"),p.type="checkbox",p.value="Bridge",p.checked=!n,p.addEventListener?p.addEventListener("change",function(t){e.onRouteExclusionsChange(t)}):p.attachEvent&&p.attachEvent("onchange",function(t){e.onRouteExclusionsChange(t)}),o.appendChild(p);var h=document.createElement("label");h.className="GProuteExclusionsOption",h.htmlFor=this._addUID("GProuteExclusionsBridge"),h.innerHTML="Ponts",o.appendChild(h)}}return o},_createRouteSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GProuteSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Calculer",t},_createRouteFormResetElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.addEventListener("click",function(e){t.onRouteResetClick(e)}),e}}}(g),k=function(t,e,o,i,n,r,s,a,l,p){function h(e){if(e=e||{},!(this instanceof h))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._createMainContainerElement(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),t.control.Control.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return t.inherits(h,t.control.Control),h.prototype=Object.create(t.control.Control.prototype,{}),o.assign(h.prototype,p),h.prototype.constructor=h,h.prototype.getCollapsed=function(){return this.collapsed},h.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] Route:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GProutePanelClose-"+this._uid).click():document.getElementById("GPshowRoute-"+this._uid).click(),this.collapsed=t)},h.prototype.getLayer=function(){return this._geojsonSections},h.prototype.setMap=function(e){e&&(this._container=this._initContainer(e)),t.control.Control.prototype.setMap.call(this,e)},h.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{}},o.assign(this.options,e);var i={departure:{url:l.red,offset:l.defaultOffset},stages:{url:l.lightOrange,offset:l.defaultOffset},arrival:{url:l.darkOrange,offset:l.defaultOffset}};this.options.markersOpts=o.assign(i,e.markersOpts),this.collapsed=this.options.collapsed,this._uid=r.generate(),this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new t.style.Style({stroke:new t.style.Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new t.style.Style({stroke:new t.style.Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},h.prototype._checkInputOptions=function(t){if(t.graphs)if(Array.isArray(t.graphs))if(0===t.graphs.length)t.graphs=null;else for(var e=0;e<t.graphs.length;e++)"string"!=typeof t.graphs[e]?(console.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),t.graphs=null):("pieton"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Pieton"),"voiture"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Voiture"));else t.graphs=null;"true"===t.collapsed&&(t.collapsed=!0),"false"===t.collapsed&&(t.collapsed=!1)},h.prototype._checkRightsManagement=function(){var t=null,e=[],o=null;o=this.options.routeOptions.apiKey,t=this.options.routeOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["Voiture","Pieton"]);var i=n.check({key:o||this.options.apiKey,resources:e,services:["Itineraire"]});o=this.options.autocompleteOptions.apiKey,t=this.options.autocompleteOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var r=n.check({key:o||this.options.apiKey,resources:e,services:["AutoCompletion"]});i||r||(this._noRightManagement=!0),r&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=r.AutoCompletion,this._resources.AutoCompletion.key=r.key),i&&(this._resources.Itineraire={},this._resources.Itineraire.resources=i.Itineraire,this._resources.Itineraire.key=i.key)},h.prototype._initContainer=function(t){var e=this._container,o=this._showRouteContainer=this._createShowRouteElement();e.appendChild(o),this.collapsed||(o.checked=!0);var i=this._createShowRoutePictoElement();e.appendChild(i);var n=this._createRoutePanelElement(),r=this._createRoutePanelHeaderElement();n.appendChild(r);for(var s=this._formRouteContainer=this._createRoutePanelFormElement(),a=this._createRoutePanelFormPointsElement(t),l=0;l<a.length;l++)s.appendChild(a[l]);var p=this._createRoutePanelFormModeChoiceElement();p.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs)),p.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),s.appendChild(p),s.appendChild(this._createShowRouteExclusionsElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),s.appendChild(this._showRouteExclusionsElement);var h=this._createRoutePanelFormExclusionsElement();h.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),s.appendChild(h);var c=this._createRouteFormResetElement();s.appendChild(c);var u=this._createRouteSubmitFormElement();s.appendChild(u),n.appendChild(s);var d=this._resultsRouteContainer=this._createRoutePanelResultsElement();n.appendChild(d);var f=this._waitingContainer=this._createRouteWaitingElement();n.appendChild(f),e.appendChild(n);var y=this;return e.addEventListener&&e.addEventListener("click",function(t){y._hideRouteSuggestedLocations.call(y,t)}),e},h.prototype._initTransport=function(){this._currentTransport="Voiture";var t=this.options.graphs;t&&0!==t.length||(this.options.graphs=["Voiture","Pieton"]),Array.isArray(t)&&t.length&&("Voiture"!==t[0]&&"Pieton"!==t[0]||(this._currentTransport=t[0]));var e=this.options.routeOptions;e.graph&&(this._currentTransport=e.graph)},h.prototype._initComputation=function(){this._currentComputation="fastest";var t=this.options.routeOptions;t.routePreference&&(this._currentComputation=t.routePreference)},h.prototype._initExclusions=function(){this._currentExclusions=[];var t=this.options.exclusions;if((!t||"object"==typeof t&&0===Object.keys(t).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),t&&"object"==typeof t&&Object.keys(t).length)for(var e in t)t.hasOwnProperty(e)&&t[e]&&this._currentExclusions.push(e);var o=this.options.routeOptions;Array.isArray(o.exclusions)&&(this._currentExclusions=o.exclusions)},h.prototype._initPopupDiv=function(){var t=this,e=document.createElement("div");e.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=t._popupOverlay&&t._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",e.appendChild(this._popupContent),e.appendChild(o),e},h.prototype._createRoutePanelFormPointsElement=function(t){var e=[],o=1,i=new s({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,markerOpts:this.options.markersOpts.departure,label:"Départ",display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(i.setMap(t),this._addFormPointsEventListeners(i),e.push(i._container),this._currentPoints.push(i),o=2;o<7;o++){var n=new s({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,label:"Etape",markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});n.setMap(t),this._addFormPointsEventListeners(n),e.push(n._container),this._currentPoints.push(n)}var r=new s({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,label:"Arrivée",display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return r.setMap(t),this._addFormPointsEventListeners(r),e.push(r._container),this._currentPoints.push(r),e},h.prototype._addFormPointsEventListeners=function(t){if(t){var e=this;t._inputLabelContainer.addEventListener?(t._inputLabelContainer.addEventListener("click",function(){e.onRouteOriginLabelClick.call(this,e)}),t._inputShowPointer.addEventListener("click",function(){e.onRouteOriginPointerClick.call(this,e,t)}),t._removePointElement&&t._removePointElement.addEventListener("click",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)-33).toString()+"px"}),t._addPointElement&&t._addPointElement.addEventListener("click",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)+33).toString()+"px"})):t._inputLabelContainer.attachEvent&&(t._inputLabelContainer.attachEvent("onclick",function(){e.onRouteOriginLabelClick.call(this,e)}),t._inputShowPointer.attachEvent("onclick",function(){e.onRouteOriginPointerClick.call(this,e,t)}),t._removePointElement&&t._removePointElement.attachEvent("onclick",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)-33).toString()+"px"}),t._addPointElement&&t._addPointElement.attachEvent("onclick",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)+33).toString()+"px"}))}},h.prototype.onRouteComputationSubmit=function(t){var e,o=this._currentPoints;if(o[0]&&o[0].getCoordinate){var i=o[0].getCoordinate();e={x:i[0],y:i[1]}}var n,r=o[o.length-1];if(r&&r.getCoordinate){var s=r.getCoordinate();n={x:s[0],y:s[1]}}for(var a=[],l=1;l<o.length-1;l++)if(o[l]&&o[l].getCoordinate){var p=o[l].getCoordinate();if(p){var h={x:p[0],y:p[1]};a.push(h)}}if(!this._noRightManagement){this._currentTransport=t.transport,this._currentComputation=t.computation,this._currentExclusions=t.exclusions;var c=this.options.routeOptions,u=c.protocol||"XHR",d=c.timeOut||0;"JSONP"===u&&0===d&&(d=15e3);var f=this;this._requestRouting({startPoint:e,endPoint:n,viaPoints:a,graph:c.graph||this._currentTransport,routePreference:c.routePreference||this._currentComputation,exclusions:c.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:d,protocol:u,onSuccess:function(t){t&&f._fillRouteResultsDetails(t)},onFailure:function(t){f._hideWaitingContainer(),f._clearRouteResultsDetails()}})}},h.prototype.onRouteOriginLabelClick=function(t){var e=t.getMap();t._formRouteContainer.className="",e.un("click",function(){"GProuteFormMini"===t._formRouteContainer.className&&(t._formRouteContainer.className="")})},h.prototype.onRouteOriginPointerClick=function(t,e){var o=t.getMap();e._inputShowPointerContainer.checked?(t._formRouteContainer.className="GProuteFormMini",o.on("click",function(){"GProuteFormMini"===t._formRouteContainer.className&&(t._formRouteContainer.className="")})):(t._formRouteContainer.className="",o.un("click",function(){"GProuteFormMini"===t._formRouteContainer.className&&(t._formRouteContainer.className="")}))},h.prototype.onShowRoutePanelClick=function(){this._geojsonSections||this._waiting||this._clear(),this.collapsed=document.getElementById("GPshowRoute-"+this._uid).checked,this.dispatchEvent("change:collapsed")},h.prototype.onRouteModeComputationChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;o&&(this._currentComputation=o)},h.prototype.onRouteModeComputationChangeAndRun=function(t){this.onRouteModeComputationChange(t),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})},h.prototype.onRouteModeTransportChange=function(t){var e=t.target.value;e&&(this._currentTransport=e)},h.prototype.onShowRouteExclusionsClick=function(t){},h.prototype.onRouteExclusionsChange=function(t){var e=t.target.value,o=t.target.checked;if(e&&"string"==typeof e){e=e.toLowerCase();for(var i=!1,n=null,r=0;r<this._currentExclusions.length;r++)this._currentExclusions[r]===e&&(n=r,i=!0);i||o||this._currentExclusions.push(e),i&&o&&this._currentExclusions.splice(n,1)}},h.prototype.onRouteResetClick=function(){for(var t=this._currentPoints,e=0;e<t.length;e++)t[e].clear();this._clear(),this._clearRouteInputOptions()},h.prototype.onShowRouteResultsNewClick=function(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()},h.prototype.onRouteResultsDetailsMouseOver=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.add("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections){this._geojsonSections.getSource().getFeatureById(parseInt(o,10)).setStyle(this._selectedFeatureStyle)}},h.prototype.onRouteResultsDetailsMouseOut=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections){this._geojsonSections.getSource().getFeatureById(parseInt(o,10)).setStyle(null)}},h.prototype._requestRouting=function(t){if(t&&("object"!=typeof t||0!==Object.keys(t).length)&&t.startPoint&&t.endPoint&&!this._noRightManagement&&this._resources.Itineraire){var o=this._resources.Itineraire.resources;if(o&&("object"!=typeof o||0!==Object.keys(o).length)){for(var i=this._resources.Itineraire.key,n=!1,r=0;r<o.length;r++)o[r]===t.graph&&(n=!0);if(!n)return void console.log("no rights for this service !?");t.apiKey=this.options.routeOptions.apiKey||this.options.apiKey||i,this._displayWaitingContainer(),e.Services.route(t)}}},h.prototype._fillRouteResultsDetails=function(e){var o=e.totalDistance,i=e.totalTime,n=this._simplifiedInstructions(e.routeInstructions);n&&this._fillRouteResultsDetailsContainer(o,i,n);var r=e.routeGeometry;r&&this._fillRouteResultsDetailsGeometry(r,this._defaultFeatureStyle),n&&n[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(n,this._defaultFeatureStyle);var s=e.bbox;if(s){var a=this.getMap(),l=[s.left,s.bottom,s.right,s.top],p=a.getView().getProjection().getCode();"EPSG:4326"!==p&&(l=t.proj.transformExtent(l,"EPSG:4326",p)),a.getView().fit(l,a.getSize())}this._currentRouteInformations=e,this._formRouteContainer.className="GProuteComponentHidden",this._hideWaitingContainer(),this._resultsRouteContainer.className=""},h.prototype._fillRouteResultsDetailsContainer=function(t,e,o){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(t,e,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(o,this._convertSecondsToTime)},h.prototype._fillRouteResultsDetailsGeometry=function(e,o){this._clearRouteResultsGeometry();var i=this.getMap();if(e){var n={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e},r=new t.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),s=r.readFeatures(n,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new t.layer.Vector({source:new t.source.Vector({features:s}),style:o}),i.addLayer(this._geojsonRoute)}},h.prototype._fillRouteResultsDetailsFeatureGeometry=function(e,o){this._clearRouteResultsFeatureGeometry();for(var i=this.getMap(),n={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]},r=0;r<e.length;r++){for(var s=e[r],l=r+1,p=s.geometry.coordinates,h=0;h<p.length;h++)"string"==typeof p[h][0]&&(p[h][0]=parseFloat(p[h][0]),p[h][1]=parseFloat(p[h][1]));n.features.push({type:"Feature",geometry:s.geometry,properties:{popupContent:"("+l+") distance : "+this._convertDistance(s.distance)+" / temps : "+this._convertSecondsToTime(s.duration)},id:l})}var c=new t.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),u=this.getMap().getView().getProjection().getCode(),d=c.readFeatures(n,{dataProjection:"EPSG:4326",featureProjection:u});this._geojsonSections=new t.layer.Vector({source:new t.source.Vector({features:d}),style:o,opacity:.9});var f;"Pieton"===this._currentTransport?(f="piéton",this._geojsonSections.gpResultLayerId="Pieton$OGC:OPENLS;Itineraire"):(f="voiture",this._geojsonSections.gpResultLayerId="Voiture$OGC:OPENLS;Itineraire"),i.addLayer(this._geojsonSections),i.getControls().forEach(function(t){if(t instanceof a){var e=this._geojsonSections.gpLayerId;t._layers[e].title===e&&t.addLayer(this._geojsonSections,{title:" Itinéraire "+f,description:" Itinéraire basé sur un graphe "+f})}},this),this._resultsHoverInteraction=new t.interaction.Select({condition:t.events.condition.pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",this._onResultsFeatureMouseOver,this),i.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new t.interaction.Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",this._onResultsFeatureSelect,this),i.addInteraction(this._resultsSelectInteraction)},h.prototype._onResultsFeatureMouseOver=function(t){if(0!==t.selected.length){var e=t.selected[0],o=document.getElementById("GProuteResultsDetailsInstruction_"+e.getId()+"-"+this._uid);o&&o.classList&&o.classList.add("GProuteResultsDetailsInstructionHighlight")}if(0!==t.deselected.length){var i=t.deselected[0],n=document.getElementById("GProuteResultsDetailsInstruction_"+i.getId()+"-"+this._uid);n&&n.classList&&n.classList.remove("GProuteResultsDetailsInstructionHighlight")}},h.prototype._onResultsFeatureSelect=function(e){var o=this.getMap();if(0!==e.selected.length){var i=e.selected[0];this._popupContent.innerHTML=i.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new t.Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),o.addOverlay(this._popupOverlay))}else null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},h.prototype._clear=function(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var t=0;t<this._currentPoints.length;t++)this._currentPoints[t].clear();this._removeRouteStepLocations()},h.prototype._clearRouteInputOptions=function(){this._initTransport(),this._initComputation(),this._initExclusions();var t;"Pieton"===this._currentTransport?(t=document.getElementById("GProuteTransportPedestrian-"+this._uid))&&(t.checked="true"):(t=document.getElementById("GProuteTransportCar-"+this._uid))&&(t.checked="true");var e=document.getElementById("GProuteComputationSelect-"+this._uid);e&&(e.value=this._currentComputation);var o=document.getElementById("GProuteExclusionsToll-"+this._uid);o&&(-1!==this._currentExclusions.indexOf("toll")?o.checked=!1:o.checked=!0);var i=document.getElementById("GProuteExclusionsTunnel-"+this._uid);i&&(-1!==this._currentExclusions.indexOf("tunnel")?i.checked=!1:i.checked=!0);var n=document.getElementById("GProuteExclusionsBridge-"+this._uid);n&&(-1!==this._currentExclusions.indexOf("bridge")&&n?n.checked=!1:n.checked=!0)},h.prototype._removeRouteStepLocations=function(){var t=document.querySelectorAll('div[id^="GPlocationPoint"]'),e=0;if(0!==t.length)for(var o=1;o<t.length-1;o++){var i=t[o].classList;if(0!==i.length)for(var n=0;n<i.length;n++)"GPlocationStageFlexInput"===i[n]&&(document.getElementById(this._addUID("GPlocationStageRemove_"+(o+1))).click(),e+=1)}},h.prototype._clearRouteResultsDetails=function(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var t=this._resultsRouteDetailsContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}if(this._resultsRouteValuesContainer){var e=this._resultsRouteValuesContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}},h.prototype._clearRouteResultsGeometry=function(){var t=this.getMap();null!=this._geojsonRoute&&(t.removeLayer(this._geojsonRoute),this._geojsonRoute=null)},h.prototype._clearRouteResultsFeatureGeometry=function(){var t=this.getMap();null!=this._geojsonSections&&(t.removeLayer(this._geojsonSections),this._geojsonSections=null),null!=this._popupOverlay&&(t.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(t.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(t.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},h.prototype._hideRouteSuggestedLocations=function(t){if(t.target&&t.target.id&&-1!==t.target.id.indexOf("GPlocationOrigin_"))for(var e=parseInt(t.target.id.split("_")[1][0],10)-1,o=0;o<this._currentPoints.length;o++)o!==parseInt(e,10)&&this._currentPoints[o]._hideSuggestedLocation();else for(var i=0;i<this._currentPoints.length;i++)this._currentPoints[i]._hideSuggestedLocation()},h.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0;var t=this.options.routeOptions;if(t&&t.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}},h.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1;var t=this.options.routeOptions;t&&t.timeOut&&(clearTimeout(this._timer),this._timer=null)}},h.prototype._simplifiedInstructions=function(t){var e=[],o=t[0];1===t.length&&e.push(o);for(var i=1;i<t.length;i++){var n=t[i];if(n.instruction===o.instruction){o.distance=(parseFloat(n.distance)+parseFloat(o.distance)).toString(),o.duration=(parseFloat(n.duration)+parseFloat(o.duration)).toString();for(var r=1;r<n.geometry.coordinates.length;r++)o.geometry.coordinates.push(n.geometry.coordinates[r])}else e.push(o),o=n,i===t.length-1&&(e.push(n),o=null)}return e},h.prototype._convertSecondsToTime=function(t){var e="";t=Math.round(t);var o=Math.floor(t/3600),i=t%3600,n=Math.floor(i/60);return o&&(e=o+"h "),e+=n+" min"},h.prototype._convertDistance=function(t){var e=parseInt(t/1e3,10);return e?e+" km":parseInt(t,10)+" m"},h}(t,o,a,0,P,g,O,_,S,N),D=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochron"),t.className="GPwidget",t},_createShowIsoElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowIsochron"),t.type="checkbox",t},_createShowIsoPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowIsochron"),e.title="Calculer une isochrone",e.addEventListener?e.addEventListener("click",function(e){t.onShowIsoPanelClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowIsoPanelClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowIsochronOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createIsoPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronPanel"),t.className="GPpanel",t},_createIsoPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Calcul d'isochrone",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GPisochronPanelClose"),i.className="GPpanelClose",i.title="Fermer le panneau",i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPshowIsochronPicto")).click()},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowIsochronPicto")).click()}),e.appendChild(i),e},_createIsoPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.addEventListener("submit",function(e){return e.preventDefault(),t.onIsoComputationSubmit(e),!1}),e},_createIsoWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPisochronCalcWaitingContainer"),t.className="GPisochronCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPisochronCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createIsoPanelFormTypeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronChoice"),t},_createIsoPanelFormTypeChoiceChronElement:function(t){var e=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var i=document.createElement("input");i.id=this._addUID("GPisochronChoiceAltChron"),i.name="GPisochronChoiceMode",i.type="radio",i.checked=!!t,i.addEventListener?i.addEventListener("change",function(t){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueDist")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange(t)},!1):i.attachEvent&&i.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueDist")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange()}),i.value="isochron",o.appendChild(i);var n=document.createElement("label");n.className="GPisochronChoiceAltImg",n.htmlFor=this._addUID("GPisochronChoiceAltChron"),o.appendChild(n);var r=document.createElement("span");return r.id=this._addUID("GPisochronChoiceAltChronTxt"),r.innerHTML="isochrone",r.addEventListener?r.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),o.appendChild(r),o},_createIsoPanelFormTypeChoiceDistElement:function(t){var e=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var i=document.createElement("input");i.id=this._addUID("GPisochronChoiceAltDist"),i.name="GPisochronChoiceMode",i.type="radio",i.checked=!!t,i.addEventListener?i.addEventListener("change",function(t){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput",
document.getElementById(e._addUID("GPisochronValueChron")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange(t)},!1):i.attachEvent&&i.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueChron")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange()}),i.value="isodistance",o.appendChild(i);var n=document.createElement("label");n.className="GPisochronChoiceAltImg",n.htmlFor=this._addUID("GPisochronChoiceAltDist"),o.appendChild(n);var r=document.createElement("span");return r.id=this._addUID("GPisochronChoiceAltDistTxt"),r.innerHTML="isodistance",r.addEventListener?r.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),o.appendChild(r),o},_createIsoPanelFormValueIsochronElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueChron"),o.className=t?"GPflexInput":"GPisochronValueHidden";var i=document.createElement("label");i.id=this._addUID("GPisochronValueChronLabel"),i.htmlFor=this._addUID("GPisochronValueChronInput"),i.innerHTML="Temps",o.appendChild(i);var n=document.createElement("input");n.id=this._addUID("GPisochronValueChronInput1"),n.min="0",n.step="1",n.value="0",n.type="number",n.addEventListener?n.addEventListener("change",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeHourChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeHourChange(t)}),o.appendChild(n);var r=document.createElement("label");r.innerHTML="h",o.appendChild(r);var s=document.createElement("input");s.id=this._addUID("GPisochronValueChronInput2"),s.min="0",s.max="59",s.step="1",s.value="0",s.type="number",s.addEventListener?s.addEventListener("change",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeMinuteChange(t)}):s.attachEvent&&s.attachEvent("onchange",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeMinuteChange(t)}),o.appendChild(s);var a=document.createElement("label");return a.innerHTML="min",o.appendChild(a),o},_createIsoPanelFormValueIsodistanceElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueDist"),o.className=t?"GPflexInput":"GPisochronValueHidden";var i=document.createElement("label");i.id=this._addUID("GPisochronValueDistLabel"),i.htmlFor=this._addUID("GPisochronValueDistInput"),i.innerHTML="Distance",o.appendChild(i);var n=document.createElement("input");n.id=this._addUID("GPisochronValueDistInput"),n.min="0",n.step="any",n.value="0",n.type="number",n.addEventListener?n.addEventListener("change",function(t){"function"==typeof e.onIsoValueDistChange&&e.onIsoValueDistChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){"function"==typeof e.onIsoValueDistChange&&e.onIsoValueDistChange(t)}),o.appendChild(n);var r=document.createElement("label");return r.innerHTML="km",o.appendChild(r),o},_createIsoPanelFormModeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronModeChoice"),t},_createIsoPanelFormModeChoiceTransportElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronTransportChoice");var i=document.createElement("span");i.className="GPisochronModeLabel",i.innerHTML="Mode de transport",o.appendChild(i);for(var n=0;n<t.length;n++){var r=t[n];if("Voiture"===r){var s=document.createElement("input");s.id=this._addUID("GPisochronTransportCar"),s.type="radio",s.name="GPisochronTransport",0===n&&(s.checked=!0),s.addEventListener?s.addEventListener("change",function(t){e.onIsoModeTransportChange(t)}):s.attachEvent&&s.attachEvent("onchange",function(t){e.onIsoModeTransportChange(t)}),s.value="Voiture",o.appendChild(s);var a=document.createElement("label");a.className="GPisochronTransportImg",a.htmlFor=this._addUID("GPisochronTransportCar"),a.title="Voiture",o.appendChild(a)}if("Pieton"===r){var l=document.createElement("input");l.id=this._addUID("GPisochronTransportPedestrian"),l.type="radio",l.name="GPisochronTransport",0===n&&(l.checked=!0),l.addEventListener?l.addEventListener("change",function(t){e.onIsoModeTransportChange(t)}):l.attachEvent&&l.attachEvent("onchange",function(t){e.onIsoModeTransportChange(t)}),l.value="Pieton",o.appendChild(l);var p=document.createElement("label");p.className="GPisochronTransportImg",p.htmlFor=this._addUID("GPisochronTransportPedestrian"),p.title="Piéton",o.appendChild(p)}}return o},_createIsoPanelFormModeChoiceDirectionElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronDirectionChoice");var i=document.createElement("span");i.className="GPisochronModeLabel",i.innerHTML="Sens de parcours",o.appendChild(i);var n=document.createElement("select");n.id=this._addUID("GPisochronDirectionSelect"),n.className="GPinputSelect",n.addEventListener("change",function(t){e.onIsoModeDirectionChange(t)});for(var r=0;r<t.length;r++){var s=t[r];if("departure"===s.toLowerCase()){var a=document.createElement("option");0===r&&(a.selected="selected"),a.value="departure",a.text="Départ",n.appendChild(a)}if("arrival"===s.toLowerCase()){var l=document.createElement("option");0===r&&(l.selected="selected"),l.value="arrival",l.text="Arrivée",n.appendChild(l)}}return o.appendChild(n),o},_createShowIsoExclusionsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowIsoExclusions"),t.type="checkbox",t},_createShowIsoExclusionsPictoElement:function(){var t=document.createElement("label");return t.id=this._addUID("GPshowIsoExclusionsPicto"),t.className="GPshowMoreOptions GPshowIsoExclusionsPicto",t.htmlFor=this._addUID("GPshowIsoExclusions"),t.title="Exclusions",t.style.top="240px",t},_createIsoPanelFormExclusionsElement:function(){var t=document.createElement("div");t.id=this._addUID("GPisoExclusions");var e=document.createElement("span");return e.className="GPisoExclusionsLabel",e.innerHTML="Passages autorisés",t.appendChild(e),t},_createIsoPanelFormExclusionOptionsElement:function(t){var e=this,o=document.createElement("div");o.className="GPisoExclusionsOptions";for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"toll":var r=document.createElement("input");r.id=this._addUID("GPisoExclusionsToll"),r.type="checkbox",r.checked=!n,r.addEventListener?r.addEventListener("change",function(t){e.onIsoExclusionsChange(t)}):r.attachEvent&&r.attachEvent("onchange",function(t){e.onIsoExclusionsChange(t)}),r.value="Toll",o.appendChild(r);var s=document.createElement("label");s.className="GPisoExclusionsOption",s.htmlFor=this._addUID("GPisoExclusionsToll"),s.innerHTML="Péages",o.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.checked=!n,a.addEventListener?a.addEventListener("change",function(t){e.onIsoExclusionsChange(t)}):a.attachEvent&&a.attachEvent("onchange",function(t){e.onIsoExclusionsChange(t)}),a.value="Tunnel",o.appendChild(a);var l=document.createElement("label");l.className="GPisoExclusionsOption",l.htmlFor=this._addUID("GPisoExclusionsTunnel"),l.innerHTML="Tunnels",o.appendChild(l);break;case"bridge":var p=document.createElement("input");p.id=this._addUID("GPisoExclusionsBridge"),p.type="checkbox",p.checked=!n,p.addEventListener?p.addEventListener("change",function(t){e.onIsoExclusionsChange(t)}):p.attachEvent&&p.attachEvent("onchange",function(t){e.onIsoExclusionsChange(t)}),p.value="Bridge",o.appendChild(p);var h=document.createElement("label");h.className="GPisoExclusionsOption",h.htmlFor=this._addUID("GPisoExclusionsBridge"),h.innerHTML="Ponts",o.appendChild(h)}}return o},_createIsoSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPisochronSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Calculer",t},_createIsoFormResetElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPisochronReset"),e.title="Réinitialiser les paramètres",e.addEventListener("click",function(e){t.onIsoResetClick(e)}),e}}}(),j=function(t,e,o,i,n,r,s,a,l,p){function h(e){if(e=e||{},!(this instanceof h))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._createMainContainerElement(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),t.control.Control.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return t.inherits(h,t.control.Control),h.prototype=Object.create(t.control.Control.prototype,{}),o.assign(h.prototype,p),h.prototype.constructor=h,h.prototype.getCollapsed=function(){return this.collapsed},h.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GPisochronPanelClose-"+this._uid).click():document.getElementById("GPshowIsochronPicto-"+this._uid).click(),this.collapsed=t)},h.prototype.getLayer=function(){return this._geojsonLayer},h.prototype.setMap=function(e){e&&(this._container=this._initContainer(e)),t.control.Control.prototype.setMap.call(this,e)},h.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:l.lightOrange,offset:l.defaultOffset},isocurveOptions:{},autocompleteOptions:{}},o.assign(this.options,e),this.collapsed=this.options.collapsed,this._uid=r.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._showIsoContainer=null,this._waitingContainer=null,this._formContainer=null,this._currentIsoResults=null,this._geojsonLayer,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new t.style.Style({fill:new t.style.Fill({color:"rgba(0, 183, 152, 0.7)"})}),this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},h.prototype._checkInputOptions=function(t){var e;if(t.methods)if(Array.isArray(t.methods))if(0===t.methods.length)t.methods=null;else for(e=0;e<t.methods.length;e++)"string"!=typeof t.methods[e]&&console.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else t.methods=null;if(t.graphs)if(Array.isArray(t.graphs))if(0===t.graphs.length)t.graphs=null;else for(e=0;e<t.graphs.length;e++)"string"!=typeof t.graphs[e]?console.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):("pieton"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Pieton"),"voiture"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Voiture"));else t.graphs=null;if(t.directions)if(Array.isArray(t.directions))if(0===t.directions.length)t.directions=null;else for(e=0;e<t.directions.length;e++)"string"!=typeof t.directions[e]&&console.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else t.directions=null;"true"===t.collapsed&&(t.collapsed=!0),"false"===t.collapsed&&(t.collapsed=!1)},h.prototype._initTransport=function(){this._currentTransport="Voiture";var t=this.options.graphs;t&&0!==t.length||(this.options.graphs=["Voiture","Pieton"]),Array.isArray(t)&&t.length&&("Voiture"!==t[0]&&"Pieton"!==t[0]||(this._currentTransport=t[0]));var e=this.options.isocurveOptions;e.graph&&(this._currentTransport=e.graph)},h.prototype._initComputation=function(){this._currentComputation="time";var t=this.options.methods;t&&0!==t.length||(this.options.methods=["time","distance"]),Array.isArray(t)&&t.length&&("time"!==t[0]&&"distance"!==t[0]||(this._currentComputation=t[0]));var e=this.options.isocurveOptions;e.method&&(this._currentComputation=e.method),e.time&&(this._currentComputation="time"),e.distance&&(this._currentComputation="distance")},h.prototype._initDirection=function(){this._currentDirection="departure";var t=this.options.directions;t&&0!==t.length||(this.options.directions=["departure","arrival"]),Array.isArray(t)&&t.length&&("departure"!==t[0]&&"arrival"!==t[0]||(this._currentDirection=t[0]));var e=this.options.isocurveOptions;e.reverse||(this._currentDirection="departure"),!0===e.reverse&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])},h.prototype._initExclusions=function(){this._currentExclusions=[];var t=this.options.exclusions;if((!t||"object"==typeof t&&0===Object.keys(t).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),t&&"object"==typeof t&&Object.keys(t).length)for(var e in t)t.hasOwnProperty(e)&&t.k&&this._currentExclusions.push(e);var o=this.options.isocurveOptions;Array.isArray(o.exclusions)&&(this._currentExclusions=o.exclusions)},h.prototype._checkRightsManagement=function(){var t=null,e=[],o=null;o=this.options.isocurveOptions.apiKey,t=this.options.isocurveOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["Voiture","Pieton"]);var i=n.check({key:o||this.options.apiKey,resources:e,services:["Isochrone"]});o=this.options.autocompleteOptions.apiKey,t=this.options.autocompleteOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var r=n.check({key:o||this.options.apiKey,resources:e,services:["AutoCompletion"]});i||r||(this._noRightManagement=!0),r&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=r.AutoCompletion,this._resources.AutoCompletion.key=r.key),i&&(this._resources.Isocurve={},this._resources.Isocurve.resources=i.Isochrone,this._resources.Isocurve.key=i.key)},h.prototype._initContainer=function(t){var e=this._container,o=this._showIsoContainer=this._createShowIsoElement();e.appendChild(o),this.collapsed||(o.checked=!0);var i=this._createShowIsoPictoElement();e.appendChild(i);var n=this._createIsoPanelElement(),r=this._createIsoPanelHeaderElement();n.appendChild(r);var s=this._formContainer=this._createIsoPanelFormElement(),a=this._createIsoPanelFormPointElement(t);s.appendChild(a);for(var l=!1,p=!1,h=this._createIsoPanelFormTypeChoiceElement(),c=0;c<this.options.methods.length;c++)"time"===this.options.methods[c]&&(l=0===c,h.appendChild(this._createIsoPanelFormTypeChoiceChronElement(l))),"distance"===this.options.methods[c]&&(p=0===c,h.appendChild(this._createIsoPanelFormTypeChoiceDistElement(p)));s.appendChild(h),s.appendChild(this._createIsoPanelFormValueIsochronElement(l)),s.appendChild(this._createIsoPanelFormValueIsodistanceElement(p));var u=this._createIsoPanelFormModeChoiceElement();if(u.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),u.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),s.appendChild(u),this.options.exclusions&&"object"==typeof this.options.exclusions&&0!==Object.keys(this.options.exclusions).length){s.appendChild(this._createShowIsoExclusionsElement()),s.appendChild(this._createShowIsoExclusionsPictoElement());var d=this._createIsoPanelFormExclusionsElement();d.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),s.appendChild(d)}var f=this._createIsoFormResetElement();s.appendChild(f);var y=this._submitContainer=this._createIsoSubmitFormElement();s.appendChild(y),n.appendChild(s);var g=this._waitingContainer=this._createIsoWaitingElement();n.appendChild(g),e.appendChild(n);var m=this;return e.addEventListener&&e.addEventListener("click",function(t){m._hideIsoSuggestedLocations.call(m,t)}),e},h.prototype._createIsoPanelFormPointElement=function(t){this._originPoint=new s({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,label:"Départ",display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(t);var e=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){e._clearGeojsonLayer();var t=e.getMap();e._originPoint._inputShowPointerContainer.checked?(e._formContainer.className="GPisochronFormMini",t.on("click",function(){e._formContainer.className=""})):(e._formContainer.className="",t.un("click",function(){e._formContainer.className=""}))},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){e._clearGeojsonLayer(),e._formContainer.className="",t.un("click",function(){e._formContainer.className=""})},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){e._clearGeojsonLayer()},this._originPoint._container},h.prototype.onIsoComputationSubmit=function(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate())return void console.log("[Isocurve] Missing position parameter to submit isocurve request");var t,e,o=this._originPoint.getCoordinate(),i={x:o[0],y:o[1]};if("time"===this._currentComputation.toLowerCase()){var n=document.getElementById("GPisochronValueChronInput1-"+this._uid),r=parseInt(n.value,10);isNaN&&isNaN(r)&&(r=0);var s=document.getElementById("GPisochronValueChronInput2-"+this._uid),a=parseInt(s.value,10);isNaN&&isNaN(a)&&(a=0),t=3600*r+60*a}if("distance"===this._currentComputation.toLowerCase()){var l=document.getElementById("GPisochronValueDistInput-"+this._uid);e=1e3*parseFloat(l.value)}if(!t&&!e)return void console.log("[Isocurve] Missing time or distance parameter to submit isocurve request");if(this._noRightManagement)return void console.log("[Isocurve] no rights for this service");var p=this.options.isocurveOptions||{},h=p.protocol||"XHR",c=p.timeOut||0;"JSONP"===h&&0===c&&(c=15e3);var u=this,d={position:i,graph:p.graph||this._currentTransport,exclusions:p.exclusions||this._currentExclusions,method:p.method||this._currentComputation,smoothing:p.smoothing||!0,timeOut:c,protocol:h,onSuccess:function(t){t&&u._drawIsoResults(t)},onFailure:function(t){u._hideWaitingContainer()}};("arrival"===this._currentDirection.toLowerCase()||p.reverse)&&(d.reverse=!0),t&&(d.time=t),e&&(d.distance=e),this._requestIsoCurve(d)},h.prototype.onShowIsoPanelClick=function(){this.collapsed=this._showIsoContainer.checked,this.dispatchEvent("change:collapsed")},h.prototype.onIsoTypeChoiceChange=function(t){var e=t.target.value;e&&("isodistance"===e&&(this._currentComputation="distance"),"isochron"===e&&(this._currentComputation="time"))},h.prototype.onIsoModeTransportChange=function(t){var e=t.target.value;e&&(this._currentTransport=e)},h.prototype.onIsoModeDirectionChange=function(t){var e=t.target.value;e&&("arrival"===e.toLowerCase()?this._originPoint._inputLabelContainer.innerHTML="Arrivée":this._originPoint._inputLabelContainer.innerHTML="Départ",this._currentDirection=e)},h.prototype.onIsoExclusionsChange=function(t){var e=t.target.value,o=t.target.checked;if(e){for(var i=!1,n=null,r=0;r<this._currentExclusions.length;r++)this._currentExclusions[r]===e&&(n=r,i=!0);i||o||this._currentExclusions.push(e),i&&o&&(this._currentExclusions[n]=null)}},h.prototype.onIsoResetClick=function(){this._clear()},h.prototype._requestIsoCurve=function(t){if(t&&("object"!=typeof t||0!==Object.keys(t).length)&&t.position){if(this._noRightManagement||!this._resources.Isocurve)return void console.log("no rights for this service");var o=this._resources.Isocurve.resources;if(!o||"object"==typeof o&&0===Object.keys(o).length)return void console.log("no rights for this service");for(var i=!1,n=0;n<o.length;n++)o[n]===t.graph&&(i=!0);if(!i)return void console.log("no rights for this service !?");var r=this._resources.Isocurve.key;t.apiKey=this.options.isocurveOptions.apiKey||this.options.apiKey||r,this._clearGeojsonLayer(),this._displayWaitingContainer(),e.Services.isoCurve(t)}},h.prototype._drawIsoResults=function(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),e.geometry){var o=this.getMap(),i={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry},n=new t.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),r=o.getView().getProjection().getCode(),s=n.readFeatures(i,{dataProjection:"EPSG:4326",featureProjection:r});this._geojsonLayer=new t.layer.Vector({source:new t.source.Vector({features:s}),style:this._defaultFeatureStyle,opacity:.9});var l;if("Pieton"===this._currentTransport?(l="piéton",this._geojsonLayer.gpResultLayerId="Pieton$GEOPORTAIL:GPP:Isocurve"):(l="voiture",this._geojsonLayer.gpResultLayerId="Voiture$GEOPORTAIL:GPP:Isocurve"),o.addLayer(this._geojsonLayer),s[0]&&s[0].getGeometry()&&s[0].getGeometry().getExtent()){var p=s[0].getGeometry().getExtent();o.getView().fit(p,o.getSize())}var h="time"===this._currentComputation?"Isochrone":"Isodistance";o.getControls().forEach(function(t){if(t instanceof a){var e=this._geojsonLayer.gpLayerId;t._layers[e].title===e&&t.addLayer(this._geojsonLayer,{title:h+" "+l,description:h+" basé sur un graphe "+l})}},this)}},h.prototype._clear=function(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null},h.prototype._clearIsoInputs=function(){var t=document.getElementById("GPisochronValueChronInput1-"+this._uid);t&&(t.value="0");var e=document.getElementById("GPisochronValueChronInput2-"+this._uid);e&&(e.value="0");var o=document.getElementById("GPisochronValueDistInput-"+this._uid);o&&(o.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var i;"Pieton"===this._currentTransport?(i=document.getElementById("GPisochronTransportPedestrian-"+this._uid))&&(i.checked="true"):(i=document.getElementById("GPisochronTransportCar-"+this._uid))&&(i.checked="true");var n;"distance"===this._currentComputation.toLowerCase()?(n=document.getElementById("GPisochronChoiceAltDist-"+this._uid),n&&(n.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPisochronValueHidden")):(n=document.getElementById("GPisochronChoiceAltChron-"+this._uid),n&&(n.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPisochronValueHidden"));var r=document.getElementById("GPisochronDirectionSelect-"+this._uid);r&&(r.value=this._currentDirection),"arrival"===this._currentDirection?this._originPoint._inputLabelContainer.innerHTML="Arrivée":this._originPoint._inputLabelContainer.innerHTML="Départ";var s=document.getElementById("GPisoExclusionsToll-"+this._uid);s&&(-1!==this._currentExclusions.indexOf("toll")?s.checked=!1:s.checked=!0);var a=document.getElementById("GPisoExclusionsTunnel-"+this._uid);a&&(-1!==this._currentExclusions.indexOf("tunnel")?a.checked=!1:a.checked=!0);var l=document.getElementById("GPisoExclusionsBridge-"+this._uid);l&&(-1!==this._currentExclusions.indexOf("bridge")&&l?l.checked=!1:l.checked=!0)},h.prototype._clearGeojsonLayer=function(){var t=this.getMap();this._geojsonLayer&&(t.removeLayer(this._geojsonLayer),this._geojsonLayer=null)},h.prototype._hideIsoSuggestedLocations=function(t){t.target&&t.target.id&&-1!==t.target.id.indexOf("GPlocationOrigin_")||this._originPoint._hideSuggestedLocation()},h.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPisochronCalcWaitingContainerVisible",this._waiting=!0;var t=this.options.isocurveOptions;if(t&&t.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}},h.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GPisochronCalcWaitingContainerHidden",this._waiting=!1;var t=this.options.isocurveOptions;t&&t.timeOut&&(clearTimeout(this._timer),this._timer=null)}},h}(t,o,a,0,P,g,O,_,S,D),F=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocoding"),t.className="GPwidget",t},_createShowReverseGeocodingElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowReverseGeocoding"),t.type="checkbox",t},_createShowReverseGeocodingPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowReverseGeocoding"),e.title="Ouvrir la recherche inverse",e.addEventListener?e.addEventListener("click",function(){t.onShowReverseGeocodingClick()}):e.attachEvent&&e.attachEvent("onclick",function(){t.onShowReverseGeocodingClick()});var o=document.createElement("span");return o.id=this._addUID("GPshowReverseGeocodingOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createReverseGeocodingWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),t.className="GPreverseGeocodingCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPreverseGeocodingCalcWaiting",e.innerHTML="Recherche en cours...",t.appendChild(e),t},_createReverseGeocodingResultsPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingResultsPanel"),t.className="GPpanel GPreverseGeocodingComponentHidden",t},_createReverseGeocodingResultsListElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingResultsList"),t},_createReverseGeocodingResultElement:function(t,e){var o=this,i=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),n=document.createElement("div");n.id=this._addUID("ReverseGeocodedLocation_"+e),n.className="GPautoCompleteProposal",n.innerHTML=t,n.title=t,n.addEventListener?(n.addEventListener("mouseover",function(t){o.onReverseGeocodingResultMouseOver(t)}),n.addEventListener("mouseout",function(t){o.onReverseGeocodingResultMouseOut(t)}),n.addEventListener("click",function(t){"function"==typeof o.onReverseGeocodingResultClick&&o.onReverseGeocodingResultClick(t)})):n.attachEvent&&(n.attachEvent("onmouseover",function(t){o.onReverseGeocodingResultMouseOver(t)}),n.attachEvent("onmouseout",function(t){o.onReverseGeocodingResultMouseOut(t)}),n.attachEvent("onclick",function(t){"function"==typeof o.onReverseGeocodingResultClick&&o.onReverseGeocodingResultClick(t)})),i.appendChild(n)},_createReverseGeocodingPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingPanel"),t.className="GPpanel",t},_createReverseGeocodingPanelHeaderElement:function(){var t=document.createElement("div");return t.className="GPpanelHeader",t},_createReverseGeocodingPanelReturnPictoElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreverseGeocodingReturnPictoHidden",e.addEventListener?e.addEventListener("click",function(e){document.getElementById(t._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GPreverseGeocodingForm")).className="",document.getElementById(t._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(t._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",t.onGPreverseGeocodingReturnPictoClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){document.getElementById(t._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GPreverseGeocodingForm")).className="",document.getElementById(t._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(t._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",t.onGPreverseGeocodingReturnPictoClick(e)}),e},_createReverseGeocodingPanelTitleElement:function(){var t=document.createElement("div");return t.className="GPpanelTitle",t.id=this._addUID("GPreverseGeocodingHeaderTitle"),t.innerHTML="Recherche inverse",t},_createReverseGeocodingPanelCloseElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(t._addUID("GPshowReverseGeocodingPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowReverseGeocodingPicto")).click()}),e},_createReverseGeocodingPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.addEventListener?e.addEventListener("submit",function(e){e.preventDefault(),t.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(e){e.preventDefault(),t.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(t){var e=this,o=document.createElement("div");o.className="GPflexInput";var i=document.createElement("label");i.className="GPreverseGeocodingCodeLabel",i.innerHTML="Recherche par",i.title="Recherche par",o.appendChild(i);var n=document.createElement("select");n.className="GPreverseGeocodingCode",n.addEventListener?n.addEventListener("change",function(t){e.onReverseGeocodingTypeChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){e.onReverseGeocodingTypeChange(t)}),t&&Array.isArray(t)||(t=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var r=0;r<t.length;r++)switch(t[r]){case"PositionOfInterest":var s=document.createElement("option");s.value="PositionOfInterest",s.text="Lieux/toponymes",n.appendChild(s);break;case"StreetAddress":var a=document.createElement("option");a.value="StreetAddress",a.text="Adresses",n.appendChild(a);break;case"CadastralParcel":var l=document.createElement("option");l.value="CadastralParcel",l.text="Parcelles cadastrales",n.appendChild(l);break;case"Administratif":var p=document.createElement("option");p.value="Administratif",p.text="Unités administratives",n.appendChild(p)}return o.appendChild(n),o},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(t){var e=this,o=document.createElement("div");o.className="GPflexInput";var i=document.createElement("label");i.className="GPreverseGeocodingCodeLabel",i.innerHTML="Délimitation",i.title="Délimitation",o.appendChild(i);var n=document.createElement("select");n.className="GPreverseGeocodingCode",n.addEventListener?n.addEventListener("change",function(t){e.onReverseGeocodingDelimitationChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){e.onReverseGeocodingDelimitationChange(t)}),t&&Array.isArray(t)||(t=["Point","Circle","Extent"]);for(var r=0;r<t.length;r++)switch(t[r].toLowerCase()){case"point":var s=document.createElement("option");s.value="point",s.text="Pointer un lieu",n.appendChild(s);break;case"circle":var a=document.createElement("option");a.value="circle",a.text="Dessiner un cercle",n.appendChild(a);break;case"extent":var l=document.createElement("option");l.value="extent",l.text="Dessiner une emprise",n.appendChild(l)}return o.appendChild(n),o},_createReverseGeocodingSubmitFormElement:function(){var t=document.createElement("input")
;return t.id=this._addUID("GPreverseGeocodingSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Rechercher",t}}}(),U=function(t,e,o,i,n,r,s,a,l){function p(t){if(t=t||{},!(this instanceof p))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(t),this._container=this._initContainer(),this._containerElement=null,t.element&&t.element.appendChild&&(t.element.appendChild(this._container),this._containerElement=t.element),e.control.Control.call(this,{element:this._containerElement||this._container,target:t.target,render:t.render})}return e.inherits(p,e.control.Control),p.prototype=Object.create(e.control.Control.prototype,{}),i.assign(p.prototype,l),p.prototype.constructor=p,p.prototype.getCollapsed=function(){return this.collapsed},p.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GPreverseGeocodingPanelClose-"+this._uid).click():document.getElementById("GPshowReverseGeocoding-"+this._uid).click(),this.collapsed=t)},p.prototype.setMap=function(t){if(t)this._activateMapInteraction(t);else{var o=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(o),null!=this._inputFeaturesLayer&&(o.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}e.control.Control.prototype.setMap.call(this,t)},p.prototype.initialize=function(t){this._checkInputOptions(t),this.options={collapsed:!0,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{}},i.assign(this.options,t),this.collapsed=this.options.collapsed,this._uid=a.generate(),this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingInput=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new e.style.Style({image:new e.style.Icon({src:n.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new e.style.Style({image:new e.style.Icon({src:n.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null},p.prototype._checkInputOptions=function(t){var e,o;if(t.resources){var i=t.resources;Array.isArray(i)||(console.log("[ReverseGeocode] 'options.resources' parameter should be an array"),i=null);var n=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"],r=[];for(e=0;e<i.length;e++)-1===n.indexOf(i[e])&&(r.push(e),console.log("[ReverseGeocode] options.resources : "+i[e]+" is not a resource for reverse geocode"));if(0!==r.length)for(o=0;o<r.length;o++)i.splice(r[o],1)}if(t.delimitations){var s=t.delimitations;Array.isArray(s)||(console.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),s=null);var a=["Circle","Point","Extent"],l=[];for(e=0;e<s.length;e++)-1===a.indexOf(s[e])&&(l.push(e),console.log("[ReverseGeocode] options.delimitations : "+s[e]+" is not a delimitation for reverse geocode"));if(0!==l.length)for(o=0;o<l.length;o++)s.splice(l[o],1)}},p.prototype._initGeocodingType=function(){this._currentGeocodingType="StreetAddress";var t=this.options.resources;if(t&&0!==t.length||(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(t)&&t.length){for(var e=[],o=0;o<t.length;o++)this._servicesRightManagement.Geocode.indexOf(t[o])<0&&(e.push(o),console.log("[ReverseGeocode] no rights for options.resources : "+t[o]));if(0!==e.length)for(var i=0;i<e.length;i++)t.splice(e[i],1);"StreetAddress"!==t[0]&&"PositionOfInterest"!==t[0]&&"CadastralParcel"!==t[0]&&"Administratif"!==t[0]||(this._currentGeocodingType=t[0])}var n=this.options.reverseGeocodeOptions;n.filterOptions&&Array.isArray(n.filterOptions.type)&&0!==n.filterOptions.type.length&&(this._currentGeocodingType=n.filterOptions.type[0])},p.prototype._initGeocodingDelimitation=function(){this._currentGeocodingDelimitation="Point";var t=this.options.delimitations;if(t&&0!==t.length||(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(t)&&t.length){var e=t[0].toLowerCase();"point"!==e&&"circle"!==e&&"extent"!==e||(this._currentGeocodingDelimitation=t[0])}},p.prototype._initPopupDiv=function(){var t=this,e=document.createElement("div");e.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=t._popupOverlay&&t._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",e.appendChild(this._popupContent),e.appendChild(o),e},p.prototype._checkRightsManagement=function(){var t,e=[],o=null;t=this.options.reverseGeocodeOptions.apiKey,o=this.options.reverseGeocodeOptions.filterOptions,e=o?o.type:[],e&&0!==e.length||(e=this.options.resources),e&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var i=s.check({key:t||this.options.apiKey,resources:e,services:["Geocode"]});if(!i)return void(this._noRightManagement=!0);this.options.apiKey||(this.options.apiKey=i.key),i&&(this._servicesRightManagement.Geocode=i.Geocode)},p.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showReverseGeocodingInput=this._createShowReverseGeocodingElement();t.appendChild(e),this.collapsed||(e.checked=!0);var o=this._createShowReverseGeocodingPictoElement();t.appendChild(o);var i=this._createReverseGeocodingPanelElement(),n=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),r=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();n.appendChild(r);var s=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();n.appendChild(s);var a=this._createReverseGeocodingPanelCloseElement();n.appendChild(a),i.appendChild(n);var l=this._formContainer=this._createReverseGeocodingPanelFormElement();l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var p=this._createReverseGeocodingSubmitFormElement();l.appendChild(p),i.appendChild(l);var h=this._waitingContainer=this._createReverseGeocodingWaitingElement();i.appendChild(h);var c=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),u=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return c.appendChild(u),i.appendChild(c),t.appendChild(i),t},p.prototype._activateMapInteraction=function(t){if(!this.collapsed){null==this._inputFeaturesLayer&&(this._inputFeatures=new e.Collection,this._inputFeaturesSource=new e.source.Vector({features:this._inputFeatures}),this._inputFeaturesLayer=new e.layer.Vector({source:this._inputFeaturesSource,style:new e.style.Style({fill:new e.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new e.style.Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new e.style.Icon({src:n.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",t.addLayer(this._inputFeaturesLayer));switch(this._currentGeocodingDelimitation.toLowerCase()){case"point":this._activatePointInteraction(t);break;case"circle":this._activateCircleInteraction(t);break;case"extent":this._activateBoxInteraction(t)}t.getControls().forEach(function(t){if(t instanceof r){var e=this._inputFeaturesLayer.gpLayerId;t._layers[e].title===e&&(t.addLayer(this._inputFeaturesLayer,{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}),t.setRemovable(this._inputFeaturesLayer,!1))}},this)}},p.prototype._activatePointInteraction=function(t){this._mapInteraction=new e.interaction.Draw({style:new e.style.Style({image:new e.style.Circle({radius:0,fill:new e.style.Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",function(t){this._inputFeatures.clear(),this._onDrawStart(t,"point")},this),t.addInteraction(this._mapInteraction),this._setCursor("crosshair",t)},p.prototype._activateCircleInteraction=function(t){this._mapInteraction=new e.interaction.Draw({style:new e.style.Style({fill:new e.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new e.style.Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new e.style.Circle({radius:4,fill:new e.style.Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",function(t){this._inputFeatures.clear(),this._onDrawStart(t,"circle")},this),this._mapInteraction.on("drawend",function(t){if(t.feature&&t.feature.getGeometry){var e=t.feature.getGeometry().getRadius();this._requestCircleFilter={},this._requestCircleFilter.radius=e,this._requestPosition&&(this._requestCircleFilter.x=this._requestPosition.x,this._requestCircleFilter.y=this._requestPosition.y)}},this),t.addInteraction(this._mapInteraction)},p.prototype._activateBoxInteraction=function(t){var o=function(t,o){o||(o=new e.geom.Polygon(null));var i=t[0],n=t[1];return o.setCoordinates([[i,[i[0],n[1]],n,[n[0],i[1]],i]]),o};this._mapInteraction=new e.interaction.Draw({style:new e.style.Style({fill:new e.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new e.style.Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new e.style.Circle({radius:4,fill:new e.style.Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:o}),this._mapInteraction.on("drawstart",function(t){this._inputFeatures.clear()},this),this._mapInteraction.on("drawend",function(t){this._onBoxDrawEnd(t)},this),t.addInteraction(this._mapInteraction)},p.prototype._removeMapInteraction=function(t){null!=this._mapInteraction&&(t.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()},p.prototype._onDrawStart=function(t,o){var i;if(t.feature&&t.feature.getGeometry){var n=t.feature.getGeometry();"point"===o&&(i=n.getCoordinates()),"circle"===o&&(i=n.getCenter())}if(i){var r;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)r=this.options.reverseGeocodeOptions.srs;else{var s=this.getMap();if(!s||!s.getView())return;r=s.getView().getProjection()}var a=e.proj.transform(i,r,"EPSG:4326");this._requestPosition={x:a[0],y:a[1]}}},p.prototype._onBoxDrawEnd=function(t){if(t.feature&&t.feature.getGeometry){var o,i=t.feature.getGeometry().getCoordinates()[0],n=i[0],r=i[2];if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)o=this.options.reverseGeocodeOptions.srs;else{var s=this.getMap();if(!s||!s.getView())return;o=s.getView().getProjection()}var a=e.proj.transform(n,o,"EPSG:4326"),l=e.proj.transform(r,o,"EPSG:4326");this._requestPosition={},this._requestBboxFilter={},a[0]<l[0]?(this._requestBboxFilter.left=a[0],this._requestBboxFilter.right=l[0]):(this._requestBboxFilter.left=l[0],this._requestBboxFilter.right=a[0]),a[1]<l[1]?(this._requestBboxFilter.bottom=a[1],this._requestBboxFilter.top=l[1]):(this._requestBboxFilter.bottom=l[1],this._requestBboxFilter.top=a[1]),this._requestPosition.x=(a[0]+l[0])/2,this._requestPosition.y=(a[1]+l[1])/2}},p.prototype._setCursor=function(t,e){if(e=e||this.getMap()){var o=e.getTargetElement();o.style.cursor=t||null}},p.prototype._reverseGeocodingRequest=function(){var t=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(t),this._displayWaitingContainer(),o.Services.reverseGeocode(this._requestOptions)},p.prototype._getReverseGeocodingRequestOptions=function(){var t=this.getMap(),e=this.options.reverseGeocodeOptions,o=this,i={apiKey:e.apiKey||this.options.apiKey,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:e.maximumResponses||25,timeOut:e.timeOut||3e4,protocol:e.protocol||"XHR",onSuccess:function(t){t.locations&&o._displayGeocodedLocations(t.locations)},onFailure:function(e){o._hideWaitingContainer(),o._clearResults(),o._clearInputFeatures(),o._activateMapInteraction(t)}};return"circle"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestCircleFilter&&(this._requestCircleFilter.radius>1e3&&(console.log("INFO : initial circle radius ("+this._requestCircleFilter.radius+") limited to 1000m."),this._requestCircleFilter.radius=1e3),i.filterOptions.circle=this._requestCircleFilter),"extent"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestBboxFilter&&(i.filterOptions.bbox=this._requestBboxFilter),i},p.prototype._displayGeocodedLocations=function(t){this._clearResults(),this._reverseGeocodingLocations=t,this._formContainer.className="GPreverseGeocodingComponentHidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.className="",this._resultsContainer.className="GPpanel",this._fillGeocodedLocationListContainer(t),this._displayGeocodedLocationsOnMap(t)},p.prototype._fillGeocodedLocationListContainer=function(t){for(var e=0;e<t.length;e++){var o=t[e],i=this._fillGeocodedLocationDescription(o);0!==i.length&&this._createReverseGeocodingResultElement(i,e)}},p.prototype._fillGeocodedLocationDescription=function(t){if(t&&t.placeAttributes){var e=t.placeAttributes,o="";switch(t.type){case"StreetAddress":e.street&&(o+=e.number?e.number+" ":"",o+=e.street+", "),o+=e.postalCode+" "+e.commune;break;case"PositionOfInterest":"City"===t.matchType&&e.commune?(o+=e.commune,o+=e.postalCode?", "+e.postalCode:""):"Département"===t.matchType&&e.municipality?(o+=e.municipality,o+=e.postalCode?", "+e.postalCode:""):"Toponym"===t.matchType&&e.municipality?(o+=e.municipality,o+=e.postalCode?", "+e.postalCode:"",o+=e.commune?" "+e.commune:""):o+=e.municipality?e.municipality:"",o+=e.nature?" ("+e.nature+") ":"";break;case"CadastralParcel":o+=e.cadastralParcel?e.cadastralParcel:"",o+=e.municipality?" ("+e.municipality+")":"";break;case"Administratif":o+=e.municipality?e.municipality:"",e.inseeDepartment?o+="(Département)":e.inseeRegion&&(o+="(Région)");break;default:o+=e.municipality?e.municipality:""}return o}},p.prototype._displayGeocodedLocationsOnMap=function(t){if(0!==this._reverseGeocodingLocations.length){var o=this.getMap();this._createResultsLayer();for(var i=0;i<t.length;i++)this._addResultFeature(t[i],i);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var n=this._resultsFeaturesSource.getExtent();o.getView().fit(n,o.getSize())}}else{var s=this._resultsFeatures.item(0),a=s.getGeometry().getCoordinates();o.getView().setCenter(a),o.getView().setZoom(17)}this._resultsHoverInteraction=new e.interaction.Select({condition:e.events.condition.pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",this._onResultsFeatureMouseOver,this),o.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new e.interaction.Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",this._onResultsFeatureSelect,this),o.addInteraction(this._resultsSelectInteraction);var l="";switch(this._currentGeocodingType){case"StreetAddress":l="adresses";break;case"PositionOfInterest":l="toponymes";break;case"CadastralParcel":l="parcelles cadastrales";break;case"Administratif":l="unités administratives"}o.getControls().forEach(function(t){if(t instanceof r){var e=this._resultsFeaturesLayer.gpLayerId;t._layers[e].title===e&&(t.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+l}),t.setRemovable(this._resultsFeaturesLayer,!1))}},this)}},p.prototype._createResultsLayer=function(){var t=this.getMap();this._resultsFeatures=new e.Collection,this._resultsFeaturesSource=new e.source.Vector({features:this._resultsFeatures}),this._resultsFeaturesLayer=new e.layer.Vector({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",t.addLayer(this._resultsFeaturesLayer)},p.prototype._addResultFeature=function(t,o){var i=this.getMap(),n=[t.position.x,t.position.y];if(n){var r=i.getView(),s=r.getProjection().getCode();"EPSG:4326"!==s&&(n=e.proj.transform(n,"EPSG:4326",s));var a=new e.Feature({geometry:new e.geom.Point(n)});a.setStyle(this._resultsDefaultStyle),a.setId(o),a.setProperties({popupContent:this._fillPopupContent(t)}),this._resultsFeatures.push(a)}},p.prototype._fillPopupContent=function(t){var e="<ul>",o=t.placeAttributes;for(var i in o)o.hasOwnProperty(i)&&"bbox"!==i&&(e+="<li>",e+='<span class="gp-attname-others-span">'+i.toUpperCase()+" : </span>",e+=o[i],e+=" </li>");return e+=" </ul>"},p.prototype._onResultsFeatureMouseOver=function(t){var e;if(0!==t.selected.length){if(e=t.selected[0],e.setStyle(this._resultsSelectedStyle),null!=e.getId()){var o=document.getElementById("ReverseGeocodedLocation_"+e.getId()+"-"+this._uid);o&&o.classList&&o.classList.add("GPreverseGeocodedLocationHighlight")}document.getElementById("ReverseGeocodedLocation_"+e.getId()+"-"+this._uid)}if(0!==t.deselected.length){e=t.deselected[0],e.setStyle(this._resultsDefaultStyle);var i=document.getElementById("ReverseGeocodedLocation_"+e.getId()+"-"+this._uid);i&&i.classList&&i.classList.remove("GPreverseGeocodedLocationHighlight")}},p.prototype._onResultsFeatureSelect=function(t){var o=this.getMap();if(0!==t.selected.length){var i=t.selected[0];this._popupContent.innerHTML=i.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(t.mapBrowserEvent.coordinate):(this._popupOverlay=new e.Overlay({element:this._popupDiv,positioning:"bottom-center",position:t.mapBrowserEvent.coordinate}),o.addOverlay(this._popupOverlay))}else null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},p.prototype.onShowReverseGeocodingClick=function(){this.collapsed=this._showReverseGeocodingInput.checked,this.dispatchEvent("change:collapsed");var t=this.getMap();this._waiting||this._reverseGeocodingLocations.length||(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),null!=this._inputFeaturesLayer&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(t))},p.prototype.onReverseGeocodingTypeChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;o&&(this._currentGeocodingType=o)},p.prototype.onReverseGeocodingDelimitationChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;if(o){this._currentGeocodingDelimitation=o;var i=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(i),this._activateMapInteraction(i)}},p.prototype.onGPreverseGeocodingReturnPictoClick=function(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())},p.prototype.onReverseGeocodingSubmit=function(){this._requestPosition&&(this._noRightManagement||this._reverseGeocodingRequest())},p.prototype.onReverseGeocodingResultClick=function(t){},p.prototype.onReverseGeocodingResultMouseOver=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.add("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource){this._resultsFeaturesSource.getFeatureById(parseInt(o,10)).setStyle(this._resultsSelectedStyle)}},p.prototype.onReverseGeocodingResultMouseOut=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.remove("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource){this._resultsFeaturesSource.getFeatureById(parseInt(o,10)).setStyle(this._resultsDefaultStyle)}},p.prototype._clearResults=function(){var t=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(t.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),null!=this._popupOverlay&&(t.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(t.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(t.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},p.prototype._clearInputFeatures=function(){this._inputFeatures&&this._inputFeatures.clear(),this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null},p.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)},p.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},p}(0,t,o,a,S,_,P,g,F),B=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimport"),t.className="GPwidget",t},_createShowImportElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowImport"),t.type="checkbox",t},_createShowImportPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowImportPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowImport"),e.title="Ouvrir l'import de couches",e.addEventListener?e.addEventListener("click",function(){t._onShowImportClick()}):e.attachEvent&&e.attachEvent("onclick",function(){t._onShowImportClick()});var o=document.createElement("span");return o.id=this._addUID("GPshowImportOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createImportPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportPanel"),t.className="GPpanel",t},_createImportPanelHeaderElement:function(){var t=document.createElement("div");t.className="GPpanelHeader";var e=this._createImportPanelTitleElement();t.appendChild(e);var o=this._createImportPanelCloseElement();return t.appendChild(o),t},_createImportPanelTitleElement:function(){var t=document.createElement("div");return t.className="GPpanelTitle",t.innerHTML="Import de données",t},_createImportPanelCloseElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(t._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowImportPicto")).click()}),e},_createImportPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="map-tool-box",e.addEventListener?e.addEventListener("submit",function(e){e.preventDefault(),t._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(e){e.preventDefault(),t._onImportSubmit()}),e},_createImportTypeLineElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPimportTypeLine"),o.className="GPimportInputLine";var i=document.createElement("label");i.htmlFor=this._addUID("GPimportType"),i.className="GPimportLabel",i.innerHTML="Type de donnée",i.title="Type de donnée",o.appendChild(i);var n=document.createElement("select");n.className="GPimportSelect",n.addEventListener?n.addEventListener("change",function(t){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):"WMS"!==this.value&&"WMTS"!==this.value&&"WFS"!==this.value||(document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),e._onImportTypeChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):"WMS"!==this.value&&"WMTS"!==this.value&&"WFS"!==this.value||(document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),e._onImportTypeChange()}),n.id=this._addUID("GPimportType"),t&&Array.isArray(t)||(t=["KML","GPX","GeoJSON","WMS","WMTS","WFS"]);for(var r,s=0;s<t.length;s++)r=document.createElement("option"),r.value=t[s],r.text=t[s],n.appendChild(r);return o.appendChild(n),o},_createImportWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPimportWaitingContainer"),t.className="GPimportWaitingContainerHidden";var e=document.createElement("p");return e.className="GPimportWaiting",e.innerHTML="Recherche en cours...",t.appendChild(e),t},_createImportStaticParamsContainer:function(t){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),e.className="KML"===t||"GPX"===t||"GeoJSON"===t?"GPimportVisibleParams":"GPimportHiddenParams",e},_createStaticNameLabel:function(){var t=document.createElement("div");t.className="GPimportInputLine";var e=document.createElement("label");e.className="GPimportLabel",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",t.appendChild(e);var o=document.createElement("input");return o.type="text",o.id=this._addUID("GPimportName"),o.className="GPimportInput",t.appendChild(o),t},_createStaticModeChoiceDiv:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportChoice"),t},_createStaticLocalChoiceDiv:function(){var t=this,e=document.createElement("div");e.className="GPimportChoiceAlt";var o=document.createElement("input");o.type="radio",o.addEventListener?o.addEventListener("change",function(e){document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportValueHidden",t._onStaticImportTypeChange(e)}):o.appendChild&&o.appendChild("onchange",function(){document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportValueHidden",t._onStaticImportTypeChange()}),o.name="GPimportChoiceMode",o.value="local",o.checked=!0,o.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(o);var i=document.createElement("label");return i.className="GPimportChoiceAltTxt",i.htmlFor=this._addUID("GPimportChoiceAltLocal"),i.innerHTML="par fichier local",i.title="par fichier local",e.appendChild(i),e},_createStaticUrlChoiceDiv:function(){var t=this,e=document.createElement("div");e.className="GPimportChoiceAlt";var o=document.createElement("input");o.type="radio",o.addEventListener?o.addEventListener("change",function(e){document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportValueHidden",t._onStaticImportTypeChange(e)}):o.appendChild&&o.appendChild("onchange",function(){document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportValueHidden",t._onStaticImportTypeChange()}),o.id=this._addUID("GPimportChoiceAltUrl"),o.name="GPimportChoiceMode",o.value="url",o.checked=!1,e.appendChild(o);var i=document.createElement("label");return i.className="GPimportChoiceAltTxt",i.htmlFor=this._addUID("GPimportChoiceAltUrl"),i.innerHTML="par URL",i.title="par URL",e.appendChild(i),e},_createStaticLocalInputDiv:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportValueLocal"),t.className="GPimportInputLine",t},_createStaticLocalInputLabel:function(){var t=document.createElement("label");return t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportFile"),t.innerHTML="Fichier local",t.title="Fichier local",t},_createStaticLocalInput:function(){var t=document.createElement("input");return t.type="file",t.id=this._addUID("GPimportFile"),t.className="GPimportInputFile",t},_createStaticUrlInputDiv:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportValueUrl"),t.className="GPimportValueHidden",t},_createStaticUrlInputLabel:function(){var t=document.createElement("label");return t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportUrl"),t.innerHTML="URL",t.title="URL",t},_createStaticUrlInput:function(){var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportUrl"),t.className="GPimportInput",t},_createServiceParamsContainer:function(t){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),e.className="WMS"===t||"WMTS"===t||"WFS"===t?"GPimportVisibleParams":"GPimportHiddenParams",e},_createServiceUrlDiv:function(){var t=document.createElement("div");return t.className="GPimportInputLine",t},_createServiceUrlInputLabel:function(){var t=document.createElement("label");return t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportServiceUrl"),t.innerHTML="URL du service",t.title="URL du service",t},_createServiceUrlInput:function(){var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportServiceUrl"),t.className="GPimportInput",t},_createImportSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPimportSubmit"),t.className="GPinputSubmit tool-form-submit",t.type="submit",t.value="Importer",t},_createImportGetCapPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportGetCapPanel"),t.className="GPpanel",t},_createImportGetCapPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Couches accessibles",o.title="Couches accessibles",e.appendChild(o);var i=document.createElement("div");return i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(t._addUID("GPimportPanel")).style.display="",t._onGetCapPanelClose()}):i.attachEvent&&i.attachEvent("click",function(){document.getElementById(t._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(t._addUID("GPimportPanel")).style.display="",t._onGetCapPanelClose()}),i.className="GPpanelClose",i.title="Fermer le panneau",i.id=this._addUID("GPimportGetCapPanelClose"),e.appendChild(i),e},
_createImportGetCapResultsListElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportGetCapResults"),t},_createImportGetCapResultElement:function(t,e){var o=document.createElement("div");o.className="GPimportGetCapProposal",o.innerHTML=t,o.title=t;var i=this;return o.addEventListener?o.addEventListener("click",function(t){i._onGetCapResponseLayerClick(t)}):o.attachEvent&&o.attachEvent("onclick",function(){i._onGetCapResponseLayerClick()}),o.id="GPimportGetCapProposal_"+e,o}}}(),V=function(t,e,o,i,n,r,s,a,l){function p(e){if(e=e||{},!(this instanceof p))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var o=this._initContainer(e);t.control.Control.call(this,{element:o,target:e.target,render:e.render})}return t.inherits(p,t.control.Control),p.DefaultStyles={image:new t.style.Icon({src:n.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new t.style.Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new t.style.Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new t.style.Text({font:"16px Sans",textAlign:"left",fill:new t.style.Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new t.style.Stroke({color:"rgba(0, 0, 0, 1)",width:2})})},p.prototype=Object.create(t.control.Control.prototype,{}),i.assign(p.prototype,r),p.prototype.constructor=p,p.prototype.getCollapsed=function(){return this.collapsed},p.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GPimportPanelClose-"+this._uid).click():document.getElementById("GPshowImport-"+this._uid).click(),this.collapsed=t)},p.prototype.getStaticImportContent=function(){return this.contentStatic},p.prototype.getServiceImportContent=function(){return this.contentService},p.prototype._initialize=function(e){if(this._checkInputOptions(e),this.options={collapsed:!0,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new t.style.Style({image:p.DefaultStyles.image,stroke:p.DefaultStyles.stroke,fill:p.DefaultStyles.fill,text:p.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new t.style.Style({image:p.DefaultStyles.image,stroke:p.DefaultStyles.stroke,fill:p.DefaultStyles.fill}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new t.style.Style({image:p.DefaultStyles.image,stroke:p.DefaultStyles.stroke,fill:p.DefaultStyles.fill}),Array.isArray(e.layerTypes)){for(var o=[],n=0;n<e.layerTypes.length;n++)o.push(e.layerTypes[n]);this.options.layerTypes=o}i.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this._uid=s.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportInput=null,this._importPanel=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapResultsListContainer=null,this._waitingContainer=null,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[]},p.prototype._checkInputOptions=function(t){if(t.layerTypes){var e=t.layerTypes;if(Array.isArray(e)){for(var o=["KML","GPX","GEOJSON","WMS","WMTS","WFS"],i=[],n=0;n<e.length;n++)"string"!=typeof e[n]?(i.push(n),console.log("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+e[n]+")")):(e[n]=e[n].toUpperCase(),-1===o.indexOf(e[n])&&(i.push(n),console.log("[ol.control.LayerImport] options.layerTypes : "+e[n]+" is not a supported type")),"GEOJSON"===e[n]&&(e[n]="GeoJSON"));if(0!==i.length)for(var r=i.length-1;r>=0;r--)e.splice(i[r],1)}else console.log('[ol.control.LayerImport] \'options.layerTypes\' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]'),t.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS"]}},p.prototype._initDefaultStyles=function(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new t.style.Style({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var o=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new t.style.Style({image:o.image,stroke:o.stroke,fill:o.fill});var i=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new t.style.Style({image:i.image,stroke:i.stroke,fill:i.fill})},p.prototype._initImportTypes=function(){this._currentImportType=this.options.layerTypes[0]||"KML","KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType?this._isCurrentImportTypeStatic=!0:"WMS"!==this._currentImportType&&"WMTS"!==this._currentImportType&&"WFS"!==this._currentImportType||(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"},p.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showImportInput=this._createShowImportElement();t.appendChild(e),this.collapsed||(e.checked=!0);var o=this._createShowImportPictoElement();t.appendChild(o);var i=this._importPanel=this._createImportPanelElement(),n=this._createImportPanelHeaderElement();i.appendChild(n);var r=this._formContainer=this._initInputFormElement();i.appendChild(r),t.appendChild(i);var s=this._getCapPanel=this._createImportGetCapPanelElement();s.appendChild(this._createImportGetCapPanelHeaderElement());var a=this._getCapResultsListContainer=this._createImportGetCapResultsListElement();s.appendChild(a),t.appendChild(s);var l=this._waitingContainer=this._createImportWaitingElement();return t.appendChild(l),t},p.prototype._initInputFormElement=function(){var t=this._createImportPanelFormElement(),e=this._createImportTypeLineElement(this.options.layerTypes);t.appendChild(e);var o=this._createImportStaticParamsContainer(this.options.layerTypes[0]),i=this._createStaticNameLabel();o.appendChild(i);var n=this._createStaticModeChoiceDiv(),r=this._createStaticLocalChoiceDiv();n.appendChild(r);var s=this._createStaticUrlChoiceDiv();n.appendChild(s),o.appendChild(n);var a=this._createStaticLocalInputDiv();a.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),a.appendChild(this._staticLocalImportInput),o.appendChild(a);var l=this._createStaticUrlInputDiv();l.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),l.appendChild(this._staticUrlImportInput),o.appendChild(l),t.appendChild(o);var p=this._createServiceParamsContainer(this.options.layerTypes[0]),h=this._createServiceUrlDiv();h.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),h.appendChild(this._serviceUrlImportInput),p.appendChild(h),t.appendChild(p);var c=this._createImportSubmitFormElement();return t.appendChild(c),t},p.prototype._onShowImportClick=function(){this.collapsed=this._showImportInput.checked,this.dispatchEvent("change:collapsed")},p.prototype._onImportTypeChange=function(t){this._currentImportType=t.target.value,"KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType?this._isCurrentImportTypeStatic=!0:"WMS"!==this._currentImportType&&"WMTS"!==this._currentImportType&&"WFS"!==this._currentImportType||(this._isCurrentImportTypeStatic=!1)},p.prototype._onStaticImportTypeChange=function(t){this._currentStaticImportType=t.target.value},p.prototype._onGetCapPanelClose=function(){this._clearGetCapParams(),this._emptyGetCapResultsList()},p.prototype._onImportSubmit=function(){this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?this._importStaticLayer():this._importServiceLayers()},p.prototype._importStaticLayer=function(){var t,e=document.getElementById(this._addUID("GPimportName"));e&&(t=e.value),"local"===this._currentStaticImportType?this._importStaticLayerFromLocalFile(t):"url"===this._currentStaticImportType&&this._importStaticLayerFromUrl(t)},p.prototype._importStaticLayerFromUrl=function(t){t=t||"";var o=this._staticUrlImportInput.value;if(0===o.length)return void console.log("[ol.control.LayerImport] url parameter is mandatory");if(o.trim&&(o=o.trim()),!this.options.webServicesOptions||!this.options.webServicesOptions.proxyUrl&&!this.options.webServicesOptions.noProxyDomains)return void console.log("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request resources on another domain (cross-domain)");o=a.proxifyUrl(o,this.options.webServicesOptions);var i=this;e.Protocols.XHR.call({url:o,method:"GET",timeOut:15e3,onResponse:function(e){i._hideWaitingContainer(),i._addFeaturesFromImportStaticLayer(e,t)},onFailure:function(t){i._hideWaitingContainer(),console.log("[ol.control.LayerImport] KML/GPX/GeoJSON request failed : ",t)}})},p.prototype._importStaticLayerFromLocalFile=function(t){var e=this._staticLocalImportInput.files[0];if(!e)return void console.log("[ol.control.LayerImport] missing file");var o=new FileReader,i=this;o.onerror=function(t){i._hideWaitingContainer()},o.onprogress=function(){},o.onloadstart=function(){i._displayWaitingContainer()},o.onabort=function(){i._hideWaitingContainer()},o.onloadend=function(t){},o.onload=function(e){i._hideWaitingContainer(),i._addFeaturesFromImportStaticLayer(e.target.result,t)},o.readAsText(e)},p.prototype._addFeaturesFromImportStaticLayer=function(e,o){var i=this.getMap();if(i&&e){this.contentStatic=e;var n,r;"KML"===this._currentImportType?(n=new l({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}),r=this.options.vectorStyleOptions.KML.defaultStyle):"GPX"===this._currentImportType?(n=new t.format.GPX,r=this.options.vectorStyleOptions.GPX.defaultStyle):"GeoJSON"===this._currentImportType&&(n=new t.format.GeoJSON,r=this.options.vectorStyleOptions.GeoJSON.defaultStyle);var s=n.readProjection(e),a=this._getMapProjectionCode(),p=null;p=n.readFeatures(e,{dataProjection:s,featureProjection:a});var h=new t.source.Vector({features:new t.Collection});h.addFeatures(p),o?h._title=h._description=o:n.readName&&n.readName(e)?h._title=h._description=n.readName(e):h._title=h._description="Import "+this._currentImportType;var c=new t.layer.Vector({source:h,style:r});if(c.gpResultLayerId="layerimport:"+this._currentImportType,i.addLayer(c),i.getView()&&i.getSize()&&h.getExtent){var u=h.getExtent();u&&u[0]!==1/0&&i.getView().fit(h.getExtent(),i.getSize())}}},p.prototype._addFeaturesFromImportStaticLayerUrl=function(e,o){var i=this.getMap();if(i&&e){var n;"KML"===this._currentImportType?n=new l({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):"GPX"===this._currentImportType?n=new t.format.GPX:"GeoJSON"===this._currentImportType&&(n=new t.format.GeoJSON);var r=new t.source.Vector({url:e,format:n});"GPX"===this._currentImportType&&r.forEachFeature(function(t){null==t.getStyle()&&t.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle)}),"GeoJSON"===this._currentImportType&&r.forEachFeature(function(t){null==t.getStyle()&&t.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle)}),r._title=r._description=o||"Import "+this._currentImportType;var s=new t.layer.Vector({source:r});if(s.gpResultLayerId="layerimport:"+this._currentImportType,i.addLayer(s),i.getView()&&i.getSize()&&r.getExtent){var a=r.getExtent();a&&a[0]!==1/0&&i.getView().fit(r.getExtent(),i.getSize())}}},p.prototype._importServiceLayers=function(){if("WFS"===this._currentImportType)return void console.log("[ol.control.LayerImport] WFS layer import is not implemented yet");this._emptyGetCapResultsList();var t=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!t)return void console.log("[ol.control.LayerImport] url parameter is mandatory");t.trim&&(t=t.trim());var o=t.indexOf("?");if(o<0?t+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":o===t.length-1&&(t+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),!this.options.webServicesOptions||!this.options.webServicesOptions.proxyUrl&&!this.options.webServicesOptions.noProxyDomains)return void console.log("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request web service layers (getcapabilities request)");var i=this.options.webServicesOptions.proxyUrl,n=this.options.webServicesOptions.noProxyDomains,r=!1;if(n&&Array.isArray(n)&&n.length>0)for(var s in n)-1!==t.indexOf(n[s])&&(r=!0);!1===r&&(t=i+encodeURIComponent(t)),this._displayWaitingContainer();var a=this;e.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(t){a._hideWaitingContainer(),a._displayGetCapResponseLayers.call(a,t)},onFailure:function(t){a._hideWaitingContainer(),console.log("[ol.control.LayerImport] getCapabilities request failed : ",t)}})},p.prototype._displayGetCapResponseLayers=function(e){var o,i,n,r;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._importPanel.style.display="none",this._getCapPanel.style.display="block","WMS"===this._currentImportType){if(!(o=new t.format.WMSCapabilities))return;var s=this._getCapResponseWMS=o.read(e);if(s&&s.Capability&&s.Capability.Layer){var a=s.Capability.Layer;if(Array.isArray(a))for(var l=0;l<a.length;l++)this._displayGetCapResponseWMSLayer(a[l]);else this._displayGetCapResponseWMSLayer(a)}}else if("WMTS"===this._currentImportType){if(!(o=new t.format.WMTSCapabilities))return;var p=this._getCapResponseWMTS=o.read(e);if(p&&p.Contents&&p.Contents.Layer&&(i=p.Contents.Layer,Array.isArray(i))){this._getCapResponseWMTSLayers=i;for(var h=0;h<i.length;h++)if((r=this._getWMTSLayerProjection(i[h],p))&&"string"==typeof r){if(!t.proj.get(r)&&!t.proj.get(r.toUpperCase())){console.log("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",i[h]);continue}n=i[h].Title,this._getCapResultsListContainer&&this._getCapResultsListContainer.appendChild(this._createImportGetCapResultElement(n,h))}}}},p.prototype._displayGetCapResponseWMSLayer=function(t,e){t||console.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");var o,i,n=this._getMapProjectionCode();if(e){var r,s,a=["CRS","Style"];for(s=0;s<a.length;s++)if(r=a[s],Array.isArray(e[r])&&0!==e[r].length)if(Array.isArray(t[r])&&0!==t[r].length)for(var l=0;l<e[r];l++)-1===t[r].indexOf(e[r][l])&&t[r].push(e[r][l]);else t[r]=e[r];var p=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(s=0;s<p.length;s++)r=p[s],e[r]&&!t[r]&&(t[r]=e[r]);!e._isRootLayer&&e.Title&&(t.Title=e.Title+" > "+t.Title)}else t._isRootLayer=!0;if(t.Layer){if(Array.isArray(t.Layer))for(var h=0;h<t.Layer.length;h++)this._displayGetCapResponseWMSLayer(t.Layer[h],t)}else{var c=this._getCapResponseWMSLayers.length;o=this._getWMSLayerProjection(t,n),o?(t._projection=o,i=t.Title,this._getCapResultsListContainer&&this._getCapResultsListContainer.appendChild(this._createImportGetCapResultElement(i,c)),this._getCapResponseWMSLayers[c]=t):console.log("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",t)}},p.prototype._onGetCapResponseLayerClick=function(t){if(t.target&&t.target.id){var e=parseInt(t.target.id.substr(23),10);if(null==e)return;var o;"WMS"===this._currentImportType?(o=this._getCapResponseWMSLayers[e],this._addGetCapWMSLayer(o)):"WMTS"===this._currentImportType&&(o=this._getCapResponseWMTSLayers[e],this._addGetCapWMTSLayer(o))}},p.prototype._addGetCapWMSLayer=function(e){var o=this.getMap();if(!o)return void console.log("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");if(!e)return void console.log("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");var i=this._getMapProjectionCode(),n={},r=this._getWMSLayerGetMapUrl();if(r)n.url=r;else{var s=this._getCapRequestUrl.indexOf("?");n.url=-1!==s?this._getCapRequestUrl.substring(0,s):this._getCapRequestUrl}if(n.params={},!e.Name)return void console.log("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);n.params.LAYERS=e.Name,n.params.SERVICE="WMS",this._getCapResponseWMS.version&&(n.params.VERSION=this._getCapResponseWMS.version);var a=e._projection;if(!a)return void console.log("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");a!==i&&(n.projection=a);var l;if(e.Style&&Array.isArray(e.Style)){var p=e.Style[0];n.params.STYLES=p.Name,p.LegendURL&&Array.isArray(p.LegendURL)&&0!==p.LegendURL.length&&(l=p.LegendURL[0].OnlineResource)}var h=new t.source.TileWMS(n);this._getWMSLayerInfoForLayerSwitcher(e,l,h);var c={};c.source=h,this._getWMSLayerMinMaxResolution(e,i,c),this._getWMSLayerExtent(e,i,c);var u=new t.layer.Tile(c);u.gpResultLayerId="layerimport:WMS",e.queryable&&(u.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(u.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),o.addLayer(u)},p.prototype._getWMSLayerGetMapUrl=function(){var t;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var e=this._getCapResponseWMS.Capability.Request.GetMap;if(e.DCPType&&Array.isArray(e.DCPType)&&0!==e.DCPType.length){var o=e.DCPType[0];o&&o.HTTP&&o.HTTP.Get&&(t=o.HTTP.Get.OnlineResource)}}return t},p.prototype._getWMSLayerProjection=function(e,o){var i;if(e&&"object"==typeof e){var n=e.CRS;if(Array.isArray(n))for(var r=0;r<n.length;r++){var s=n[r];if(s===o){i=s;break}if(s&&"string"==typeof s&&(t.proj.get(s)||t.proj.get(s.toUpperCase()))){i=s;break}}return i}},p.prototype._getWMSLayerMinMaxResolution=function(e,o,i){var n=t.proj.get(o).getUnits();if("m"===n)e.MinScaleDenominator&&(i.minResolution=28e-5*e.MinScaleDenominator),e.MaxScaleDenominator&&(i.maxResolution=28e-5*e.MaxScaleDenominator);else if("degrees"===n){var r=28e-5*180/(6378137*Math.PI);e.MinScaleDenominator&&(i.minResolution=e.MinScaleDenominator*r),e.MaxScaleDenominator&&(i.maxResolution=e.MaxScaleDenominator*r)}},p.prototype._getWMSLayerExtent=function(e,o,i){if(!e)return void console.log("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");var n=e.EX_GeographicBoundingBox,r=e.BoundingBox;if(n&&Array.isArray(n))i.extent="EPSG:4326"===o?n:t.proj.transformExtent(n,"EPSG:4326",o);else if(r&&Array.isArray(r))for(var s,a,l=0;l<r.length;l++)if(s=r[l].crs,a=r[l].extent,s){if(s===o){i.extent=a;break}if(s&&"string"==typeof s){var p=t.proj.get(s)?t.proj.get(s):t.proj.get(s.toUpperCase());if(p){if("degrees"===p.getUnits()&&0===s.toUpperCase().indexOf("EPSG")){var h=[a[1],a[0],a[3],a[2]];i.extent=t.proj.transformExtent(h,p,o)}else i.extent=t.proj.transformExtent(a,p,o);break}}}},p.prototype._getWMSLayerInfoForLayerSwitcher=function(t,e,o){if(t.Title?(o._title=t.Title,o._description=t.Abstract?t.Abstract:t.Title):(o._title=t.Name,o._description=t.Abstract?t.Abstract:t.Name),e&&(o._legends=[{url:e}]),t.MetadataURL&&Array.isArray(t.MetadataURL)){o._metadata=[];for(var i=0;i<t.MetadataURL.length;i++){var n=t.MetadataURL[i].OnlineResource;n&&o._metadata.push({url:n})}}if(t.Attribution){var r=t.Attribution;o._originators={},r.OnlineResource&&(o._originators.url=r.OnlineResource),r.Title&&(o._originators.name=o._originators.attribution=r.Title),r.LogoURL&&r.LogoURL.OnlineResource&&(o._originators.logo=r.LogoURL.OnlineResource)}},p.prototype._addGetCapWMTSLayer=function(e){if(!e||!e.Identifier)return void console.log("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");var o=this.getMap();if(o){var i={};i.layer=e.Identifier,this._getCapResponseWMTS.version&&(i.version=this._getCapResponseWMTS.version);var n=this._getWMTSLayerGetTileUrl();if(n)i.url=n;else{var r=this._getCapRequestUrl.indexOf("?");i.url=-1!==r?this._getCapRequestUrl.substring(0,r):this._getCapRequestUrl}var s=this._getTMSParams(e);i.matrixSet=s.tms,i.projection=s.projCode,i.tileGrid=new t.tilegrid.WMTS({resolutions:s.resolutions,matrixIds:s.matrixIds,origin:s.origin});var a,l;if(e.Style&&Array.isArray(e.Style))for(var p,h=0;h<e.Style.length&&(p=e.Style[h],a=p.Identifier,!p.isDefault);h++)p.LegendURL&&Array.isArray(p.LegendURL)&&0!==p.LegendURL.length&&(l=p.LegendURL[0].href);null==a&&console.log("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),i.style=a;var c;e.Format&&Array.isArray(e.Format)&&(c=e.Format[0]),null==c&&console.log("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),i.format=c;var u=new t.source.WMTS(i);e.Title?(u._title=e.Title,u._description=e.Abstract?e.Abstract:e.Title):(u._title=e.Identifier,u._description=e.Abstract?e.Abstract:e.Identifier),l&&(u._legends=[{url:l}]);var d={};d.source=u,d.extent=this._getWMTSLayerExtent(e);var f;try{f=new t.layer.Tile(d)}catch(t){return void console.log("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",t)}f.gpResultLayerId="layerimport:WMTS",o.addLayer(f)}},p.prototype._getWMTSLayerGetTileUrl=function(){var t;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var e=this._getCapResponseWMTS.OperationsMetadata.GetTile;e.DCP&&e.DCP.HTTP&&e.DCP.HTTP.Get&&Array.isArray(e.DCP.HTTP.Get)&&0!==e.DCP.HTTP.Get.length&&(t=e.DCP.HTTP.Get[0].href)}return t},p.prototype._getWMTSLayerProjection=function(e,o){var i;if(e&&"object"==typeof e&&o&&"object"==typeof o){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var n,r=e.TileMatrixSetLink[0].TileMatrixSet;if(o.Contents&&Array.isArray(o.Contents.TileMatrixSet))for(var s=o.Contents.TileMatrixSet,a=0;a<s.length;a++)if(s[a].Identifier===r&&s[a].TileMatrix){var l=s[a];n=l.SupportedCRS,n&&"string"==typeof n&&(t.proj.get(n)||t.proj.get(n.toUpperCase()))&&(i=n);break}}return i}},p.prototype._getTMSParams=function(e){var o,i,n,r={},s=[],a=[],l=[];if(this.getMap()&&e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){if(o=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var p=this._getCapResponseWMTS.Contents.TileMatrixSet,h=0;h<p.length;h++)if(p[h].Identifier===o&&p[h].TileMatrix){var c,u,d,f,y,g=p[h];if(g.SupportedCRS&&(i=g.SupportedCRS,n=t.proj.get(i)),n&&n.getUnits&&(y=n.getUnits()),Array.isArray(g.TileMatrix))for(var m=0;m<g.TileMatrix.length;m++)c=g.TileMatrix[m],null!=c.Identifier&&(u=parseInt(c.Identifier,10),s.push(u)),d=c.ScaleDenominator,f="degrees"===y?28e-5*d*180/(6378137*Math.PI):28e-5*d,a.push(f),l=c.TopLeftCorner;Array.isArray(a)&&void 0!==a.sort&&a.sort(function(t,e){return e-t}),Array.isArray(s)&&void 0!==s.sort&&s.sort(function(t,e){return t-e})}}else console.log("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);return r.tms=o,r.projCode=i,r.matrixIds=s,r.resolutions=a,r.origin=l,r}},p.prototype._getWMTSLayerExtent=function(e){var o,i=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(o=t.proj.transformExtent(e.WGS84BoundingBox,"EPSG:4326",i)),o},p.prototype._getMapProjectionCode=function(){var t=this.getMap();if(t&&t.getView&&t.getView().getProjection){return t.getView().getProjection().getCode()}},p.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPimportWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)},p.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GPimportWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},p.prototype._clearGetCapParams=function(){this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null},p.prototype._emptyGetCapResultsList=function(){if(this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)},p}(t,o,0,a,S,B,g,r,l),W=function(t,e){function o(e){if(!(this instanceof o))throw new TypeError("ERROR CLASS_CONSTRUCTOR");t.control.Attribution.call(this,e)}return t.inherits(o,t.control.Attribution),o.prototype=Object.create(t.control.Attribution.prototype,{}),o.prototype.constructor=o,o.prototype.setMap=function(e){if(null!=e){var i=e.getControls();i.forEach(function(e){e instanceof t.control.Attribution&&!(e instanceof o)&&this.remove(e)},i),this._updateAttributions(e);var n=this;e.on("moveend",function(){n._updateAttributions(e)},this),e.getLayers().on("add",function(){n._updateAttributions(e)},this),e.getLayers().on("remove",function(){n._updateAttributions(e)},this)}t.control.Attribution.prototype.setMap.call(this,e)},o.prototype._updateAttributions=function(e){for(var o={},i=e.getView(),n=i.calculateExtent(e.getSize()),r=i.getProjection().getCode(),s=t.proj.transformExtent(n,r,"EPSG:4326"),a=[s[3],s[0],s[1],s[2]],l=i.getZoom(),p=e.getLayers().getArray(),h=0;h<p.length;h++)if(p[h].getSource)this._updateLayerAttributions(p[h],o,a,r,l);else if(p[h].getLayers){var c=p[h].getLayers(),u=this;c.forEach(function(t){t.getSource?u._updateLayerAttributions(t,o,a,r,l):console.log("cannot find layer source in layergroup ",p[h])})}},o.prototype._updateLayerAttributions=function(o,i,n,r,s){var a=o.getSource(),l=[],p=o.getVisible(),h=a._originators;if(void 0!==h&&a.setAttributions(),h&&p){for(var c=e.getAttributions({extent:n,crs:r,zoom:s,visibility:p,originators:h}),u=0;u<c.length;u++){var d=c[u];i&&i[d]||(l.push(new t.Attribution({html:d})),i[d]=!0)}0!==l.length&&a.setAttributions(l)}},o}(t,i),z=function(t,e,o){var i={DEFAULT_POINTER_STYLE:new t.style.Circle({radius:5,stroke:new t.style.Stroke({color:"#002A50",width:2}),fill:new t.style.Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new t.style.Style({fill:new t.style.Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new t.style.Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new t.style.Style({fill:new t.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new t.style.Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:{active:!1,instance:null},MeasureArea:{active:!1,instance:null},MeasureAzimuth:{active:!1,instance:null}},measureDraw:null,measureSource:null,measureVector:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){this.CLASSNAME;this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._showContainer.checked=!1},onPointerMoveHandler:function(t){if(!t.dragging){var e=t.coordinate;if(this.sketch){var o,i=this.sketch.getGeometry();if(o=this.format(i),"LineString"===i.getType())e=i.getLastCoordinate();else{if("Polygon"!==i.getType())return;e=i.getInteriorPoint().getCoordinates()}this.measureTooltipElement.innerHTML=o,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(t,e){var i=this.CLASSNAME;for(var n in this.tools)if(this.tools.hasOwnProperty(n)){var r=this.tools[n];r.active&&n!==i&&(r.active=!1,null!==r.instance&&r.instance.clean())}var s=this.getMap();o.unset(s,{current:"Measures"}),this._showContainer.checked?(this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this.tools[i].active=!1):(this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e),this.tools[i].active=!0)},clearMeasureToolTip:function(){var t=this.getMap();if(t)for(var e=t.getTargetElement(),o=e.getElementsByClassName("ol-overlaycontainer-stopevent"),i=0;i<o.length;i++){for(var n=o[i],r=n.children.length,s=[],a=0;a<r;a++){var l=n.children[a],p=l.children[0];"GPmeasureTooltip GPmeasureTooltip-static"!==p.className&&"GPmeasureTooltip GPmeasureTooltip-measure"!==p.className||s.push(l)}for(var h=0;h<s.length;h++)n.removeChild(s[h])}},clearMeasure:function(){var t=this.getMap();this.measureVector&&(t.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(t.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(e){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new t.Overlay({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),e.addOverlay(this.measureTooltip)},createHelpTooltip:function(e){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new t.Overlay({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),e.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(e){this.options.styles=e||{};var o={image:i.DEFAULT_POINTER_STYLE,fill:i.DEFAULT_DRAW_START_STYLE.getFill(),stroke:i.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof t.style.Image&&(o.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof t.style.Style&&(null!=this.options.styles.start.getFill()&&(o.fill=this.options.styles.start.getFill()),null!=this.options.styles.start.getStroke()&&(o.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new t.style.Style(o);var n={fill:i.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:i.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof t.style.Style&&(null!=this.options.styles.finish.getFill()&&(n.fill=this.options.styles.finish.getFill()),null!=this.options.styles.finish.getStroke()&&(n.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new t.style.Style(n)},addMeasureInteraction:function(e){var o=this.getMap(),n=this
;this.measureDraw=new t.interaction.Draw({source:this.measureSource,condition:function(t){return!t.originalEvent.ctrlKey||(n.sketch&&this.removeLastPoint(),!1)},type:e,style:this.options.styles.start||i.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),o.addInteraction(this.measureDraw),this.createMeasureTooltip(o),this.measureDraw.on("drawstart",function(t){n.sketch=t.feature},this),this.measureDraw.on("drawend",function(){if(n.sketch){var t,e,i=n.sketch.getGeometry();if(t=n.format(i),"LineString"===i.getType())e=i.getLastCoordinate();else{if("Polygon"!==i.getType())return;e=i.getInteriorPoint().getCoordinates()}n.measureTooltipElement.innerHTML=t,n.measureTooltip.setPosition(e)}n.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",n.measureTooltip.setOffset([0,-7]),n.sketch=null,n.measureTooltipElement=null,n.createMeasureTooltip(o)},this)},initMeasureInteraction:function(){var e=this.getMap();this.measureSource=new t.source.Vector,this.measureVector=new t.layer.Vector({source:this.measureSource,style:this.options.styles.finish||i.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",e.addLayer(this.measureVector)}};return i}(t,0,R),H=function(){return{_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(t){return t?this._toolboxId+"-"+t:this._toolboxId},getButtonID:function(t){return t?this._buttonId+"-"+t:this._buttonId},getWidgetID:function(t){return t?this._widgetId+"-"+t:this._widgetId},_createToolBoxContainerElement:function(t){var e=document.createElement("div");e.id=this.getToolBoxID(t),e.className="GPshowAdvancedToolPicto";var o=document.createElement("button");o.id=this.getButtonID(t);var i=this;o.addEventListener("click",function(){this.blur();var e=document.getElementById(i.getWidgetID(t));"block"===e.style.display?e.style.display="none":e.style.display="block"}),e.appendChild(o);var n=document.createElement("div");return n.id=this.getWidgetID(t),n.addEventListener("click",function(){},!1),e.appendChild(n),e}}}(),q=function(t,e,o,i,n){var r={_toolbox:{},add:function(t,e){if(t){var o=t.getTargetElement(),n=o.ownerDocument,r=o.id;this._toolbox&&0!==Object.keys(this._toolbox).length?this._toolbox[r]||(this._toolbox[r]=i.generate()):this._toolbox[r]=i.generate();var s=this._toolbox[r];if(!n.getElementById(this.getToolBoxID(s))){var a=this._createToolBoxContainerElement(s);o.getElementsByClassName("ol-overlaycontainer-stopevent")[0].appendChild(a)}var l=n.getElementById(this.getWidgetID(s));e.setTarget(l)}}};return o.assign(r,n),r}(0,0,a,g,H),Y=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPelevationPath"),t.className="GPwidget",t},_createShowElevationPathElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowElevationPath"),t.type="checkbox",t},_createShowElevationPathPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowElevationPath"),e.title="Calculer un profil",e.addEventListener?e.addEventListener("click",function(e){t.onShowElevationPathClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowElevationPathClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowElevationPathOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createElevationPathPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPelevationPathPanel"),t.className="GPpanel",t},_createElevationPathPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Profil Altimétrique",e.appendChild(o);var i=document.createElement("div");i.id=this._addUID("GPelevationPathPanelReduce"),i.className="GPpanelReduce",i.title="Masquer le panneau",i.addEventListener?i.addEventListener("click",function(){"function"==typeof t.onReduceElevationPathPanelClick&&(document.getElementById(t._addUID("GPshowElevationPath")).checked=!1,t.onReduceElevationPathPanelClick())},!1):i.attachEvent&&i.attachEvent("onclick",function(){"function"==typeof t.onReduceElevationPathPanelClick&&(document.getElementById(t._addUID("GPshowElevationPath")).checked=!1,t.onReduceElevationPathPanelClick())}),e.appendChild(i);var n=document.createElement("div");return n.id=this._addUID("GPelevationPathPanelClose"),n.className="GPpanelClose",n.title="Fermer le panneau",n.addEventListener?n.addEventListener("click",function(){document.getElementById(t._addUID("GPshowElevationPathPicto")).click()},!1):n.attachEvent&&n.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowElevationPathPicto")).click()}),e.appendChild(n),e},_createElevationPathPanelProfilElement:function(){var t=document.createElement("div");return t.id="GPelevationPathProfil",t},_createElevationPathWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPelevationPathCalcWaitingContainer"),t.className="GPelevationPathCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPelevationPathCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t}}}(),K=function(t,e,o,i,n,r,s,a,l,p){function h(e){if(e=e||{},!(this instanceof h))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="ElevationPath",this._uid=p.generate(),this._showContainer=null,this._pictoContainer=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._noRightManagement=!1,this._initialize(e),this._checkRightsManagement();var o=e.element?e.element:this._initializeContainer();t.control.Control.call(this,{element:o,target:e.target,render:e.render})}return t.inherits(h,t.control.Control),h.prototype=Object.create(t.control.Control.prototype,{}),i.assign(h.prototype,l),h.__removeProfilMarker=function(t){var e=t;e._marker&&(e._measureSource.removeFeature(e._marker),e._marker=null)},h.__updateProfilMarker=function(e,o){var i=o,n=i.getMap(),r=n.getView().getProjection();h.__removeProfilMarker(i);var s=t.proj.transform([e.lon,e.lat],"EPSG:4326",r),a=i._measureSource.getFeatures()[0].getGeometry().getClosestPoint(s),l=new t.geom.Point(a);i._marker=new t.Feature({geometry:l}),i._marker.setStyle(i._markerStyle),i._measureSource.addFeature(i._marker)},h.DISPLAY_PROFILE_LIB_AMCHARTS=function(t,e,o){if("undefined"==typeof AmCharts)return void console.log("Lib. AmCharts is not loaded !");AmCharts.addInitHandler(function(){});var n=o,r={};i.mergeParams(r,n.options.styles.profile),i.mergeParams(r,{dataProvider:t}),n._profile=AmCharts.makeChart(e,r),n._profile.addListener("changed",function(t){var e=t.chart.dataProvider[t.index];h.__removeProfilMarker(n),h.__updateProfilMarker(e,n)})},h.DISPLAY_PROFILE_LIB_D3=function(t,e,o){if("undefined"==typeof d3)return void console.log("Lib. D3 is not loaded !");if(e)for(;e.firstChild;)e.removeChild(e.firstChild);var i={top:20,right:20,bottom:30,left:40},n=getComputedStyle(e,null).getPropertyValue("height").replace("px",""),r=getComputedStyle(e,null).getPropertyValue("width").replace("px",""),s=r-i.left-i.right,a=n-i.top-i.bottom,l=d3.scale.linear().range([0,s]),p=d3.scale.linear().range([a,0]),c=d3.svg.axis().scale(l).orient("bottom").ticks(5),u=d3.svg.axis().scale(p).orient("left").ticks(5),d=d3.svg.line().interpolate("basis").x(function(t){return l(t.dist)}).y(function(t){return p(t.z)}),f=d3.svg.area().interpolate("basis").x(function(t){return l(t.dist)}).y0(a).y1(function(t){return p(t.z)}),y=d3.select(e).append("svg").attr("width",s+i.left+i.right).attr("height",a+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")"),g=d3.extent(t,function(t){return t.dist});l.domain(g);var m=[0,d3.max(t,function(t){return t.z})];p.domain(m),y.append("path").datum(t).attr("class","area-d3").attr("d",f),y.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+a+")").call(c).append("text").attr("y",-15).attr("dy",".71em").attr("x",s).text("Distance (km)"),y.append("g").attr("class","y axis-d3").call(u).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),y.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+a+")").call(c.orient("bottom").tickSize(-a,0,0).tickFormat("")),y.append("g").attr("class","grid-d3 horizontal").call(u.orient("left").tickSize(-s,0,0).tickFormat("")),y.append("path").datum(t).attr("class","line-d3").attr("d",d),y.selectAll("circle").data(t).enter().append("circle").attr("cx",function(t){return l(t.dist)}).attr("cy",function(t){return p(t.z)}).attr("r",0).attr("class","circle-d3");var v=y.append("g").style("display","none");v.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),v.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),v.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var _=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),b=d3.bisector(function(t){return t.dist}).left,E=o;y.append("rect").attr("class","overlay-d3").attr("width",s).attr("height",a).on("mouseover",function(){v.style("display",null),h.__updateProfilMarker(t[0],E)}).on("mouseout",function(){v.style("display","none"),h.__removeProfilMarker(E),_.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var e=d3.mouse(this),o=l.invert(e[0]),i=b(t,o),n=0===i?t[0]:t[i-1],r=t[i],s=o-n[0]>r[0]-o?r:n,a=l(s.dist),c=p(s.z);v.select("#focusCircle").attr("cx",a).attr("cy",c),v.select("#focusLineX").attr("x1",a).attr("y1",p(m[0])).attr("x2",a).attr("y2",p(m[1])),v.select("#focusLineY").attr("x1",l(g[0])).attr("y1",c).attr("x2",l(g[1])).attr("y2",c),h.__updateProfilMarker(s,E),_.transition().duration(200).style("opacity",.9),_.html("Alt : "+s.z+" m <br/>Lon : "+s.lon+" <br/>Lat : "+s.lat).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),E._profile=d3.selectAll("rect.overlay")[0][0]},h.DISPLAY_PROFILE_RAW=function(e,o,i){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);var n=i,r=document.createElement("textarea");if(r.id="profileElevationRaw",r.rows=10,r.cols=50,r.style.width="100%",r.wrap="off",r.innerHTML=JSON.stringify(e,void 0,4),o.appendChild(r),n._profile=o,n.options.debug)for(var s=n.getMap().getView().getProjection(),a=0;a<e.length;a++){var l=e[a],p=t.proj.transform([l.lon,l.lat],"EPSG:4326",s),c=new t.geom.Point(p);n._marker=new t.Feature({geometry:c});var u=h.DEFAULT_STYLES.RESULTS,d=new t.style.Circle({radius:u.imageRadius,stroke:new t.style.Stroke({color:u.imageStrokeColor,width:u.imageStrokeWidth}),fill:new t.style.Fill({color:u.imageFillColor})});n._marker.setStyle(new t.style.Style({image:d})),n._measureSource.addFeature(n._marker)}},h.DISPLAY_PROFILE_BY_DEFAULT=function(t,e,o){if(e)for(;e.firstChild;)e.removeChild(e.firstChild);if(t){var i=JSON.parse(JSON.stringify(t));i.sort(function(t,e){return t.z-e.z});var n=i[0].z,r=i[i.length-1].z,s=r-n,a=t[t.length-1].dist,l=100/t.length,p=o,c=document.createElement("div");c.id="profileElevationByDefault",c.addEventListener("mouseover",function(t){var e=parseFloat(t.target.dataset.lon),o=parseFloat(t.target.dataset.lat);e&&o&&h.__updateProfilMarker({lon:e,lat:o},p)}),c.addEventListener("mousemove",function(){}),c.addEventListener("mouseout",function(){h.__removeProfilMarker(p)}),e.appendChild(c);var u=document.createElement("div");u.className="profile-box";var d=document.createElement("div");d.className="profile-z-vertical";var f=document.createElement("ul"),y=document.createElement("li");y.setAttribute("class","profile-min-z"),y.innerHTML=n+" m";var g=document.createElement("li");g.setAttribute("class","profile-max-z"),g.innerHTML=r+" m",f.appendChild(g),f.appendChild(y),d.appendChild(f),u.appendChild(d);var m=document.createElement("div");m.className="profile-content";var v=document.createElement("ul");v.id="profile-data",v.className="profile-z-axis profile-x-axis",m.appendChild(v);for(var _=0;_<t.length;_++){var b=t[_],E=document.createElement("li");E.setAttribute("data-z",b.z),E.setAttribute("data-lon",b.lon),E.setAttribute("data-lat",b.lat),E.setAttribute("data-dist",b.dist);var S=Math.floor(100*(b.z-n)/s);E.setAttribute("class","percent v"+S),E.title="altitude : "+b.z+"m",E.setAttribute("style","width: "+l+"%"),v.appendChild(E)}u.appendChild(m),c.appendChild(u);var P=document.createElement("div");P.className="profile-x-horizontal";var w=document.createElement("ul"),A=document.createElement("li");A.setAttribute("class","profile-min-x"),A.innerHTML="";var C=document.createElement("li");C.setAttribute("class","profile-max-x"),C.innerHTML=a+" km",w.appendChild(A),w.appendChild(C),P.appendChild(w),c.appendChild(P),p._profile=e}},h.DEFAULT_STYLES={MARKER:new t.style.Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAsCAYAAAAATWqyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABTtJREFUeNq8WGtsFUUU/rb3gtdCAykFG9AUDTQUKimhxUewEusrJYoBo4FfEgoqotHERH6oP9TGmJhIrIlWAf9hjAaEiME2pgFfVVpFii8sWqIQLLSx3EJLW7p+Z2Z2b2l7d/b23vZLTmZ2duacb2fmnDk7DlKA67rXs1hJKacsohRQppjXFygnKT9TDlH2O47zFzIFGnco91EOuqnjoBnr2Ow4FhIlLN6m3DykFTh3BGj/Doj/CfSe082xPCDnBmDWTUBeyXDVjZTHOUNHUiZCEs+weI0ySTV0/w0c2wa07gIungn+vOx8YN46oPhpYOp1Xms/5TmSeSMUERKImFnYqBoGuPRNL5LEW8BgX2rrmjWZZLYApS8BUW8r4T0zO5eTEjFr+S6lSjV0HgPqVwNdf6S30abNB+7aDeQWey3bKZtIxvU5DxvyrE/izJfAvuXpkxCIDtElOjWqjK2RM8LZWMbiG0oEnUc5kB7a14WMYvI04H56du5ieZKluZWz8r0/IyQh5TuKRH8cqFuTeRIC0Sm6xYbYok1j21+ahyhLVO3wC8D5VowbRLfY0FhibOulIavDLEoRZyD8sJDeMWBXKG5ZsIobsdDsg+OMq3u1m1u9KQo8zP45EqjRxOUpk6i50IRl4FuGjpZtwUoiMYa314GFj/EzIsN8n8v+C1e4kfvwcm+wnhsZY27xQ8oiWZpKrWRQB6tAElfxpKnjsCdGklDzG9HvpI/0DYLYEpsalVnmAAM6fgR62oMHl70C5N9mn3rpI32DILbEpkZ5ljlFgbPNFtebzij5VPhNKX1lTBASNtXSzPZ3cxCuvVOH7FTCu4yxeZDGbCES0z5+PniQ3uGpwTYmYTOWCPGTpgYP6u9OnYhtzBCbQkSH0NiM4EEdP6VOxDYmYbNLiJxQ1elFwYPaG3XQCn3QHddjgpCweUKI6K2bvzw4YROf//rJob6fZl/H2FRoFiINfqo3qyzYwD8MVIeYLw32J+8j76SP9A2C2BKbGg1CZL+EF/W4YKP9a3/fCeyhkrY9DOOXEu1SlzZ5J31sSNjqURm/OfQkY9qgvkYOvXhbuH0g505Oga7HT9rPF9+t5+pDL0ulwzt46FV5ROax+JUSRRtP0LoHMK64+xNg7iqVEVOKSKRVxRGpsKhRnaRD4SPjR0J0axKCGmP7ilQxm4X8d8xXmfvHJZlPkCR3WfODl9FLMlxCIhevSJ5Nwzo1XdKxYpe3hpmB6BKdmoS43VqPxIgsni+aWOg8biZ3f+nLmSMiuvKWek/P01az7QdLyNVT7lC/l59WAKcb0iMxhzpW1nvmvpDtSiKD1l9OkpnDgv8UyMWFU9wvTP8vdY6NhJwnD1JVtso2OiiLSeL0iJUbNfg6zikVVwRTyOn2HWOfjfLtHgnBhtFIJCViyNDZUatdmnGlaFPqJIoe1WM1aqlz71ivJbLNobgAA9zgu7nZ/vstHAk5WVdzaPRqmGC5lER6kjpV4OWJdq+1kkshSk4VH9izcy/bV66qSPQZV+0J9G7rTY6+XNmqHmYwyJVV24kse1X31dhKHdasygkzy+a64oC4nWr47F4e858nSbLv4V/KAe9JKpVDrx/SImLIXMOiRUKdujESl+49O8xVZxpXzVc/C/I/RxL/hgq8YYkYhev9q6kVO4d9B+sr3vdICNaHJTHWW8Ya/87wqy2uWwstUk/gTYw3aCRGOarMDfS67kfFWqSuIe9imAjQEC272nJHixYNaSvGRIIGN49ywbsZEw1zI11N6TZSHeaGORn+F2AAJtRIMx4t+hUAAAAASUVORK5CYII=",anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2},PROFILE:{type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:10,theme:"light",thousandsSeparator:"",categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance (km)",titleColor:"#5E5E5E",startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:"<span class='altiPathValue'>[[title]] : [[value]]m</span><br/><span class='altiPathCoords'>(lat: [[lat]] / lon:[[lon]])</span>",bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],allLabels:[],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[]}},h.prototype.constructor=h,h.prototype.setMap=function(e){e&&(this.options.active&&(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),this.options.target||s.add(e,this)),t.control.Control.prototype.setMap.call(this,e)},h.prototype.getActive=function(){return this.options.active},h.prototype.setActive=function(t){this.options.active=t},h.prototype.clean=function(){var t=this.getMap();this._panelContainer.style.display="none",this._showContainer.checked=!1,this._removeProfile(),this._removeMeasure(),this._removeMeasureInteraction(t)},h.prototype._removeMeasure=function(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var t=this._measureSource.getFeatures(),e=0;e<t.length;e++)this._measureSource.removeFeature(t[e])}},h.prototype._removeProfile=function(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)},h.prototype._initialize=function(t){this.options={},this.options.target=void 0!==t.target?t.target:null,this.options.render=void 0!==t.render?t.render:null,this.options.apiKey=t.apiKey;var e=t.debug;this.options.debug=void 0!==e&&e;var o=t.active;this.options.active=void 0!==o&&o;var i=t.elevationOptions;this.options.service=void 0===i||0===Object.keys(i).length?{}:i;var n=t.displayProfileOptions||{};void 0===n||0===Object.keys(n).length?this.options.profile={apply:h.DISPLAY_PROFILE_BY_DEFAULT,target:null}:this.options.profile={};var r=n.apply||this.options.profile.apply;this.options.profile.apply="function"==typeof r?r:h.DISPLAY_PROFILE_BY_DEFAULT;var s=n.target||this.options.profile.target;this.options.profile.target=void 0===s?null:s;var a=t.stylesOptions||{};void 0===a||0===Object.keys(a).length?this.options.styles={profile:h.DEFAULT_STYLES.PROFILE}:this.options.styles={},this.options.styles.draw=a.draw||{},this._createStylingDraw(),this.options.styles.marker=a.marker||{},this._createStylingMarker();var l=a.profile||this.options.styles.profile;this.options.styles.profile=void 0===l||0===Object.keys(l).length?h.DEFAULT_STYLES.PROFILE:l,this._createStylingProfile()},h.prototype._initializeContainer=function(){var t=this._createMainContainerElement(),e=this._showContainer=this._createShowElevationPathElement();t.appendChild(e);var o=this._pictoContainer=this._createShowElevationPathPictoElement();t.appendChild(o),this.options.active&&(this._showContainer.checked=!0);var i=this._panelContainer=this._createElevationPathPanelElement(),n=this._createElevationPathPanelHeaderElement();i.appendChild(n);var r=this._profileContainer=this._createElevationPathPanelProfilElement();i.appendChild(r);var s=this._waitingContainer=this._createElevationPathWaitingElement();return i.appendChild(s),null===this.options.profile.target&&t.appendChild(i),t},h.prototype._checkRightsManagement=function(){var t=n.check({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});t||(this._noRightManagement=!0),this.options.apiKey||(this.options.apiKey=t.key)},h.prototype._createStylingMarker=function(){var e=h.DEFAULT_STYLES.MARKER;this.options.styles.marker instanceof t.style.Image&&(e=this.options.styles.marker),this._markerStyle=new t.style.Style({image:e})},h.prototype._createStylingDraw=function(){var e=this.options.styles.draw,o={image:r.DEFAULT_POINTER_STYLE,stroke:r.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof t.style.Image&&(o.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof t.style.Stroke&&(o.stroke=e.start),this._drawStyleStart=new t.style.Style(o);var i={stroke:r.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof t.style.Stroke&&(i.stroke=e.finish),this._drawStyleFinish=new t.style.Style(i)},h.prototype._createStylingProfile=function(){var t=this.options.styles.profile,e=h.DEFAULT_STYLES.PROFILE;Object.keys(e).forEach(function(o){if(!t.hasOwnProperty(o))return void(t[o]=e[o]);var n=e[o];return"object"==typeof n?(i.mergeParams(n,t[o]),void(t[o]=n)):void 0},this)},h.prototype._initMeasureInteraction=function(e){e&&(this._measureSource=new t.source.Vector,this._measureVector=new t.layer.Vector({source:this._measureSource,style:this._drawStyleFinish}),e.addLayer(this._measureVector))},h.prototype._addMeasureInteraction=function(e){if(e){this._measureDraw=new t.interaction.Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw);var o=this;this._measureDraw.on("drawstart",function(t){null!==o._marker&&(o._measureSource.removeFeature(o._marker),o._marker=null),null!==o._lastSketch&&(o._measureSource.removeFeature(o._lastSketch),o._lastSketch=null),o._currentSketch=t.feature;for(var e=o._measureSource.getFeatures(),i=0;i<e.length;i++)o._measureSource.removeFeature(e[i])},this),this._measureDraw.on("drawend",function(t){o._lastSketch=o._currentSketch,void 0===o.options.service.onSuccess&&null===o.options.profile.target&&(o._panelContainer.style.display="block"),o._requestService()},this)}},h.prototype._removeMeasureInteraction=function(t){t&&(this._measureVector&&(t.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(t.removeInteraction(this._measureDraw),this._measureDraw=null))},h.prototype._getGeometry=function(){if(null!==this._currentSketch){for(var e=[],o=this.getMap(),i=o.getView().getProjection(),n=this._currentSketch.getGeometry().getCoordinates(),r=0;r<n.length;r++){var s=n[r],a=s;"EPSG:4326"!==i&&(a=t.proj.transform(s,i,"EPSG:4326")),e.push({lon:a[0],lat:a[1]})}return e}},h.prototype._getLength=function(){if(null!==this._currentSketch){for(var e=0,o=new t.Sphere(6378137),i=this.getMap(),n=i.getView().getProjection(),r=this._currentSketch.getGeometry().getCoordinates(),s=0,a=r.length-1;s<a;++s){var l=t.proj.transform(r[s],n,"EPSG:4326"),p=t.proj.transform(r[s+1],n,"EPSG:4326");e+=o.haversineDistance(l,p)}return e}},h.prototype._requestService=function(){var t=this._getGeometry();if(t&&!this._noRightManagement){var e={};i.mergeParams(e,this.options.service),i.mergeParams(e,{apiKey:this.options.apiKey});var n=this,r=function(t){t&&(n._panelContainer.style.display="block",n._displayProfile(t.elevations),n._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",n._waiting=!1)},s=function(t){n._panelContainer.style.display="none",n._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",n._waiting=!1};i.mergeParams(e,{onSuccess:this.options.service.onSuccess||r,onFailure:this.options.service.onFailure||s});if(!e.sampling){var a=50,l=this._getLength(),p=Math.floor(l)/5;a=p>=200?200:Math.floor(p),i.mergeParams(e,{sampling:a||50})}i.mergeParams(e,{positions:t}),this._waitingContainer.className="GPelevationPathCalcWaitingContainerVisible",o.Services.getAltitude(e)}},h.prototype._computeElevationMeasure=function(e){var o=new t.Sphere(6378137);e[0].dist=0;for(var i=0,n=1;n<e.length;n++)i+=o.haversineDistance([e[n].lon,e[n].lat],[e[n-1].lon,e[n-1].lat])/1e3,e[n].dist=i,e[n].lat=Math.round(1e4*e[n].lat)/1e4,e[n].lon=Math.round(1e4*e[n].lon)/1e4;var r=100;i>100?r=1:i>10&&(r=10);for(var s=0;s<e.length;s++){var a=e[s];a.z<0&&(a.z=0),a.dist=Math.round(a.dist*r)/r}return e},h.prototype._displayProfile=function(t){var e=this._computeElevationMeasure(t),o=this.options.profile.target;o&&o.appendChild(this._panelContainer),o=this._profileContainer;var i=this;this.options.profile.apply.call(this,e,o,i)},h.prototype.onShowElevationPathClick=function(){var t=this.getMap();a.unset(t,{current:"ElevationPath"}),this._showContainer.checked?(this._panelContainer.style.display="none",this._removeMeasure(),this._removeProfile(),this._removeMeasureInteraction(t)):(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t))},h}(t,0,o,a,P,z,q,R,Y,g),X=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmeasureLength"),t.className="GPwidget",t},_createShowMeasureLengthElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMeasureLength"),t.type="checkbox",t},_createShowMeasureLengthPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMeasureLength"),e.title="Mesurer une distance",e.addEventListener?e.addEventListener("click",function(e){t.onShowMeasureLengthClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowMeasureLengthClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureLengthOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e}}}(),Z=function(t,e,o,i,n,r,s){function a(e){if(e=e||{},!(this instanceof a))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureLength",this._uid=s.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var o=e.element?e.element:this._initializeContainer();t.control.Control.call(this,{element:o,target:e.target,render:e.render})}return t.inherits(a,t.control.Control),a.prototype=Object.create(t.control.Control.prototype,{}),o.assign(a.prototype,n),o.assign(a.prototype,r),a.prototype.constructor=a,a.prototype.setMap=function(e){var o=this.CLASSNAME;e?this.options.target||i.add(e,this):this.clean(),this.tools[o].instance=e?this:null,t.control.Control.prototype.setMap.call(this,e)},a.prototype._initialize=function(t){this.options={},this.options.geodesic=void 0===t.geodesic||t.geodesic,this.options.target=void 0!==t.target?t.target:null,this.options.render=void 0!==t.render?t.render:null,this.createStylingMeasureInteraction(t.styles)},a.prototype._initializeContainer=function(){var t=this._createMainContainerElement(),e=this._showContainer=this._createShowMeasureLengthElement();t.appendChild(e),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureLengthPictoElement();return t.appendChild(o),t},a.prototype.addMeasureEvents=function(){var t=this.getMap();t.on("singleclick",this.onPointerMoveHandler,this),t.on("pointermove",this.onPointerMoveHandler,this)},a.prototype.removeMeasureEvents=function(){var t=this.getMap();t.un("singleclick",this.onPointerMoveHandler,this),t.un("pointermove",this.onPointerMoveHandler,this)},a.prototype.format=function(e){var o,i=this.getMap();if(this.options.geodesic){var n=new t.Sphere(6378137),r=e.getCoordinates();o=0;for(var s=i.getView().getProjection(),a=0,l=r.length-1;a<l;++a){var p=t.proj.transform(r[a],s,"EPSG:4326"),h=t.proj.transform(r[a+1],s,"EPSG:4326");o+=n.haversineDistance(p,h)}}else o=Math.round(100*e.getLength())/100;return o>1e3?Math.round(o/1e3*100)/100+" km":Math.round(100*o)/100+" m"},a.prototype.onShowMeasureLengthClick=function(t){this.onShowMeasureClick(t,"LineString")},a}(t,0,a,q,z,X,g),J=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmeasureArea"),t.className="GPwidget",t},_createShowMeasureAreaElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMeasureArea"),t.type="checkbox",t},_createShowMeasureAreaPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMeasureArea"),e.title="Mesurer une surface",e.addEventListener?e.addEventListener("click",function(e){t.onShowMeasureAreaClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowMeasureAreaClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureAreaOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e}}}(),Q=function(t,e,o,i,n,r,s){function a(e){if(e=e||{},!(this instanceof a))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureArea",this._uid=s.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var o=e.element?e.element:this._initializeContainer();t.control.Control.call(this,{element:o,target:e.target,render:e.render})}return t.inherits(a,t.control.Control),a.prototype=Object.create(t.control.Control.prototype,{}),o.assign(a.prototype,n),o.assign(a.prototype,r),a.prototype.constructor=a,a.prototype.setMap=function(e){var o=this.CLASSNAME;e?this.options.target||i.add(e,this):this.clean(),this.tools[o].instance=e?this:null,t.control.Control.prototype.setMap.call(this,e)},a.prototype._initialize=function(t){this.options={},this.options.geodesic=void 0===t.geodesic||t.geodesic,this.options.target=void 0!==t.target?t.target:null,this.options.render=void 0!==t.render?t.render:null,this.createStylingMeasureInteraction(t.styles)},a.prototype._initializeContainer=function(){var t=this._createMainContainerElement(),e=this._showContainer=this._createShowMeasureAreaElement();t.appendChild(e),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureAreaPictoElement();return t.appendChild(o),t},a.prototype.addMeasureEvents=function(){var t=this.getMap();t.on("singleclick",this.onPointerMoveHandler,this),t.on("pointermove",this.onPointerMoveHandler,this)},a.prototype.removeMeasureEvents=function(){var t=this.getMap();t.un("singleclick",this.onPointerMoveHandler,this),t.un("pointermove",this.onPointerMoveHandler,this)},a.prototype.format=function(e){var o,i=this.getMap();if(this.options.geodesic){var n=new t.Sphere(6378137),r=i.getView().getProjection(),s=e.clone().transform(r,"EPSG:4326"),a=s.getLinearRing(0).getCoordinates();o=Math.abs(n.geodesicArea(a))}else o=e.getArea();return o>1e6?Math.round(o/1e6*100)/100+" km<sup>2</sup>":o>1e5?Math.round(o/1e6*1e3)/1e3+" km<sup>2</sup>":o>1e3?10*Math.round(o/10)+" m<sup>2</sup>":Math.round(100*o)/100+" m<sup>2</sup>"},a.prototype.onShowMeasureAreaClick=function(t){this.onShowMeasureClick(t,"Polygon")},a}(t,0,a,q,z,J,g),$=function(){return{_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmeasureAzimuth"),t.className="GPwidget",t},_createShowMeasureAzimuthElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMeasureAzimuth"),t.type="checkbox",t},_createShowMeasureAzimuthPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMeasureAzimuth"),e.title="Mesurer un azimut",e.addEventListener?e.addEventListener("click",function(e){t.onShowMeasureAzimuthClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowMeasureAzimuthClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureAzimuthOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e}}}(),tt=function(t,e,o,i,n,r,s){function a(e){if(e=e||{},!(this instanceof a))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureAzimuth",this._uid=s.generate(),this._showContainer=null,this._pictoContainer=null,
this._initialize(e);var o=e.element?e.element:this._initializeContainer();t.control.Control.call(this,{element:o,target:e.target,render:e.render})}return t.inherits(a,t.control.Control),a.prototype=Object.create(t.control.Control.prototype,{}),o.assign(a.prototype,n),o.assign(a.prototype,r),a.prototype.constructor=a,a.prototype.setMap=function(e){var o=this.CLASSNAME;e?this.options.target||i.add(e,this):this.clean(),this.tools[o].instance=e?this:null,t.control.Control.prototype.setMap.call(this,e)},a.prototype.setGeodesic=function(t){this.options.geodesic=void 0!==t&&t},a.prototype.isGeodesic=function(){return this.options.geodesic},a.prototype._initialize=function(t){this.options={},this.options.geodesic=void 0!==t.geodesic&&t.geodesic,this.options.target=void 0!==t.target?t.target:null,this.options.render=void 0!==t.render?t.render:null,this.createStylingMeasureInteraction(t.styles)},a.prototype._initializeContainer=function(){var t=this._createMainContainerElement(),e=this._showContainer=this._createShowMeasureAzimuthElement();t.appendChild(e),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return t.appendChild(o),t},a.prototype.addMeasureEvents=function(){var t=this.getMap();t.on("singleclick",this.onPointerMoveAzimutHandler,this),t.on("pointermove",this.onPointerMoveAzimutHandler,this)},a.prototype.removeMeasureEvents=function(){var t=this.getMap();t.un("singleclick",this.onPointerMoveAzimutHandler,this),t.un("pointermove",this.onPointerMoveAzimutHandler,this)},a.prototype.format=function(e){var o=this.getMap(),i=o.getView().getProjection(),n=t.proj.transform(e.getFirstCoordinate(),i,"EPSG:4326"),r=t.proj.transform(e.getLastCoordinate(),i,"EPSG:4326");if(!this.options.geodesic){var s=new t.Sphere(6378137),a=s.haversineDistance(n,r);if(a>500){var l=500/a;r=t.proj.transform(e.getCoordinateAt(l),i,"EPSG:4326")}}var p=Math.PI/180,h=180/Math.PI,c=p*n[0],u=p*r[0],d=p*n[1],f=p*r[1],y=Math.sin(u-c)*Math.cos(f),g=Math.cos(d)*Math.sin(f)-Math.sin(d)*Math.cos(f)*Math.cos(u-c),m=Math.atan2(y,g),v=h*m;return v<0&&(v+=360),Math.round(100*v)/100+" °"},a.prototype.onShowMeasureAzimuthClick=function(t){this.onShowMeasureClick(t,"LineString")},a.prototype.onPointerMoveAzimutHandler=function(t){if(this.onPointerMoveHandler(t),this.sketch){this.sketch.getGeometry().getCoordinates().length>2&&this.measureDraw.finishDrawing()}},a}(t,0,a,q,z,$,g),function(t,e,o,i,n,r,s,a,l,p,h,c,u,d,f,y,g,m,v,_,b,E,S,P,w,A,C,M,x){return e.ol3extVersion="1.0.0",e.ol3extDate="2017-12-11",e.olUtils=s,e.LayerUtils=o,e.ProxyUtils=n,t.gp={},t.gp.GfiUtils=r,t.format.KMLExtended=a,t.source.WMTSExtended=l,p.overload(),t.source.GeoportalWMTS=h,t.source.GeoportalWMS=c,t.layer.GeoportalWMTS=u,t.layer.GeoportalWMS=d,t.control.GeoportalAttribution=P,t.control.LayerSwitcher=f,t.control.GetFeatureInfo=y,t.control.SearchEngine=g,t.control.Route=_,t.control.Isocurve=b,t.control.GeoportalMousePosition=m,t.control.Drawing=v,t.control.ReverseGeocode=E,t.control.LayerImport=S,t.control.MeasureLength=C,t.control.MeasureArea=M,t.control.MeasureAzimuth=x,t.control.DefaultMarkers=w,t.control.ElevationPath=A,e}(t,o,i,0,r,s,a,l,p,h,u,d,f,y,_,E,C,I,L,k,j,U,V,W,S,K,Z,Q,tt),window.proj4=proj4,Gp}),IMap=function(t){function e(t){if(!(this instanceof e))throw new TypeError("IMap constructor cannot be called as a function.");this._opts=t,this._layers=[],this._layersRemoved=[],this._controls=[],this._events={},this._opts.mapOptions&&(this.apiKey=this._opts.mapOptions.apiKey),this.div=this._opts.div,this.mapOptions=Object.create(e.DEFAULTOPTIONS);for(var o in this._opts.mapOptions)this._opts.mapOptions.hasOwnProperty(o)&&(this.mapOptions[o]=this._opts.mapOptions[o]);this._initMap()}return e.DEFAULTOPTIONS={projection:"EPSG:3857",center:{x:0,y:0,projection:"EPSG:4326",geolocate:!1,location:null,locationType:["StreetAddress","PositionOfInterest"]},azimuth:0,enableRotation:!0,tilt:0,zoom:10,minZoom:0,maxZoom:21,reloadConfig:!1,controlsOptions:{draggable:!0,keyboard:!0,selectable:!0},mapEventsOptions:{},noProxyDomains:["wxs.ign.fr"]},e.DEFAULT_AUTOPAN_OPTIONS={autoPan:!0,duration:250,margin:5},e.DEFAULT_MEAS_STYLES={pointer:{strokeColor:"#002A50",strokeWidth:2,radius:5,fillColor:"rgba(255, 155, 0, 0.7)"},start:{strokeColor:"#002A50",strokeWidth:2,strokeLineDash:"[10, 10]",fillColor:"rgba(0, 183, 152, 0.2)"},finish:{strokeColor:"#002A50",strokeWidth:3,fillColor:"rgba(0, 183, 152, 0.3)"}},e.DEFAULT_VECTORLAYERS_STYLES={markerSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==",markerXAnchor:25.5,markerYAnchor:38,strokeColor:"#002A50",strokeWidth:4,strokeOpacity:.8,polyFillColor:"#00B798",polyFillOpacity:.5,textStrokeColor:"#000000",textColor:"#FFFFFF"},e.WMTSDEFAULTS={"EPSG:3857":{resolutions:[156543.033928041,78271.51696402048,39135.758482010235,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.7481131407048,152.8740565703525,76.43702828517624,38.21851414258813,19.10925707129406,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.2985821417389697,.1492910708694849,.0746455354347424],scales:{0:559082264,1:279541132,2:139770566,3:69885283,4:34942642,5:17471321,6:8735660,7:4367830,8:2183915,9:1091958,10:545979,11:272989,12:136495,13:68247,14:34124,15:17062,16:8531,17:4265,18:2133,19:1066,20:533,21:267},threshold:1e-7,topLeftCorner:{x:-20037508,y:20037508}},"EPSG:4326":{resolutions:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953126,858306884765628e-19,429153442382813e-19,214576721191407e-19,107288360595703e-19,536441802978517e-20,268220901489259e-20,13411045074463e-19,6.70552253723145e-7,3.3527612686157e-7],threshold:1e-10,topLeftCorner:{x:90,y:-180}},"EPSG:2154":{resolutions:[104579.22454989408,52277.53235379051,26135.487078595408,13066.891381800004,6533.228604113456,3266.5595244626675,1633.2660045974187,816.6295549860224,408.31391467683596,204.15674151090204,102.07831678324082,51.0391448966112,25.519569074269395,12.759783693647506,6.379891635966491,3.18994576530532,1.5949728694977277,.7974864315474559,.398743214900604,.19937160727567999,.099685803696052,.049842901818919996],threshold:1e-8,topLeftCorner:{x:0,y:12e6}}},e._hexToRgba=function(t,e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(o,function(t,e,o,i){return e+e+o+o+i+i});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null,i?"rgba("+i.r+", "+i.g+", "+i.b+", "+e+")":null},e.CustomEvent=function(t,e){if("function"==typeof CustomEvent)return e.bubbles=!1,e.cancelable=!0,new CustomEvent(t,e);var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,!1,!0,e.detail),o},e.prototype={constructor:e,_getDefaultControls:function(){return{draggable:!0,keyboard:!0,selectable:!1,zoom:{},attributions:{maximised:!1}}},_afterInitMap:function(){var t=this.mapOptions.mapEventsOptions;if(t)for(var e in t)this.listen(e,t[e],this);this.listen("layerChanged",this._onLayerChanged,this),this.setXYCenter(this.mapOptions.center);var o=!1;if(this.apiKey||this._opts.mapOptions.configUrl||this._opts.mapOptions.autoconfUrl?o=this._opts.reloadConfig||!Gp.Config||!Gp.Config.isConfLoaded(Array.isArray(this.apiKey)?this.apiKey[0]:this.apiKey):Gp.Config&&(this.apiKey=Object.keys(Gp.Config.generalOptions.apiKeys)),o){var i=this._opts.mapOptions.callbackSuffix;(this._opts.mapOptions.configUrl||this._opts.mapOptions.autoconfUrl)&&(i=i||"");var n=this;Gp.Services.getConfig({apiKey:this.apiKey,serverUrl:this._opts.mapOptions.configUrl||this._opts.mapOptions.autoconfUrl,callbackSuffix:i,onSuccess:function(t){n._afterGetConfig(t)},onFailure:function(t){console.log(t),n._afterGetConfig(null)}})}else this._afterGetConfig(Gp.Config)},_afterGetConfig:function(t){var o=e.CustomEvent("configured",{detail:{config:t}});if(this.div.dispatchEvent(o),t&&!this.mapOptions.hasOwnProperty("layersOptions")&&(this.mapOptions.layersOptions={"ORTHOIMAGERY.ORTHOPHOTOS":{}}),t&&(!this.mapOptions.center.hasOwnProperty("x")||0==this.mapOptions.center.x)&&(!this.mapOptions.center.hasOwnProperty("y")||0==this.mapOptions.center.y)){var i,n=t.getTerritories();for(var r in n)n[r].isDefault&&(i=n[r].geoCenter);this.mapOptions.center.x=i.lon,this.mapOptions.center.y=i.lat,this.mapOptions.center.projection="EPSG:4326"}this.setCenter(this.mapOptions.center),this.mapOptions.hasOwnProperty("markersOptions")&&this._addMarkers(this.mapOptions.markersOptions),this.addLayers(this.mapOptions.layersOptions),this.addControls(this._getDefaultControls()),this.addControls(this.mapOptions.controlsOptions);var s=e.CustomEvent("mapLoaded",{detail:{map:this}});this.div.dispatchEvent(s)},_initMap:function(){},_getZoomFromResolution:function(t,o){for(var i=this.getProjection(),n=e.WMTSDEFAULTS[o]||e.WMTSDEFAULTS[i]||e.WMTSDEFAULTS["EPSG:3857"],r=0,s=Math.abs(n.resolutions[0]-t),a=1;a<n.resolutions.length;a++){var l=Math.abs(n.resolutions[a]-t);if(l>=s)break;r=a,s=l}return r},_getResolutionFromZoomLevel:function(t,o){var i=this.getProjection(),n=e.WMTSDEFAULTS[o]||e.WMTSDEFAULTS[i]||e.WMTSDEFAULTS["EPSG:3857"],r=-1;return t>=0&&t<n.resolutions.length?r=n.resolutions[t]:console.log("unhandled zoom level : "+t),r},_getWMTSDefaultOpts:function(){for(var t={version:"1.0.0",outputFormat:"image/jpeg"},o=[],i=0;i<=20;i++)o.push(""+i);t.matrixIds=o;var n=null,r=null,s=this.getProjection();return"string"!=typeof s||["EPSG:3857"].indexOf(s.toUpperCase())>=0?(n=e.WMTSDEFAULTS["EPSG:3857"].resolutions,r=e.WMTSDEFAULTS["EPSG:3857"].topLeftCorner):["EPSG:4326","CRS:84"].indexOf(s.toUpperCase())>=0?(n=e.WMTSDEFAULTS["EPSG:4326"].resolution7s,r=e.WMTSDEFAULTS["EPSG:4326"].topLeftCorner):["EPSG:2154"].indexOf(s.toUpperCase())>=0&&(n=e.WMTSDEFAULTS["EPSG:2154"].resolution7s,r=e.WMTSDEFAULTS["EPSG:2154"].topLeftCorner),n&&(t.resolutions=n,t.topLeftCorner=r),t},centerGeocode:function(t){if(!Gp.Config||!this.apiKey)return void console.log("no rights for geocoding services");var o=Gp.Config.getLayersId(this.apiKey),i=t.locationType||["StreetAddress","PositionOfInterest"],n={};for(n.type=[];i.length>0;){var r=i.pop();o.indexOf(r+"$OGC:OPENLS;Geocode")>=0&&n.type.push(r)}if(0==n.type.length)return void console.log("no rights for geocoding services");var s=this;Gp.Services.geocode({apiKey:this.apiKey,location:t.location,filterOptions:n,onSuccess:function(t){var o={x:t.locations[0].position.y,y:t.locations[0].position.x,projection:"EPSG:4326"};s.setAutoCenter(o);var i=e.CustomEvent("located",{detail:{position:o}});s.div.dispatchEvent(i)},onFailure:function(t){console.log("Erreur du service de géocodage !!!")}})},centerGeolocate:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){var i={x:o.coords.longitude,y:o.coords.latitude,projection:"EPSG:4326"};t.setAutoCenter(i,17);var n=e.CustomEvent("geolocated",{detail:{position:i}});t.div.dispatchEvent(n)},function(t){var e="Erreur lors de la géolocalisation : ";switch(t.code){case t.TIMEOUT:e+="Timeout !";break;case t.PERMISSION_DENIED:e+="Vous n’avez pas donné la permission";break;case t.POSITION_UNAVAILABLE:e+="La position n’a pu être déterminée";break;case t.UNKNOWN_ERROR:e+="Erreur inconnue"}console.log(e)}):console.log("Geolocate impossible")},setProxy:function(t){return Gp.ProxyUtils.proxifyUrl(t,this.mapOptions)},getProjection:function(){return""},getCenter:function(){return{}},getViewExtent:function(){return{}},getTilt:function(){return 0},getAzimuth:function(){return 0},getZoom:function(){return 0},getResolution:function(){return 0},getLib:function(){return this.mapOptions.library},_getLayersObj:function(t){var e=[];return this._layers.forEach(function(o,i,n){t.indexOf(o.id)<0||e.push(o)},this),e},getLayersOptions:function(t){(!t||Array.isArray(t)&&0==t.length)&&(t=[],this._layers.forEach(function(e){t.push(e.id)},this));var e={};return this._layers.sort(function(t,e){return t.options.position-e.options.position}),Array.isArray(t)||(t=[t]),this._layers.forEach(function(o){t.indexOf(o.id)<0||(e[o.id]=o.options)},this),e},getControlsOptions:function(t){(!t||Array.isArray(t)&&0==t.length)&&(t=[],this._controls.forEach(function(e){t.push(e.id)},this));var e={};return Array.isArray(t)||(t=[t]),this._controls.forEach(function(o){t.indexOf(o.id)<0||(e[o.id]=o.options)},this),e},getLibMapControl:function(t){return null},getLibMap:function(){return{}},setProjection:function(t){},setCenter:function(t){t&&(t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&this.setXYCenter(t),t.geolocate&&this.centerGeolocate(),t.location&&t.location.trim().length>0&&this.centerGeocode(t))},setXYCenter:function(t){},setAutoCenter:function(t){},setTilt:function(t){},setAzimuth:function(t){},setZoom:function(t){},setResolution:function(t){},zoomIn:function(){},zoomOut:function(){},switchToLib:function(t){var e={};e.projection=this.getProjection(),e.center=this.getCenter(),e.azimuth=this.getAzimuth(),e.tilt=this.getTilt(),e.zoom=this.getZoom(),e.layersOptions=this.getLayersOptions(),e.controlsOptions=this.getControlsOptions(),e.mapDiv=this.div.id,e.apiKey=this.apiKey,e.enginePath3d=this.mapOptions.enginePath3d||null;for(var o in e.controlsOptions)this.removeControls(o);if("vg"===t){e.center=[e.center.x,e.center.y];var i=ol.proj.transform(e.center,e.projection,"EPSG:4326");e.center={x:i[0],y:i[1]},this.libMap.setTarget(null)}else{if("ol3"!==t)return void console.log("Unknown Library");e.center=[e.center.lon,e.center.lat];var n=ol.proj.transform(e.center,"EPSG:4326","EPSG:3857");e.center={x:n[0],y:n[1]},this.libMap.dispose()}return Gp.Map.load(e.mapDiv,{apiKey:e.apiKey,enginePath3d:e.enginePath3d||null,projection:e.projection,center:e.center,azimuth:e.azimuth,tilt:e.tilt,zoom:e.zoom,library:t,layersOptions:e.layersOptions,controlsOptions:e.controlsOptions})},switchToLibITOL3:function(t){var e={};e.projection=this.getProjection(),e.center=this.getCenter(),e.tilt=this.getTilt(),e.azimuth=this.getAzimuth(),e.zoom=this.getZoom(),e.layersOptions=this.getLayersOptions(),e.controlsOptions=this.getControlsOptions(),e.mapDiv=this.div.id,e.apiKey=this.apiKey,e.enginePath3d=this.mapOptions.enginePath3d||null;for(var o in e.controlsOptions)this.removeControls(o);if("itowns"===t){e.center=[e.center.x,e.center.y];var i=ol.proj.transform(e.center,e.projection,"EPSG:4326");e.center={x:i[0],y:i[1]},e.azimuth=this.getAzimuth()+90,this.libMap.setTarget(null)}else{if("ol3"!==t)return void console.log("Unknown Library");e.center=[e.center.lon,e.center.lat];var n=ol.proj.transform(e.center,"EPSG:4326","EPSG:3857");e.center={x:n[0],y:n[1]};for(var r in this._events){for(var s=0,a=Object.keys(this._events)[s],l=0;l<this._events[r].length;l++)this.forget(a,this._events[r][l].action);s++}for(;this.div.firstChild;)this.div.removeChild(this.div.firstChild)}return Gp.Map.load(e.mapDiv,{apiKey:e.apiKey,enginePath3d:e.enginePath3d||null,projection:e.projection,center:e.center,azimuth:e.azimuth,tilt:e.tilt,zoom:e.zoom,library:t,layersOptions:e.layersOptions,controlsOptions:e.controlsOptions})},_addMarkers:function(t){},addLayers:function(t){if(t){this.listen("layerChanged",this._onLayerChanged,this);var e=null;for(e in t){if(this._getLayersObj([e]).length>0)return void console.log("Layer ["+e+"] already added to map.");var o=t[e],i={};if(i[e]=o,!o.hasOwnProperty("url")&&Gp.Config){var n=null;o&&o.format&&(n=o.format);var r=null;switch(null!=n&&"WMTS"!=n.toUpperCase()||(r=Gp.Config.getLayerConf(e+"$GEOPORTAIL:OGC:WMTS"))&&(n="WMTS"),null!=n&&"WMS"!=n.toUpperCase()||(r=Gp.Config.getLayerConf(e+"$GEOPORTAIL:OGC:WMS"),r?n="WMS":(r=Gp.Config.getLayerConf(e+"$INSPIRE:OGC:WMS"))&&(n="WMS")),r&&(i[e].format=n,i[e].originators=i[e].originators||r.originators,i[e]=this._layerOptions2layerConf(r,i[e])),n){case"WMTS":case"WMS":this._addGeoportalLayer(i,r);continue}}if(o.hasOwnProperty("format")&&"string"==typeof o.format)if(o.hasOwnProperty("url")&&"string"==typeof o.url)if(this._checkLayerParams(o))switch(o.format.toUpperCase()){case"georss":break;case"KML":case"GPX":case"GEOJSON":case"WFS":case"DRAWING":this._addVectorLayer(i);break;case"WMS":case"WMTS":case"OSM":case"VIRTUALGEO":this._addRasterLayer(i);break;default:console.log("Impossible to add layer ["+e+"] : unhandled format ["+o.format+"]")}else console.log("Impossible to add layer ["+e+"] : unsufficient or inadapted parameters given");else console.log("Impossible to add layer ["+e+"] : no url given");else console.log("Impossible to add layer ["+e+"] : no format given")}this._resetLayerChangedEvent()}},_checkLayerParams:function(t){var e=[];switch(t.format.toUpperCase()){case"WMS":t.hasOwnProperty("layers")&&t.layers instanceof Array||e.push("layers");break;case"WMTS":t.hasOwnProperty("layer")&&"string"==typeof t.layer||e.push("layer"),t.hasOwnProperty("tileMatrixSet")&&"string"==typeof t.tileMatrixSet||e.push("tileMatrixSet"),t.hasOwnProperty("styleName")&&"string"==typeof t.styleName||e.push("styleName");break;case"WFS":t.hasOwnProperty("typeNames")&&"string"==typeof t.typeNames||e.push("typeNames")}return!(e.length>0)||(console.log("Impossible to add "+t.format+" layer : missing mandatory parameter(s) : "+e.toString()),!1)},_addRasterLayer:function(t){},_addVectorLayer:function(t){},_addGeoportalLayer:function(t){},removeLayers:function(t){return!t||Array.isArray(t)&&0==t.length?(console.log("removeLayers : nothing to remove !"),!1):(Array.isArray(t)||(t=[t]),!0)},_applyCommonLayerParams:function(t){return{}},modifyLayers:function(t){if(!t)return console.log("modifyLayers : nothing to modify !"),!1;var e=Object.keys(t);return!(!e||!Array.isArray(e))||(console.log("modifyLayers : wrong format for layersOptions !"),!1)},_findRegisteredControl:function(t){if(!t||"string"!=typeof t)return-1;for(var e=0;e<this._controls.length;e++)if(this._controls[e].id.toLowerCase()==t.toLowerCase())return e;return-1},addControls:function(t){var e=null;for(e in t){var o=null,i=t[e],n=this.getLibMapControl(e);if(!(this._findRegisteredControl(e)>=0||n)||(this.removeControls([e]),null!==i&&void 0!==i)){switch(e.toLowerCase()){case"draggable":o=this.setDraggable(i);break;case"keyboard":o=this.setKeyboard(i);break;case"selectable":o=this.setSelectable(i);break;case"zoom":o=this.addZoomControl(i);break;case"zoombox":o=this._addZoomBoxControl(i);break;case"overview":o=this.addOverviewControl(i);break;case"orientation":o=this.addOrientationControl(i);break;case"graphicscale":o=this.addGraphicScaleControl(i);break;case"mouseposition":o=this.addMousePositionControl(i);break;case"route":o=this.addRouteControl(i);break;case"isocurve":o=this.addIsocurveControl(i);break;case"graticule":o=this.addGraticuleControl(i);break;case"layerswitcher":o=this.addLayerSwitcherControl(i);break;case"layerimport":o=this.addLayerImportControl(i);break;case"length":o=this.addLengthControl(i);break;case"area":o=this.addAreaControl(i);break;case"azimuth":o=this.addAzimuthControl(i);break;case"elevationpath":o=this.addElevationPathControl(i);break;case"search":o=this.addSearchControl(i);break;case"reversesearch":o=this.addReverseSearchControl(i);break;case"drawing":o=this.addDrawingControl(i);break;case"attributions":o=this.addAttributionsControl(i);break;case"camera":o=this.addCameraControl(i);break;case"getfeatureinfo":o=this.addGetFeatureInfoControl(i);break;default:console.log("Controle "+e+"inconnu.")}o&&this._controls.push({obj:o,id:e.toLowerCase(),options:i})}}},setDraggable:function(t){},setKeyboard:function(t){},setSelectable:function(t){},addZoomControl:function(t){},addZoomBoxControl:function(t){},addOverviewControl:function(t){},addOrientationControl:function(t){},addGraphicScaleControl:function(t){},addMousePositionControl:function(t){},addRouteControl:function(t){},addIsocurveControl:function(t){},addGraticuleControl:function(t){},addLayerSwitcherControl:function(t){},addLayerImportControl:function(t){},addLengthControl:function(t){},addAreaControl:function(t){},addAzimuthControl:function(t){},addElevationPathControl:function(t){},addSearchControl:function(t){},addReverseSearchControl:function(t){},addDrawingControl:function(t){},addAttributionsControl:function(t){},addCameraControl:function(t){},addGetFeatureInfoControl:function(t){},removeControls:function(t){},modifyControls:function(t){var e=Object.keys(t);if(!e||0==e.length)return void console.log("No control to modify.");for(var o=null,i=0;i<e.length;i++){o=e[i];var n=this.getLibMapControl(o),r=this._findRegisteredControl(o);if(r>=0){if(!n){this.removeControls([o]),delete t[o];continue}var s=this._controls[r].options;for(var a in t[o])s[a]=t[o][a];t[o]=s}else if(!n){delete t[o];continue}}this.addControls(t)},_getLayerIndexByLayerOpts:function(t){if(!t)return-1;for(var e=0;e<this._layers.length;e++){var o=this._layers[e];if(t.hasOwnProperty(o.id))return e}return-1},_getLayerIndexByLayerId:function(t){for(var e=0;e<this._layers.length;e++){if(t===this._layers[e].id)return e}return-1},_addLayerConfToLayerSwitcher:function(t,e){},_onLayerChanged:function(t){var e=null,o=-1;if(t.hasOwnProperty("layerAdded"))e=t.layerAdded,(o=this._getLayerIndexByLayerOpts(e))>=0&&o<this._layers.length&&(this._layers[o].id,this._layers[o].options.position=t.position);else if(t.hasOwnProperty("layerRemoved")){if(e=t.layerRemoved,(o=this._getLayerIndexByLayerOpts(e))>=0&&o<this._layers.length){var i={};i.id=this._layers[o].id,i.options=this._layers[o].options,i.obj=this._layers[o].obj,this._layersRemoved.push(i),this._layers.splice(o,1)}}else if(t.hasOwnProperty("layerChanged")){e=t.layerChanged;var n=this._getLayerIndexByLayerOpts(e);n>=0&&n<this._layers.length&&(this._layers[n].id,this._layers[n].options[t.property]=t.newValue)}},_filterEmptyMetadata:function(t){if(!t||!Array.isArray(t))return t;for(var e=[],o=0;o<t.length;o++)t[o].url&&t[o].url.trim().length>0&&e.push(t[o]);return e},_layerOptions2layerConf:function(t,e){var o=e||{};return o.title=o.title||t.title,o.description=o.description||t.description,o.quicklookUrl=o.quicklookUrl||t.quicklookUrl,o.legends=o.legends||t.legends,o.metadata=o.metadata||t.metadata,o.metadata=this._filterEmptyMetadata(o.metadata),o},getLSLayerContainerDivId:function(t){return null},_registerEvent:function(t,e,o,i){return t&&(this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push({action:o,key:t,context:i})),this._events[e][this._events[e].length-1]},listen:function(t,e,o){if("function"!=typeof e)return console.log("no action provided for event : "+t),!1;o=o||this;var i=this;switch(t){case"mapFailure":break;case"mapLoaded":case"geolocated":case"located":case"configured":var n=function(t){e.call(o,t.detail)},r=i._registerEvent(n,t,e,o);r.eventOrigin=this.div,r.eventType=t,r.eventOrigin.addEventListener(r.eventType,n,this);break;case"centerChanged":case"zoomChanged":case"azimuthChanged":case"tiltChanged":case"layerChanged":break;case"projectionChanged":case"controlChanged":break;default:return console.log("unhandled event : "+t),!1}return!0},forget:function(t,e){if("function"!=typeof e)return console.log("no action provided for event : "+t),!1;switch(t){case"mapLoaded":case"geolocated":case"located":case"configured":case"mapFailure":case"centerChanged":case"zoomChanged":case"azimuthChanged":case"tiltChanged":case"projectionChanged":case"layerChanged":case"controlChanged":case"pickFeature":var o=this._events[t];if(!o)return console.log("nothing to forget for  : "+t),!1;for(var i=null,n=o.length-1;n>=0;n--)if(o[n].action==e){if(!o[n].eventOrigin)continue;i=o[n].key;var r=o[n].eventOrigin,s=o[n].eventType;if(!i)return console.log("action to forget not found for  : "+t),!1;o.splice(n,1),r.removeEventListener(s,i)}if(!o)return console.log("action to forget not found for  : "+t),!1;break;default:return console.log("unhandled event : "+t),!1}return!0},_resetLayerChangedEvent:function(){if(this._events.hasOwnProperty("layerChanged")){var t=[],e=[];this._events.layerChanged.forEach(function(o){t.indexOf(o.action)<0&&(t.push(o.action),e.push(o.context))},this);for(var o=0;o<t.length;++o)this.forget("layerChanged",t[o]),this.listen("layerChanged",t[o],e[o])}},_changeLayerColor:function(t,e){}},e}(),ol3OL3=function(t,e,o,i){function n(t){if(!(this instanceof n))throw new TypeError("OL3 constructor cannot be called as a function.");this.CLASSNAME="OL3",i.apply(this,arguments)}return n.LAYERPROPERTIES={visible:"visibility",opacity:"opacity",zIndex:"position",grayScaled:"grayScaled",minResolution:"maxZoom",maxResolution:"minZoom"},n.CONTROLPROPERTIES={maximised:"collapsed"},n.CONTROLSCLASSES={draggable:[e.interaction.Pointer,e.interaction.MouseWheelZoom,e.interaction.DoubleClickZoom],keyboard:[e.interaction.KeyboardPan,e.interaction.KeyboardZoom],scrollwheel:null,selectable:[e.interaction.Select],zoom:e.control.Zoom,zoombox:null,overview:e.control.OverviewMap,orientation:e.control.Rotate,graphicscale:e.control.ScaleLine,getfeatureinfo:e.control.GetFeatureInfo,mouseposition:e.control.GeoportalMousePosition,route:e.control.Route,layerswitcher:e.control.LayerSwitcher,layerimport:e.control.LayerImport,isocurve:e.control.Isocurve,length:e.control.MeasureLength,area:e.control.MeasureArea,azimuth:e.control.MeasureAzimuth,elevationpath:e.control.ElevationPath,graticule:e.Graticule,search:e.control.SearchEngine,reversesearch:e.control.ReverseGeocode,drawing:e.control.Drawing,attributions:e.control.GeoportalAttribution,camera:null},n.prototype=Object.create(i.prototype,{}),n.prototype.constructor=n,n.prototype._initMap=function(){var t=new e.View({enableRotation:this.mapOptions.enableRotation,zoom:this.mapOptions.zoom,minZoom:this.mapOptions.minZoom,maxZoom:this.mapOptions.maxZoom,projection:this.mapOptions.projection,rotation:this.mapOptions.azimuth*Math.PI/180});this.libMap=new e.Map({target:this.div,view:t}),this._afterInitMap()},n.prototype._toggleInteractions=function(t,e){var o=this.getLibMapControl(t);if(null==o){o=[];for(var i=0;i<n.CONTROLSCLASSES[t].length;i++){var r=new n.CONTROLSCLASSES[t][i];this.libMap.addInteraction(r),o.push(r)}}for(var s=0;s<o.length;s++){o[s].setActive(e)}return o},n.prototype.setDraggable=function(t){return this._toggleInteractions("draggable",t)},n.prototype.setKeyboard=function(t){return this._toggleInteractions("keyboard",t)},n.prototype.setSelectable=function(t){return this._toggleInteractions("selectable",t)},n.prototype.addZoomControl=function(t){var o=new e.control.Zoom({target:t.div});return this.libMap.addControl(o),o},n.prototype.addZoomBoxControl=function(t){return null},n.prototype.addOverviewControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.layers&&Array.isArray(t.layers)){var i=this._getLayersObj(t.layers),n=[];if(i.forEach(function(t){n.push(t.obj)},this),0==n.length&&t.layers.length>0)for(var r=0;r<t.layers.length;r++){var s=new e.layer.GeoportalWMTS({layer:t.layers[r]});s&&n.push(s)}n.length>0&&(o.layers=n)}var a={},l=!1;t.hasOwnProperty("minZoom")&&(a.minZoom=t.minZoom,l=!0),t.hasOwnProperty("maxZoom")&&(a.maxZoom=t.maxZoom,l=!0),t.hasOwnProperty("projection")&&(a.projection=t.projection,l=!0),l&&(o.view=new e.View(a));var p=new e.control.OverviewMap(o);return this.libMap.addControl(p),p},n.prototype.addOrientationControl=function(t){var o=new e.control.Rotate({target:t.div,autoHide:t.autoHide||!1});return this.libMap.addControl(o),o},n.prototype.addGraphicScaleControl=function(t){var o=t.units;o&&"deg"==t.units.toLowerCase()?o="degrees":o&&"m"==t.units.toLowerCase()&&(o="metric");var i=new e.control.ScaleLine({target:t.div,units:o,minWidth:t.minWidth});return this.libMap.addControl(i),i},n.prototype.addGraticuleControl=function(t){var o=t||{};o.strokeColor=o.strokeColor||"#000000",o.strokeOpacity=o.strokeOpacity||.2,o.strokeWidth=o.strokeWidth||1;var n=i._hexToRgba(o.strokeColor,o.strokeOpacity),r=new e.Graticule({strokeStyle:new e.style.Stroke({color:n,width:o.strokeWidth})});return r.setMap(this.libMap),this.libMap.graticule=r,r},n.prototype.addMousePositionControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.systems&&Array.isArray(t.systems)&&t.systems.length>0)for(var i=0;i<t.systems.length;i++)e.proj.get(t.systems[i].crs)&&(o.systems||(o.systems=[]),o.systems.push(t.systems[i]));if(t.units&&Array.isArray(t.units)&&t.units.length>0){o.units=[];for(var n=0;n<t.units.length;n++)"string"==typeof t.units[n]&&o.units.push(t.units[n])}o.displayAltitude=t.displayAltitude,o.displayCoordinates=t.displayCoordinates,t.altitude&&(o.altitude=t.altitude),o.editCoordinates=t.editCoordinates,o.positionMarker=t.positionMarker;var r=new e.control.GeoportalMousePosition(o);return this.libMap.addControl(r),r},n.prototype.addRouteControl=function(t){var o={};t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.graphs&&(o.graphs=t.graphs),t.exclusions&&(o.exclusions=t.exclusions),t.markersOpts&&(o.markersOpts={},t.markersOpts.departure&&(o.markersOpts.departure=t.markersOpts.departure),t.markersOpts.stages&&(o.markersOpts.stages=t.markersOpts.stages),t.markersOpts.arrival&&(o.markersOpts.arrival=t.markersOpts.arrival)),t.routeOptions&&(o.routeOptions=t.routeOptions),t.autocompleteOptions&&(o.autocompleteOptions=t.autocompleteOptions);var i=new e.control.Route(o);return this.libMap.addControl(i),i},n.prototype.addIsocurveControl=function(t){var o={};t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.graphs&&(o.graphs=t.graphs),t.exclusions&&(o.exclusions=t.exclusions),t.methods&&(o.methods=t.methods),t.directions&&(o.directions=t.directions),t.markerOpts&&(o.markerOpts=t.markerOpts),t.isocurveOptions&&(o.isocurveOptions=t.isocurveOptions),t.autocompleteOptions&&(o.autocompleteOptions=t.autocompleteOptions);var i=new e.control.Isocurve(o);return this.libMap.addControl(i),i},n.prototype.addLayerImportControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.layerTypes&&(o.layerTypes=t.layerTypes),o.webServicesOptions={},t.webServicesOptions?o.webServicesOptions=t.webServicesOptions:(this.mapOptions&&this.mapOptions.proxyUrl&&(o.webServicesOptions.proxyUrl=this.mapOptions.proxyUrl),this.mapOptions&&this.mapOptions.noProxyDomains&&(o.webServicesOptions.noProxyDomains=this.mapOptions.noProxyDomains)),t.defaultStyles){o.vectorStyleOptions={}
;var n,r,s,a,l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==";if(t.defaultStyles.KML){var p=t.defaultStyles.KML,h={};h.image=new e.style.Icon({src:p.markerSrc||l,anchor:[p.markerXAnchor||25.5,p.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),n=p.strokeOpacity||.8,r=p.strokeColor||"#002A50",h.stroke=new e.style.Stroke({color:i._hexToRgba(r,n),width:p.strokeWidth||4}),s=p.polyFillOpacity||.5,a=p.polyFillColor||"#00B798",h.fill=new e.style.Fill({color:i._hexToRgba(a,s)});var c=new e.style.Style(h);o.vectorStyleOptions.KML={defaultStyle:c}}if(t.defaultStyles.GPX){var u=t.defaultStyles.GPX,d={};d.image=new e.style.Icon({src:u.markerSrc||l,anchor:[u.markerXAnchor||25.5,u.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),n=u.strokeOpacity||.8,r=u.strokeColor||"#002A50",d.stroke=new e.style.Stroke({color:i._hexToRgba(r,n),width:u.strokeWidth||4});var f=new e.style.Style(d);o.vectorStyleOptions.GPX={defaultStyle:f}}if(t.defaultStyles.GeoJSON){var y=t.defaultStyles.GeoJSON,g={};g.image=new e.style.Icon({src:y.markerSrc||l,anchor:[y.markerXAnchor||25.5,y.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),n=y.strokeOpacity||.8,r=y.strokeColor||"#002A50",g.stroke=new e.style.Stroke({color:i._hexToRgba(r,n),width:y.strokeWidth||4}),s=y.polyFillOpacity||.5,a=y.polyFillColor||"#00B798",g.fill=new e.style.Fill({color:i._hexToRgba(r,n)});var m=new e.style.Style(g);o.vectorStyleOptions.GeoJSON={defaultStyle:m}}}var v=new e.control.LayerImport(o);return this.libMap.addControl(v),v},n.prototype._addLayerConfToLayerSwitcher=function(t,e){var o=this.getLibMapControl("layerswitcher");o&&o.addLayer(t,this._layerOptions2layerConf(e))},n.prototype.addLayerSwitcherControl=function(t){var o={layers:[],options:{collapsed:!(t&&t.maximised)}};t.div&&(o.options.target=t.div);for(var i=0;i<this._layers.length;i++){var n=this._layers[i],r={layer:n.obj,config:{}};n.options.title&&(r.config.title=n.options.title),n.options.description&&(r.config.description=n.options.description),n.options.quicklookUrl&&(r.config.quicklookUrl=n.options.quicklookUrl),n.options.legends&&(r.config.legends=n.options.legends),n.options.metadata&&(r.config.metadata=this._filterEmptyMetadata(n.options.metadata)),o.layers.push(r)}var s=new e.control.LayerSwitcher(o);return this.libMap.addControl(s),s},n.prototype._fillStrokeStyles=function(t){var o={},i=null;return t.hasOwnProperty("strokeLineDash")&&(o.lineDash=t.strokeLineDash),t.hasOwnProperty("strokeColor")&&(o.color=t.strokeColor),t.hasOwnProperty("strokeWidth")&&(o.width=t.strokeWidth),Object.keys(o).length>0&&(i=new e.style.Stroke(o)),i},n.prototype._fillPointerStyles=function(t){var o={};return t.hasOwnProperty("radius")&&(o.radius=t.radius),o.stroke=this._fillStrokeStyles(t),t.hasOwnProperty("fillColor")&&(o.fill=new e.style.Fill({color:t.fillColor})),new e.style.Circle(o)},n.prototype.addLengthControl=function(t){var o={};if(t.div&&(o.target=t.div),t.hasOwnProperty("styles")){if(o.styles={},t.styles.hasOwnProperty("pointer")&&(o.styles.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")){var i={};i.stroke=this._fillStrokeStyles(t.styles.start),t.styles.start.hasOwnProperty("fillColor")&&(i.fill=new e.style.Fill({color:t.styles.start.fillColor})),o.styles.start=new e.style.Style(i)}if(t.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(t.styles.finish),t.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new e.style.Fill({color:t.styles.finish.fillColor})),o.styles.finish=new e.style.Style(n)}}t.hasOwnProperty("geodesic")&&(o.geodesic=t.geodesic);var r=new e.control.MeasureLength(o);return this.libMap.addControl(r),r},n.prototype.addAreaControl=function(t){var o={};if(t.div&&(o.target=t.div),t.hasOwnProperty("styles")){if(o.styles={},t.styles.hasOwnProperty("pointer")&&(o.styles.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")){var i={};i.stroke=this._fillStrokeStyles(t.styles.start),t.styles.start.hasOwnProperty("fillColor")&&(i.fill=new e.style.Fill({color:t.styles.start.fillColor})),o.styles.start=new e.style.Style(i)}if(t.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(t.styles.finish),t.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new e.style.Fill({color:t.styles.finish.fillColor})),o.styles.finish=new e.style.Style(n)}}t.hasOwnProperty("geodesic")&&(o.geodesic=t.geodesic);var r=new e.control.MeasureArea(o);return this.libMap.addControl(r),r},n.prototype.addAzimuthControl=function(t){var o={};if(t.div&&(o.target=t.div),t.hasOwnProperty("styles")){if(o.styles={},t.styles.hasOwnProperty("pointer")&&(o.styles.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")){var i={};i.stroke=this._fillStrokeStyles(t.styles.start),t.styles.start.hasOwnProperty("fillColor")&&(i.fill=new e.style.Fill({color:t.styles.start.fillColor})),o.styles.start=new e.style.Style(i)}if(t.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(t.styles.finish),t.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new e.style.Fill({color:t.styles.finish.fillColor})),o.styles.finish=new e.style.Style(n)}}t.hasOwnProperty("geodesic")&&(o.geodesic=t.geodesic);var r=new e.control.MeasureAzimuth(o);return this.libMap.addControl(r),r},n.prototype.addElevationPathControl=function(t){var o={};if(t.div&&(o.target=t.div),t.styles&&(o.stylesOptions={},t.styles.hasOwnProperty("pointer")&&(o.stylesOptions.draw={},o.stylesOptions.draw.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")&&(o.stylesOptions.draw||(o.stylesOptions.draw={}),o.stylesOptions.draw.start=this._fillStrokeStyles(t.styles.start)),t.styles.hasOwnProperty("finish")&&(o.stylesOptions.draw||(o.stylesOptions.draw={}),o.stylesOptions.draw.finish=this._fillStrokeStyles(t.styles.finish)),t.styles.hasOwnProperty("marker"))){var i={};t.styles.marker.src&&(i.src=t.styles.marker.src,i.anchor=[t.styles.marker.xAnchor?t.styles.marker.xAnchor:0,t.styles.marker.yAnchor?t.styles.marker.yAnchor:0]),Object.keys(i).length>0&&(o.stylesOptions.marker=new e.style.Icon(i))}t.elevationPathOptions&&(o.elevationPathOptions=t.elevationPathOptions),t.displayProfileOptions&&(o.displayProfileOptions=t.displayProfileOptions);var n=new e.control.ElevationPath(o);return this.libMap.addControl(n),n},n.prototype.addSearchControl=function(t){var o={};o.div&&(o.target=t.div),o.collapsed=!t.maximised,o.zoomTo=t.zoomTo||null,t.hasOwnProperty("resources")&&(o.resources={},t.resources.hasOwnProperty("geocode")&&(o.resources.geocode=t.resources.geocode),t.resources.hasOwnProperty("autocomplete")&&(o.resources.autocomplete=t.resources.autocomplete)),o.displayAdvancedSearch=!(!t.hasOwnProperty("displayAdvancedSearch")||!0!==t.displayAdvancedSearch),t.hasOwnProperty("advancedSearch")&&(o.advancedSearch=t.advancedSearch),t.hasOwnProperty("geocodeOptions")&&(o.geocodeOptions=t.geocodeOptions),t.hasOwnProperty("autocompleteOptions")&&(o.autocompleteOptions=t.autocompleteOptions);var i=new e.control.SearchEngine(o);return this.libMap.addControl(i),i},n.prototype.addReverseSearchControl=function(t){var o={};o.div&&(o.target=t.div),o.collapsed=!t.maximised,t.hasOwnProperty("resources")&&(o.resources=t.resources),t.hasOwnProperty("reverseGeocodeOptions")&&(o.reverseGeocodeOptions=t.reverseGeocodeOptions),t.hasOwnProperty("delimitations")&&(o.delimitations=t.delimitations);var i=new e.control.ReverseGeocode(o);return this.libMap.addControl(i),i},n.prototype.addDrawingControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.hasOwnProperty("tools")&&(o.tools=t.tools),t.hasOwnProperty("labels")&&(o.labels=t.labels),t.hasOwnProperty("defaultStyles")&&(o.defaultStyles=t.defaultStyles),t.hasOwnProperty("cursorStyle")&&(o.cursorStyle=t.cursorStyle),t.hasOwnProperty("markersList")&&Array.isArray(t.markersList)&&t.markersList.length>0){o.markersList=[];for(var i=0;i<t.markersList.length;i++){var n=t.markersList[i];if(n.src){var r={src:n.src};n.xAnchor&&n.yAnchor&&(r.anchor=[n.xAnchor,n.yAnchor]),o.markersList.push(r)}}}if(t.layer){var s=this._getLayersObj([t.layer]);s&&s.length>0&&(o.layer=s[0])}var a=new e.control.Drawing(o);return this.libMap.addControl(a),a},n.prototype.addAttributionsControl=function(t){var o={};t.div&&(o.target=t.div),o.collapsed=!t.maximised;var i=new e.control.GeoportalAttribution(o);return this.libMap.addControl(i),i},n.prototype.addCameraControl=function(t){return null},n.prototype.addGetFeatureInfoControl=function(t){var o={};o.options={},t.hasOwnProperty("options")&&(t.options.hasOwnProperty("auto")&&(o.options.auto=t.options.auto),t.options.hasOwnProperty("active")&&(o.options.active=t.options.active),t.options.hasOwnProperty("hidden")&&(o.options.hidden=t.options.hidden),t.options.hasOwnProperty("defaultEvent")&&(o.options.defaultEvent=t.options.defaultEvent),t.options.hasOwnProperty("defaultInfoFormat")&&(o.options.defaultInfoFormat=t.options.defaultInfoFormat),t.options.hasOwnProperty("cursorStyle")&&(o.options.cursorStyle=t.options.cursorStyle),t.options.hasOwnProperty("autoPanOptions")||(t.options.autoPanOptions=i.DEFAULT_AUTOPAN_OPTIONS),o.options.autoPan=t.options.autoPanOptions.autoPan,o.options.autoPanAnimation={duration:t.options.autoPanOptions.duration},o.options.autoPanMargin=t.options.autoPanOptions.margin),this.mapOptions&&this.mapOptions.proxyUrl&&(o.options.proxyUrl=this.mapOptions.proxyUrl),this.mapOptions&&this.mapOptions.noProxyDomains&&(o.options.noProxyDomains=this.mapOptions.noProxyDomains),o.layers=[];for(var n in t.layers)for(var r=t.layers[n],s=0;s<this._layers.length;++s){var a=this._layers[s];if(n===a.id){if(a.options.queryable){var l={obj:a.obj};r.event&&(l.event=r.event),a.options.gfiFormat&&(l.infoFormat=a.options.gfiFormat),o.layers.push(l);break}console.log("GetFeatureInfo layer '"+n+"' has not been added to control because this layer is not queryable.")}}var p=new e.control.GetFeatureInfo(o);return this.libMap.addControl(p),p},n.prototype.removeControls=function(t){if(!t||Array.isArray(t)&&0==t.length)return void console.log("No control to remove.");Array.isArray(t)||(t=[t]);for(var e=null,o=0;o<t.length;o++){e=t[o];var i=this._findRegisteredControl(e);i>=0&&this._controls.splice(i,1);var n=this.getLibMapControl(e);if(n)if("graticule"!=e.toLowerCase()){if(Array.isArray(n))return;this.libMap.removeControl(n)}else n.setMap(null),delete this.getLibMap().graticule;else console.log("Impossible to remove control ["+e+"] : not found or unhandled")}},n.prototype.getLibMapControl=function(t){var e=null;if(!n.CONTROLSCLASSES.hasOwnProperty(t.toLowerCase())||!n.CONTROLSCLASSES[t.toLowerCase()])return e;var o=n.CONTROLSCLASSES[t.toLowerCase()];if(Array.isArray(o)){var i=[];return this.getLibMap().getInteractions().forEach(function(t){for(var e=0;e<o.length;e++)if(t instanceof o[e]){i.push(t);break}},this),i.length>0?i:null}if("graticule"==t.toLowerCase())return this.getLibMap().hasOwnProperty("graticule")?this.getLibMap().graticule:null;var r=this.getLibMap().getControls().getArray();if(0==r.length)return e;for(var s=0;s<r.length;s++){var a=r[s];if(a instanceof o){e=a;break}}return e},n.prototype._addMarkers=function(t){if(!Array.isArray(t))return void console.log("Can not process markersOptions. It is not an Array.");var o=null,n=this,r=0,s=function(t){var o=n.getLibMap().getEventPixel(t);e.gp.GfiUtils.displayInfo(n.getLibMap(),n.getLibMap().getCoordinateFromPixel([o[0]+this.mo.ppoffset[0],o[1]+this.mo.ppoffset[1]]),this.mo.content,this.mo.contentType,this.mo.autoPanOptions)};for(r=0;r<t.length;r++){o=t[r],o.hasOwnProperty("content")||(o.content=""),o.hasOwnProperty("url")||(o.url=e.control.DefaultMarkers.lightOrange),o.hasOwnProperty("offset")||(o.offset=e.control.DefaultMarkers.defaultOffset),o.hasOwnProperty("ppoffset")||(o.ppoffset=[0,-15]);var a=!1;o.hasOwnProperty("position")||(o.position={x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]},a=!0),o.hasOwnProperty("contentType")||(o.contentType="text/html"),o.hasOwnProperty("autoPanOptions")||(o.autoPanOptions={autoPan:i.DEFAULT_AUTOPAN_OPTIONS.autoPan,autoPanAnimation:{duration:i.DEFAULT_AUTOPAN_OPTIONS.duration},autoPanMargin:i.DEFAULT_AUTOPAN_OPTIONS.margin});var l=[o.position.x,o.position.y];o.position.hasOwnProperty("projection")&&(l=e.proj.transform(l,o.position.projection,this.getProjection()));var p=document.createElement("img");p.src=o.url,p.mo=o;var h=new e.Overlay({position:l,offset:o.offset,element:p});if(this.libMap.addOverlay(h),!0===a){var c=this,u=function(t){var o=[t.position.x,t.position.y];t.position.hasOwnProperty("projection")&&(o=e.proj.transform(o,t.position.projection,c.getProjection())),this.setPosition(o)};this.listen("located",u,h),this.listen("geolocated",u,h)}p.addEventListener("click",s,!0),p.addEventListener("touchend",s,!0)}},n.prototype._getCommonLayerParams=function(t){var e={};if(t.hasOwnProperty("opacity")&&(e.opacity=t.opacity),t.hasOwnProperty("visible")&&(e.visibility=t.visible),t.hasOwnProperty("zIndex")&&(e.position=t.zIndex),t.hasOwnProperty("maxResolution")){var o=this._getZoomFromResolution(t.maxResolution);e.minZoom=o}if(t.hasOwnProperty("minResolution")){var i=this._getZoomFromResolution(t.minResolution);e.maxZoom=i}return e},n.prototype._applyCommonLayerParams=function(t){var e={};if(t.hasOwnProperty("opacity")&&(e.opacity=t.opacity),t.hasOwnProperty("visibility")&&(e.visible=t.visibility),t.hasOwnProperty("position")&&(e.zIndex=t.position),t.hasOwnProperty("maxZoom")&&t.maxZoom>=0&&t.maxZoom<=20){var o=this._getResolutionFromZoomLevel(t.maxZoom);e.minResolution=o}if(t.hasOwnProperty("minZoom")&&t.minZoom>=0&&t.minZoom<=20){var i=this._getResolutionFromZoomLevel(t.minZoom);e.maxResolution=i}return t.hasOwnProperty("grayScaled")&&(e.grayScaled=t.grayScaled),e},n.prototype._checkLayerParams=function(t){return!!i.prototype._checkLayerParams.apply(this,arguments)},n.prototype._addRasterLayer=function(t){var o=Object.keys(t)[0],i=t[o],n=this._applyCommonLayerParams(i);switch(i.format.toUpperCase()){case"WMS":var r={};r.LAYERS=i.layers.join(","),i.version&&(r.VERSION=i.version),i.stylesNames=i.stylesNames||i.stylesName,i.stylesNames&&(Array.isArray(i.stylesNames)?r.STYLES=i.stylesNames.join():console.log("'stylesNames' parameter should be an array of style names (string)")),i.outputFormat&&(r.FORMAT=i.outputFormat),i.backgroundColor?(r.BGCOLOR=i.backgroundColor,r.TRANSPARENT="FALSE"):r.TRANSPARENT="TRUE";var s={url:i.url,params:r};i.hasOwnProperty("projection")&&(s.projection=i.projection),i.hasOwnProperty("tiled")&&!0===i.tiled?n.source=new e.source.TileWMS(s):n.source=new e.source.ImageWMS(s);break;case"WMTS":var a=this._getWMTSDefaultOpts();for(var l in i)a[l]=i[l];i=a;var s={url:i.url,layer:i.layer,matrixSet:i.tileMatrixSet,format:i.outputFormat,version:i.version,style:i.styleName,tileGrid:new e.tilegrid.WMTS({origin:[i.topLeftCorner.x,i.topLeftCorner.y],resolutions:i.resolutions,matrixIds:i.matrixIds})};i.url.indexOf("{TileMatrixSet}")>0||i.url.indexOf("{TileRow}")>0||i.url.indexOf("{TileCol}")>0?s.requestEncoding="REST":s.requestEncoding="KVP",n.source=new e.source.WMTSExtended(s);break;case"OSM":n.source=new e.source.OSM({url:i.url})}if(n.hasOwnProperty("source")){i.hasOwnProperty("originators")&&(n.source._originators=i.originators);var p=null;p="WMS"!=i.format.toUpperCase()||i.hasOwnProperty("tiled")&&!0===i.tiled?new e.layer.Tile(n):new e.layer.Image(n),n.hasOwnProperty("zIndex")&&0===n.zIndex&&(p._forceNullzIndex=!0);var h={id:o,obj:p,options:i};i.hasOwnProperty("grayScaled")&&i.grayScaled&&this._colorGrayscaleLayerSwitch(h,!0),this._layers.push(h),this.libMap.addLayer(h.obj),this._addLayerConfToLayerSwitcher(h.obj,i)}},n.prototype._addVectorLayer=function(t){var o=Object.keys(t)[0],n=t[o],r=this._applyCommonLayerParams(n),s=n.styleOptions||{},a=this.mapOptions.defaultFeaturesStyle||{},l=i.DEFAULT_VECTORLAYERS_STYLES,p={};p.image=new e.style.Icon({src:s.markerSrc||a.markerSrc||l.markerSrc,anchor:[s.markerXAnchor||a.markerXAnchor||l.markerXAnchor,s.markerYAnchor||a.markerYAnchor||l.markerYAnchor],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),p.stroke=new e.style.Stroke({color:i._hexToRgba(s.strokeColor||a.strokeColor||l.strokeColor,s.strokeOpacity||a.strokeOpacity||l.strokeOpacity),width:s.strokeWidth||a.strokeWidth||l.strokeWidth}),p.fill=new e.style.Fill({color:i._hexToRgba(s.polyFillColor||a.polyFillColor||l.polyFillColor,s.polyFillOpacity||a.polyFillOpacity||l.polyFillOpacity)}),p.text=new e.style.Text({font:"16px Sans",textAlign:"left",fill:new e.style.Fill({color:i._hexToRgba(s.textColor||a.textColor||l.textColor,1)})}),s.textStrokeColor&&(p.text.stroke=new e.style.Stroke({color:i._hexToRgba(s.textStrokeColor||a.textStrokeColor||l.textStrokeColor,1),width:1}));var h=new e.style.Style(p);switch(n.format.toUpperCase()){case"KML":var c=this.setProxy(n.url),u=new e.format.KMLExtended({extractStyles:n.extractStyles,showPointNames:n.showPointNames,defaultStyle:[h]});r.source=new e.source.Vector({features:new e.Collection,loader:function(t,e,o){Gp.Protocols.XHR.call({url:c,method:"GET",timeOut:15e3,onResponse:function(t){var e=u.readProjection(t),i=u.readFeatures(t,{dataProjection:e,featureProjection:o});i.length>0&&r.source.addFeatures(i)},onFailure:function(t){console.log("[ol.control.LayerImport] Kml/Gpx request failed : ",t)}})}});break;case"GPX":r.source=new e.source.Vector({url:this.setProxy(n.url),format:new e.format.GPX}),r.style=h;break;case"GEORSS":break;case"GEOJSON":r.source=new e.source.Vector({url:this.setProxy(n.url),format:new e.format.GeoJSON}),r.style=h;break;case"WFS":var d="",f="";n.version||(n.version="2.0.0"),n.outputFormat||(n.outputFormat="application/json"),n.maxFeatures&&(d=parseInt(n.version.charAt(0))<2?"&maxFeatures="+n.maxFeatures:"&count="+n.maxFeatures),n.sld&&(f="&sld="+n.sld);var y=this.setProxy(n.url),g=n.outputFormat.toLowerCase(),m=null,v={};n.projection&&(v.defaultDataProjection=n.projection,v.srsName=n.projection),m=g.indexOf("gml")>0||g.indexOf("xml")>0?g.indexOf("2.1")>0||g.indexOf("gml2")>0?new e.format.GML2(v):new e.format.GML3(v):new e.format.GeoJSON(v),r.source=new e.source.Vector({format:m,url:function(t,e,o){return y+"?service=WFS&request=GetFeature&version="+n.version+"&typename="+n.typeNames+"&outputFormat="+n.outputFormat+"&srsname="+o.getCode()+"&bbox="+t.join(",")+","+o.getCode()+d+f},strategy:e.loadingstrategy.bbox});break;case"drawing":r.source=new e.source.Vector({})}if(r.hasOwnProperty("source")){n.hasOwnProperty("originators")&&(r.source._originators=n.originators);var _=new e.layer.Vector(r);this._layers.push({id:o,obj:_,options:n}),this.libMap.addLayer(_),this._addLayerConfToLayerSwitcher(_,n);var b=this.libMap,E=r.source;if(b.getView()&&b.getSize()&&E.getExtent){if(n.zoomToExtent||!1){var S=E.on("change",function(){var t=E.getExtent();"ready"===E.getState()&&t[0]!==1/0&&(e.Observable.unByKey(S),b.getView().fit(t,{maxZoom:18}))});setTimeout(function(){E.dispatchEvent("change")},100)}}}},n.prototype._addGeoportalLayer=function(t){var o=Object.keys(t)[0],i=t[o],n={};i.hasOwnProperty("opacity")&&(n.opacity=i.opacity),i.hasOwnProperty("visibility")&&(n.visible=i.visibility),i.hasOwnProperty("position")&&(n.zIndex=i.position),i.hasOwnProperty("minZoom")&&i.minZoom>=0&&i.minZoom<=28&&(n.maxResolution=this._getResolutionFromZoomLevel(i.minZoom)),i.hasOwnProperty("maxZoom")&&i.maxZoom>=0&&i.maxZoom<=28&&(n.minResolution=this._getResolutionFromZoomLevel(i.maxZoom));var r=null;switch(i.format.toUpperCase()){case"WMTS":r=e.layer.GeoportalWMTS;break;case"WMS":r=e.layer.GeoportalWMS;break;default:console.log("addGeoportalLayer : no class found for "+i.format)}var s=new r({layer:o,olParams:n});i.hasOwnProperty("originators")&&(s.getSource()._originators=i.originators),n.hasOwnProperty("zIndex")&&0===n.zIndex&&(s._forceNullzIndex=!0),this._layers.push({id:o,obj:s,options:i}),this.libMap.addLayer(s),this._addLayerConfToLayerSwitcher(s,i)},n.prototype.removeLayers=function(t){if(!i.prototype.removeLayers.apply(this,arguments))return!1;this._getLayersObj(t).forEach(function(t,e,o){this.libMap.removeLayer(t.obj)},this)},n.prototype.modifyLayers=function(t){if(!i.prototype.modifyLayers.apply(this,arguments))return!1;var e=Object.keys(t);this._getLayersObj(e).forEach(function(e){var o=this._applyCommonLayerParams(t[e.id]);o.hasOwnProperty("opacity")&&e.obj.setOpacity(o.opacity),o.hasOwnProperty("visible")&&e.obj.setVisible(o.visible),o.hasOwnProperty("zIndex")&&(e.obj.setZIndex(o.zIndex),0===o.zIndex&&(e.obj._forceNullzIndex=!0),0!==o.zIndex&&e.obj._forceNullzIndex&&(e.obj._forceNullzIndex=!1)),o.hasOwnProperty("minResolution")&&e.obj.setMinResolution(o.minResolution),o.hasOwnProperty("maxResolution")&&e.obj.setMaxResolution(o.maxResolution),o.hasOwnProperty("grayScaled")&&this._changeLayerColor(e.id,o.grayScaled)},this)},n.prototype.getProjection=function(){return this.libMap.getView().getProjection().getCode()},n.prototype.getCenter=function(){return{x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]}},n.prototype.getViewExtent=function(t){var o={};if(this.libMap&&this.libMap.getView()){var i=this.libMap.getView().calculateExtent(this.libMap.getSize()),n=this.libMap.getView().getProjection().getCode();t&&t!=n&&(i=e.proj.transformExtent(i,n,t)),o.left=i[0],o.right=i[2],o.bottom=i[1],o.top=i[3]}return o},n.prototype.getAzimuth=function(){return 180*this.libMap.getView().getRotation()/Math.PI},n.prototype.getZoom=function(){return this._getZoomFromResolution(this.getResolution())},n.prototype.getResolution=function(){return this.libMap.getView().getResolution()},n.prototype.getLibMap=function(){return this.libMap},n.prototype.setProjection=function(t){var o=new e.View({center:this.libMap.getView().getCenter(),projection:t,rotation:this.libMap.getView().getRotation(),zoom:this.getZoom()});this.libMap.setView(o)},n.prototype.setXYCenter=function(t){if(!t.hasOwnProperty("x")||!t.hasOwnProperty("y"))return void console.log("no valid coordinates for map center");var o=[t.x,t.y],i=this.libMap.getView().getProjection().getCode();t.projection&&t.projection!=i&&(o=e.proj.transform(o,t.projection,i)),this.libMap.getView().setCenter(o)},n.prototype.setAutoCenter=function(t,e){this.setXYCenter(t,e)},n.prototype.setAzimuth=function(t){this.libMap.getView().setRotation(t*Math.PI/180)},n.prototype.setZoom=function(t){this.libMap.getView().setZoom(t)},n.prototype.setResolution=function(t){this.libMap.getView().setResolution(t)},n.prototype.zoomIn=function(){this.libMap.getView().setZoom(this.getZoom()+1)},n.prototype.zoomOut=function(){this.libMap.getView().setZoom(this.getZoom()-1)},n.prototype._getLayerOpts=function(t,e){var o=null;e=e||this._layers;for(var i=0;i<e.length;i++){var n=e[i];if(n.obj===t){o={},o[n.id]=n.options;break}}return o},n.prototype._registerUnknownLayer=function(t){var e="unknownLayer";t.hasOwnProperty("gpResultLayerId")&&(e=t.gpResultLayerId),e+="-"+Date.now();var o={};if(0===e.indexOf("drawing-"))o.format="drawing";else if(0===e.indexOf("layerimport:KML"))o.format="KML";else if(0===e.indexOf("layerimport:GPX"))o.format="GPX";else if(0===e.indexOf("layerimport:GeoJSON"))o.format="GeoJSON";else if(0===e.indexOf("layerimport:WMS")){if(o.format="WMS",t.gpGFIparams&&(t.gpGFIparams.queryable&&(o.queryable=!0),Array.isArray(t.gpGFIparams.formats))){o.gfiFormat=t.gpGFIparams.formats[0];for(var i=0;i<t.gpGFIparams.formats.length;i++)if("text/html"===t.gpGFIparams.formats[i]){o.gfiFormat="text/html";break}}}else 0===e.indexOf("layerimport:WMTS")&&(o.format="WMTS");this._layers.push({id:e,obj:t,options:o});var n={};return n[e]={},n},n.prototype.getLSLayerContainerDivId=function(t){var e=this._findRegisteredControl("layerswitcher");if(e<0)return null;var o=this._getLayersObj([t]);if(o.length>0){return this._controls[e].obj.getLayerDOMId(o[0].obj)}return null},n.prototype.listen=function(t,e,o){if(!i.prototype.listen.apply(this,arguments))return!1;o=o||this;var r=this,s=null;switch(t){case"mapLoaded":case"mapFailure":case"located":case"geolocated":case"configured":break;case"centerChanged":s=this.libMap.getView().on("change:center",function(t){var i={};t.oldValue&&(i.oldCenter={x:t.oldValue[0],y:t.oldValue[1]}),i.newCenter={x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]},e.call(o,i)},this);break;case"zoomChanged":s=this.libMap.getView().on("change:resolution",function(t){e.call(o,{oldZoom:this._getZoomFromResolution(t.oldValue),newZoom:this._getZoomFromResolution(this.libMap.getView().getResolution())})},this);break;case"azimuthChanged":s=this.libMap.getView().on("change:rotation",function(t){e.call(o,{oldAzimuth:180*t.oldValue/Math.PI,newAzimuth:180*this.libMap.getView().getRotation()/Math.PI})},this);break;case"tiltChanged":case"projectionChanged":break;case"layerChanged":s=this.libMap.getLayers().on("add",function(t){var i=t.element,n=this._getLayerOpts(i);n||(n=this._registerUnknownLayer(i)),e.call(o,{layerAdded:n,position:i.getZIndex()})},this),this._registerEvent(s,t,e,o),s=this.libMap.getLayers().on("remove",function(t){var i=t.element,n=this._getLayerOpts(i)||this._getLayerOpts(i,this._layersRemoved),r=o.getLibMap();r.featuresOverlay&&n[r.featuresOverlay.getId()]&&(r.removeOverlay(r.featuresOverlay),r.featuresOverlay=null),e.call(o,{layerRemoved:n})},this),this._registerEvent(s,t,e,o),s=null;for(var a in n.LAYERPROPERTIES)this.libMap.getLayers().forEach(function(i,l,p){var h=this._getLayerOpts(i);if("grayScaled"===a){var c=function(t){e.call(o,{property:"grayScaled",oldValue:t.detail.oldValue,newValue:t.detail.newValue,layerChanged:h})},u=r._registerEvent(c,t,e,o);u.eventOrigin=i,u.eventType="changed:"+a,u.eventOrigin.addEventListener(u.eventType,c,this)}else s=i.on("change:"+a,function(t){var i={};i[t.key]=t.oldValue;var s=r._getCommonLayerParams(i),a={};a[t.key]=this.get(t.key);var l=r._getCommonLayerParams(a);e.call(o,{property:n.LAYERPROPERTIES[t.key],oldValue:s[n.LAYERPROPERTIES[t.key]],newValue:l[n.LAYERPROPERTIES[t.key]],layerChanged:h})},i),this._registerEvent(s,t,e,o),s=null},r);break;case"controlChanged":break;default:console.log("unhandled event : "+t)}return s&&this._registerEvent(s,t,e,o),!0},n.prototype.forget=function(t,o){if(!i.prototype.forget.apply(this,arguments))return!1;var n=this._events[t];if(!n)return console.log("nothing to forget for : "+t),!1;for(var r=null,s=n.length-1;s>=0;s--)n[s].action==o&&(r=n[s].key,n.splice(s,1),e.Observable.unByKey(r))},n.prototype._changeLayerColor=function(t,e){var o=this._getLayerIndexByLayerId(t),n=this._layers[o];switch(n.options.format.toUpperCase()){case"KML":case"GPX":case"WFS":case"drawing":return void console.log("[OL3.prototype._changeLayerColor] warning : _changeLayerColor not allowed on vector layers (layer id: "+t+")")}this._colorGrayscaleLayerSwitch(n,e);var r=i.CustomEvent("change:grayScaled",{detail:{oldValue:!e,newValue:e}});n.obj.dispatchEvent(r)},n.prototype._colorGrayscaleLayerSwitch=function(t,o){function i(t){t.crossOrigin=null;var e=document.createElement("canvas"),o=e.getContext("2d");e.width=t.width,e.height=t.height,o.drawImage(t,0,0);for(var i=o.getImageData(0,0,t.width,t.height),n=i.data,r=0;r<n.length;r+=4){var s=(n[r]+n[r+1]+n[r+2])/3;n[r]=s,n[r+1]=s,n[r+2]=s}return o.putImageData(i,0,0),e.toDataURL()}function n(t,e){var o=i(t);t.src="",t.onload=function(){e.changed()},t.src=o}function r(t){t.image.getImage().crossOrigin="Anonymous"}function s(t){t.tile.getImage().crossOrigin="Anonymous"}function a(t){n(t.image.getImage(),t.target)}function l(t){n(t.tile.getImage(),t.target)}var p=t.obj.getSource();o?p instanceof e.source.ImageWMS?(p.loadstartListenerKey=p.on("imageloadstart",r),p.loadendListenerKey=p.on("imageloadend",a)):(p.loadstartListenerKey=p.on("tileloadstart",s),p.loadendListenerKey=p.on("tileloadend",l)):(e.Observable.unByKey(p.loadstartListenerKey),e.Observable.unByKey(p.loadendListenerKey),p.loadstartListenerKey=null,p.loadendListenerKey=null),p.refresh()},n.prototype._manageLayerChangedEvent=function(){if(this._events.hasOwnProperty("layerChanged")){var t=[];this._events.layerChanged.forEach(function(e){t.push(e)},this),t.forEach(function(t){this.forget("layerChanged",t.action),this.listen("layerChanged",t.action,t.context)},this),t=null}},n}(0,ol,0,IMap),Map=function(t,e){var o={load:function(t,e){if(!t)throw new Error("missing parameter div !");if("string"==typeof t&&(t=document.getElementById(t)),!t)throw new Error("HTML element with id ["+t+"] not found.");e||(e={}),e.hasOwnProperty("library")||(e.library="ol3");var o=null,i=null,n=null;null!==this.__classOl&&"function"==typeof this.__classOl&&(o=this.__classOl),null!==this.__classVg&&"function"==typeof this.__classVg&&(i=this.__classVg),null!==this.__classItowns&&"function"==typeof this.__classItowns&&(n=this.__classItowns);var r=null;switch(e.library){case"ol3":if(null===o||"function"!=typeof o)throw new Error("library ol is not loaded !");r=new o({div:t,mapOptions:e});break;case"vg":if(null===i||"function"!=typeof i)throw new Error("library vg is not loaded !");r=new i({div:t,mapOptions:e});break;case"itowns":if(null===n||"function"!=typeof n)throw new Error("library itowns is not loaded !");r=new n({div:t,mapOptions:e});break;default:throw new Error("not supported library")}return this._prototype=Object.getPrototypeOf(r),r}};return o}(),AHN=function(t,e){var o="undefined"!=typeof window?window:{},i=o.Gp||{};return i.Map=t,void 0!==ol3OL3&&"undefined"!=typeof virtualVG?(console.log("Lib. ol3 et virtualgeo détectées !"),i.Map.__classOl=ol3OL3,i.Map.__classVg=virtualVG,i.Map._class=i.Map.__classOl.prototype):void 0!==ol3OL3&&"undefined"!=typeof it2IT?(console.log("Lib. ol3 et itowns détectées !"),i.Map.__classOl=ol3OL3,i.Map.__classItowns=it2IT,i.Map._class=i.Map.__classOl.prototype):void 0!==ol3OL3?(console.log("Lib. ol3 détectée !"),i.Map.__classOl=ol3OL3,i.Map._class=i.Map.__classOl.prototype):"undefined"!=typeof virtualVG?(console.log("Lib. virtualgeo détectée !"),i.Map.__classVg=virtualVG,i.Map._class=i.Map.__classVg.prototype):"undefined"!=typeof it2IT?(console.log("Lib. itowns détectée !"),i.Map.__classItowns=it2IT,i.Map._class=i.Map.__classItowns.prototype):console.log("Aucune lib. détectée !?"),i.sdkVersion="1.0.0",
i.sdkDate="2017-12-21",o.Gp=i,o.Gp}(Map),window.ol=ol;
return Gp;
}));
