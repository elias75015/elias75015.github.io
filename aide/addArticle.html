<!DOCTYPE html>
<html lang="fr" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Blog de voyage - BO</title>
    <meta name="description" content="Blog de voyage de Clara et Elias" />
    <link rel="stylesheet" type="text/css" href="./css/aide.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	</head>

  <body>
		<h3> Générateur de code article carnet de voyage </h3>
		<p>Le code généré est à insérer dans un fichier /articles/articleX.html. Il suffit ensuite de modifier
    la page articles.html pour ajouter une ligne du type  &lt;li class="articleEntry" id="article4"&gt;&lt;a href="#"&gt; 16/06 - Brazil &lt;/a&gt;&lt;/li&gt;
    dans le menu</p>
      <fieldset class="fieldsetAide">
        <br/>
        Titre de l'article : <input id="title"></input>
	<br/>
  <br/>
	Langue de l'article : 
	<br/>
	<input id="langueFR" type="radio" name="langue" value="FR" checked="true"> </input>
	<label for="langueFR">Français</label>
	<br/>
	<input id="langueES" type="radio" name="langue" value="ES"> </input>
	<label for="langueES">Espagnol</label>
  <br/>
  <br/>
	Numéro de l'article : <input id="numArticle"></input>
  <br/>
  <br/>
	Région de l'article : 
	<br/>
	<input id="imgPaysParagrapheAmSud" type="radio" name="imagePays" value="AmSud"> </input>
	<label for="imgPaysParagrapheAmSud">Amérique du sud</label>
	<br/>
	<input id="imgPaysParagrapheUS" type="radio" name="imagePays" value="US"> </input>
	<label for="imgPaysParagrapheUS">USA</label>
  <br/>
  <br/>
	<input id="imgPaysParagrapheArgentine" type="radio" name="imagePays" value="Argentine"> </input>
	<label for="imgPaysParagrapheArgentine">Argentine</label>
	<br/>
	<input id="imgPaysParagrapheBresil" type="radio" name="imagePays" value="Bresil"> </input>
	<label for="imgPaysParagrapheBresil">Brésil</label>
	<br/>
	<input id="imgPaysParagrapheParaguay" type="radio" name="imagePays" value="Paraguay"> </input>
	<label for="imgPaysParagrapheParaguay">Paraguay</label>
	<br/>
	<input id="imgPaysParagrapheChili" type="radio" name="imagePays" value="Chili"> </input>
	<label for="imgPaysParagrapheChili">Chili</label>
  <br/>
	<input id="imgPaysParagrapheUruguay" type="radio" name="imagePays" value="Uruguay"> </input>
	<label for="imgPaysParagrapheUruguay">Uruguay</label>
	<br/>
  <br/>
        Date de l'article : <input type="date" id="date"></input>
        <br/>
        <br/>
        Lieu de l'article (ville) : <input id="place"></input>
        <br/>
        <br/>
        Nombre de paragraphes de l'article :
        <select id="selectNbParagraphes" onchange="updateParagraphes(this.value)">
            <option>0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
        </select>
        <div id="paragraphes">
        </div>
        <br>
        <button id="validateInfo"> Afficher le code ci-dessous </input>
    </fieldset>
    <br>
    <br>

    <div id="genResult">
      &lt;p id="date"&gt; Le <span id="dateArticle"></span>, à <span id="lieuArticle">Porto Alegre</span> &lt;/p&gt;
      &lt;br&gt;
      &lt;h2 id="title"&gt; <span id="titreArticle"></span> &lt;/h2&gt;
      <div id="paragrapheResults">
      </div>
    </div>
    <script>
    /* OGENERATION DU FORMULAIRE */

    function updateParagraphes(nbParagraphes) {
      // Form Part -->
      $( "#paragraphes" ).empty();
      $( "#paragraphes" ).append("<br><br>");

      for (var i = 0; i < nbParagraphes; i++) {
        var y = i+1;
        var texteParagraphe = document.createElement( "textArea" );
        texteParagraphe.id = "texteParagraphe" + y;
        texteParagraphe.rows = 15;
        texteParagraphe.cols = 70;
	
	      var hasParaImg = document.createElement( "input" );
	      hasParaImg.id = "hasParaImg" + y;
	      hasParaImg.type = "checkbox";

        var imageTypePortrait = document.createElement( "input" );
        imageTypePortrait.id = "imgTypeParagraphe" + y + "Portrait";
        imageTypePortrait.type = "radio";
        imageTypePortrait.name = "imageType"+y;
        imageTypePortrait.value = "portrait";

        var imageTypePaysage = document.createElement( "input" );
        imageTypePaysage.id = "imgTypeParagraphe" + y + "Paysage";
        imageTypePaysage.type = "radio";
        imageTypePaysage.name = "imageType"+y;
        imageTypePaysage.value = "paysage";

        var imageTypeCarre = document.createElement( "input" );
        imageTypeCarre.id = "imgTypeParagraphe" + y + "Carre";
        imageTypeCarre.type = "radio";
        imageTypeCarre.name = "imageType"+y;
        imageTypeCarre.value = "carre";

        $( "#paragraphes" ).append("<b>Texte paragraphe " + y + ": </b><br>");
        $( "#paragraphes" ).append(texteParagraphe);
        $( "#paragraphes" ).append("<br><b>Cocher si le paragraphe " + y + " a une image </b><br>");
        $( "#paragraphes" ).append(hasParaImg);
        $( "#paragraphes" ).append("<br><b>Format image paragraphe" + y + ": </b><br>");
        $( "#paragraphes" ).append("Portrait (smartphone) : ");
        $( "#paragraphes" ).append(imageTypePortrait);
        $( "#paragraphes" ).append("<br>Paysage (smartphone) : ");
        $( "#paragraphes" ).append(imageTypePaysage);
        $( "#paragraphes" ).append("<br>Appareil Photo : ");
        $( "#paragraphes" ).append(imageTypeCarre);
        $( "#paragraphes" ).append("<br> <br> <br>");
      }
	    
        // Results Generation part -->
        $( "#genResult" ).empty();
        $( "#genResult" ).append("&lt;p id='date'&gt; <br> Le <span id='dateArticle'></span>, à <span id='lieuArticle'></span> <br>&lt;/p&gt;<br>&lt;br&gt;<br>&lt;h2 id='title'&gt;<br> <span id='titreArticle'></span> <br>&lt;/h2&gt;<br>");
        for (var i = 0; i < nbParagraphes; i++) {
          y = i+1;
          $( "#genResult" ).append("&lt;br&gt;<br>&lt;p&gt;<br><span id='p"+y+"Texte'></span><br>&lt;/p&gt;<br>&lt;br&gt;<br><span id='p"+y+"Image'></span><br>");
      }
    }
	  
    
	/* ONCLICK - GENERATION DES INFOS */
    document.getElementById("validateInfo").onclick = function() {
      // On vide préalablement la génération précédente
      $("span").html("");
      $("#langueDiv").html("");
      
      // on insère le lien vers l'article de langue esp ou fr
      //<img src="./../common/img/franceText.png" class="articleTranslate" id="article2">
      var langue = document.querySelector('input[name="langue"]:checked').value;
      var imageLangue = document.createElement("img");
      var sautdeLigne = document.createElement("br");
      var langueDiv = document.createElement("div");
      langueDiv.id = "langueDiv";
      document.getElementById("genResult").prepend(langueDiv);

      imageLangue.id = "article"+document.getElementById("numArticle").value;
      imageLangue.className = "articleTranslate";
      if (langue === "ES") {
        imageLangue.src = "./../common/img/franceText.png";
      } else {
        imageLangue.src = "./../common/img/espText.png";
      }
      document.getElementById("langueDiv").prepend(sautdeLigne);
      document.getElementById("langueDiv").prepend(imageLangue.outerHTML);
      // On remplit les trous pour le titre, la date, et le lieu de l'article
      document.getElementById("titreArticle").append(document.getElementById("title").value);
      document.getElementById("dateArticle").append(document.getElementById("date").value);
      document.getElementById("lieuArticle").append(document.getElementById("place").value);

      // Pour chaque paragraphe, on génère le code associé, en fonction aussi de si une image est asssociée au paragraphe
      var nbParagraphes = document.getElementById("selectNbParagraphes").value;
      for (var i=0; i<nbParagraphes; i++) {
        y = i+1;
        document.getElementById("p"+y+"Texte").append(document.getElementById("texteParagraphe" + y).value);
        if (document.getElementById("hasParaImg" + y).checked) {
	// retrieve image name
          var imageName = "article" + document.getElementById("numArticle").value + "/p" + y + "-min.jpg";
	// retrieve image type
          var radiobuttonsType = "imageType" + y;
          var imageType = document.querySelector('input[name="'+radiobuttonsType+'"]:checked').value;
	// retrieve image region
	  var radiobuttonsRegion = "imagePays";
	  var imageRegion = document.querySelector('input[name="'+radiobuttonsRegion+'"]:checked').value;
          $( "#p"+y+"Image" ).append('<br>&lt;div class="photo"&gt;<br>&lt;img src="./img/diaporama/'+imageRegion+'/'+imageName+'" id="photo'+y+'" class="'+imageType+'"&gt;<br>&lt;/div&gt;<br><br>');
        }
      }
    }
    </script>
  </body>
</html>
