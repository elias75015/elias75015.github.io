<!DOCTYPE html>
<html lang="fr" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Blog de voyage - BO</title>
		<meta name="description" content="Blog de voyage de Clara et Elias" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	</head>

  <body>
		<h3> Générateur de code diaporama</h3>
		<p>Le code généré est à insérer dans un fichier ./diapoX.html. Il suffit ensuite de modifier
    la page menuDiapo.html pour ajouter une ligne du type  &lt;li class="diapoEntry" id="diapo2"&gt;&lt;a href="./diapo2.html"&gt; 20/05 - 30/05 &lt;/a&gt;&lt;/li&gt;
    dans le menu</p>
      <fieldset id="infos">
        <br/>
        Titre du diaporama : <input id="title"></input>
        <br/>
        Date de début du diaporama : <input type="date" id="dateDebut"></input>
        <br/>
        Date de fin du diaporama : <input type="date" id="dateFin"></input>
        <br/><br/>
        <b>Région du diaporama :</b>
        <br/>
        Amérique du sud :
        <input type="radio" id="diapoAmSud" name="diapoRegion" value="AmSud"/>
        </input>
        <br/>
        US :
        <input type="radio" id="diapoUS" name="diapoRegion" value="US"/>
        </input>
        <br/>
        <br/>
        Nombre de Photos de l'article :
        <select id="selectNbPhotos" onchange="updatePhotos(this.value)">
            <option>0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
        <div id="photosChemins">
        </div>
        <br>
        <button id="validateInfo"> Afficher le code ci-dessous </input>
    </fieldset>
    <br>
    <br>

    <div id="genResult">
      &lt;p id="date"&gt; Le <span id="dateArticle"></span>, à <span id="lieuArticle">Porto Alegre</span> &lt;/p&gt;
      &lt;br&gt;
      &lt;h2 id="title"&gt; <span id="titreArticle"></span> &lt;/h2&gt;
      <div id="diapoResults">
      </div>
    </div>
    <script>
    /* OGENERATION DU FORMULAIRE */

    function updatePhotos(nbPhotos) {
      // Form Part -->
      $( "#photosChemins" ).empty();
      for (var i = 0; i < nbPhotos; i++) {
        var y = i+1;

        var imageName = document.createElement( "input" );
        imageName.id = "imageName" + y;

        var imageAlt = document.createElement( "input" );
        imageAlt.id = "imageAlt" + y;

        var imageDescription = document.createElement( "input" );
        imageDescription.id = "imageDescription" + y;

        $( "#photosChemins" ).append("<br><b>Nom image " + y + " (avec extension) : </b><br>");
        $( "#photosChemins" ).append(imageName);
        $( "#photosChemins" ).append("<br><b>Alt image " + y + " : </b><br>");
        $( "#photosChemins" ).append(imageAlt);
        $( "#photosChemins" ).append("<br><b>Description image " + y + " : </b><br>");
        $( "#photosChemins" ).append(imageDescription);
        $( "#photosChemins" ).append("<br> <br> <br>");
      }
        // Results Generation part -->
        $( "#genResult" ).empty();
        $( "#genResult" ).append("&lt;p id='date'&gt; <br> Le <span id='dateArticle'></span>, à <span id='lieuArticle'></span> <br>&lt;/p&gt;<br>&lt;br&gt;<br>&lt;h2 id='title'&gt;<br> <span id='titreArticle'></span> <br>&lt;/h2&gt;<br>");
    }
    /* ONCLICK - GENERATION DES INFOS */
    document.getElementById("validateInfo").onclick = function() {
      // On vide préalablement la génération précédente
      $("span").html("");

      // On remplit les trous pour le titre, la date de début et de fin du diaporama
      document.getElementById("titreDiapo").append(document.getElementById("title").value);
      document.getElementById("dateDebutDiapo").append(document.getElementById("dateDebut").value);
      document.getElementById("dateFinDiapo").append(document.getElementById("dateFin").value);

      var nbPhotos = document.getElementById("selectNbPhotos").value;

      var imageRegion = document.querySelector('input[name="diapoRegion"]:checked').value;
      // On crée la liste des images du diaporama à insérer dans le fichier
      for (var i=0; i<nbPhotos; i++) {
        var imageList = "";
        y = i+1;
        if (document.getElementById("imageName" + y).value) {
          // retrieve image name
          var imageName = document.getElementById("imageName" + y).value;
          // retrieve image alt
          var imageAlt = document.getElementById("imageAlt" + y).value;
          // retrieve image desc
          var imageDesc = document.getElementById("imageDescription" + y).value;

          imageList = imageList + '<li> <img src="./img/diaporama/' +imageRegion+'/'+imageName+'" alt="'+imageAlt+'" data-description="'+imageDesc+'"><li>'
        }
      }
    }
    </script>
  </body>
</html>
